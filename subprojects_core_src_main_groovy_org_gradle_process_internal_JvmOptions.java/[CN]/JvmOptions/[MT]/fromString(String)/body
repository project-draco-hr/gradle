{
  List<String> split=Lists.newArrayList(Splitter.onPattern("\\s(?=([^\"]*\"[^\"]*\")*[^\"]*$)").omitEmptyStrings().split(input));
  List<String> out=new ArrayList<String>();
  for (  String s : split) {
    if (s.startsWith("\"") && s.endsWith("\"")) {
      s=removeStart(s,"\"");
      s=removeEnd(s,"\"");
    }
    if (s.matches("(?s)[^\"]+=\".*\"(?s)")) {
      s=s.replaceFirst("=\"","=");
      s=removeEnd(s,"\"");
    }
    out.add(s);
  }
  return out;
}
