{
  listener.beforeActions(task);
  ClassLoader originalClassLoader=Thread.currentThread().getContextClassLoader();
  Thread.currentThread().setContextClassLoader(task.getClass().getClassLoader());
  state.setExecuting(true);
  try {
    GradleException failure=executeActions(task,state);
    state.executed(failure);
  }
  finally {
    state.setExecuting(false);
    Thread.currentThread().setContextClassLoader(originalClassLoader);
    listener.afterActions(task);
  }
}
