{
  if (ivySettings != null) {
    return ivySettings;
  }
  Clock clock=new Clock();
  DependencyResolver userResolverChain=createUserResolverChain(dependencyResolvers,internalRepository);
  DependencyResolver clientModuleResolver=createClientModuleResolver(clientModuleRegistry,userResolverChain);
  DependencyResolver outerChain=createOuterChain(WrapUtil.toLinkedSet(clientModuleResolver,userResolverChain));
  IvySettings ivySettings=createIvySettings(gradleUserHome);
  initializeResolvers(ivySettings,getAllResolvers(dependencyResolvers,Collections.<DependencyResolver>emptyList(),internalRepository,userResolverChain,clientModuleResolver,outerChain));
  ivySettings.setDefaultResolver(CLIENT_MODULE_CHAIN_NAME);
  logger.debug("Timing: Ivy convert for resolve took {}",clock.getTime());
  return ivySettings;
}
