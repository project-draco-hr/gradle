{
  if (closed) {
    throw new IllegalStateException(String.format("Cannot locate factory for objects of type %s, as %s has been closed.",format(type),this));
  }
  DefaultLookupContext context=new DefaultLookupContext();
  Factory<T> factory=allServices.getFactory(context,type);
  if (factory != null) {
    return factory;
  }
  throw new UnknownServiceException(type,String.format("No factory for objects of type %s available in %s.",format(type),this));
}
