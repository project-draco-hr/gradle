{
  Object id=OperationIdGenerator.generateId(task);
  Object parentId=buildOperationExecutor.getCurrentOperationId();
  TaskOperationInternal taskOperation=new TaskOperationInternal(id,parentId,task);
  TaskStateInternal state=task.getState();
  state.setStartTime(timeProvider.getCurrentTime());
synchronized (eventNotificationLock) {
    internalTaskListeners.getSource().beforeExecute(taskOperation);
    taskListeners.getSource().beforeExecute(task);
  }
  try {
    task.executeWithoutThrowingTaskFailure();
  }
  finally {
synchronized (eventNotificationLock) {
      taskListeners.getSource().afterExecute(task,state);
      state.setEndTime(timeProvider.getCurrentTime());
      internalTaskListeners.getSource().afterExecute(taskOperation);
    }
  }
}
