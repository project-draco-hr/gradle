{
  calcCurrentState();
  if (upToDate) {
    return false;
  }
  FileCollectionSnapshot lastExecutionOutputFiles=lastExecution == null ? snapshotter.snapshot() : lastExecution.outputFilesSnapshot;
  FileCollectionSnapshot newOutputFiles=outputFilesBefore.changesSince(lastExecutionOutputFiles).applyTo(lastExecutionOutputFiles,new ChangeListener<FileCollectionSnapshot.Merge>(){
    public void added(    FileCollectionSnapshot.Merge element){
      element.ignore();
    }
    public void removed(    FileCollectionSnapshot.Merge element){
    }
    public void changed(    FileCollectionSnapshot.Merge element){
    }
  }
);
  FileCollectionSnapshot outputFilesAfter=snapshotter.snapshot(task.getOutputs().getCandidateFiles());
  thisExecution.outputFilesSnapshot=outputFilesAfter.changesSince(outputFilesBefore).applyTo(newOutputFiles);
  history.addConfiguration(thisExecution);
  return true;
}
