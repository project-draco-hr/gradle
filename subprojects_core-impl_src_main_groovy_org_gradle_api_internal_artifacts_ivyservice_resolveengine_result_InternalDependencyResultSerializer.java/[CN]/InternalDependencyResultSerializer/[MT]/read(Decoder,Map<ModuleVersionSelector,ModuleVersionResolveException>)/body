{
  ModuleVersionSelector requested=moduleVersionSelectorSerializer.read(decoder);
  ComponentSelectionReason reason=componentSelectionReasonSerializer.read(decoder);
  byte resultByte=decoder.readByte();
  if (resultByte == SUCCESSFUL) {
    ModuleVersionSelection selected=moduleVersionSelectionSerializer.read(decoder);
    return new DefaultInternalDependencyResult(requested,selected,reason,null);
  }
 else   if (resultByte == FAILED) {
    ModuleVersionResolveException failure=failures.get(requested);
    return new DefaultInternalDependencyResult(requested,null,reason,failure);
  }
 else {
    throw new IllegalArgumentException("Unknown result byte: " + resultByte);
  }
}
