{
  List<String> commandLineArguments=new ArrayList<String>();
  boolean isInsideQuotes=false;
  StringBuffer currentOption=new StringBuffer();
  for (int index=0; index < fullCommandLine.length(); index++) {
    char c=fullCommandLine.charAt(index);
    if (Character.isSpaceChar(c) && !isInsideQuotes) {
      currentOption.trimToSize();
      if (currentOption.length() > 0)       commandLineArguments.add(currentOption.toString());
      currentOption=new StringBuffer();
    }
 else {
      if (c == '"')       isInsideQuotes=!isInsideQuotes;
      currentOption.append(c);
    }
  }
  currentOption.trimToSize();
  if (currentOption.length() > 0)   commandLineArguments.add(currentOption.toString());
  return commandLineArguments.toArray(new String[commandLineArguments.size()]);
}
