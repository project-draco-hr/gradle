{
  TestFile buildFile=testFile("javadocs.gradle");
  buildFile.write("apply plugin: 'java'");
  testFile("src/main/java/org/gradle/broken.java").write("class Broken { }");
  ExecutionFailure failure=usingBuildFile(buildFile).withTasks("javadoc").runWithFailure();
  failure.assertHasDescription("Execution failed for task ':javadoc'");
  failure.assertHasCause("Javadoc generation failed.");
}
