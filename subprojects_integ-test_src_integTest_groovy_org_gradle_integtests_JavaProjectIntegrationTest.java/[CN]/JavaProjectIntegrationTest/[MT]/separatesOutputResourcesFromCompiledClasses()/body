{
  TestFile buildFile=testFile("build.gradle");
  buildFile.write("apply plugin: 'java'");
  testFile("src/main/resources/prod.resource").write("");
  testFile("src/main/java/Main.java").write("class Main {}");
  testFile("src/test/resources/test.resource").write("test resource");
  testFile("src/test/java/TestFoo.java").write("class TestFoo {}");
  usingBuildFile(buildFile).withTasks("build").run();
  testFile("build/resources/main/prod.resource").assertExists();
  testFile("build/classes/main/prod.resource").assertDoesNotExist();
  testFile("build/resources/test/test.resource").assertExists();
  testFile("build/classes/test/test.resource").assertDoesNotExist();
  testFile("build/classes/main/Main.class").assertExists();
  testFile("build/classes/test/TestFoo.class").assertExists();
}
