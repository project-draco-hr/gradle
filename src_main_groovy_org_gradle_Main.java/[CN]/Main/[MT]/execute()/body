{
  StartParameter startParameter=null;
  DefaultCommandLine2StartParameterConverter parameterConverter=new DefaultCommandLine2StartParameterConverter();
  try {
    startParameter=parameterConverter.convert(args);
  }
 catch (  Exception e) {
    System.err.println(e.getMessage());
    parameterConverter.showHelp(System.err);
    buildCompleter.exit(e);
  }
  if (startParameter.isShowHelp()) {
    parameterConverter.showHelp(System.out);
    buildCompleter.exit(null);
  }
  if (startParameter.isShowVersion()) {
    System.out.println(new GradleVersion().prettyPrint());
    buildCompleter.exit(null);
  }
  BuildResultLogger resultLogger=new BuildResultLogger(logger);
  BuildExceptionReporter exceptionReporter=new BuildExceptionReporter(logger);
  try {
    exceptionReporter.setStartParameter(startParameter);
    Gradle gradle=Gradle.newInstance(startParameter);
    gradle.addBuildListener(exceptionReporter);
    gradle.addBuildListener(resultLogger);
    BuildResult buildResult=gradle.run();
    if (buildResult.getFailure() != null) {
      buildCompleter.exit(buildResult.getFailure());
    }
  }
 catch (  Throwable e) {
    exceptionReporter.buildFinished(new BuildResult(null,e));
    buildCompleter.exit(e);
  }
  buildCompleter.exit(null);
}
