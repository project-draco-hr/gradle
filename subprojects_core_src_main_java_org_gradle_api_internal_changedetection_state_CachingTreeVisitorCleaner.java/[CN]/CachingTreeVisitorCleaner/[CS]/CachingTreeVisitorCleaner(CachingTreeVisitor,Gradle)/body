{
  this.gradle=gradle;
  cacheExpirationStrategy=new TreeVisitorCacheExpirationStrategy(cachingTreeVisitor,new Factory<OverlappingDirectoriesDetector>(){
    @Override public OverlappingDirectoriesDetector create(){
      return new OverlappingDirectoriesDetector();
    }
  }
);
  gradle.getTaskGraph().addTaskExecutionGraphListener(cacheExpirationStrategy);
  gradle.getTaskGraph().addTaskExecutionListener(cacheExpirationStrategy);
  gradle.addBuildListener(cacheExpirationStrategy);
}
