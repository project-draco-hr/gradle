{
  prepareResolveReport();
  final IvyConversionResult conversionResultStub=context.mock(IvyConversionResult.class);
  final ResolvedArtifact resolvedArtifactDummy=context.mock(ResolvedArtifact.class);
  final Set<ResolvedArtifact> resolvedArtifacts=toSet(resolvedArtifactDummy);
  context.checking(new Expectations(){
{
      allowing(ivyReportConverterStub).convertReport(resolveReportMock,configurationStub);
      will(returnValue(conversionResultStub));
      allowing(conversionResultStub).getResolvedArtifacts();
      will(returnValue(resolvedArtifacts));
    }
  }
);
  ModuleDescriptor moduleDescriptor=createAnonymousModuleDescriptor();
  prepareTestsThatRetrieveDependencies(moduleDescriptor);
  assertThat(ivyDependencyResolver.resolve(configurationStub).getResolvedArtifacts(),equalTo(resolvedArtifacts));
}
