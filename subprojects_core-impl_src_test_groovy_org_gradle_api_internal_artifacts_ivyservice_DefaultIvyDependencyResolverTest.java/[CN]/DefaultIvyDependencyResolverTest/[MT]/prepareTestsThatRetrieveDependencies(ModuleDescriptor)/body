{
  final String confName=configurationStub.getName();
  context.checking(new Expectations(){
{
      allowing(configurationStub).getAll();
      will(returnValue(toSet(configurationStub,otherConfiguration)));
      allowing(configurationStub).getModule();
      will(returnValue(module));
      one(ivyFactory).create();
      will(returnValue(ivyStub));
      one(moduleDescriptorConverter).convert(with(equalTo(toSet(configurationStub,otherConfiguration))),with(equalTo(module)),(IvyConfig)with(instanceOf(IvyConfig.class)));
      will(returnValue(moduleDescriptor));
      one(ivyStub).resolve(with(equal(moduleDescriptor)),with(equaltResolveOptions(confName)));
      will(returnValue(resolveReportMock));
    }
  }
);
}
