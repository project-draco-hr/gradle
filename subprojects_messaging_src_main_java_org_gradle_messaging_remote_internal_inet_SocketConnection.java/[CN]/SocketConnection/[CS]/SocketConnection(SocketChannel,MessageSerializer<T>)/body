{
  this.socket=socket;
  this.serializer=serializer;
  try {
    socket.configureBlocking(false);
    outstr=new DataOutputStream(new SocketOutputStream(socket));
    instr=new DataInputStream(new SocketInputStream(socket));
  }
 catch (  IOException e) {
    throw UncheckedException.throwAsUncheckedException(e);
  }
  InetSocketAddress localSocketAddress=(InetSocketAddress)socket.socket().getLocalSocketAddress();
  localAddress=new SocketInetAddress(localSocketAddress.getAddress(),localSocketAddress.getPort());
  InetSocketAddress remoteSocketAddress=(InetSocketAddress)socket.socket().getRemoteSocketAddress();
  remoteAddress=new SocketInetAddress(remoteSocketAddress.getAddress(),remoteSocketAddress.getPort());
}
