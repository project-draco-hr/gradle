{
  testFile("settings.gradle").write("include 'child'");
  TestFile buildFile=testFile("build.gradle");
  buildFile.writelns("dependsOn 'child'","createTask('t')");
  TestFile childBuildFile=testFile("child/build.gradle");
  childBuildFile.writelns("def broken = { ->","    throw new RuntimeException('failure') }","broken()");
  GradleExecutionFailure failure=inTestDirectory().runTasksAndExpectFailure("t");
  failure.assertHasFileName(String.format("Build file '%s'",childBuildFile));
  failure.assertHasLineNumber(2);
  failure.assertHasContext("A problem occurred evaluating project ':child'");
  failure.assertHasDescription("failure");
}
