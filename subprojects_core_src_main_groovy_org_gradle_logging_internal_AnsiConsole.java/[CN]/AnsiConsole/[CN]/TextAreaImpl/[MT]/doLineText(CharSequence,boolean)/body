{
  if (text.length() == 0) {
    return;
  }
  Ansi ansi=createAnsi();
  positionCursorAt(writePos,ansi);
  if (writePos.row == statusBarCursor.row && statusBarCursor.col > writePos.col) {
    ansi.eraseLine(Ansi.Erase.FORWARD);
  }
  ColorMap.Color color=colorMap.getColourFor(getStyle());
  color.on(ansi);
  ansi.a(text.toString());
  color.off(ansi);
  write(ansi);
  if (terminatesLine) {
    newLineWritten(writePos);
  }
 else {
    charactersWritten(writePos,text.length());
  }
}
