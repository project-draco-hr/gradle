{
  if (text.length() == 0) {
    return;
  }
  container.redraw(this,new Action<Ansi>(){
    public void execute(    Ansi ansi){
      ColorMap.Color color=colorMap.getColourFor(getStyle());
      color.on(ansi);
      if (terminatesLine) {
        width=0;
        extraEol=false;
      }
 else {
        width+=text.length();
      }
      ansi.a(text.toString());
      color.off(ansi);
    }
  }
);
}
