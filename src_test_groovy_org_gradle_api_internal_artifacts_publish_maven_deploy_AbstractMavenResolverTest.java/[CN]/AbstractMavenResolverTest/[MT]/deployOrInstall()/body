{
  final HashMap<File,File> testDeployableUnits=new HashMap<File,File>(){
{
      put(new File("pom1.xml"),new File("artifact1.jar"));
      put(new File("pom2.xml"),new File("artifact2.jar"));
    }
  }
;
  context.checking(new Expectations(){
{
      allowing((CustomInstallDeployTaskSupport)getInstallDeployTask()).getSettings();
      will(returnValue(mavenSettingsMock));
      one(artifactPomContainerMock).addArtifact(TEST_ARTIFACT,TEST_JAR_FILE);
      allowing(artifactPomContainerMock).createDeployableUnits(testDependencies);
      will(returnValue(testDeployableUnits));
    }
  }
);
  getMavenResolver().publish(TEST_IVY_ARTIFACT,TEST_IVY_FILE,true);
  getMavenResolver().publish(TEST_ARTIFACT,TEST_JAR_FILE,true);
  checkTransaction(testDeployableUnits);
  assertSame(mavenSettingsMock,getMavenResolver().getSettings());
}
