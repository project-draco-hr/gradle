{
  Thread thread=new Thread(new Runnable(){
    public void run(){
      ExecutionInfo executionInfo=new ExecutionInfo();
      protocol.getExecutionInfo(getPort(),executionInfo);
      ExecHandleBuilder builder=new ExecHandleBuilder();
      builder.execDirectory(executionInfo.workingDirectory);
      builder.commandLine(executionInfo.commandLineArguments);
      builder.environment(executionInfo.environmentVariables);
      ByteArrayOutputStream output=new ByteArrayOutputStream();
      builder.standardOutput(output);
      builder.errorOutput(output);
      ExecHandle execHandle=builder.build();
      setExternalProcess(execHandle);
      try {
        execHandle.start();
      }
 catch (      Throwable e) {
        logger.error("Starting external process",e);
        notifyClientExited(-1,e.getMessage());
        setExternalProcess(null);
        return;
      }
      execHandle.waitForFinish();
      setExternalProcess(null);
      notifyClientExited(execHandle.getExitCode(),output.toString());
    }
  }
);
  thread.start();
}
