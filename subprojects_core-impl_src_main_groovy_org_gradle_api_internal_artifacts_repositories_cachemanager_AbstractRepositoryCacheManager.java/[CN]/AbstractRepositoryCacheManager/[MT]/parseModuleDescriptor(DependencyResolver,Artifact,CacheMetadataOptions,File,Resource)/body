{
  ModuleRevisionId moduleRevisionId=moduleArtifact.getId().getModuleRevisionId();
  try {
    IvySettings ivySettings=IvyContextualiser.getIvyContext().getSettings();
    ParserSettings parserSettings=new ModuleScopedParserSettings(ivySettings,resolver,moduleRevisionId);
    ModuleDescriptorParser parser=parserRegistry.forResource(resource);
    return parser.parseDescriptor(parserSettings,new URL(artifactFile.toURI().toASCIIString()),resource,options.isValidate());
  }
 catch (  IOException e) {
    throw UncheckedException.throwAsUncheckedException(e);
  }
}
