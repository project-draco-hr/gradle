{
  Properties projectProperties=new Properties();
  File projectPropertiesFile=new File(project.getProjectDir(),Project.GRADLE_PROPERTIES);
  logger.debug("Looking for project properties from: {}",projectPropertiesFile);
  if (projectPropertiesFile.isFile()) {
    projectProperties=GUtil.loadProperties(projectPropertiesFile);
    logger.debug("Adding project properties (if not overwritten by user properties): {}",projectProperties.keySet());
  }
 else {
    logger.debug("project property file does not exists. We continue!");
  }
  projectProperties.putAll(externalProperties);
  try {
    project.setGradleUserHome(gradleUserHomeDir.getCanonicalPath());
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  for (  Object key : projectProperties.keySet()) {
    project.setProperty((String)key,projectProperties.get(key));
  }
}
