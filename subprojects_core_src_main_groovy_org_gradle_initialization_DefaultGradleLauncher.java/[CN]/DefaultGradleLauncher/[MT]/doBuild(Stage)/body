{
  loggingManager.start();
  return runBuildOperation(OperationIdGenerator.generateId(gradle),OperationIdGenerator.generateId(gradle.getParent()),InternalBuildListener.RUNNING_BUILD_OPERATION,new Factory<BuildResult>(){
    @Override public BuildResult create(){
      buildListener.buildStarted(gradle);
      Throwable failure=null;
      try {
        doBuildStages(upTo);
      }
 catch (      Throwable t) {
        failure=exceptionAnalyser.transform(t);
      }
      BuildResult buildResult=new BuildResult(gradle,failure);
      buildListener.buildFinished(buildResult);
      return buildResult;
    }
  }
);
}
