{
  String wrapperDir=GUtil.isTrue(jarPath) ? jarPath + "/" : "";
  new File(getProject().getProjectDir(),wrapperDir).mkdirs();
  String wrapperJar=wrapperDir + WRAPPER_JAR;
  String wrapperPropertiesPath=wrapperDir + WRAPPER_PROPERTIES;
  File jarFileDestination=new File(getProject().getProjectDir(),wrapperJar);
  File propertiesFileDestination=new File(getProject().getProjectDir(),wrapperPropertiesPath);
  Gradle gradle=getProject().getGradle();
  File jarFileSource=new File(gradle.getGradleHomeDir(),"lib/plugins/" + WRAPPER_JAR_BASE_NAME + "-"+ gradle.getGradleVersion()+ ".jar");
  propertiesFileDestination.delete();
  jarFileDestination.delete();
  writeProperties(propertiesFileDestination);
  try {
    FileUtils.copyFile(jarFileSource,jarFileDestination);
  }
 catch (  IOException e) {
    throw new UncheckedIOException(e);
  }
  File scriptDestinationDir=new File(getProject().getProjectDir(),scriptDestinationPath);
  wrapperScriptGenerator.generate(wrapperJar,wrapperPropertiesPath,scriptDestinationDir);
}
