{
  File[] children=file.listFiles();
  ArrayList<File> dirs=new ArrayList<File>();
  for (  File child : children) {
    boolean isFile=child.isFile();
    RelativePath childPath=new RelativePath(isFile,path,child.getName());
    if (isAllowed(childPath)) {
      if (isFile) {
        notifyFile(child,childPath);
      }
 else {
        dirs.add(child);
      }
    }
  }
  for (  File dir : dirs) {
    RelativePath dirPath=new RelativePath(false,path,dir.getName());
    notifyDir(dir,dirPath);
    walkDir(dir,dirPath);
  }
}
