{
  for (  ConfigurationNode configuration : root.configurations) {
    for (    DependencyEdge outgoingEdge : configuration.outgoingEdges) {
      if (outgoingEdge.dependencyDescriptor.isForce() && candidates.contains(outgoingEdge.targetModuleRevision)) {
        outgoingEdge.targetModuleRevision.selectionReason=VersionSelectionReasons.FORCED;
        return outgoingEdge.targetModuleRevision;
      }
    }
  }
  DefaultModuleRevisionResolveState out=(DefaultModuleRevisionResolveState)resolver.select(candidates,root);
  if (out.selectionReason == VersionSelectionReasons.SELECTED_BY_RULE) {
    out.selectionReason=VersionSelectionReasons.CONFLICT_RESOLUTION_BY_RULE;
  }
 else {
    out.selectionReason=VersionSelectionReasons.CONFLICT_RESOLUTION;
  }
  return out;
}
