{
  if (targetModuleRevision == null) {
    selector=resolveState.getSelector(dependencyDescriptor,dependencyDescriptor.getDependencyRevisionId());
    targetModuleRevision=selector.resolveModuleRevisionId();
    if (targetModuleRevision != null && !targetModuleRevision.id.getModuleId().equals(dependencyDescriptor.getDependencyId())) {
      selector=resolveState.getSelector(dependencyDescriptor,targetModuleRevision.id);
    }
    selector.module.addUnattachedDependency(this);
  }
}
