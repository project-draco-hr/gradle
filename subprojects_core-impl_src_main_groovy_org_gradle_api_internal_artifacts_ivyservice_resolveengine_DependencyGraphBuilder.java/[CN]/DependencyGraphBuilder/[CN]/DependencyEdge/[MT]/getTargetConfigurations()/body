{
  ModuleDescriptor targetDescriptor=targetModuleRevision.descriptor;
  if (targetDescriptor == null) {
    throw new IllegalStateException(String.format("No descriptor for %s.",targetModuleRevision));
  }
  IvyNode node=new IvyNode(resolveState.resolveData,targetDescriptor);
  Set<String> targets=new LinkedHashSet<String>();
  for (  String targetConfiguration : targetConfigurations) {
    Collections.addAll(targets,node.getRealConfs(targetConfiguration));
  }
  Set<ConfigurationNode> nodes=new LinkedHashSet<ConfigurationNode>();
  for (  String targetConfigurationName : targets) {
    if (targetDescriptor.getConfiguration(targetConfigurationName) == null) {
      throw new RuntimeException(String.format("Module version group:%s, module:%s, version:%s, configuration:%s declares a dependency on configuration '%s' which is not declared in the module descriptor for group:%s, module:%s, version:%s",from.moduleRevision.id.getOrganisation(),from.moduleRevision.id.getName(),from.moduleRevision.id.getRevision(),from.configurationName,targetConfigurationName,targetModuleRevision.id.getOrganisation(),targetModuleRevision.id.getName(),targetModuleRevision.id.getRevision()));
    }
    ConfigurationNode targetConfiguration=resolveState.getConfigurationNode(targetDescriptor,targetConfigurationName);
    nodes.add(targetConfiguration);
  }
  return nodes;
}
