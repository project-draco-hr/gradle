{
  ResolvePath newParent=path.restart(candidates,moduleRevision);
  if (newParent != path) {
    if (targetModuleRevision != null) {
      targetModuleRevision.incomingPaths.remove(this);
    }
    return newParent;
  }
  if (targetModuleRevision == null) {
    return restart(moduleRevision);
  }
  if (targetModuleRevision == moduleRevision || !candidates.contains(targetModuleRevision)) {
    return this;
  }
  return restart(moduleRevision);
}
