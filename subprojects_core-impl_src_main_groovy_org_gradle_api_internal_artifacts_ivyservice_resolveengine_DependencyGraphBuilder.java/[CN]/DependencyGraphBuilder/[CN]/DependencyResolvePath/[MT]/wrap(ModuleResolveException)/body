{
  if (e instanceof ModuleNotFoundException) {
    Formatter formatter=new Formatter();
    formatter.format("Module %s not found. It is required by:",dependency.getDependencyId());
    Set<DefaultModuleRevisionResolveState> modules=new LinkedHashSet<DefaultModuleRevisionResolveState>();
    buildPathFromRoot(modules);
    for (    DefaultModuleRevisionResolveState module : modules) {
      formatter.format("%n    %s",module.getId());
    }
    return new ModuleNotFoundException(formatter.toString(),e);
  }
  return e;
}
