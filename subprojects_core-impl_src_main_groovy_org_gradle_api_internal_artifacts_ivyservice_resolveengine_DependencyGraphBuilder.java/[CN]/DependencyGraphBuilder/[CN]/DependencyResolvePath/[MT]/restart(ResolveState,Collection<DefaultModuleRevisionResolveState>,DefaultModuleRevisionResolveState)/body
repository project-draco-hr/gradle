{
  ResolvePath newParent=path.restart(resolveState,candidates,moduleRevision);
  if (newParent != path) {
    if (targetModuleRevision != null) {
      targetModuleRevision.removeIncomingPath(this);
    }
    return newParent;
  }
  if (targetModuleRevision == null) {
    return this;
  }
  if (targetModuleRevision == moduleRevision || !candidates.contains(targetModuleRevision)) {
    return this;
  }
  return restart(moduleRevision);
}
