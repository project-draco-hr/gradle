{
  DefaultBuildableModuleVersionResolveResult rootModule=new DefaultBuildableModuleVersionResolveResult();
  moduleResolver.resolve(configuration.getModule(),configuration.getAll(),rootModule);
  ResolveState resolveState=new ResolveState(rootModule,configuration.getName(),dependencyResolver,dependencyToConfigurationResolver,builder);
  traverseGraph(resolveState);
  builder.start(resolveState.root.getResult());
  DefaultLenientConfiguration result=new DefaultLenientConfiguration(configuration,builder,cacheLockingManager);
  assembleResult(resolveState,builder,listener);
  return result;
}
