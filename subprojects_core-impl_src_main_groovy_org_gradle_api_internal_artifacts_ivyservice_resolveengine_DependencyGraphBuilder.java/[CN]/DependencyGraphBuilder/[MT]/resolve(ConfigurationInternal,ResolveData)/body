{
  ModuleDescriptor moduleDescriptor=moduleDescriptorConverter.convert(configuration.getAll(),configuration.getModule());
  ResolveState resolveState=new ResolveState(moduleDescriptor,configuration.getName(),dependencyResolver,resolveData);
  traverseGraph(resolveState);
  DefaultLenientConfiguration result=new DefaultLenientConfiguration(configuration,resolveState.root.getResult());
  DependencyGraphProvider graphProvider=new DependencyGraphProvider();
  assembleResult(resolveState,result,graphProvider);
  configuration.setDependencyGraph(graphProvider.getGraph());
  return result;
}
