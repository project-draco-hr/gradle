{
  FailureState failureState=new FailureState(resolveState.root);
  ModuleVersionIdentifier root=resolveState.root.toId();
  newModelBuilder.start(root);
  for (  ConfigurationNode resolvedConfiguration : resolveState.getConfigurationNodes()) {
    if (resolvedConfiguration.isSelected()) {
      oldModelBuilder.newResolvedDependency(resolvedConfiguration.getResult());
      resolvedConfiguration.collectFailures(failureState);
      newModelBuilder.resolvedModuleVersion(resolvedConfiguration.moduleRevision);
    }
  }
  for (  ConfigurationNode resolvedConfiguration : resolveState.getConfigurationNodes()) {
    if (resolvedConfiguration.isSelected()) {
      resolvedConfiguration.attachToParents(oldModelBuilder);
      newModelBuilder.resolvedConfiguration(resolvedConfiguration.toId(),resolvedConfiguration.outgoingEdges);
    }
  }
  failureState.attachFailures(oldModelBuilder);
  oldModelBuilder.done(resolveState.root.getResult());
}
