{
  FailureState failureState=new FailureState(resolveState.root);
  ModuleVersionIdentifier root=resolveState.root.toId();
  listener.start(root);
  for (  ConfigurationNode resolvedConfiguration : resolveState.getConfigurationNodes()) {
    if (resolvedConfiguration.isSelected()) {
      result.newResolvedDependency(resolvedConfiguration.getResult());
      resolvedConfiguration.collectFailures(failureState);
      listener.resolvedModuleVersion(resolvedConfiguration.moduleRevision);
    }
  }
  for (  ConfigurationNode resolvedConfiguration : resolveState.getConfigurationNodes()) {
    if (resolvedConfiguration.isSelected()) {
      resolvedConfiguration.attachToParents(result);
      listener.resolvedConfiguration(resolvedConfiguration.toId(),resolvedConfiguration.outgoingEdges);
    }
  }
  failureState.attachFailures(result);
  result.done(resolveState.root.getResult());
}
