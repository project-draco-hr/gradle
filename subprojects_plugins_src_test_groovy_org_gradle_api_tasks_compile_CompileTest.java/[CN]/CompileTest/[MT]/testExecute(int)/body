{
  setUpMocksAndAttributes(compile);
  context.checking(new Expectations(){
{
      WorkResult result=context.mock(WorkResult.class);
      one(compilerMock).setSpec(with(IsNull.<JavaCompileSpec>notNullValue()));
      one(compilerMock).execute();
      will(returnValue(result));
      allowing(result).getDidWork();
      will(returnValue(numFilesCompiled > 0));
    }
  }
);
  compile.compile();
}
