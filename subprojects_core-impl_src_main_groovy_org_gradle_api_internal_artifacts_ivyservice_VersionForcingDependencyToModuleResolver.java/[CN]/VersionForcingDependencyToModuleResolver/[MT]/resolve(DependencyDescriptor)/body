{
  ModuleVersionSelector module=new DefaultModuleVersionSelector(dependencyDescriptor.getDependencyRevisionId().getOrganisation(),dependencyDescriptor.getDependencyRevisionId().getName(),dependencyDescriptor.getDependencyRevisionId().getRevision());
  DefaultDependencyResolveDetails details=new DefaultDependencyResolveDetails(module);
  try {
    action.execute(details);
  }
 catch (  RuntimeException e) {
    throw new GradleException("Problems executing resolve action for dependency: " + module.getGroup() + ":"+ module.getName()+ ":"+ module.getVersion(),e);
  }
  if (details.getForcedVersion() != null) {
    ModuleId moduleId=new ModuleId(details.getRequested().getGroup(),details.getRequested().getName());
    ModuleRevisionId revisionId=new ModuleRevisionId(moduleId,details.getForcedVersion());
    DependencyDescriptor descriptor=dependencyDescriptor.clone(revisionId);
    ModuleVersionIdResolveResult result=resolver.resolve(descriptor);
    return new ForcedModuleVersionIdResolveResult(result);
  }
  return resolver.resolve(dependencyDescriptor);
}
