{
  return new Runnable(){
    public void run(){
      try {
        LOGGER.info("Starting file lock listener thread.");
        doRun();
      }
 catch (      Throwable t) {
        LOGGER.error("Problems handling incoming cache access requests.",t);
      }
 finally {
        LOGGER.info("File lock listener thread completed.");
      }
    }
    private void doRun(){
      while (true) {
        lock.lock();
        try {
          if (communicator == null) {
            return;
          }
          receiving=new CountDownLatch(1);
        }
  finally {
          lock.unlock();
        }
        long lockId;
        try {
          lockId=communicator.receive();
        }
 catch (        GracefullyStoppedException e) {
          return;
        }
 finally {
          receiving.countDown();
        }
        lock.lock();
        Runnable action;
        try {
          action=contendedActions.get(lockId);
          if (action == null) {
            return;
          }
        }
  finally {
          lock.unlock();
        }
        action.run();
      }
    }
  }
;
}
