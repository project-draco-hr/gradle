{
  StoppableExecutor stopMe=null;
  lock.lock();
  try {
    contendedActions.remove(lockId);
    if (contendedActions.isEmpty()) {
      communicator.stop();
      try {
        if (receiving != null) {
          receiving.await();
          receiving=null;
        }
      }
 catch (      InterruptedException e) {
        throw throwAsUncheckedException(e);
      }
      communicator=null;
      stopMe=executor;
      stopMe.requestStop();
    }
  }
  finally {
    lock.unlock();
  }
  if (stopMe != null) {
    stopMe.stop();
  }
}
