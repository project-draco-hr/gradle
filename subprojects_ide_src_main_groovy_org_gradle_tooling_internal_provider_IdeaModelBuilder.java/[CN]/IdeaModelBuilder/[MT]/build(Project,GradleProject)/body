{
  IdeaModel ideaModel=project.getPlugins().getPlugin(IdeaPlugin.class).getModel();
  IdeaProject projectModel=ideaModel.getProject();
  DefaultIdeaProject out=new DefaultIdeaProject().setName(projectModel.getName()).setJdkName(projectModel.getJdkName()).setLanguageLevel(new DefaultIdeaLanguageLevel(projectModel.getLanguageLevel().getLevel()));
  Map<String,DefaultIdeaModule> modules=new HashMap<String,DefaultIdeaModule>();
  for (  IdeaModule module : projectModel.getModules()) {
    appendModule(modules,module,out,rootGradleProject);
  }
  for (  IdeaModule module : projectModel.getModules()) {
    buildDependencies(modules,module);
  }
  out.setChildren(new LinkedList<DefaultIdeaModule>(modules.values()));
  return out;
}
