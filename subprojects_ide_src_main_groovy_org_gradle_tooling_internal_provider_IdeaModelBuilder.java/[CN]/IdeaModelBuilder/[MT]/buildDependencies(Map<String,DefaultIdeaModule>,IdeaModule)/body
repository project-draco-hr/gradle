{
  Set<Dependency> resolved=ideaModule.resolveDependencies();
  List<IdeaDependency> dependencies=new LinkedList<IdeaDependency>();
  for (  Dependency dependency : resolved) {
    if (dependency instanceof SingleEntryModuleLibrary) {
      SingleEntryModuleLibrary d=(SingleEntryModuleLibrary)dependency;
      IdeaDependency defaultDependency=new DefaultIdeaSingleEntryLibraryDependency().setFile(d.getLibraryFile()).setSource(d.getSourceFile()).setJavadoc(d.getJavadocFile()).setScope(new DefaultIdeaDependencyScope(d.getScope())).setExported(d.getExported());
      dependencies.add(defaultDependency);
    }
 else     if (dependency instanceof ModuleDependency) {
      ModuleDependency d=(ModuleDependency)dependency;
      IdeaDependency defaultDependency=new DefaultIdeaModuleDependency().setExported(d.getExported()).setScope(new DefaultIdeaDependencyScope(d.getScope())).setDependencyModule(modules.get(d.getName()));
      dependencies.add(defaultDependency);
    }
  }
  modules.get(ideaModule.getName()).setDependencies(dependencies);
}
