{
  DefaultIdeaContentRoot contentRoot=new DefaultIdeaContentRoot().setRootDirectory(ideaModule.getContentRoot()).setSourceDirectories(srcDirs(ideaModule.getSourceDirs())).setTestDirectories(srcDirs(ideaModule.getTestSourceDirs())).setExcludeDirectories(new LinkedList<File>(ideaModule.getExcludeDirs()));
  DefaultIdeaModule defaultIdeaModule=new DefaultIdeaModule().setName(ideaModule.getName()).setParent(ideaProject).setGradleProject(rootGradleProject.findByPath(ideaModule.getProject().getPath())).setModuleFileDir(ideaModule.getIml().getGenerateTo()).setContentRoots(asList(contentRoot)).setCompilerOutput(new DefaultIdeaCompilerOutput().setInheritOutputDirs(ideaModule.getInheritOutputDirs() != null ? ideaModule.getInheritOutputDirs() : false).setOutputDir(ideaModule.getOutputDir()).setTestOutputDir(ideaModule.getTestOutputDir()));
  modules.put(ideaModule.getName(),defaultIdeaModule);
}
