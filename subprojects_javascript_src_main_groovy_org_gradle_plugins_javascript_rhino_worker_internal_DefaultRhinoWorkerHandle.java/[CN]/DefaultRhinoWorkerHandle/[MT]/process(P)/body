{
  CountDownLatch latch=new CountDownLatch(1);
  Receiver receiver=new Receiver(latch);
  workerProcess.start();
  workerProcess.getConnection().addIncoming(RhinoWorkerClientProtocol.class,receiver);
  @SuppressWarnings("unchecked") RhinoClientWorkerProtocol<P> worker=workerProcess.getConnection().addOutgoing(RhinoClientWorkerProtocol.class);
  worker.process(payload);
  try {
    latch.await();
  }
 catch (  InterruptedException e) {
    throw UncheckedException.throwAsUncheckedException(e);
  }
  if (receiver.initialisationError != null) {
    throw UncheckedException.throwAsUncheckedException(receiver.initialisationError);
  }
  if (receiver.executionError != null) {
    throw UncheckedException.throwAsUncheckedException(receiver.executionError);
  }
  Serializable result=receiver.result;
  if (result == null) {
    return null;
  }
  if (resultType.isInstance(result)) {
    return resultType.cast(result);
  }
 else {
    throw new IllegalStateException(String.format("Was expecting result of type %s, received %s",resultType,result.getClass()));
  }
}
