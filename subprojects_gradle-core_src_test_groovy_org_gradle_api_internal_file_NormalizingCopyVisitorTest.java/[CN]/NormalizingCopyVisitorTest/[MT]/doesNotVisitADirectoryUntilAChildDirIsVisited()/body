{
  final FileVisitDetails dir=file("dir");
  final FileVisitDetails subdir=file("dir/sub");
  final FileVisitDetails file=file("dir/sub/file");
  visitor.visitDir(dir);
  visitor.visitDir(subdir);
  context.checking(new Expectations(){
{
      one(delegate).visitDir(dir);
      one(delegate).visitDir(subdir);
      one(delegate).visitFile(file);
    }
  }
);
  visitor.visitFile(file);
}
