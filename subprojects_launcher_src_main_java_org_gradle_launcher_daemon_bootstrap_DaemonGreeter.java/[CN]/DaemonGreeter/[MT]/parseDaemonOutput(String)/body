{
  List<String> lines=asList(output.split("\n"));
  if (lines.isEmpty() || !lines.get(lines.size() - 1).startsWith(DaemonMessages.ABOUT_TO_CLOSE_STREAMS)) {
    throw new GradleException(DaemonMessages.UNABLE_TO_START_DAEMON + "\n" + processOutput(lines));
  }
  String lastLine=lines.get(lines.size() - 1);
  return new DaemonStartupCommunication().readDiagnostics(lastLine);
}
