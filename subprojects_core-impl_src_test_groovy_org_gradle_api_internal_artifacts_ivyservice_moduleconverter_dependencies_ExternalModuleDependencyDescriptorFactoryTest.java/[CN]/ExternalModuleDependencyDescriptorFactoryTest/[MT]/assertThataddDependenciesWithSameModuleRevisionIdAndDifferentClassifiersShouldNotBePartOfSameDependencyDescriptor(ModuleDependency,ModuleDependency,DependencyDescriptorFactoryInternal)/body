{
  factoryInternal.addDependencyDescriptor(TEST_CONF,moduleDescriptor,dependency1);
  factoryInternal.addDependencyDescriptor(TEST_CONF,moduleDescriptor,dependency2);
  assertThat(moduleDescriptor.getDependencies().length,equalTo(2));
  DefaultDependencyDescriptor dependencyDescriptor=(DefaultDependencyDescriptor)moduleDescriptor.getDependencies()[0];
  assertThat(dependencyDescriptor.getDependencyConfigurations(TEST_CONF),Matchers.hasItemInArray(TEST_DEP_CONF));
  assertThat(dependencyDescriptor.getDependencyConfigurations(TEST_CONF).length,equalTo(1));
  dependencyDescriptor=(DefaultDependencyDescriptor)moduleDescriptor.getDependencies()[1];
  assertThat(dependencyDescriptor.getDependencyConfigurations(TEST_CONF),Matchers.hasItemInArray(TEST_OTHER_DEP_CONF));
  assertThat(dependencyDescriptor.getDependencyConfigurations(TEST_CONF).length,equalTo(1));
}
