{
  DefaultTaskDependency taskDependency=new DefaultTaskDependency();
  taskDependency.add(allDependencies.getBuildDependencies());
  resolveNow(InternalState.TASK_DEPENDENCIES_RESOLVED);
  for (  ResolvedProjectConfigurationResult projectResult : cachedResolverResults.getResolvedProjectConfigurationResults().getAllProjectConfigurationResults()) {
    ProjectInternal project=projectFinder.getProject(projectResult.getId().getProjectPath());
    for (    String targetConfigName : projectResult.getTargetConfigurations()) {
      Configuration targetConfig=project.getConfigurations().getByName(targetConfigName);
      taskDependency.add(targetConfig);
      taskDependency.add(targetConfig.getAllArtifacts());
    }
  }
  return taskDependency;
}
