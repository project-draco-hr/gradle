{
  DefaultTaskDependency taskDependency=new DefaultTaskDependency();
  resolveNow(InternalState.TASK_DEPENDENCIES_RESOLVED);
  for (  ResolvedProjectConfigurationResult projectResult : cachedResolverResults.getResolvedProjectConfigurationResults().getAllProjectConfigurationResults()) {
    ProjectInternal project=projectFinder.getProject(projectResult.getId().getProjectPath());
    for (    String targetConfigName : projectResult.getTargetConfigurations()) {
      Configuration targetConfig=project.getConfigurations().getByName(targetConfigName);
      taskDependency.add(new SelfResolvingDependenciesWithoutProjectDependencies(targetConfig.getAllDependencies()));
      taskDependency.add(targetConfig.getAllArtifacts());
    }
  }
  taskDependency.add(new SelfResolvingDependenciesWithoutProjectDependencies(allDependencies));
  return taskDependency;
}
