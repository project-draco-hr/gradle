{
synchronized (lock) {
    if (requestedState == InternalState.TASK_DEPENDENCIES_RESOLVED || requestedState == InternalState.RESULTS_RESOLVED) {
      resolveGraphIfRequired();
    }
    if (requestedState == InternalState.RESULTS_RESOLVED) {
      resolveArtifactsIfRequired();
    }
  }
}
