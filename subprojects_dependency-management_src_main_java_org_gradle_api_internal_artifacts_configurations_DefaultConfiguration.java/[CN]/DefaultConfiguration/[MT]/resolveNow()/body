{
synchronized (lock) {
    if (state == State.UNRESOLVED) {
      DependencyResolutionListener broadcast=getDependencyResolutionBroadcast();
      ResolvableDependencies incoming=getIncoming();
      broadcast.beforeResolve(incoming);
      cachedResolverResults=resolver.resolve(this);
      for (      Configuration configuration : extendsFrom) {
        ((ConfigurationInternal)configuration).includedInResolveResult();
      }
      if (cachedResolverResults.getResolvedConfiguration().hasError()) {
        state=State.RESOLVED_WITH_FAILURES;
      }
 else {
        state=State.RESOLVED;
      }
      broadcast.afterResolve(incoming);
    }
  }
}
