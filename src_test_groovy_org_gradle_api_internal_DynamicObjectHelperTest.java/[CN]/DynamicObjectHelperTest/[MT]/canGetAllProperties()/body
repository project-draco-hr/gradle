{
  Bean parent=new Bean();
  parent.setProperty("parentProperty","parentProperty");
  parent.setReadWriteProperty("ignore me");
  parent.doSetReadOnlyProperty("ignore me");
  Convention parentConvention=new Convention(null);
  parentConvention.getPlugins().put("parent",new ConventionBean());
  parent.setConvention(parentConvention);
  GroovyBean bean=new GroovyBean();
  bean.setProperty("additional","additional");
  bean.setReadWriteProperty("readWriteProperty");
  bean.doSetReadOnlyProperty("readOnlyProperty");
  bean.setGroovyProperty("groovyProperty");
  Convention convention=new Convention(null);
  ConventionBean conventionBean=new ConventionBean();
  conventionBean.setConventionProperty("conventionProperty");
  convention.getPlugins().put("bean",conventionBean);
  bean.setConvention(convention);
  bean.setParent(parent);
  Map<String,Object> properties=bean.getProperties();
  assertThat(properties.get("properties"),sameInstance((Object)properties));
  assertThat(properties.get("readWriteProperty"),equalTo((Object)"readWriteProperty"));
  assertThat(properties.get("readOnlyProperty"),equalTo((Object)"readOnlyProperty"));
  assertThat(properties.get("parentProperty"),equalTo((Object)"parentProperty"));
  assertThat(properties.get("additional"),equalTo((Object)"additional"));
  assertThat(properties.get("groovyProperty"),equalTo((Object)"groovyProperty"));
  assertThat(properties.get("groovyDynamicProperty"),equalTo(null));
  assertThat(properties.get("conventionProperty"),equalTo((Object)"conventionProperty"));
}
