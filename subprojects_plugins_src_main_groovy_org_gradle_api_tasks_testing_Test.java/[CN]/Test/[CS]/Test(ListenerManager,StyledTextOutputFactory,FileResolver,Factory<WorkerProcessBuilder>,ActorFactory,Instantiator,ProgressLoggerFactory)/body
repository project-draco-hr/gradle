{
  this.progressLoggerFactory=progressLoggerFactory;
  this.instantiator=instantiator;
  testListenerBroadcaster=listenerManager.createAnonymousBroadcaster(TestListener.class);
  testOutputListenerBroadcaster=listenerManager.createAnonymousBroadcaster(TestOutputListener.class);
  this.textOutputFactory=textOutputFactory;
  forkOptions=new DefaultJavaForkOptions(fileResolver);
  forkOptions.setEnableAssertions(true);
  testExecuter=new DefaultTestExecuter(processBuilderFactory,actorFactory);
  testLogging=instantiator.newInstance(DefaultTestLoggingContainer.class,instantiator);
  testReporter=new DefaultTestReport();
  reports=instantiator.newInstance(DefaultTestTaskReports.class,this);
  reports.getJunitXml().setEnabled(true);
  reports.getHtml().setEnabled(true);
  filter=instantiator.newInstance(DefaultTestFilter.class);
}
