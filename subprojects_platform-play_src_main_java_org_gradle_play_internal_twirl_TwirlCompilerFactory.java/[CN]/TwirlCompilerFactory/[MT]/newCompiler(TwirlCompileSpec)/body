{
  CompilerDaemonFactory daemonFactory;
  if (spec.isFork()) {
    daemonFactory=compilerDaemonManager;
  }
 else {
    daemonFactory=inProcessCompilerDaemonFactory;
  }
  Compiler<TwirlCompileSpec> compiler=new DaemonTwirlCompiler(workingDirectory,new TwirlCompiler(new TwirlCompilerVersionedInvocationSpecBuilder()),daemonFactory,forkOptions);
  return compiler;
}
