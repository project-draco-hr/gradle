{
  CompilationState previousCompileState=previousCompileStateCache.get();
  final Set<File> candidates=Sets.newHashSet();
  final IncrementalCompileFiles result=new IncrementalCompileFiles(previousCompileState,candidates);
  for (  File sourceFile : sourceFiles) {
    result.processSource(sourceFile);
  }
  return new DefaultIncrementalCompilation(result.current,result.getModifiedSources(),result.getRemovedSources(),candidates);
}
