{
  CompileOptions compileOptions=spec.getCompileOptions();
  DaemonForkOptions forkOptions=new DaemonForkOptions(compileOptions.getForkOptions());
  CompilerDaemon daemon=CompilerDaemonManager.getInstance().getDaemon(project,forkOptions);
  CompileResult result=daemon.execute(delegate,spec);
  if (result.isSuccess()) {
    return result;
  }
  throw UncheckedException.throwAsUncheckedException(result.getException());
}
