{
  final TaskExecutionListener listener=context.mock(TaskExecutionListener.class);
  final Task a=task("a");
  final Task b=task("b");
  taskExecuter.addTaskExecutionListener(listener);
  taskExecuter.addTasks(toList(a,b));
  context.checking(new Expectations(){
{
      one(listener).beforeExecute(a);
      one(listener).afterExecute(with(equalTo(a)),with(notNullValue(TaskState.class)));
      one(listener).beforeExecute(b);
      one(listener).afterExecute(with(equalTo(b)),with(notNullValue(TaskState.class)));
    }
  }
);
  taskExecuter.execute();
}
