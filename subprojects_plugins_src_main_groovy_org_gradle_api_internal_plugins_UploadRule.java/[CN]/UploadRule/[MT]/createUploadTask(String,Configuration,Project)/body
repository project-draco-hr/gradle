{
  Upload upload=project.getTasks().add(name,Upload.class);
  upload.setDescription(String.format("Uploads all artifacts belonging to %s",configuration));
  upload.setGroup(BasePlugin.UPLOAD_GROUP);
  upload.setConfiguration(configuration);
  upload.setUploadDescriptor(true);
  upload.getConventionMapping().map("descriptorDestination",new Callable<File>(){
    public File call() throws Exception {
      return new File(project.getBuildDir(),"ivy.xml");
    }
  }
);
  return upload;
}
