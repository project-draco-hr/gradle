{
  String secret=generateSecret();
  File probe=null;
  try {
    probe=generateFile(secret);
    caseSensitive=probeCaseSensitive(probe,secret);
    symlinkAware=probeSymlinkAware(probe,secret);
    implicitLock=probeImplicitlyLocksFileOnOpen(probe);
  }
 catch (  IOException e) {
    throw new UncheckedIOException(e);
  }
 finally {
    FileUtils.deleteQuietly(probe);
  }
}
