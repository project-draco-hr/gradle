{
  lock.lock();
  try {
    URI localAddress;
    try {
      localAddress=new URI(String.format("channel:%s!%d",incomingConnector.getLocalAddress(),nextConnectionId++));
    }
 catch (    URISyntaxException e) {
      throw new GradleException(e);
    }
    DefaultMultiChannelConnection channelConnection=new DefaultMultiChannelConnection(executorService,localAddress,null);
    pending.put(localAddress,channelConnection);
    return channelConnection;
  }
  finally {
    lock.unlock();
  }
}
