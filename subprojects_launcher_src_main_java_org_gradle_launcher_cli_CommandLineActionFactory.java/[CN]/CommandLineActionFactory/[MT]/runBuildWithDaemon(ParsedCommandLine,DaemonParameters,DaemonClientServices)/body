{
  DaemonClientFactory clientFactory=clientServices.get(DaemonClientFactory.class);
  DaemonCompatibilitySpec compatibilitySpec=new DaemonCompatibilitySpec(clientServices.get(DaemonContext.class));
  DaemonClient client=clientFactory.create(compatibilitySpec);
  return new ActionAdapter(new DaemonBuildAction(client,commandLine,getWorkingDir(),clientMetaData(),getBuildStartTime(),daemonParameters.getEffectiveSystemProperties(),System.getenv()));
}
