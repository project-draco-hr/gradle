{
  ContainedVersionAnalyzer analyzer=analyzerFactory.createAnalyzer();
  DefaultManifest effectiveManifest=new DefaultManifest(null);
  try {
    setAnalyzerProperties(analyzer);
    Manifest osgiManifest=analyzer.calcManifest();
    for (    Map.Entry<Object,Object> entry : osgiManifest.getMainAttributes().entrySet()) {
      effectiveManifest.attributes(WrapUtil.toMap(entry.getKey().toString(),(String)entry.getValue()));
    }
  }
 catch (  Exception e) {
    throw UncheckedException.asUncheckedException(e);
  }
  return getEffectiveManifestInternal(effectiveManifest);
}
