{
  XmlSuite suite=new XmlSuite();
  XmlTest xmlTest=new XmlTest(suite);
  xmlTest.setName("Gradle test");
  for (  Class klass : testClasses) {
    XmlClass xmlClass=null;
    for (    DefaultTestSelectionSpec includedTest : includedTests) {
      if (includedTest.matchesClass(klass.getName()) && includedTest.matchesAnyMethodIn(klass)) {
        if (xmlClass == null) {
          xmlClass=new XmlClass(klass,true);
          xmlTest.getXmlClasses().add(xmlClass);
        }
        XmlInclude method=new XmlInclude(includedTest.getMethodPattern());
        xmlClass.getIncludedMethods().add(method);
      }
    }
  }
  testNg.setCommandLineSuite(suite);
}
