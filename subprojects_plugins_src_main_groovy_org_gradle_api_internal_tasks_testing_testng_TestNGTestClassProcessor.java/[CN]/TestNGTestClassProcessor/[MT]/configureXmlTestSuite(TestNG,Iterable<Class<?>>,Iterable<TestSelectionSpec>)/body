{
  XmlSuite suite=new XmlSuite();
  XmlTest xmlTest=new XmlTest(suite);
  xmlTest.setName("Gradle test");
  for (  Class klass : testClasses) {
    XmlClass xmlClass=null;
    for (    TestSelectionSpec included : includedTests) {
      TestSelectionMatcher matcher=new TestSelectionMatcher(included);
      if (matcher.matchesClass(klass.getName()) && matcher.matchesAnyMethodIn(klass)) {
        if (xmlClass == null) {
          xmlClass=new XmlClass(klass,true);
          xmlTest.getXmlClasses().add(xmlClass);
        }
        XmlInclude method=new XmlInclude(included.getMethodPattern().replaceAll("\\*",".*"));
        xmlClass.getIncludedMethods().add(method);
      }
    }
  }
  testNg.setCommandLineSuite(suite);
}
