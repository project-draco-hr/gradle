{
  addGetter(GroovyObject.class.getDeclaredMethod("getProperty",String.class),new MethodCodeBody(){
    public void add(    MethodVisitor methodVisitor) throws Exception {
      methodVisitor.visitVarInsn(Opcodes.ALOAD,0);
      String getAsDynamicObjectDesc=Type.getMethodDescriptor(DynamicObjectAware.class.getDeclaredMethod("getAsDynamicObject"));
      methodVisitor.visitMethodInsn(Opcodes.INVOKEVIRTUAL,generatedType.getInternalName(),"getAsDynamicObject",getAsDynamicObjectDesc);
      methodVisitor.visitVarInsn(Opcodes.ALOAD,1);
      String getPropertyDesc=Type.getMethodDescriptor(DynamicObject.class.getDeclaredMethod("getProperty",String.class));
      methodVisitor.visitMethodInsn(Opcodes.INVOKEINTERFACE,DYNAMIC_OBJECT_TYPE.getInternalName(),"getProperty",getPropertyDesc);
    }
  }
);
  String methodDescriptor=Type.getMethodDescriptor(Type.getType(Boolean.TYPE),Type.getType(String.class));
  MethodVisitor methodVisitor=visitor.visitMethod(Opcodes.ACC_PUBLIC,"hasProperty",methodDescriptor,null,new String[0]);
  methodVisitor.visitCode();
  methodVisitor.visitVarInsn(Opcodes.ALOAD,0);
  String getAsDynamicObjectDesc=Type.getMethodDescriptor(DynamicObjectAware.class.getDeclaredMethod("getAsDynamicObject"));
  methodVisitor.visitMethodInsn(Opcodes.INVOKEVIRTUAL,generatedType.getInternalName(),"getAsDynamicObject",getAsDynamicObjectDesc);
  methodVisitor.visitVarInsn(Opcodes.ALOAD,1);
  String getPropertyDesc=Type.getMethodDescriptor(DynamicObject.class.getDeclaredMethod("hasProperty",String.class));
  methodVisitor.visitMethodInsn(Opcodes.INVOKEINTERFACE,DYNAMIC_OBJECT_TYPE.getInternalName(),"hasProperty",getPropertyDesc);
  methodVisitor.visitInsn(Opcodes.IRETURN);
  methodVisitor.visitMaxs(0,0);
  methodVisitor.visitEnd();
  addSetter(GroovyObject.class.getDeclaredMethod("setProperty",String.class,Object.class),new MethodCodeBody(){
    public void add(    MethodVisitor methodVisitor) throws Exception {
      methodVisitor.visitVarInsn(Opcodes.ALOAD,0);
      String getAsDynamicObjectDesc=Type.getMethodDescriptor(DynamicObjectAware.class.getDeclaredMethod("getAsDynamicObject"));
      methodVisitor.visitMethodInsn(Opcodes.INVOKEVIRTUAL,generatedType.getInternalName(),"getAsDynamicObject",getAsDynamicObjectDesc);
      methodVisitor.visitVarInsn(Opcodes.ALOAD,1);
      methodVisitor.visitVarInsn(Opcodes.ALOAD,2);
      String setPropertyDesc=Type.getMethodDescriptor(DynamicObject.class.getDeclaredMethod("setProperty",String.class,Object.class));
      methodVisitor.visitMethodInsn(Opcodes.INVOKEINTERFACE,DYNAMIC_OBJECT_TYPE.getInternalName(),"setProperty",setPropertyDesc);
    }
  }
);
  addGetter(GroovyObject.class.getDeclaredMethod("invokeMethod",String.class,Object.class),new MethodCodeBody(){
    public void add(    MethodVisitor methodVisitor) throws Exception {
      String invokeMethodDesc=Type.getMethodDescriptor(Type.getType(Object.class),Type.getType(String.class),Type.getType(Object[].class));
      String objArrayDesc=Type.getType(Object[].class).getDescriptor();
      methodVisitor.visitVarInsn(Opcodes.ALOAD,0);
      String getAsDynamicObjectDesc=Type.getMethodDescriptor(DynamicObjectAware.class.getDeclaredMethod("getAsDynamicObject"));
      methodVisitor.visitMethodInsn(Opcodes.INVOKEVIRTUAL,generatedType.getInternalName(),"getAsDynamicObject",getAsDynamicObjectDesc);
      methodVisitor.visitVarInsn(Opcodes.ALOAD,1);
      methodVisitor.visitVarInsn(Opcodes.ALOAD,2);
      methodVisitor.visitTypeInsn(Opcodes.INSTANCEOF,objArrayDesc);
      Label end=new Label();
      Label notArray=new Label();
      methodVisitor.visitJumpInsn(Opcodes.IFEQ,notArray);
      methodVisitor.visitVarInsn(Opcodes.ALOAD,2);
      methodVisitor.visitTypeInsn(Opcodes.CHECKCAST,objArrayDesc);
      methodVisitor.visitJumpInsn(Opcodes.GOTO,end);
      methodVisitor.visitLabel(notArray);
      methodVisitor.visitInsn(Opcodes.ICONST_1);
      methodVisitor.visitTypeInsn(Opcodes.ANEWARRAY,Type.getType(Object.class).getInternalName());
      methodVisitor.visitInsn(Opcodes.DUP);
      methodVisitor.visitInsn(Opcodes.ICONST_0);
      methodVisitor.visitVarInsn(Opcodes.ALOAD,2);
      methodVisitor.visitInsn(Opcodes.AASTORE);
      methodVisitor.visitLabel(end);
      methodVisitor.visitMethodInsn(Opcodes.INVOKEINTERFACE,DYNAMIC_OBJECT_TYPE.getInternalName(),"invokeMethod",invokeMethodDesc);
    }
  }
);
}
