{
  File dir;
  try {
    dir=theDir.getCanonicalFile();
  }
 catch (  IOException e) {
    throw new JavaExecutableNotFoundException("Unable to find java executable: " + command + " in dir: "+ theDir+ ". It seems the dir is incorrect.",e);
  }
  if (!dir.exists()) {
    return null;
  }
  File executable=new File(dir,addExtension(command));
  if (!executable.exists()) {
    return null;
  }
  return executable.getAbsolutePath();
}
