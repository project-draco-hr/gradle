{
  if (scalaSdkLibrary != null) {
    Node newModuleRootManager=findFirstChildWithAttributeValue(iml,"component","name","NewModuleRootManager");
    if (newModuleRootManager == null) {
      Map<String,Object> attributes=Maps.newHashMapWithExpectedSize(1);
      attributes.put("name","NewModuleRootManager");
      newModuleRootManager=iml.appendNode("component",attributes);
    }
    Node sdkLibrary=findFirstChildWithAttributeValue(newModuleRootManager,"orderEntry","name",scalaSdkLibrary.getName());
    if (sdkLibrary == null) {
      Map<String,Object> attributes=Maps.newHashMapWithExpectedSize(3);
      attributes.put("type","library");
      attributes.put("name",scalaSdkLibrary.getName());
      attributes.put("level","project");
      newModuleRootManager.appendNode("orderEntry",attributes);
    }
  }
}
