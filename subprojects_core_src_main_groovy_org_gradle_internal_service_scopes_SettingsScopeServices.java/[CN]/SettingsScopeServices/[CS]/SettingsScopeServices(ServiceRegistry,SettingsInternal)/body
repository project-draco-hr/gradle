{
  super(parent);
  this.settings=settings;
  register(new Action<ServiceRegistration>(){
    @Override public void execute(    ServiceRegistration serviceRegistration){
      final String customRepoUrl=System.getProperty("org.gradle.plugin.repoUrl");
      if (customRepoUrl != null) {
        PluginRepositoryHandler pluginRepositoryHandler=get(PluginRepositoryHandler.class);
        FileResolver fileResolver=get(FileResolver.class);
        final String normalizedUrl=fileResolver.resolveUri(customRepoUrl).toString();
        pluginRepositoryHandler.maven(new Action<MavenPluginRepository>(){
          @Override public void execute(          MavenPluginRepository mavenPluginRepository){
            mavenPluginRepository.setName("maven");
            mavenPluginRepository.setUrl(normalizedUrl);
          }
        }
);
      }
    }
  }
);
}
