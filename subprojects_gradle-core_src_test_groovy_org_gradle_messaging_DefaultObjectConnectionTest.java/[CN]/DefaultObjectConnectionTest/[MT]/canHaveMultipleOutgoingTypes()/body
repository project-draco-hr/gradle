{
  final TestRemote handler1=context.mock(TestRemote.class);
  final TestRemote2 handler2=context.mock(TestRemote2.class);
  context.checking(new Expectations(){
{
      one(handler1).doStuff("handler 1");
      one(handler2).doStuff("handler 2");
    }
  }
);
  receiver.addIncoming(TestRemote.class,handler1);
  receiver.addIncoming(TestRemote2.class,handler2);
  TestRemote remote1=sender.addOutgoing(TestRemote.class);
  TestRemote2 remote2=sender.addOutgoing(TestRemote2.class);
  remote1.doStuff("handler 1");
  remote2.doStuff("handler 2");
}
