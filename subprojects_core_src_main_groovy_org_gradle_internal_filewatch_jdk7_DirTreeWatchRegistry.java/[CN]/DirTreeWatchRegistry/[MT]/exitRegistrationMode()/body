{
  for (Iterator<Entry<Path,Set<DirectoryTree>>> iterator=pathToDirectoryTrees.entrySet().iterator(); iterator.hasNext(); ) {
    Entry<Path,Set<DirectoryTree>> entry=iterator.next();
    Set<DirectoryTree> updatedDirectories=new HashSet<DirectoryTree>();
    for (    DirectoryTree tree : entry.getValue()) {
      if (liveDirectoryTreeToSourceKeys.containsKey(tree)) {
        updatedDirectories.add(tree);
      }
    }
    if (updatedDirectories.size() == 0) {
      unwatchDirectory(entry.getKey());
      iterator.remove();
    }
 else {
      entry.setValue(updatedDirectories);
    }
  }
}
