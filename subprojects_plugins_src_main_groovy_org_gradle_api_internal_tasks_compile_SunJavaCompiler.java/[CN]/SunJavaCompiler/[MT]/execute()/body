{
  LOGGER.info("Compiling using Sun Java Compiler API.");
  List<String> options=generateCommandLineOptions();
  for (  File file : source) {
    options.add(file.getPath());
  }
  int exitCode=Main.compile(options.toArray(new String[options.size()]));
  if (exitCode != 0 && compileOptions.isFailOnError()) {
    throw new CompilationFailedException();
  }
  return new SimpleWorkResult(true);
}
