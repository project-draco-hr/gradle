{
  LOGGER.info("Compiling using Sun Java Compiler API.");
  listFilesIfRequested(spec);
  List<String> options=generateCommandLineOptions(spec);
  for (  File file : spec.getSource()) {
    options.add(file.getPath());
  }
  int exitCode=Main.compile(options.toArray(new String[options.size()]));
  if (exitCode != 0 && spec.getCompileOptions().isFailOnError()) {
    throw new CompilationFailedException();
  }
  return new SimpleWorkResult(true);
}
