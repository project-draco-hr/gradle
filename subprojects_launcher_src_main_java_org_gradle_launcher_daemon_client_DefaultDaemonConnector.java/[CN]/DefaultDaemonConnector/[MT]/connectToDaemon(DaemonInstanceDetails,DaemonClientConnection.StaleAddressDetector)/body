{
  RemoteConnection<Object> connection;
  try {
    MessageSerializer<Object> serializer=new KryoBackedMessageSerializer<Object>(Serializers.stateful(DaemonMessageSerializer.create()));
    connection=connector.connect(daemon.getAddress()).create(serializer);
  }
 catch (  ConnectException e) {
    staleAddressDetector.maybeStaleAddress(e);
    throw e;
  }
  return new DaemonClientConnection(connection,daemon,staleAddressDetector);
}
