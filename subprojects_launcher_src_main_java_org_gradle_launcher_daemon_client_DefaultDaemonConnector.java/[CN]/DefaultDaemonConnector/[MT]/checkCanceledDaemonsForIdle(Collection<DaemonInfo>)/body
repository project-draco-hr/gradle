{
  Collection<DaemonInfo> idle=daemonRegistry.getIdle();
  CollectionUtils.SetDiff<DaemonInfo> setDiff=CollectionUtils.diffSetsBy(CollectionUtils.toSet(idle),CollectionUtils.toSet(canceledDaemons),new Transformer<String,DaemonInfo>(){
    @Override public String transform(    DaemonInfo daemonInfo){
      return daemonInfo.getContext().getUid();
    }
  }
);
  if (!setDiff.common.isEmpty()) {
    return CollectionUtils.collect(setDiff.common,new Transformer<DaemonInfo,Pair<DaemonInfo,DaemonInfo>>(){
      @Override public DaemonInfo transform(      Pair<DaemonInfo,DaemonInfo> daemonInfoDaemonInfoPair){
        return daemonInfoDaemonInfoPair.getLeft();
      }
    }
);
  }
 else {
    return Collections.emptySet();
  }
}
