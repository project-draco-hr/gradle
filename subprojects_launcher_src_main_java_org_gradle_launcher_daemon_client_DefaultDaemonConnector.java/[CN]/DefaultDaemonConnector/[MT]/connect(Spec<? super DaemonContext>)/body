{
  DaemonConnection connection=findConnection(daemonRegistry.getIdle(),constraint);
  if (connection != null) {
    return connection;
  }
  LOGGER.info("Starting Gradle daemon");
  daemonStarter.run();
  long expiry=System.currentTimeMillis() + connectTimeout;
  do {
    connection=findConnection(daemonRegistry.getIdle(),constraint);
    if (connection != null) {
      return connection;
    }
    try {
      Thread.sleep(200L);
    }
 catch (    InterruptedException e) {
      throw UncheckedException.asUncheckedException(e);
    }
  }
 while (System.currentTimeMillis() < expiry);
  throw new GradleException("Timeout waiting to connect to Gradle daemon.");
}
