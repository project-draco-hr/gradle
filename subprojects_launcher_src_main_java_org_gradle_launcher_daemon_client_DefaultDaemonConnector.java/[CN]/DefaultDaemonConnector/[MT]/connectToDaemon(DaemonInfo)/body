{
  Runnable onFailure=new Runnable(){
    public void run(){
      LOGGER.info(DaemonMessages.REMOVING_DAEMON_ADDRESS_ON_FAILURE + daemonInfo);
      daemonRegistry.remove(daemonInfo.getAddress());
    }
  }
;
  Connection<Object> connection;
  try {
    connection=connector.connect(daemonInfo.getAddress(),getClass().getClassLoader());
  }
 catch (  ConnectException e) {
    onFailure.run();
    throw e;
  }
  return new DaemonClientConnection(connection,daemonInfo.getContext().getUid(),onFailure);
}
