{
  Runnable onFailure=new Runnable(){
    public void run(){
      LOGGER.info("Removing daemon from the registry due to communication failure. Daemon information: {}",daemonInfo);
      daemonRegistry.remove(daemonInfo.getAddress());
    }
  }
;
  return new DaemonClientConnection(connector.connect(daemonInfo.getAddress()),daemonInfo.getContext().getUid(),diagnostics,onFailure);
}
