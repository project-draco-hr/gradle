{
  context.setValidationAction(inputDirValidation);
  final boolean isSourceDir=context.getTarget().getAnnotation(SkipWhenEmpty.class) != null;
  context.setConfigureAction(new UpdateAction(){
    public void update(    Task task,    Callable<Object> futureValue){
      if (isSourceDir) {
        task.getInputs().sourceDir(futureValue);
      }
 else {
        task.getInputs().dir(futureValue);
      }
    }
  }
);
}
