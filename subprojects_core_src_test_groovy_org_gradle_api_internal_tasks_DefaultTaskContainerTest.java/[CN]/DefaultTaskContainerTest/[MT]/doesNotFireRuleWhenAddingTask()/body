{
  Rule rule=context.mock(Rule.class);
  final Map<String,?> options=singletonMap(Task.TASK_NAME,"task");
  final Task task=task("task");
  container.addRule(rule);
  context.checking(new Expectations(){
{
      one(taskFactory).createTask(options);
      will(returnValue(task));
    }
  }
);
  container.add("task");
}
