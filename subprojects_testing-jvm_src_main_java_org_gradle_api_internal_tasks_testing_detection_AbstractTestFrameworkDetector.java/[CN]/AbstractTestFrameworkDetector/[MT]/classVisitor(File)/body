{
  final TestClassVisitor classVisitor=createClassVisitor();
  InputStream classStream=null;
  try {
    classStream=new BufferedInputStream(new FileInputStream(testClassFile));
    byte[] classData=getClassBytes(classStream);
    final ClassReader classReader=new ClassReader(classData);
    classReader.accept(classVisitor,ClassReader.SKIP_DEBUG | ClassReader.SKIP_CODE | ClassReader.SKIP_FRAMES);
  }
 catch (  Throwable e) {
    throw new GradleException("failed to read class file " + testClassFile.getAbsolutePath(),e);
  }
 finally {
    IOUtils.closeQuietly(classStream);
  }
  return classVisitor;
}
