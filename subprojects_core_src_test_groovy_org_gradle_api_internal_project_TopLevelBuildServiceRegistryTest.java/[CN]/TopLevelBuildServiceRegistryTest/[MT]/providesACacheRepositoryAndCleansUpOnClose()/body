{
  assertThat(registry.get(CacheRepository.class),instanceOf(DefaultCacheRepository.class));
  assertThat(registry.get(CacheRepository.class),sameInstance(registry.get(CacheRepository.class)));
  context.checking(new Expectations(){
{
      one(cacheFactory).close();
    }
  }
);
  registry.close();
}
