{
  expectListenerManagerCreated();
  context.checking(new Expectations(){
{
      CacheFactory.CacheReference<PersistentCache> ref=context.mock(CacheFactory.CacheReference.class);
      PersistentCache cache=context.mock(PersistentCache.class);
      allowing(cacheFactory).open(with(notNullValue(File.class)),with(equalTo(startParameter.getCacheUsage())),with(equalTo(Collections.EMPTY_MAP)));
      will(returnValue(ref));
      allowing(ref).getCache();
      will(returnValue(cache));
      ignoring(cache);
    }
  }
);
  assertThat(factory.get(TaskExecuter.class),instanceOf(ExecuteAtMostOnceTaskExecuter.class));
  assertThat(factory.get(TaskExecuter.class),sameInstance(factory.get(TaskExecuter.class)));
}
