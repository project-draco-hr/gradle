{
  encoder.writeSmallInt(value.compareType.ordinal());
  encoder.writeSmallInt(value.snapshots.size());
  for (  String key : value.snapshots.keySet()) {
    encoder.writeString(key);
    IncrementalFileSnapshot incrementalFileSnapshot=value.snapshots.get(key);
    if (incrementalFileSnapshot instanceof DirSnapshot) {
      encoder.writeByte((byte)1);
    }
 else     if (incrementalFileSnapshot instanceof MissingFileSnapshot) {
      encoder.writeByte((byte)2);
    }
 else     if (incrementalFileSnapshot instanceof FileHashSnapshot) {
      encoder.writeByte((byte)3);
      hashValueSerializer.write(encoder,incrementalFileSnapshot.getHash());
    }
  }
}
