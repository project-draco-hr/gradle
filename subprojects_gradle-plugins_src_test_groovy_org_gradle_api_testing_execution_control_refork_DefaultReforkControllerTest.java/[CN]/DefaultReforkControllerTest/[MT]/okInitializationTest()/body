{
  final Pipeline pipeline=context.mock(Pipeline.class);
  final PipelineConfig pipelineConfig=context.mock(PipelineConfig.class);
  final ReforkReasonConfigs reforkReasonConfigs=context.mock(ReforkReasonConfigs.class);
  final DefaultReforkControlInitialiser initialiser=context.mock(DefaultReforkControlInitialiser.class);
  context.checking(new Expectations(){
{
      one(pipeline).getConfig();
      will(returnValue(pipelineConfig));
      one(pipelineConfig).getReforkReasonConfigs();
      will(returnValue(reforkReasonConfigs));
      one(initialiser).initialize(control,reforkReasonConfigs);
    }
  }
);
  control.setInitialiser(initialiser);
  control.initialize(pipeline);
}
