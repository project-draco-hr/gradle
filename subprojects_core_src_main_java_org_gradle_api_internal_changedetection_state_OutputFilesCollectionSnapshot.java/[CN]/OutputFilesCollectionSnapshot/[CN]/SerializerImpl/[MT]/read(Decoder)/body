{
  Map<String,Boolean> roots=new HashMap<String,Boolean>();
  int rootFileIdsCount=decoder.readSmallInt();
  for (int i=0; i < rootFileIdsCount; i++) {
    String path=stringInterner.intern(decoder.readString());
    boolean exists=decoder.readBoolean();
    roots.put(path,exists);
  }
  FileCollectionSnapshot snapshot=serializer.read(decoder);
  return new OutputFilesCollectionSnapshot(roots,snapshot);
}
