{
  LOGGER.info("Registering project '" + project + "' in composite build. Will substitute for module '"+ moduleId+ "'.");
  replacementProjects.put(moduleId,project);
  if (projectMetadata.containsKey(project)) {
    String failureMessage=String.format("Project path '%s' is not unique in composite.",project.getProjectPath());
    throw new ReportedException(new GradleException(failureMessage));
  }
  projectMetadata.put(project,new RegisteredProject(localComponentMetadata,projectDirectory));
}
