{
  if (schema instanceof ModelCollectionSchema) {
    ModelCollectionSchema<T> collectionSchema=(ModelCollectionSchema<T>)schema;
    return ModelCreators.of(modelReference,new ManagedSetInitializer<T>(initializer)).withProjection(ManagedSetModelProjection.of(collectionSchema.getElementType(),schemaStore,this)).descriptor(descriptor).build();
  }
  if (schema.getKind() == ModelSchema.Kind.STRUCT) {
    return ModelCreators.of(modelReference,new ManagedModelInitializer<T>(descriptor,schema,schemaStore,this,initializer)).withProjection(new ManagedModelProjection<T>(schema,schemaStore,proxyFactory)).descriptor(descriptor).build();
  }
  throw new IllegalArgumentException("Don't know how to create model element from schema for " + schema.getType());
}
