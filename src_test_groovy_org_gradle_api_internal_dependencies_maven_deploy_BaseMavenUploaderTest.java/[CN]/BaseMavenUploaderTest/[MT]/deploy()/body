{
  final HashMap<File,File> testDeployableUnits=new HashMap<File,File>(){
{
      put(new File("pom1.xml"),new File("artifact1.jar"));
      put(new File("pom2.xml"),new File("artifact2.jar"));
    }
  }
;
  context.checking(new Expectations(){
{
      one(artifactPomContainerMock).addArtifact(TEST_ARTIFACT,TEST_JAR_FILE);
      allowing(artifactPomContainerMock).createDeployableUnits();
      will(returnValue(testDeployableUnits));
    }
  }
);
  mavenUploader.publish(TEST_IVY_ARTIFACT,TEST_IVY_FILE,true);
  mavenUploader.publish(TEST_ARTIFACT,TEST_JAR_FILE,true);
  checkTransaction(testDeployableUnits);
}
