{
  final int entryCount=decoder.readSmallInt();
  ImmutableList.Builder<FileSnapshotWithKey> fileSnapshotWithKeyListBuilder=ImmutableList.builder();
  for (int i=0; i < entryCount; i++) {
    String key=stringInterner.intern(decoder.readString());
    fileSnapshotWithKeyListBuilder.add(new FileSnapshotWithKey(key,incrementalFileSnapshotSerializer.read(decoder)));
  }
  final ImmutableList<FileSnapshotWithKey> fileSnapshotWithKeyList=fileSnapshotWithKeyListBuilder.build();
  return new StoredTreeSnapshot(fileSnapshotWithKeyList,assignedId);
}
