{
  encoder.writeSmallInt(treeSnapshot.getFileSnapshots().size());
  for (  FileSnapshotWithKey fileSnapshotWithKey : treeSnapshot.getFileSnapshots()) {
    encoder.writeString(fileSnapshotWithKey.getKey());
    incrementalFileSnapshotSerializer.write(encoder,fileSnapshotWithKey.getIncrementalFileSnapshot());
  }
}
