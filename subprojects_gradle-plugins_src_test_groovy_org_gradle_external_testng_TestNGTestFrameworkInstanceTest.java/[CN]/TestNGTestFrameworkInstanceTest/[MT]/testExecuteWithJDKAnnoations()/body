{
  setMocks();
  context.checking(new Expectations(){
{
      one(testMock).getTestSrcDirs();
      will(returnValue(testSrcDirs));
      one(testngOptionsMock).setTestResources(testSrcDirs);
      one(testMock).getTestClassesDir();
      will(returnValue(testClassesDir));
      one(testMock).getClasspath();
      will(returnValue(classpathMock));
      one(testMock).getTestResultsDir();
      will(returnValue(testResultsDir));
      one(testMock).getTestReportDir();
      will(returnValue(testReportDir));
      one(projectMock).getAnt();
      will(returnValue(antBuilderMock));
      one(antTestNGExecuteMock).execute(testClassesDir,classpathMock,testResultsDir,testReportDir,null,null,testngOptionsMock,antBuilderMock);
    }
  }
);
  testNGTestFrameworkInstance.execute(projectMock,testMock,null,null);
}
