{
  this.os=os;
  if (suppliedJavaBase == null) {
    this.javaBase=GFileUtils.canonicalise(new File(System.getProperty("java.home")));
    File toolsJar=findToolsJar(javaBase);
    this.javaHome=toolsJar == null ? javaBase : toolsJar.getParentFile().getParentFile();
    this.userSupplied=false;
  }
 else {
    this.javaBase=suppliedJavaBase;
    this.javaHome=suppliedJavaBase;
    this.userSupplied=true;
  }
}
