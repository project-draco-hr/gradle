{
  if (element instanceof DefaultFileCollectionResolveContext) {
    DefaultFileCollectionResolveContext nestedContext=(DefaultFileCollectionResolveContext)element;
    result.addAll(nestedContext.resolveAsFileCollections());
  }
 else   if (element instanceof FileCollectionInternal) {
    FileCollectionInternal fileCollection=(FileCollectionInternal)element;
    result.add(fileCollection);
  }
 else   if (element instanceof FileCollection) {
    throw new UnsupportedOperationException("Cannot convert instance of FileCollection to FileCollectionInternal");
  }
 else   if (element instanceof MinimalFileCollection) {
    MinimalFileCollection fileCollection=(MinimalFileCollection)element;
    result.add(new FileCollectionAdapter(fileCollection));
  }
 else   if (element instanceof MinimalFileTree) {
    MinimalFileTree fileTree=(MinimalFileTree)element;
    result.add(new FileTreeAdapter(fileTree));
  }
 else   if (element instanceof TaskDependency) {
    return;
  }
 else {
    result.add(new FileCollectionAdapter(new ListBackedFileCollection(fileResolver.resolve(element))));
  }
}
