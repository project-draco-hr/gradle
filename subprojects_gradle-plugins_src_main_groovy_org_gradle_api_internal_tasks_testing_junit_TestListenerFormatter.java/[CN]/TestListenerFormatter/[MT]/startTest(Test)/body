{
  long startTime=timeProvider.getCurrentTime();
  TestInternal testInternal;
synchronized (lock) {
    testInternal=convert(idGenerator.generateId(),test);
    TestState oldState=executing.put(test,new TestState(testInternal,startTime));
    if (oldState != null) {
      throw new IllegalStateException(String.format("Cannot handle a test instance executing multiple times concurrently: %s",testInternal));
    }
  }
  resultProcessor.started(testInternal);
}
