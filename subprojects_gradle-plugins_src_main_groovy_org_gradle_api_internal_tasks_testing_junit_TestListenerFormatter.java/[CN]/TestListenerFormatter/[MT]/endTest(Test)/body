{
  long endTime=timeProvider.getCurrentTime();
  TestInternal testInternal;
  DefaultTestResult result;
synchronized (lock) {
    TestState state=executing.remove(test);
    testInternal=state.test;
    result=new DefaultTestResult(state.failure,state.startTime,endTime);
  }
  resultProcessor.completed(testInternal,result);
}
