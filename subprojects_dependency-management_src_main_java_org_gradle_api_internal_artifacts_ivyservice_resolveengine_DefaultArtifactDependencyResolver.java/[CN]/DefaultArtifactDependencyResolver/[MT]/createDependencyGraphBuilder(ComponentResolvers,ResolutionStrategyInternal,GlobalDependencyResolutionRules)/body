{
  DependencyToComponentIdResolver componentIdResolver=new DependencySubstitutionResolver(componentSource.getComponentIdResolver(),resolutionStrategy.getDependencySubstitutionRule());
  ComponentMetaDataResolver componentMetaDataResolver=new ClientModuleResolver(componentSource.getComponentResolver(),dependencyDescriptorFactory);
  ResolveContextToComponentResolver requestResolver=createResolveContextConverter();
  ConflictHandler conflictHandler=createConflictHandler(resolutionStrategy,globalRules);
  return new DependencyGraphBuilder(componentIdResolver,componentMetaDataResolver,requestResolver,conflictHandler);
}
