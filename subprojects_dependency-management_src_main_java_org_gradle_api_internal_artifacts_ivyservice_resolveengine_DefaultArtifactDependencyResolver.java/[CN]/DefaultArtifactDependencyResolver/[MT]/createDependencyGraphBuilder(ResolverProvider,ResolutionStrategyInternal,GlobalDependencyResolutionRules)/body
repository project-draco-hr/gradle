{
  DependencyToComponentIdResolver componentIdResolver=new DependencySubstitutionResolver(componentSource.getComponentIdResolver(),resolutionStrategy.getDependencySubstitutionRule());
  ComponentMetaDataResolver componentMetaDataResolver=new ClientModuleResolver(componentSource.getComponentResolver(),dependencyDescriptorFactory);
  DependencyToConfigurationResolver dependencyToConfigurationResolver=new DefaultDependencyToConfigurationResolver();
  ResolveContextToComponentResolver requestResolver=createResolveContextConverter();
  ConflictHandler conflictHandler=createConflictHandler(resolutionStrategy,metadataHandler);
  return new DependencyGraphBuilder(componentIdResolver,componentMetaDataResolver,requestResolver,dependencyToConfigurationResolver,conflictHandler);
}
