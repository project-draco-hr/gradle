{
  StringWriter out=new StringWriter();
  PrintWriter wrt=new PrintWriter(out);
  t.printStackTrace(wrt);
  Throwable cause=t.getCause();
  InternalFailure causeFailure=cause != null && cause != t ? fromThrowable(cause) : null;
  return new InternalFailure(t.getMessage(),out.toString(),causeFailure);
}
