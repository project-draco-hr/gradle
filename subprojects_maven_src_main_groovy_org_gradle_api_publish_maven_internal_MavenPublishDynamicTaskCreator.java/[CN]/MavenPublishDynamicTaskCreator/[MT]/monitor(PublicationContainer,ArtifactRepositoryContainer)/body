{
  final NamedDomainObjectSet<MavenPublicationInternal> mavenPublications=publications.withType(MavenPublicationInternal.class);
  final NamedDomainObjectList<MavenArtifactRepository> mavenRepositories=repositories.withType(MavenArtifactRepository.class);
  mavenPublications.all(new Action<MavenPublicationInternal>(){
    public void execute(    MavenPublicationInternal publication){
      for (      MavenArtifactRepository repository : mavenRepositories) {
        maybeCreatePublishTask(publication,repository);
      }
    }
  }
);
  mavenRepositories.all(new Action<MavenArtifactRepository>(){
    public void execute(    MavenArtifactRepository repository){
      for (      MavenPublicationInternal publication : mavenPublications) {
        maybeCreatePublishTask(publication,repository);
      }
    }
  }
);
}
