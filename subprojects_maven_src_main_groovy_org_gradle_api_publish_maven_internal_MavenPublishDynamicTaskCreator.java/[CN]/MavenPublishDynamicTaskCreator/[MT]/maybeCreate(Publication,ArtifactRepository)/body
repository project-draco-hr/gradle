{
  if (!(publication instanceof MavenPublicationInternal)) {
    return;
  }
  if (!(repository instanceof MavenArtifactRepository)) {
    return;
  }
  final MavenPublicationInternal publicationInternal=(MavenPublicationInternal)publication;
  final MavenArtifactRepository mavenRepository=(MavenArtifactRepository)repository;
  String publicationName=publication.getName();
  String repositoryName=repository.getName();
  String publishTaskName=calculatePublishTaskName(publicationName,repositoryName);
  PublishToMavenRepository publishTask=tasks.add(publishTaskName,PublishToMavenRepository.class);
  publishTask.setPublication(publicationInternal);
  publishTask.setRepository(mavenRepository);
  publishTask.setGroup("publishing");
  publishTask.setDescription(String.format("Publishes Maven publication '%s' to Maven repository '%s'",publicationName,repositoryName));
  publishLifecycleTask.dependsOn(publishTask);
}
