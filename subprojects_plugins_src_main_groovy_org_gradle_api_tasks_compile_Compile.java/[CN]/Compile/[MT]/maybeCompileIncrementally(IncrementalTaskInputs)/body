{
  if (!compileOptions.isIncremental()) {
    return false;
  }
  List<File> sourceDirs=getSourceDirs();
  if (sourceDirs.isEmpty()) {
    LOG.lifecycle("{} cannot run incrementally because Gradle cannot infer the source directories.",getPath());
    return false;
  }
  if (!inputs.isIncremental()) {
    LOG.lifecycle("{} is not incremental (e.g. outputs have changed, no previous execution, etc). Using regular compile.",getPath());
    return false;
  }
  SingleMessageLogger.incubatingFeatureUsed("Incremental java compilation");
  SelectiveJavaCompiler compiler=new SelectiveJavaCompiler(javaCompiler,new OutputClassMapper(getDestinationDir()));
  SelectiveCompilation selectiveCompilation=incrementalCompilation.createSelectiveCompilation(inputs,getSource(),getClasspath(),getDestinationDir(),compiler,sourceDirs);
  if (!selectiveCompilation.getCompilationNeeded()) {
    LOG.lifecycle("{} does not require recompilation. Skipping the compiler.",getPath());
    return true;
  }
  Clock clock=new Clock();
  performCompilation(selectiveCompilation.getSource(),selectiveCompilation.getClasspath(),compiler);
  LOG.lifecycle("{} - incremental compilation took {}",getPath(),clock.getTime());
  return true;
}
