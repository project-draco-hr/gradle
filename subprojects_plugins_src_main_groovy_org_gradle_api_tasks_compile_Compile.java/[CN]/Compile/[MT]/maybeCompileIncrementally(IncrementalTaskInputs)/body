{
  if (!compileOptions.isIncremental()) {
    return false;
  }
  List<File> sourceDirs=getSourceDirs();
  if (sourceDirs.isEmpty()) {
    LOG.lifecycle("{} cannot run incrementally because Gradle cannot infer the source directories.",getPath());
    return false;
  }
  if (!inputs.isIncremental()) {
    LOG.lifecycle("{} is not incremental (e.g. outputs have changed, no previous execution, etc). Using regular compile.",getPath());
    return false;
  }
  ClassDependencyInfoSerializer dependencyInfoSerializer=getDependencyInfoSerializer();
  if (!dependencyInfoSerializer.isInfoAvailable()) {
    LOG.lifecycle("{} is not incremental because there is no class dependency data left from previous incremental build.",getPath());
    return false;
  }
  SingleMessageLogger.incubatingFeatureUsed("Incremental java compilation");
  SelectiveJavaCompiler compiler=new SelectiveJavaCompiler(javaCompiler,new OutputClassMapper(getDestinationDir()));
  SelectiveCompilation selectiveCompilation=new SelectiveCompilation(inputs,getSource(),getClasspath(),getDestinationDir(),dependencyInfoSerializer,getJarSnapshotCache(),compiler,sourceDirs,(FileOperations)getProject());
  if (!selectiveCompilation.getCompilationNeeded()) {
    LOG.lifecycle("{} does not require recompilation. Skipping the compiler.",getPath());
    return true;
  }
  Clock clock=new Clock();
  performCompilation(selectiveCompilation.getSource(),selectiveCompilation.getClasspath(),selectiveCompilation.getFullRebuildRequired() ? cleaningCompiler : compiler);
  LOG.lifecycle("{} - incremental compilation took {}",getPath(),clock.getTime());
  return true;
}
