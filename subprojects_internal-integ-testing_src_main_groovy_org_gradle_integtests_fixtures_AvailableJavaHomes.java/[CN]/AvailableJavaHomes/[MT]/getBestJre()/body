{
  Jvm jvm=Jvm.current();
  File jreHome;
  if (OperatingSystem.current().isWindows()) {
    if (jvm.getJavaVersion().isJava6()) {
      jreHome=new File(jvm.getJavaHome().getParentFile(),"jre6");
      if (jreHome.isDirectory() && new File(jreHome,"bin/java.exe").isFile()) {
        return jreHome;
      }
    }
    if (jvm.getJavaVersion().isJava7()) {
      jreHome=new File(jvm.getJavaHome().getParentFile(),"jre7");
      if (jreHome.isDirectory() && new File(jreHome,"bin/java.exe").isFile()) {
        return jreHome;
      }
    }
  }
  jreHome=new File(jvm.getJavaHome(),"jre");
  if (jreHome.isDirectory()) {
    return jreHome;
  }
  return null;
}
