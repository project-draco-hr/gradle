{
  String prefix=tree.getDir().getAbsolutePath() + File.separator;
  if (!file.getAbsolutePath().startsWith(prefix)) {
    return false;
  }
  String[] partsUnderDir=file.getAbsolutePath().substring(prefix.length()).split(QUOTED_SEPARATOR);
  RelativePath path=new RelativePath(true,partsUnderDir);
  return tree.getPatterns().getAsSpec().isSatisfiedBy(new DefaultFileTreeElement(file,path,fileSystem,fileSystem));
}
