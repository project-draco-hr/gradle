{
  String publicationName=publication.getName();
  String repositoryName=repository.getName();
  String publishTaskName=calculatePublishTaskName(publicationName,repositoryName);
  if (tasks.findByName(publishTaskName) == null) {
    PublishToIvyRepository publishTask=tasks.create(publishTaskName,PublishToIvyRepository.class);
    publishTask.setPublication(publication);
    publishTask.setRepository(repository);
    publishTask.setGroup(PublishingPlugin.PUBLISH_TASK_GROUP);
    publishTask.setDescription(String.format("Publishes Ivy publication '%s' to Ivy repository '%s'.",publicationName,repositoryName));
    publishLifecycleTask.dependsOn(publishTask);
  }
}
