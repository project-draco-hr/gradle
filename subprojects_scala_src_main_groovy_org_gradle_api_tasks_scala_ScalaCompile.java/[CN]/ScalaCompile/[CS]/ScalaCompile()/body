{
  ProjectInternal projectInternal=(ProjectInternal)getProject();
  IsolatedAntBuilder antBuilder=getServices().get(IsolatedAntBuilder.class);
  Factory<AntBuilder> antBuilderFactory=getServices().getFactory(AntBuilder.class);
  JavaCompilerFactory inProcessCompilerFactory=new InProcessJavaCompilerFactory();
  TemporaryFileProvider tempFileProvider=projectInternal.getServices().get(TemporaryFileProvider.class);
  DefaultJavaCompilerFactory javaCompilerFactory=new DefaultJavaCompilerFactory(projectInternal,tempFileProvider,antBuilderFactory,inProcessCompilerFactory);
  ScalaCompilerFactory scalaCompilerFactory=new ScalaCompilerFactory(projectInternal,antBuilder,antBuilderFactory,javaCompilerFactory);
  Compiler<ScalaJavaJointCompileSpec> delegatingCompiler=new DelegatingScalaCompiler(scalaCompilerFactory);
  compiler=new IncrementalScalaCompiler(delegatingCompiler,getOutputs());
}
