{
  final Collection<OperationDescriptor> operationDescriptors=testExecutionRequest.getOperationDescriptors();
  final List<InternalJvmTestExecutionDescriptor> internalJvmTestDescriptors=Lists.newArrayList();
  for (  final OperationDescriptor descriptor : operationDescriptors) {
    if (descriptor instanceof JvmTestOperationDescriptor) {
      JvmTestOperationDescriptor jvmTestOperationDescriptor=(JvmTestOperationDescriptor)descriptor;
      internalJvmTestDescriptors.add(new DefaultInternalJvmTestExecutionDescriptor(jvmTestOperationDescriptor.getClassName(),jvmTestOperationDescriptor.getMethodName(),findTaskPath(jvmTestOperationDescriptor)));
    }
 else     if (descriptor instanceof TaskOperationDescriptor) {
      final TaskOperationDescriptor taskOperationDescriptor=(TaskOperationDescriptor)descriptor;
      internalJvmTestDescriptors.add(new DefaultInternalJvmTestExecutionDescriptor(null,null,taskOperationDescriptor.getTaskPath()));
    }
 else {
      throw new TestExecutionException("Invalid TestOperationDescriptor implementation. Only JvmTestOperationDescriptor supported.");
    }
  }
  InternalTestExecutionRequest internalTestExecutionRequest=new DefaultInternalTestExecutionRequest(internalJvmTestDescriptors,testExecutionRequest.getTestClassNames());
  return internalTestExecutionRequest;
}
