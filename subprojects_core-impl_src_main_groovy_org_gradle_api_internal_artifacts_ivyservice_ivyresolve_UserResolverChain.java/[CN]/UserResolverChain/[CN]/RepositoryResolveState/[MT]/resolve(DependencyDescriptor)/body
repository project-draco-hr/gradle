{
  if (!searchedLocally) {
    searchedLocally=true;
    repository.getLocalDependency(dependencyDescriptor,descriptor);
  }
 else {
    searchedRemotely=true;
    repository.getDependency(dependencyDescriptor,descriptor);
  }
  if (descriptor.getState() == BuildableModuleVersionDescriptor.State.Failed) {
    throw descriptor.getFailure();
  }
  if (descriptor.getState() == BuildableModuleVersionDescriptor.State.Resolved) {
    this.moduleSource=descriptor.getModuleSource();
  }
}
