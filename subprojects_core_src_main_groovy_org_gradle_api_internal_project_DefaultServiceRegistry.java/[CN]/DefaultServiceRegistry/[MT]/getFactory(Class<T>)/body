{
  if (closed) {
    throw new IllegalStateException(String.format("Cannot locate factory for objects of type %s, as %s has been closed.",type.getSimpleName(),this));
  }
  for (  Service service : services) {
    Factory<T> factory=service.getFactory(type);
    if (factory != null) {
      return factory;
    }
  }
  if (parent != null) {
    try {
      return parent.getFactory(type);
    }
 catch (    UnknownServiceException e) {
      if (!e.getType().equals(type)) {
        throw e;
      }
    }
  }
  throw new UnknownServiceException(type,String.format("No factory for objects of type %s available in %s.",type.getSimpleName(),this));
}
