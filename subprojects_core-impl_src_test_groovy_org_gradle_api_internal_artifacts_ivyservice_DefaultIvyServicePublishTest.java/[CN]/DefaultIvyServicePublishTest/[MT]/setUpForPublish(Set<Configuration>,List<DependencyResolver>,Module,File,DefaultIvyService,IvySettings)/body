{
  context.checking(new Expectations(){
{
      allowing(dependencyMetaDataProviderMock).getModule();
      will(returnValue(moduleDummy));
      allowing(ivyService.getSettingsConverter()).convertForPublish(publishResolversDummy);
      will(returnValue(ivySettingsDummy));
      allowing(setUpIvyFactory(ivySettingsDummy,ivyService)).getPublishEngine();
      will(returnValue(publishEngineDummy));
      allowing(ivyService.getPublishModuleDescriptorConverter()).convert(configurations,moduleDummy,ivySettingsDummy);
      will(returnValue(publishModuleDescriptorDummy));
      allowing(ivyService.getFileModuleDescriptorConverter()).convert(configurations,moduleDummy,ivySettingsDummy);
      will(returnValue(fileModuleDescriptorMock));
    }
  }
);
}
