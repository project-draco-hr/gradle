{
  context.checking(new Expectations(){
{
      one(factory).create();
      will(returnValue(delegate));
      one(delegate).startProcessing(testListener);
      one(delegate).processTestClass(test1);
      one(delegate).processTestClass(test2);
      one(delegate).endProcessing();
    }
  }
);
  processor.startProcessing(testListener);
  processor.processTestClass(test1);
  processor.processTestClass(test2);
}
