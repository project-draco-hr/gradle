{
  SetMultimap<String,TaskSelectionResult> selected=LinkedHashMultimap.create();
  TaskInternal task=(TaskInternal)project.getTasks().findByName(name);
  if (task != null) {
    selected.put(task.getName(),new LazyTaskSelectionResult(task.getName(),project.getTasks()));
  }
  if (task == null || !task.getImpliesSubProjects()) {
    for (    Project additionalProject : additionalProjects) {
      task=(TaskInternal)additionalProject.getTasks().findByName(name);
      if (task != null) {
        selected.put(task.getName(),new LazyTaskSelectionResult(task.getName(),additionalProject.getTasks()));
      }
    }
  }
  if (!selected.isEmpty()) {
    return selected;
  }
  for (  String taskName : project.getTasks().getNames()) {
    selected.put(taskName,new LazyTaskSelectionResult(taskName,project.getTasks()));
  }
  for (  Project additionalProject : additionalProjects) {
    for (    String taskName : additionalProject.getTasks().getNames()) {
      selected.put(taskName,new LazyTaskSelectionResult(taskName,additionalProject.getTasks()));
    }
  }
  return selected;
}
