{
  if (this.mode != null) {
    return this.mode;
  }
  final Integer specMode=fileDetails.isDirectory() ? spec.getDirMode() : spec.getFileMode();
  if (specMode != null) {
    return specMode;
  }
  return fileDetails.getMode();
}
