{
  PluginClasspathManifest pluginClasspathTask=project.getTasks().create(PLUGIN_CLASSPATH_TASK_NAME,PluginClasspathManifest.class);
  pluginClasspathTask.getConventionMapping().map("pluginClasspath",new Callable<Object>(){
    public Object call() throws Exception {
      return extension.getFunctionalTestClasspath().getPluginSourceSet().getRuntimeClasspath();
    }
  }
);
  return pluginClasspathTask;
}
