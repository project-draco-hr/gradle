{
  ClassPath classPath=classPathFactory.create();
  Factory<? extends ClassLoader> loader=parent.loader(classPath);
  ClassLoaderScope loaderScope=parent.createChild();
  loaderScope.local(loader);
  loaderScope.lock();
  PluginRegistry pluginRegistry=new DefaultPluginRegistry(loaderScope.getLocalClassLoader(),instantiator);
  return pluginRegistry.getTypeForId(pluginId.toString());
}
