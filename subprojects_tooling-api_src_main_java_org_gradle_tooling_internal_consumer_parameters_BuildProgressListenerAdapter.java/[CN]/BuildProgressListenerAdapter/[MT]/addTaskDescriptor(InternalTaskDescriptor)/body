{
  OperationDescriptor cachedTestDescriptor=this.descriptorCache.get(internalTaskDescriptor.getId());
  if (cachedTestDescriptor != null) {
    assertDescriptorType(TaskOperationDescriptor.class,cachedTestDescriptor);
    throw new IllegalStateException(String.format("Operation %s already available.",toString(internalTaskDescriptor)));
  }
  TaskOperationDescriptor newTaskDescriptor=toTaskDescriptor(internalTaskDescriptor);
  descriptorCache.put(internalTaskDescriptor.getId(),newTaskDescriptor);
  return newTaskDescriptor;
}
