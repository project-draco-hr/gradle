{
  OperationDescriptor cached=this.descriptorCache.get(internalBuildDescriptor.getId());
  if (cached != null) {
    assertDescriptorType(BuildOperationDescriptor.class,cached);
    throw new IllegalStateException(String.format("Operation %s already available.",toString(internalBuildDescriptor)));
  }
  BuildOperationDescriptor newTaskDescriptor=toBuildDescriptor(internalBuildDescriptor);
  descriptorCache.put(internalBuildDescriptor.getId(),newTaskDescriptor);
  return newTaskDescriptor;
}
