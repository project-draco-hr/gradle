{
  TestOperationDescriptor cachedTestDescriptor=this.testDescriptorCache.get(testDescriptor.getId());
  if (cachedTestDescriptor != null) {
    throw new IllegalStateException(String.format("Operation %s already available.",toString(testDescriptor)));
  }
  final TestOperationDescriptor parent=getParentTestDescriptor(testDescriptor);
  TestOperationDescriptor newTestDescriptor=toTestDescriptor(testDescriptor,parent);
  testDescriptorCache.put(testDescriptor.getId(),newTestDescriptor);
  return newTestDescriptor;
}
