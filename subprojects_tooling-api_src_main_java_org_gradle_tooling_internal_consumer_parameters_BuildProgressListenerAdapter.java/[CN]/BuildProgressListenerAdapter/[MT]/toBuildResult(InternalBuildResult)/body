{
  if (result instanceof InternalBuildSuccessResult) {
    return new BuildSuccessResult(){
      @Override public long getStartTime(){
        return result.getStartTime();
      }
      @Override public long getEndTime(){
        return result.getEndTime();
      }
    }
;
  }
  if (result instanceof InternalBuildFailureResult) {
    return new BuildFailureResult(){
      @Override public List<? extends Failure> getFailures(){
        return toFailures(result.getFailures());
      }
      @Override public long getStartTime(){
        return result.getStartTime();
      }
      @Override public long getEndTime(){
        return result.getEndTime();
      }
    }
;
  }
  throw new UnsupportedOperationException("Unexpected event type: " + result.getClass().getSimpleName());
}
