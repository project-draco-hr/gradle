{
  final File jarFile=jarFile(type);
  if (!jarFile.exists()) {
    cache.useCache("Generating " + jarFile.getName(),new Runnable(){
      public void run(){
        if (!jarFile.exists()) {
          RuntimeShadedJarCreator creator=new RuntimeShadedJarCreator(progressLoggerFactory,new ImplementationDependencyRelocator(type));
          creator.create(jarFile,classpath);
        }
      }
    }
);
  }
  LOGGER.debug("Using Gradle runtime shaded JAR file: {}",jarFile);
  return jarFile;
}
