{
  validate(source);
  Method[] methods=source.getDeclaredMethods();
  for (  Method method : methods) {
    Annotation annotation=getTypeAnnotation(method);
    if (annotation != null) {
      if (annotation instanceof Model) {
        creationMethod(modelRegistry,method,(Model)annotation);
      }
 else       if (annotation instanceof Mutate) {
        mutationMethod(modelRegistry,method,false);
      }
 else       if (annotation instanceof Finalize) {
        mutationMethod(modelRegistry,method,true);
      }
 else {
        throw new IllegalStateException("Unhandled rule type annotation: " + annotation);
      }
    }
  }
}
