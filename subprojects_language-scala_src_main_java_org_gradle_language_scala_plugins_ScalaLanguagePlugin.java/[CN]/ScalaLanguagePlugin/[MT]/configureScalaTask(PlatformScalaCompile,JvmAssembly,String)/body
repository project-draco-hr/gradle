{
  assembly.builtBy(compile);
  compile.setDescription(description);
  compile.setDestinationDir(single(assembly.getClassDirectories()));
  File analysisFile=new File(compile.getProject().getBuildDir(),String.format("tmp/scala/compilerAnalysis/%s.analysis",compile.getName()));
  compile.getScalaCompileOptions().getIncrementalOptions().setAnalysisFile(analysisFile);
  JavaPlatform javaPlatform=assembly.getTargetPlatform();
  String targetCompatibility=javaPlatform.getTargetCompatibility().toString();
  compile.setTargetCompatibility(targetCompatibility);
  compile.setSourceCompatibility(targetCompatibility);
  if (assembly instanceof ScalaJvmAssembly) {
    compile.setPlatform(((ScalaJvmAssembly)assembly).getScalaPlatform());
  }
 else {
    compile.setPlatform(new DefaultScalaPlatform("2.10.4"));
  }
}
