{
  LOGGER.debug("DaemonExpirationPeriodicCheck running");
  final DaemonExpirationResult expirationCheck=expirationStrategy.checkExpiration(daemon);
  if (expirationCheck.isExpired()) {
    LOGGER.info("Daemon expiration criteria met, requesting stop");
    if (expirationCheck.isImmediate()) {
      LOGGER.lifecycle("Daemon stopping immediately because " + expirationCheck.getReason());
      daemon.getStateCoordinator().requestForcefulStop(expirationCheck.getReason());
      daemon.registryUpdater.onExpire(expirationCheck.getReason());
    }
 else {
      LOGGER.lifecycle("Daemon stopping because " + expirationCheck.getReason());
      daemon.getStateCoordinator().requestStop();
      if (expirationCheck.isTerminated()) {
        daemon.registryUpdater.onExpire(expirationCheck.getReason());
      }
    }
  }
}
