{
  try {
synchronized (lock) {
      while (currentTrigger == null) {
        logger.debug("Waiting for a trigger");
        lock.wait();
      }
      logger.debug("woke up for trigger " + currentTrigger);
      TriggerDetails lastReason=currentTrigger;
      currentTrigger=null;
      return lastReason;
    }
  }
 catch (  InterruptedException e) {
    UncheckedException.throwAsUncheckedException(e);
    return null;
  }
}
