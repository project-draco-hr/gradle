{
  if (schema instanceof ManagedImplSchema) {
    InstanceFactory.ManagedSubtypeImplementationInfo<? extends T> implementationInfo=instanceFactory.getManagedSubtypeImplementationInfo(publicType);
    if (implementationInfo == null) {
      throw new IllegalStateException(String.format("No default implementation registered for managed type '%s'",publicType));
    }
    return implementationInfo.getDelegateType();
  }
 else {
    return instanceFactory.getImplementationType(publicType);
  }
}
