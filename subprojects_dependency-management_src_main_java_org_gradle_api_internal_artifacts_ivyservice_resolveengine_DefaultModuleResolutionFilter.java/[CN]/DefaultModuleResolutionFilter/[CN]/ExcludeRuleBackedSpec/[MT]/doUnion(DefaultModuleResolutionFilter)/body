{
  if (!(other instanceof ExcludeRuleBackedSpec)) {
    return super.doUnion(other);
  }
  ExcludeRuleBackedSpec excludeRuleBackedSpec=(ExcludeRuleBackedSpec)other;
  if (excludeSpecs.equals(excludeRuleBackedSpec.excludeSpecs)) {
    return this;
  }
  List<DefaultModuleResolutionFilter> merged=new ArrayList<DefaultModuleResolutionFilter>();
  boolean allExcludes=true;
  for (  DefaultModuleResolutionFilter thisSpec : excludeSpecs) {
    if (thisSpec instanceof ExcludeRuleSpec) {
      continue;
    }
    for (    DefaultModuleResolutionFilter otherSpec : excludeRuleBackedSpec.excludeSpecs) {
      if (!(otherSpec instanceof ExcludeRuleSpec)) {
        allExcludes=false;
        intersect(thisSpec,otherSpec,merged);
      }
    }
  }
  if (merged.isEmpty()) {
    return allExcludes ? null : ALL_SPEC;
  }
  return new ExcludeRuleBackedSpec(merged);
}
