{
  ModuleDescriptor moduleDescriptor=projectModuleRegistry.findProject(dependencyDescriptor);
  if (moduleDescriptor != null) {
    final ModuleRevisionId moduleRevisionId=moduleDescriptor.getModuleRevisionId();
    final DefaultModuleVersionIdentifier moduleVersionIdentifier=new DefaultModuleVersionIdentifier(moduleRevisionId.getOrganisation(),moduleRevisionId.getName(),moduleRevisionId.getRevision());
    result.resolved(moduleVersionIdentifier,moduleDescriptor,artifactResolver);
  }
 else {
    resolver.resolve(dependencyDescriptor,result);
  }
}
