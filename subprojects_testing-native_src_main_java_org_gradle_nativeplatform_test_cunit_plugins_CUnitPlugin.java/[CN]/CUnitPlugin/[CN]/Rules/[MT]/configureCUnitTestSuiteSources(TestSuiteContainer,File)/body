{
  for (  final CUnitTestSuiteSpec suite : testSuites.withType(CUnitTestSuiteSpec.class).values()) {
    FunctionalSourceSet suiteSourceSet=((ComponentSpecInternal)suite).getFunctionalSourceSet();
    CSourceSet launcherSources=suiteSourceSet.maybeCreate(CUNIT_LAUNCHER_SOURCE_SET,CSourceSet.class);
    File baseDir=new File(buildDir,String.format("src/%s/cunitLauncher",suite.getName()));
    launcherSources.getSource().setSrcDirs(Collections.singleton(new File(baseDir,"c")));
    launcherSources.getExportedHeaders().setSrcDirs(Collections.singleton(new File(baseDir,"headers")));
    CSourceSet testSources=suiteSourceSet.maybeCreate("c",CSourceSet.class);
    testSources.lib(launcherSources);
  }
}
