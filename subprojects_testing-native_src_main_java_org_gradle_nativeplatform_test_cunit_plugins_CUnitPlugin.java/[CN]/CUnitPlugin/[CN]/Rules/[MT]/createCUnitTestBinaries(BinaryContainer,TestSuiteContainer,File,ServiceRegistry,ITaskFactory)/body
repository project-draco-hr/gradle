{
  for (  final CUnitTestSuiteSpec cUnitTestSuite : testSuites.withType(CUnitTestSuiteSpec.class)) {
    for (    NativeBinarySpec testedBinary : cUnitTestSuite.getTestedComponent().getBinaries().withType(NativeBinarySpec.class)) {
      if (testedBinary instanceof SharedLibraryBinary) {
        continue;
      }
      DefaultCUnitTestSuiteBinary testBinary=createTestBinary(serviceRegistry,cUnitTestSuite,testedBinary,taskFactory);
      configure(testBinary,buildDir);
      cUnitTestSuite.getBinaries().add(testBinary);
      binaries.add(testBinary);
    }
  }
}
