{
  rethrowFailure();
  Set<ModuleDependency> allDependencies=configuration.getAllDependencies(ModuleDependency.class);
  Set<ModuleDependency> selectedDependencies=Specs.filterIterable(allDependencies,dependencySpec);
  Set<ResolvedDependency> result=new LinkedHashSet<ResolvedDependency>();
  for (  ModuleDependency moduleDependency : selectedDependencies) {
    result.addAll(conversionResult.getFirstLevelResolvedDependencies().get(moduleDependency));
  }
  return result;
}
