{
  DefaultPublishArtifact publishArtifact=new DefaultPublishArtifact(TEST_NAME,TEST_EXT,TEST_TYPE,null);
  final Artifact transformed=new DefaultArtifact(TEST_MODULE_REVISION_ID,new Date(),"name","type","ext");
  final Transformer<Artifact> transformer=context.mock(Transformer.class);
  context.checking(new Expectations(){
{
      one(transformer).transform(with(Matchers.notNullValue(Artifact.class)));
      will(returnValue(transformed));
    }
  }
);
  publishArtifact.addIvyTransformer(transformer);
  assertSame(transformed,publishArtifact.createIvyArtifact(TEST_MODULE_REVISION_ID));
}
