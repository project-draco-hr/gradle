{
  StringBuffer result=new StringBuffer();
  Matcher matcher=PLACEHOLDER_PATTERN.matcher(value);
  while (matcher.find()) {
    String placeholder=matcher.group(1);
    String replacement=placeholder.startsWith("env.") ? environmentVariables.get(placeholder.substring(4)) : systemProperties.get(placeholder);
    if (replacement == null) {
      throw new CannotLocateLocalMavenRepositoryException(String.format("Cannot resolve placeholder '%s' in value '%s'",placeholder,replacement));
    }
    matcher.appendReplacement(result,Matcher.quoteReplacement(replacement));
  }
  matcher.appendTail(result);
  return result.toString();
}
