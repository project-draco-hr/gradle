{
  final GradleDistribution dist=RuleHelper.getField(target,GradleDistribution.class);
  final TestWorkDirProvider testWorkDirProvider=RuleHelper.getField(target,TestWorkDirProvider.class);
  final String sampleName=getSampleName(method);
  sampleDir=sampleName == null ? null : testWorkDirProvider.getTestWorkDir().file(sampleName);
  return new Statement(){
    @Override public void evaluate() throws Throwable {
      if (sampleName != null) {
        TestFile srcDir=dist.getSamplesDir().file(sampleName).assertIsDir();
        logger.debug("Copying sample '{}' to test directory.",sampleName);
        srcDir.copyTo(sampleDir);
      }
 else {
        logger.debug("No sample specified for this test, skipping.");
      }
      base.evaluate();
    }
  }
;
}
