{
  getResource().read(new Action<InputStream>(){
    public void execute(    InputStream inputStream){
      URL schemaURL=validate ? getSchemaURL() : null;
      InputSource inSrc=new InputSource(inputStream);
      inSrc.setSystemId(descriptorURL.toExternalForm());
      try {
        XMLHelper.parse(inSrc,schemaURL,Parser.this,null);
      }
 catch (      Exception e) {
        throw new MetaDataParseException("Ivy file",getResource(),e);
      }
    }
  }
);
  checkErrors();
  checkConfigurations();
  replaceConfigurationWildcards();
  getMd().setModuleArtifact(DefaultArtifact.newIvyArtifact(getMd().getResolvedModuleRevisionId(),getMd().getPublicationDate()));
  if (!artifactsDeclared) {
    String[] configurationNames=getMd().getConfigurationsNames();
    for (    String configurationName : configurationNames) {
      getMd().addArtifact(configurationName,new MDArtifact(getMd(),getMd().getModuleRevisionId().getName(),"jar","jar"));
    }
  }
  checkErrors();
  getMd().check();
}
