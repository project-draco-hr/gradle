{
  Map ret=new HashMap();
  Collection ignored=Arrays.asList(ignoredAttNames);
  for (int i=0; i < attributes.getLength(); i++) {
    if (!ignored.contains(attributes.getQName(i))) {
      ret.put(attributes.getQName(i),settings.substitute(attributes.getValue(i)));
    }
  }
  return ret;
}
