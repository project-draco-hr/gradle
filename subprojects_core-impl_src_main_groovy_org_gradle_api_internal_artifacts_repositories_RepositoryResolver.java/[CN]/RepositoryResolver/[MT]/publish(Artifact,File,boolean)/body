{
  String destPattern;
  if ("ivy".equals(artifact.getType()) && !getIvyPatterns().isEmpty()) {
    destPattern=(String)getIvyPatterns().get(0);
  }
 else   if (!getArtifactPatterns().isEmpty()) {
    destPattern=(String)getArtifactPatterns().get(0);
  }
 else {
    throw new IllegalStateException("impossible to publish " + artifact + " using "+ this+ ": no artifact pattern defined");
  }
  ModuleRevisionId mrid=artifact.getModuleRevisionId();
  if (isM2compatible()) {
    mrid=convertM2IdForResourceSearch(mrid);
  }
  String dest=getDestination(destPattern,artifact,mrid);
  put(artifact,src,dest,overwrite);
  Message.info("\tpublished " + artifact.getName() + " to "+ hidePassword(dest));
}
