{
  project.getTasks().whenTaskAdded(GroovyCompile.class,new Action<GroovyCompile>(){
    public void execute(    GroovyCompile compile){
      compile.setGroovyClasspath(project.getConfigurations().getByName(GROOVY_CONFIGURATION_NAME));
      compile.conventionMapping(GUtil.map("groovySourceDirs",new ConventionValue(){
        public Object getValue(        Convention convention,        IConventionAware conventionAwareObject){
          return groovy(convention).getGroovySrcDirs();
        }
      }
));
    }
  }
);
  project.getTasks().replace(COMPILE_TASK_NAME,GroovyCompile.class).setDescription("Compiles the Java and Groovy source code.");
}
