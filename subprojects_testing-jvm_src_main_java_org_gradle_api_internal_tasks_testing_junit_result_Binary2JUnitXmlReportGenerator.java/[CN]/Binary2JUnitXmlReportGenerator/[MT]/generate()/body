{
  Clock clock=new Clock();
  testResultsProvider.visitClasses(new Action<TestClassResult>(){
    public void execute(    TestClassResult result){
      File file=new File(testResultsDir,getReportFileName(result));
      OutputStream output=null;
      try {
        output=new FileOutputStream(file);
        xmlWriter.write(result,output);
        output.close();
      }
 catch (      Exception e) {
        throw new GradleException(String.format("Could not write XML test results for %s to file %s.",result.getClassName(),file),e);
      }
 finally {
        IOUtils.closeQuietly(output);
      }
    }
  }
);
  LOG.info("Finished generating test XML results ({}) into: {}",clock.getTime(),testResultsDir);
}
