{
  IvySettings ivySettings=IvyContextualiser.getIvyContext().getSettings();
  GradleParserSettings parserSettings=new ModuleScopedGradleParserSettings(ivySettings,resolver,moduleRevisionId);
  ModuleDescriptorParser parser=parserRegistry.forResource(resource);
  ModuleDescriptor moduleDescriptor=parser.parseDescriptor(parserSettings,resource,true);
  return new ModuleDescriptorAdapter(moduleRevisionId,moduleDescriptor);
}
