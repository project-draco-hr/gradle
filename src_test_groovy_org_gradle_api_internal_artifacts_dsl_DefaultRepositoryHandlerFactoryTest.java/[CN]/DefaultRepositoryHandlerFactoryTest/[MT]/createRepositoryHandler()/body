{
  Map<String,ConventionValue> mavenConventionMapping=WrapUtil.toMap("key",context.mock(ConventionValue.class));
  DefaultRepositoryHandlerFactory repositoryHandlerFactory=new DefaultRepositoryHandlerFactory(repositoryFactoryMock);
  repositoryHandlerFactory.setConvention(convention);
  repositoryHandlerFactory.setConventionMapping(mavenConventionMapping);
  RepositoryHandler repositoryHandler=repositoryHandlerFactory.createRepositoryHandler();
  assertThat(repositoryHandler.getResolverFactory(),Matchers.sameInstance(repositoryFactoryMock));
  assertThat(repositoryHandler.getConventionMapping(),Matchers.equalTo(mavenConventionMapping));
  assertThat(repositoryHandler.getConventionAwareHelper().getConvention(),Matchers.sameInstance(convention));
}
