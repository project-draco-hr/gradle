{
  project.getTasks().withType(ScalaCompile.class).allTasks(new Action<ScalaCompile>(){
    public void execute(    ScalaCompile compile){
      compile.conventionMapping("scalaSrcDirs",new ConventionValue(){
        public Object getValue(        Convention convention,        IConventionAware conventionAwareObject){
          return scala(convention).getScalaSrcDirs();
        }
      }
);
      compile.setDependsOn(WrapUtil.toSet(SCALA_DEFINE_TASK_NAME));
    }
  }
);
  ScalaCompile scalaCompile=project.getTasks().replace(COMPILE_TASK_NAME,ScalaCompile.class);
  javaPlugin.configureForSourceSet(SourceSet.MAIN_SOURCE_SET_NAME,scalaCompile);
  scalaCompile.setDescription("Compiles the Scala source code.");
}
