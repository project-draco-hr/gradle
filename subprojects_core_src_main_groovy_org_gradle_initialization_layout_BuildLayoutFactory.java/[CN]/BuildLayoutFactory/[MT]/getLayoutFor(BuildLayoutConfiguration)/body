{
  if (configuration.isUseEmptySettings()) {
    return new BuildLayout(configuration.getCurrentDir(),configuration.getCurrentDir(),null);
  }
  if (configuration.getSettingsFile() != null) {
    return new BuildLayout(configuration.getCurrentDir(),configuration.getCurrentDir(),configuration.getSettingsFile());
  }
  File currentDir=configuration.getCurrentDir();
  boolean searchUpwards=configuration.isSearchUpwards();
  return getLayoutFor(currentDir,searchUpwards ? null : currentDir.getParentFile());
}
