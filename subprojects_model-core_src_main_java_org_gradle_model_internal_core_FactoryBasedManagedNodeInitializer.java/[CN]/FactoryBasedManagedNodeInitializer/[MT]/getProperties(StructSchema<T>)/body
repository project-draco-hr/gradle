{
  ImmutableSet.Builder<ModelProperty<?>> properties=ImmutableSet.builder();
  addNonDelegatedManagedProperties(schema,delegateSchema,properties);
  for (  ModelType<?> internalView : instanceFactory.getInternalViews(schema.getType())) {
    ModelSchema<?> internalViewSchema=schemaStore.getSchema(internalView);
    if (!(internalViewSchema instanceof ManagedImplStructSchema)) {
      continue;
    }
    addNonDelegatedManagedProperties((ManagedImplStructSchema<?>)internalViewSchema,delegateSchema,properties);
  }
  return properties.build();
}
