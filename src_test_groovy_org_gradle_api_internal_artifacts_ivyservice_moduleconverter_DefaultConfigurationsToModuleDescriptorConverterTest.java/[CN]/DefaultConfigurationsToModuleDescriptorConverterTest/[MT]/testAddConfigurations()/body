{
  Configuration configurationStub1=createNamesAndExtendedConfigurationStub("conf1");
  Configuration configurationStub2=createNamesAndExtendedConfigurationStub("conf2",configurationStub1);
  final DefaultModuleDescriptor moduleDescriptor=HelperUtil.createModuleDescriptor(Collections.EMPTY_SET);
  configurationsToModuleDescriptorConverter.addConfigurations(moduleDescriptor,WrapUtil.toSet(configurationStub1,configurationStub2));
  assertIvyConfigurationIsCorrect(moduleDescriptor.getConfiguration(configurationStub1.getName()),expectedIvyConfiguration(configurationStub1));
  assertIvyConfigurationIsCorrect(moduleDescriptor.getConfiguration(configurationStub2.getName()),expectedIvyConfiguration(configurationStub2));
  assertThat(moduleDescriptor.getConfigurations().length,equalTo(2));
}
