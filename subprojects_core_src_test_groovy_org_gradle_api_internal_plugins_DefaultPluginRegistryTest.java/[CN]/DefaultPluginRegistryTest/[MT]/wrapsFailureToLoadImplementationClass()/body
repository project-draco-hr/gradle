{
  expectClassesNotFound(classLoader);
  try {
    pluginRegistry.getTypeForId(pluginId);
    fail();
  }
 catch (  PluginInstantiationException e) {
    assertThat(e.getMessage(),startsWith("Could not find implementation class '" + TestPlugin1.class.getName() + "' for plugin 'test' specified in "));
    assertThat(e.getCause(),instanceOf(ClassNotFoundException.class));
  }
}
