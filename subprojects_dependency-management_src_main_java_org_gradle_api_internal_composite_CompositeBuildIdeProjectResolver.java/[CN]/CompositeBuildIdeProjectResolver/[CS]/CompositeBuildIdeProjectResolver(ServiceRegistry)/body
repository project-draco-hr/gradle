{
  List<CompositeBuildContext> registries=services.getAll(CompositeBuildContext.class);
  if (!registries.isEmpty()) {
    discovered=registries.iterator().next();
  }
 else {
    discovered=null;
  }
  registry=services.get(LocalComponentRegistry.class);
  artifactBuilders=services.getAll(ProjectArtifactBuilder.class);
}
