{
  ClassLoader applicationClassLoader=Thread.currentThread().getContextClassLoader();
  ListenerBroadcast<TestResultProcessor> processors=new ListenerBroadcast<TestResultProcessor>(TestResultProcessor.class);
  processors.add(new JUnitXmlReportGenerator(testResultsDir));
  processors.add(resultProcessor);
  TestResultProcessor resultProcessorChain=new CaptureTestOutputTestResultProcessor(processors.getSource());
  JUnitTestResultProcessorAdapter listener=new JUnit4TestResultProcessorAdapter(resultProcessorChain,timeProvider,idGenerator);
  executer=new JUnitTestClassExecuter(applicationClassLoader,listener);
}
