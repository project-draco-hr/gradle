{
  Task assembleTask=tasks.getByName(LifecycleBasePlugin.ASSEMBLE_TASK_NAME);
  for (  ProjectBinaryInternal binary : binaries.withType(ProjectBinaryInternal.class)) {
    if (!binary.isLegacyBinary()) {
      Task binaryLifecycleTask=tasks.create(binary.getNamingScheme().getLifecycleTaskName());
      binaryLifecycleTask.setGroup(LifecycleBasePlugin.BUILD_GROUP);
      binaryLifecycleTask.setDescription(String.format("Assembles %s.",binary));
      binary.setBuildTask(binaryLifecycleTask);
      if (binary.isBuildable()) {
        assembleTask.dependsOn(binary);
      }
    }
  }
}
