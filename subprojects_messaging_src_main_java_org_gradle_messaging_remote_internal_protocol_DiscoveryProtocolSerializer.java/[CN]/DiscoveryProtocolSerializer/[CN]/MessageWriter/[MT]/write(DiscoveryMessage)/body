{
  output.writeByte(PROTOCOL_VERSION);
  if (message instanceof LookupRequest) {
    writeLookupRequest((LookupRequest)message);
  }
 else   if (message instanceof ChannelAvailable) {
    writeChannelAvailable((ChannelAvailable)message);
  }
 else   if (message instanceof ChannelUnavailable) {
    writeChannelUnavailable((ChannelUnavailable)message);
  }
 else {
    throw new UnsupportedOperationException();
  }
  output.flush();
}
