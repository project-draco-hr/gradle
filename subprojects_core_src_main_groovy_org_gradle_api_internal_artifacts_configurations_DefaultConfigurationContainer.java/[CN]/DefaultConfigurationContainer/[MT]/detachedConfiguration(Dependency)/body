{
  DetachedConfigurationsProvider detachedConfigurationsProvider=new DetachedConfigurationsProvider();
  String name=DETACHED_CONFIGURATION_DEFAULT_NAME + detachedConfigurationDefaultNameCounter++;
  DefaultConfiguration detachedConfiguration=new DefaultConfiguration(name,name,detachedConfigurationsProvider,ivyService,listenerManager,dependencyMetaDataProvider);
  DomainObjectSet<Dependency> detachedDependencies=detachedConfiguration.getDependencies();
  for (  Dependency dependency : dependencies) {
    detachedDependencies.add(dependency.copy());
  }
  detachedConfigurationsProvider.setTheOnlyConfiguration(detachedConfiguration);
  return detachedConfiguration;
}
