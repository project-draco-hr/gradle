{
  WorkerProcessBuilder builder=services.getFactory(WorkerProcessBuilder.class).create();
  action.makeSerializable();
  builder.worker(action);
  WorkerProcess process=builder.build();
  CompilationListener listener=new CompilationListener(){
    public void stdOut(    CharSequence message){
      System.out.println(message);
    }
    public void stdErr(    CharSequence message){
      System.err.println(message);
    }
    public void completed(    CompilationResult result){
      ForkingJavaCompiler.this.result=result;
    }
  }
;
  process.getConnection().addIncoming(CompilationListener.class,listener);
  process.start();
  process.waitForStop();
  return result;
}
