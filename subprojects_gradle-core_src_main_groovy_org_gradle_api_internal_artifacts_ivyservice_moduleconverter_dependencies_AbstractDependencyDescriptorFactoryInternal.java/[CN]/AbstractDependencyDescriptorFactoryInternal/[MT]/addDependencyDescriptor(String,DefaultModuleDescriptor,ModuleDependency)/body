{
  ModuleRevisionId moduleRevisionId=createModuleRevisionId(dependency);
  DefaultDependencyDescriptor existingDependencyDescriptor=findExistingDescriptor(moduleDescriptor,moduleRevisionId);
  if (existingDependencyDescriptor == null) {
    moduleDescriptor.addDependency(createDependencyDescriptor(dependency,configuration,moduleDescriptor,moduleRevisionId));
  }
 else {
    existingDependencyDescriptor.addDependencyConfiguration(configuration,dependency.getConfiguration());
  }
}
