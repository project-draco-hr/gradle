{
  TaskOutputFilePropertyBuilder propertyBuilder;
  if (Map.class.isAssignableFrom(context.getType())) {
    propertyBuilder=task.getOutputs().namedFiles(Cast.<Callable<Map<?,?>>>uncheckedCast(futureValue));
  }
 else {
    propertyBuilder=task.getOutputs().files(futureValue);
  }
  propertyBuilder.withPropertyName(context.getName());
  propertyBuilder.withPathSensitivity(getPathSensitivity(context));
  task.prependParallelSafeAction(new Action<Task>(){
    public void execute(    Task task){
      for (      File file : toFiles(uncheckedCall(futureValue))) {
        doEnsureExists(file);
      }
    }
  }
);
}
