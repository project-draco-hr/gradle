{
  if (Map.class.isAssignableFrom(context.getType())) {
    task.getOutputs().namedFiles(Cast.<Callable<Map<?,?>>>uncheckedCast(futureValue));
  }
 else {
    task.getOutputs().files(futureValue);
  }
  task.prependParallelSafeAction(new Action<Task>(){
    public void execute(    Task task){
      for (      File file : toFiles(uncheckedCall(futureValue))) {
        doEnsureExists(file);
      }
    }
  }
);
}
