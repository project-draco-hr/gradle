{
  String rootProjectPath=project.getProjectPath().split("::")[0] + "::";
  File buildDir=getProjectDirectory(rootProjectPath);
  File projectDir=getProjectDirectory(project.getProjectPath());
  String name=projectDir.getName();
  File imlFile=new File(projectDir,name + ".iml");
  IvyArtifactName ivyArtifactName=new DefaultIvyArtifactName(name,"iml","iml",null);
  String taskPath=project.getProjectPath().equals(rootProjectPath) ? ":ideaModule" : project.getProjectPath().substring(rootProjectPath.length() - 1) + ":ideaModule";
  CompositeProjectComponentArtifactMetaData artifactMetaData=new CompositeProjectComponentArtifactMetaData(project,ivyArtifactName,imlFile,buildDir,Collections.singleton(taskPath));
  for (  ProjectArtifactBuilder artifactBuilder : artifactBuilders) {
    artifactBuilder.build(artifactMetaData);
  }
  return imlFile;
}
