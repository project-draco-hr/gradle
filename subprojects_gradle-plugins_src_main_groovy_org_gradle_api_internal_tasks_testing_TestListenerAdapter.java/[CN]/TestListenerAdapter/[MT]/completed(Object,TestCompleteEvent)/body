{
  TestState testState=executing.remove(testId);
  if (testState == null) {
    throw new IllegalArgumentException(String.format("Received a completed event for test with unknown id '%s'.",testId));
  }
  TestResult result=testState.completed(event);
  TestInternal test=testState.test;
  if (test.isComposite()) {
    listener.afterSuite(test,result);
  }
 else {
    listener.afterTest(test,result);
  }
}
