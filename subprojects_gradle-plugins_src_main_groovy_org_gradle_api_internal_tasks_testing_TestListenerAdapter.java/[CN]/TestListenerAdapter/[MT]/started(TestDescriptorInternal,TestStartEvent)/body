{
  TestState oldState=executing.put(test.getId(),new TestState(test,event));
  if (oldState != null) {
    throw new IllegalArgumentException(String.format("Received a start event for %s with duplicate id '%s'.",test,test.getId()));
  }
  if (event.getParentId() != null) {
    TestState parentState=executing.get(event.getParentId());
    test.setParent(parentState.test);
  }
  if (test.isComposite()) {
    listener.beforeSuite(test);
  }
 else {
    listener.beforeTest(test);
  }
}
