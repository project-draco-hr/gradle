{
  new PublishOperation(publication,repository){
    @Override protected void publish() throws Exception {
      Factory<Configuration> configurationFactory=new Factory<Configuration>(){
        public Configuration create(){
          return getProject().getConfigurations().detachedConfiguration();
        }
      }
;
      MavenPublisher publisher=new MavenPublisher(configurationFactory,loggingManagerFactory,fileResolver,getProject().getConfigurations(),getTemporaryDirFactory(),getPomMetaInfoProvider());
      MavenNormalizedPublication normalizedPublication=publication.asNormalisedPublication();
      publisher.publish(normalizedPublication,repository);
    }
  }
.run();
}
