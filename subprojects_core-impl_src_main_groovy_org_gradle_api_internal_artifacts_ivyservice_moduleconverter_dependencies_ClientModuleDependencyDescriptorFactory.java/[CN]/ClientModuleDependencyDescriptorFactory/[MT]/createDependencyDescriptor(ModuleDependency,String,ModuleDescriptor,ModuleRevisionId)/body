{
  EnhancedDependencyDescriptor dependencyDescriptor=new EnhancedDependencyDescriptor(dependency,parent,moduleRevisionId,getClientModule(dependency).isForce(),false,getClientModule(dependency).isTransitive());
  addExcludesArtifactsAndDependencies(configuration,getClientModule(dependency),dependencyDescriptor);
  ModuleDescriptor moduleDescriptor=moduleDescriptorFactoryForClientModule.createModuleDescriptor(dependencyDescriptor.getDependencyRevisionId(),getClientModule(dependency).getDependencies());
  clientModuleRegistry.registerClientModule(getClientModule(dependency),moduleDescriptor);
  return dependencyDescriptor;
}
