{
synchronized (lock) {
    ListenerDetails details=allListeners.remove(listener);
    if (details != null) {
      details.remove();
      for (      EventBroadcast<?> broadcaster : broadcasters.values()) {
        broadcaster.maybeRemove(details);
      }
    }
  }
}
