{
  TaskInternal task1=task();
  TaskInternal task2=builder().withPath("other").withOutputFiles(outputDir).task();
  writeTaskState(task1,task2);
  outputDir.deleteDir();
  TaskArtifactState state=repository.getStateFor(task2);
  assertFalse(state.isUpToDate());
  outputDir.createDir().file("some-file").touch();
  state.update();
  state=repository.getStateFor(task2);
  assertTrue(state.isUpToDate());
  state=repository.getStateFor(task1);
  assertFalse(state.isUpToDate());
}
