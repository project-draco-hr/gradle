{
  File reportDir=getReportDir();
  if (reportDir.exists() && reportDir.list().length > 0) {
    GFileUtils.cleanDirectory(reportDir);
  }
  fileStore.moveFilestore(getFileStoreDir());
  OutputStream outputStream;
  Writer writer;
  try {
    outputStream=FileUtils.openOutputStream(getReportFile());
    writer=new OutputStreamWriter(outputStream,Charset.defaultCharset());
  }
 catch (  IOException e) {
    throw new UncheckedIOException(e);
  }
  try {
    createResultRenderer(renderers).render(result,writer);
  }
  finally {
    IOUtils.closeQuietly(writer);
    IOUtils.closeQuietly(outputStream);
  }
}
