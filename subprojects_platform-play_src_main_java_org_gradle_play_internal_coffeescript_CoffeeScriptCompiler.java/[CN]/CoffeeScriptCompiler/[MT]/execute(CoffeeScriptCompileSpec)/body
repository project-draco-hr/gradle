{
  final String coffeeScriptCompiler=getCompilerScript(getClass().getClassLoader());
  if (spec.getSource().getFiles().size() == 0) {
    return new SimpleWorkResult(false);
  }
  spec.getSource().getAsFileTree().visit(new FileVisitor(){
    public void visitDir(    FileVisitDetails dirDetails){
    }
    public void visitFile(    FileVisitDetails fileDetails){
      RelativePath relativePath=fileDetails.getRelativePath();
      File targetFile=relativePath.getFile(new File(spec.getDestinationDir(),"public"));
      String targetFileName=targetFile.getPath().replaceAll("\\.coffee$",".js");
      ScriptResult result=engine.execute(getClass().getClassLoader(),WRAPPER_SCRIPT_NAME,coffeeScriptCompiler,new String[]{fileDetails.getFile().getPath(),targetFileName});
      if (result.getStatus() != ScriptResult.SUCCESS) {
        throw new CoffeeScriptCompileException(String.format("Failed to compile CoffeeScript sources due to: %s",engine.getErrorMessage(result.getStatus())),result.getException());
      }
    }
  }
);
  return new SimpleWorkResult(true);
}
