{
  ConnectRequest request=(ConnectRequest)connection.receive();
  DefaultMultiChannelConnection channelConnection;
  lock.lock();
  try {
    channelConnection=pending.remove(request.getDestinationAddress());
    if (channelConnection == null) {
      throw new IllegalStateException(String.format("Request to connect received for unknown address '%s'.",request.getDestinationAddress()));
    }
  }
  finally {
    lock.unlock();
  }
  channelConnection.setConnection(connection);
}
