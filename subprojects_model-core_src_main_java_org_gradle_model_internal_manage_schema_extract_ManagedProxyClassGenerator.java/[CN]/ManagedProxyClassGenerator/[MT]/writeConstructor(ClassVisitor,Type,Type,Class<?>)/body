{
  String constructorDescriptor;
  Type delegateType;
  if (delegateTypeClass == null) {
    delegateType=null;
    constructorDescriptor=NO_DELEGATE_CONSTRUCTOR_DESCRIPTOR;
  }
 else {
    delegateType=Type.getType(delegateTypeClass);
    constructorDescriptor=Type.getMethodDescriptor(Type.VOID_TYPE,MODEL_ELEMENT_STATE_TYPE,delegateType);
  }
  MethodVisitor constructorVisitor=visitor.visitMethod(Opcodes.ACC_PUBLIC,CONSTRUCTOR_NAME,constructorDescriptor,CONCRETE_SIGNATURE,NO_EXCEPTIONS);
  constructorVisitor.visitCode();
  invokeSuperConstructor(constructorVisitor,superclassType);
  assignStateField(constructorVisitor,generatedType);
  if (delegateType != null) {
    assignDelegateField(constructorVisitor,generatedType,delegateType);
  }
  setCanCallSettersField(constructorVisitor,generatedType,true);
  finishVisitingMethod(constructorVisitor);
}
