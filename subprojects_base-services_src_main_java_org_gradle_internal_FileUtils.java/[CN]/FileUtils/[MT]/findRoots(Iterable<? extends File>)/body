{
  List<File> roots=Lists.newLinkedList();
  files:   for (  File file : files) {
    File target=(file.isDirectory() ? file : file.getParentFile()).getAbsoluteFile();
    String path=target.getPath() + File.separator;
    Iterator<File> rootsIterator=roots.iterator();
    while (rootsIterator.hasNext()) {
      File root=rootsIterator.next();
      String rootPath=root.getPath() + File.separator;
      if (path.startsWith(rootPath)) {
        continue files;
      }
      if (rootPath.startsWith(path)) {
        rootsIterator.remove();
      }
    }
    roots.add(target);
  }
  return roots;
}
