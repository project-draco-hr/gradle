{
  ContainedVersionAnalyzer analyzer=analyzerFactory.create();
  DefaultManifest effectiveManifest=new DefaultManifest(null);
  try {
    setAnalyzerProperties(analyzer);
    Manifest osgiManifest=analyzer.calcManifest();
    for (    Map.Entry<Object,Object> entry : osgiManifest.getMainAttributes().entrySet()) {
      effectiveManifest.attributes(WrapUtil.toMap(entry.getKey().toString(),(String)entry.getValue()));
    }
    effectiveManifest.attributes(this.getAttributes());
    for (    Map.Entry<String,Attributes> ent : getSections().entrySet()) {
      effectiveManifest.attributes(ent.getValue(),ent.getKey());
    }
  }
 catch (  Exception e) {
    throw UncheckedException.throwAsUncheckedException(e);
  }
  return getEffectiveManifestInternal(effectiveManifest);
}
