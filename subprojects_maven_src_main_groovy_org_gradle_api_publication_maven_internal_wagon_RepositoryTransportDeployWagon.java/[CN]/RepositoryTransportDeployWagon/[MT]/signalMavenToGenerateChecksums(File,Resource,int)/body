{
  TransferEvent transferEvent=transferEvent(resource,TransferEvent.TRANSFER_PROGRESS,requestMethod);
  FileInputStream in=null;
  try {
    in=new FileInputStream(file);
    byte[] buffer=new byte[4096];
    while (true) {
      int nread=in.read(buffer);
      if (nread < 0) {
        break;
      }
      this.transferEventSupport.fireTransferProgress(transferEvent,buffer,nread);
    }
    in.close();
  }
 catch (  IOException e) {
    throw new UncheckedIOException(e);
  }
 finally {
    IOUtils.closeQuietly(in);
  }
}
