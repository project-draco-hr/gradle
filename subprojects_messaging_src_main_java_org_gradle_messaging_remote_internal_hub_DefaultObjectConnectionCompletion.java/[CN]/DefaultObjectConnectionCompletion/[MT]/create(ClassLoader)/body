{
  MessageSerializer<InterHubMessage> serializer=new InterHubMessageSerializer(new TypeSafeSerializer<MethodInvocation>(MethodInvocation.class,new MethodInvocationSerializer(messageClassLoader,new JavaSerializer<Object[]>(messageClassLoader))));
  Connection<InterHubMessage> connection=completion.create(serializer);
  MessageHub hub=new MessageHub(connection.toString(),executorFactory,new Action<Throwable>(){
    public void execute(    Throwable throwable){
      LOGGER.error("Unexpected exception thrown.",throwable);
    }
  }
);
  return new MessageHubBackedObjectConnection(hub,connection);
}
