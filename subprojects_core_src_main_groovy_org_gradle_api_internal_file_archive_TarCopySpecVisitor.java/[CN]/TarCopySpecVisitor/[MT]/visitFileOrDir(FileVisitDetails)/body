{
  try {
    final TarEntry entry=new TarEntry(getEntryPath(fileDetails));
    entry.setModTime(fileDetails.getLastModified());
    entry.setMode(getEntryMode(fileDetails));
    writeEntry(fileDetails,entry);
    tarOutStr.closeEntry();
  }
 catch (  Exception e) {
    throw new GradleException(String.format("Could not add %s to TAR '%s'.",fileDetails,tarFile),e);
  }
}
