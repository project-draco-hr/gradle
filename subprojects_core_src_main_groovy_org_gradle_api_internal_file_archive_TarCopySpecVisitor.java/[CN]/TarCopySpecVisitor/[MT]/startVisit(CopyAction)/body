{
  ArchiveCopyAction archiveAction=(ArchiveCopyAction)action;
  try {
    tarFile=archiveAction.getArchivePath();
    OutputStream outStr=archiveAction.getCompressor().compress(tarFile);
    tarOutStr=new TarOutputStream(outStr);
    tarOutStr.setLongFileMode(TarOutputStream.LONGFILE_GNU);
  }
 catch (  Exception e) {
    throw new GradleException(String.format("Could not create TAR '%s'.",tarFile),e);
  }
}
