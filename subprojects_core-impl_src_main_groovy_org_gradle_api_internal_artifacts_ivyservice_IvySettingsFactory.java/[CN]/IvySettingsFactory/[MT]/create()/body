{
  IvySettings ivySettings=new IvySettings();
  PersistentCache cache=cacheRepository.store(String.format("artifacts/%d",CACHE_LAYOUT_VERSION)).withVersionStrategy(VersionStrategy.SharedCache).open();
  ivySettings.setDefaultCache(cache.getBaseDir());
  ivySettings.setDefaultCacheIvyPattern(ArtifactRepositoryContainer.DEFAULT_CACHE_IVY_PATTERN);
  ivySettings.setDefaultCacheArtifactPattern(ArtifactRepositoryContainer.DEFAULT_CACHE_ARTIFACT_PATTERN);
  ivySettings.setVariable("ivy.log.modules.in.use","false");
  WharfCacheManager cacheManager=WharfCacheManager.newInstance(ivySettings);
  ivySettings.setDefaultRepositoryCacheManager(cacheManager);
  return ivySettings;
}
