{
  IvySettings ivySettings=new IvySettings();
  ivySettings.setDefaultCache(cacheMetaData.getCacheDir());
  ivySettings.setDefaultCacheIvyPattern(ArtifactRepositoryContainer.DEFAULT_CACHE_IVY_PATTERN);
  ivySettings.setDefaultCacheArtifactPattern(ArtifactRepositoryContainer.DEFAULT_CACHE_ARTIFACT_PATTERN);
  ivySettings.setVariable("ivy.log.modules.in.use","false");
  WharfCacheManager cacheManager=WharfCacheManager.newInstance(ivySettings);
  cacheManager.setLockFactory(lockHolderFactory);
  cacheManager.setMrmMarshaller(new DefaultMrmMarshaller(lockHolderFactory));
  cacheManager.setWharfResolverMarshaller(new DefaultWharfResolverMarshaller(lockHolderFactory));
  ivySettings.setDefaultRepositoryCacheManager(cacheManager);
  return ivySettings;
}
