{
synchronized (lock) {
    if (localAddress == null) {
      localAddress=connector.accept(handShakeAction());
    }
    Address localAddress=new CompositeAddress(this.localAddress,nextId++);
    pendingActions.put(localAddress,action);
    return localAddress;
  }
}
