{
  Configuration configuration=project.getConfigurations().findByName("testRuntime");
  List<ExternalDependencyVersion1> dependencies=new ArrayList<ExternalDependencyVersion1>();
  final List<EclipseProjectDependencyVersion1> projectDependencies=new ArrayList<EclipseProjectDependencyVersion1>();
  if (configuration != null) {
    Set<File> classpath=configuration.files(new Spec<Dependency>(){
      public boolean isSatisfiedBy(      Dependency element){
        return element instanceof ExternalModuleDependency;
      }
    }
);
    for (    final File file : classpath) {
      dependencies.add(new ExternalDependencyVersion1(){
        public File getFile(){
          return file;
        }
      }
);
    }
    for (    final ProjectDependency projectDependency : configuration.getAllDependencies(ProjectDependency.class)) {
      projectDependencies.add(new EclipseProjectDependencyVersion1(){
        public EclipseProjectVersion2 getTargetProject(){
          return projectMapping.get(projectDependency.getDependencyProject().getPath());
        }
        public String getPath(){
          return projectDependency.getDependencyProject().getName();
        }
      }
);
    }
  }
  EclipseDomainModel eclipseDomainModel=project.getPlugins().getPlugin(EclipsePlugin.class).getEclipseDomainModel();
  List<EclipseSourceDirectoryVersion1> sourceDirectories=new SourceDirectoriesFactory().create(project,eclipseDomainModel.getClasspath());
  List<DefaultEclipseProject> children=new ArrayList<DefaultEclipseProject>();
  for (  Project child : project.getChildProjects().values()) {
    children.add(build(child));
  }
  String name=eclipseDomainModel.getProject().getName();
  DefaultEclipseProject eclipseProject=new DefaultEclipseProject(name,project.getPath(),project.getProjectDir(),children,sourceDirectories,dependencies,projectDependencies);
  for (  DefaultEclipseProject child : children) {
    child.setParent(eclipseProject);
  }
  addProject(project,eclipseProject);
  return eclipseProject;
}
