{
  List<ModelReference<?>> references=ruleDefinition.getReferences();
  ModelType<? extends S> dependency=null;
  for (  ModelReference<?> reference : references) {
    if (expectedDependency.isAssignableFrom(reference.getType())) {
      if (dependency != null) {
        throw new InvalidModelException(String.format("Method %s must have one parameter extending %s. Found multiple parameter extending %s.",getDescription(),expectedDependency.getConcreteClass().getSimpleName(),expectedDependency.getConcreteClass().getSimpleName()));
      }
      dependency=reference.getType().asSubtype(expectedDependency);
    }
  }
  if (dependency == null) {
    throw new InvalidModelException(String.format("Method %s must have one parameter extending %s. Found no parameter extending %s.",getDescription(),expectedDependency.getConcreteClass().getSimpleName(),expectedDependency.getConcreteClass().getSimpleName()));
  }
  dataCollector.put(expectedDependency.getConcreteClass(),dependency.getConcreteClass());
}
