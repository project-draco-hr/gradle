{
  BufferedStreamingHasher hasher=new BufferedStreamingHasher();
  Encoder encoder=hasher.getEncoder();
  try {
    List<VisitedTree> sortedTrees=new ArrayList<VisitedTree>();
    Collections.sort(sortedTrees,DefaultVisitedTree.VisitedTreeComparator.INSTANCE);
    for (    VisitedTree tree : visitedTrees) {
      if (tree.getAbsolutePath() != null) {
        encoder.writeString(tree.getAbsolutePath());
      }
      if (tree.getPatternSet() != null) {
        encoder.writeInt(tree.getPatternSet().hashCode());
      }
      encoder.writeInt(tree.getEntries().size());
      encoder.writeInt(tree.calculatePreCheckHash());
    }
    return hasher.checksum();
  }
 catch (  IOException e) {
    throw UncheckedException.throwAsUncheckedException(e);
  }
}
