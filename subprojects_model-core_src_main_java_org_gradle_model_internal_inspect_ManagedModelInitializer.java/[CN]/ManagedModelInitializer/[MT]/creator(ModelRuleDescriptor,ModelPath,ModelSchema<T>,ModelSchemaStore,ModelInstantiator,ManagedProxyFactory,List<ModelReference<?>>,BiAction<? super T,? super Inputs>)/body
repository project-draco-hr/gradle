{
  final ModelReference<T> modelReference=ModelReference.of(path,schema.getType());
  final ModelAction<T> modelAction=new InitializeAction<T>(modelReference,descriptor,inputs,initializer);
  if (schema.getKind() == ModelSchema.Kind.COLLECTION) {
    ModelProjection projection=ManagedSetModelProjection.of(schema.getType().getTypeVariables().get(0));
    return ModelCreators.of(modelReference,new ManagedSetInitializer<T>(modelInstantiator,schema,modelAction)).withProjection(projection).descriptor(descriptor).inputs(inputs).build();
  }
  return ModelCreators.of(modelReference,new ManagedModelInitializer<T>(descriptor,schema,modelInstantiator,schemaStore,proxyFactory,modelAction)).descriptor(descriptor).withProjection(new ManagedModelProjection<T>(schema.getType(),schemaStore,proxyFactory)).build();
}
