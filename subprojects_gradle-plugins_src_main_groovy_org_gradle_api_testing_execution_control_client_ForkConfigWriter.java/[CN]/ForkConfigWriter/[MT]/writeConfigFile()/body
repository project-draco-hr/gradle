{
  ForkProcessConfig config=new ForkProcessConfig();
  for (  File sharedCpElement : testTask.getClasspath()) {
    if (sharedCpElement.getName().startsWith("junit-") || sharedCpElement.getName().startsWith("testng-")) {
      config.shared(sharedCpElement);
    }
  }
  for (  File sandboxCpElement : testTask.getClasspath()) {
    if (!sandboxCpElement.getName().startsWith("junit-") && !sandboxCpElement.getName().startsWith("testng-")) {
      config.sandbox(sandboxCpElement);
    }
  }
  config.setPipelineId(pipelineId);
  config.setForkId(forkId);
  config.setServerAddress(testServerAddress);
  config.setTestFrameworkId(testTask.getTestFramework().getTestFramework().getId());
  return GUtil.serialize(config);
}
