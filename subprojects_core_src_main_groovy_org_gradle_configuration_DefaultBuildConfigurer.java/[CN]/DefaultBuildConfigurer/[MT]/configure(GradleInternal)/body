{
  gradle.addProjectEvaluationListener(new ImplicitTasksConfigurer());
  gradle.addProjectEvaluationListener(new ProjectDependencies2TaskResolver());
  if (gradle.getStartParameter().isConfigureOnDemand()) {
    LOG.lifecycle(CONFIGURATION_ON_DEMAND_MESSAGE);
    gradle.getRootProject().evaluate();
  }
 else {
    gradle.getRootProject().allprojects((Action)new ConfigureProject());
  }
}
