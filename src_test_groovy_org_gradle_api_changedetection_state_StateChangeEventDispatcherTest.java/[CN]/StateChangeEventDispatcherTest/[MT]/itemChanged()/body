{
  context.checking(new Expectations(){
{
      one(stateChangeEventMock).getFileOrDirectory();
      will(returnValue(fileOrDirectory));
      one(stateChangeEventMock).getNewState();
      will(returnValue(newStateMock));
      one(stateChangeEventMock).getOldState();
      will(returnValue(oldStateMock));
      one(changeProcessorMock).changedFile(fileOrDirectory);
    }
  }
);
  stateChangeEventDispatcher.consume(stateChangeEventMock);
}
