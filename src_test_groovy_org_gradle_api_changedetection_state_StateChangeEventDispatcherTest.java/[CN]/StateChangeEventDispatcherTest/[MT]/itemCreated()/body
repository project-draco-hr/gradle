{
  context.checking(new Expectations(){
{
      one(stateChangeEventMock).getFileOrDirectory();
      will(returnValue(fileOrDirectory));
      one(stateChangeEventMock).getNewState();
      will(returnValue(newStateMock));
      one(stateChangeEventMock).getOldState();
      will(returnValue(null));
      one(changeProcessorMock).createdFile(fileOrDirectory);
    }
  }
);
  stateChangeEventDispatcher.consume(stateChangeEventMock);
}
