{
  Set<GradleParticipantBuild> participants=CollectionUtils.collect(participantBuilders,new Transformer<GradleParticipantBuild,DefaultGradleConnectionParticipantBuilder>(){
    @Override public GradleParticipantBuild transform(    DefaultGradleConnectionParticipantBuilder participantBuilder){
      return participantBuilder.build();
    }
  }
);
  DefaultCompositeConnectionParameters.Builder compositeConnectionParametersBuilder=DefaultCompositeConnectionParameters.builder();
  compositeConnectionParametersBuilder.setBuilds(participants);
  compositeConnectionParametersBuilder.setGradleUserHomeDir(gradleUserHomeDir);
  compositeConnectionParametersBuilder.setDaemonMaxIdleTimeValue(daemonMaxIdleTimeValue);
  compositeConnectionParametersBuilder.setDaemonMaxIdleTimeUnits(daemonMaxIdleTimeUnits);
  compositeConnectionParametersBuilder.setDaemonBaseDir(daemonBaseDir);
  DefaultCompositeConnectionParameters connectionParameters=compositeConnectionParametersBuilder.build();
  Distribution distribution=distributionFactory.getDistribution(GradleVersion.current().getVersion());
  return gradleConnectionFactory.create(distribution,connectionParameters,false);
}
