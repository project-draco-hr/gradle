{
  IndexBlock block=header.getFreeListRoot().findHighestLeaf();
  if (block.entries.size() > 0) {
    IndexEntry entry=block.entries.get(block.entries.size() - 1);
    if (entry.hashCode >= size) {
      block.remove(entry);
      long pos=entry.pos;
      long leftOver=entry.hashCode - size;
      free(pos + size,leftOver);
      return pos;
    }
  }
  long pos=nextBlock;
  nextBlock+=size;
  return pos;
}
