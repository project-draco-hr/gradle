{
  final GradleScriptException exception=new GradleScriptException("<message>",new RuntimeException("<cause>"),context.mock(ScriptSource.class,"script")){
    @Override public String getLocation(){
      return "<location>";
    }
  }
;
  GradleScriptException wrapper=new GradleScriptException("<wrapper>",exception,context.mock(ScriptSource.class,"wrapper"));
  final Matcher<String> errorMessage=allOf(containsString("Build failed with an exception."),containsString("<location>"),containsString("<message>"),containsString("Cause: <cause>"));
  context.checking(new Expectations(){
{
      one(logger).error(with(errorMessage));
    }
  }
);
  reporter.buildFinished(new BuildResult(null,wrapper));
}
