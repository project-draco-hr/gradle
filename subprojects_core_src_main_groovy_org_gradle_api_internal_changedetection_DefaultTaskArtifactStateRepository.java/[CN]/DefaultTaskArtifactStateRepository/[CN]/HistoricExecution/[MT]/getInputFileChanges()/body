{
  final FileCollectionSnapshot inputFilesSnapshot=inputFilesSnapshotter.snapshot(task.getInputs().getFiles());
  final List<TaskExecutionContext.InputFileChange> changes=new ArrayList<TaskExecutionContext.InputFileChange>();
  inputFilesSnapshot.changesSince(lastExecution.getInputFilesSnapshot(),new ChangeListener<File>(){
    public void added(    File element){
      changes.add(new DefaultInputFileChange(element,DefaultInputFileChange.ChangeType.ADDED));
    }
    public void removed(    File element){
      changes.add(new DefaultInputFileChange(element,DefaultInputFileChange.ChangeType.REMOVED));
    }
    public void changed(    File element){
      changes.add(new DefaultInputFileChange(element,DefaultInputFileChange.ChangeType.MODIFIED));
    }
  }
);
  return changes;
}
