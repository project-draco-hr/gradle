{
  if (!GUtil.isTrue(beforeResolverName)) {
    throw new InvalidUserDataException("You must specify beforeResolverName");
  }
  final ArtifactRepository before=getByName(beforeResolverName);
  return addCustomDependencyResolver(userDescription,configureClosure,new Action<ArtifactRepository>(){
    public void execute(    ArtifactRepository repository){
      int insertPos=indexOf(before) + 1;
      if (insertPos == size()) {
        DefaultArtifactRepositoryContainer.super.add(repository);
      }
 else {
        DefaultArtifactRepositoryContainer.this.add(insertPos,repository);
      }
    }
  }
);
}
