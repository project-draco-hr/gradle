{
  String gradleHome=System.getProperty("gradle.home");
  if (gradleHome == null) {
    gradleHome=System.getenv("GRADLE_HOME");
    if (gradleHome == null) {
      throw new RuntimeException("The gradle home must be set either via the system property gradle.home or via the environment variable GRADLE_HOME!");
    }
  }
  String bootStrapDebugValue=System.getProperty("gradle.bootstrap.debug");
  boolean bootStrapDebug=bootStrapDebugValue != null && !bootStrapDebugValue.toUpperCase().equals("FALSE");
  ClassLoader classLoader=ClassLoader.getSystemClassLoader();
  List jars=new ArrayList();
  File[] files=getGradleClasspath(bootStrapDebug);
  for (int i=0; i < files.length; i++) {
    jars.add(files[i].toURL());
  }
  ClassLoader parentClassloader=classLoader.getParent();
  System.out.println("Parent Classloader of new context classloader is: " + parentClassloader);
  System.out.println("Adding the following files to new contex classloader: " + jars);
  ClassLoader contextClassLoader=new URLClassLoader((URL[])jars.toArray(new URL[jars.size()]),parentClassloader);
  classLoader=contextClassLoader;
  Thread.currentThread().setContextClassLoader(contextClassLoader);
  Class mainClass=classLoader.loadClass("org.gradle.Main");
  Method mainMethod=mainClass.getMethod("main",new Class[]{String[].class});
  mainMethod.invoke(null,new Object[]{args});
}
