{
  boolean stacktrace=options.has(Main.STACKTRACE) || options.has(Main.DEBUG);
  boolean fullStacktrace=options.has(Main.FULL_STACKTRACE);
  Formatter formatter=new Formatter();
  formatter.format("%n");
  formatter.format("Build aborted abnormally. ");
  if (!stacktrace && !fullStacktrace) {
    formatter.format(" Run with -%s or -%s option to get stacktrace.",Main.STACKTRACE,Main.DEBUG);
  }
  if (!fullStacktrace) {
    formatter.format(" Run with -%s option to get the full (very verbose) stacktrace.",Main.FULL_STACKTRACE);
  }
  logger.error(formatter.toString());
  if (stacktrace || fullStacktrace) {
    logger.error("Exception is:",fullStacktrace ? failure : StackTraceUtils.deepSanitize(failure));
  }
 else {
    logger.error("Exception: " + failure);
  }
}
