{
  if (pointer < used) {
    ByteBuffer result;
    if (previousBufferToMergeWith != null && previousBufferToMergeWith.hasRemaining()) {
      result=ByteBuffer.allocate(previousBufferToMergeWith.remaining() + bytesUnread()).put(previousBufferToMergeWith).put(buffer,pointer,used - pointer);
      result.flip();
    }
 else {
      if (pointer > 0 || used < size) {
        result=ByteBuffer.wrap(buffer,pointer,used - pointer);
      }
 else {
        result=ByteBuffer.wrap(buffer);
      }
    }
    pointer=used;
    return result;
  }
  return null;
}
