{
  GradleConnector connector=GradleConnector.newConnector();
  if (args.length > 0) {
    connector.useInstallation(new File(args[0]));
    if (args.length > 1) {
      connector.useGradleUserHomeDir(new File(args[1]));
    }
  }
  connector.forProjectDirectory(new File("."));
  ProjectConnection connection=connector.connect();
  try {
    BuildLauncher launcher=connection.newBuild();
    launcher.forTasks("help");
    ByteArrayOutputStream outputStream=new ByteArrayOutputStream();
    ByteArrayOutputStream errorStream=new ByteArrayOutputStream();
    launcher.setStandardOutput(outputStream);
    launcher.setStandardError(errorStream);
    launcher.run();
    System.out.println(outputStream.toString());
    System.err.println(errorStream.toString());
  }
  finally {
    connection.close();
  }
}
