{
  GradleConnector connector=GradleConnector.newConnector();
  String gradleUserHomeDir=System.getProperty("gradle.user.home");
  if (gradleUserHomeDir != null && gradleUserHomeDir.length() > 0) {
    connector.useGradleUserHomeDir(new File(gradleUserHomeDir));
  }
  connector.forProjectDirectory(new File("."));
  if (args.length > 0) {
    connector.useInstallation(new File(args[0]));
  }
  ProjectConnection connection=connector.connect();
  try {
    BuildLauncher launcher=connection.newBuild();
    launcher.forTasks("help");
    ByteArrayOutputStream outputStream=new ByteArrayOutputStream();
    launcher.setStandardOutput(outputStream);
    launcher.setStandardError(outputStream);
    launcher.run();
  }
  finally {
    connection.close();
  }
}
