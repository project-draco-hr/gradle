{
synchronized (lock) {
    if (state == State.UNRESOLVED) {
      cachedResolvedConfiguration=dependencyResolver.resolve(this);
      if (cachedResolvedConfiguration.hasError()) {
        state=State.RESOLVED_WITH_FAILURES;
      }
 else {
        state=State.RESOLVED;
      }
    }
    return cachedResolvedConfiguration;
  }
}
