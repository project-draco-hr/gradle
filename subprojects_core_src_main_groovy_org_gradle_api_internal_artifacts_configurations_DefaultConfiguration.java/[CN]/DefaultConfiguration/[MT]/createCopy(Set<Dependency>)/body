{
  DetachedConfigurationsProvider configurationsProvider=new DetachedConfigurationsProvider();
  DefaultConfiguration copiedConfiguration=new DefaultConfiguration(path + "Copy",name + "Copy",configurationsProvider,dependencyResolver,listenerManager,metaDataProvider,resolutionStrategy);
  configurationsProvider.setTheOnlyConfiguration(copiedConfiguration);
  copiedConfiguration.visibility=visibility;
  copiedConfiguration.transitive=transitive;
  copiedConfiguration.description=description;
  copiedConfiguration.getArtifacts().addAll(getAllArtifacts());
  for (  ExcludeRule excludeRule : getExcludeRules()) {
    copiedConfiguration.excludeRules.add(new DefaultExcludeRule(excludeRule.getExcludeArgs()));
  }
  DomainObjectSet<Dependency> copiedDependencies=copiedConfiguration.getDependencies();
  for (  Dependency dependency : dependencies) {
    copiedDependencies.add(dependency.copy());
  }
  return copiedConfiguration;
}
