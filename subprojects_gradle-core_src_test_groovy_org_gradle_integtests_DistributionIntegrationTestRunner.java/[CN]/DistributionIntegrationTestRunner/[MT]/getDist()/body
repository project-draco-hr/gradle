{
  final TestFile userHomeDir=file("integTest.gradleUserHomeDir","intTestHomeDir");
  final TestFile gradleHomeDir=file("integTest.gradleHomeDir",null);
  TestFile samplesDir=new TestFile(gradleHomeDir,"samples");
  if (!samplesDir.exists()) {
    samplesDir=new TestFile(new File("subprojects/gradle-docs/build/samples"));
  }
  final TestFile samples=samplesDir;
  final TestFile userGuideOutputDir=file("integTest.userGuideOutputDir","subprojects/gradle-docs/src/samples/userguideOutput");
  final TestFile userGuideInfoDir=file("integTest.userGuideInfoDir","subprojects/gradle-docs/build/docbook/src");
  final TestFile distsDir=file("integTest.distsDir","build/distributions");
  final TestFile testDir=new TestFile(GFileUtils.canonicalise(HelperUtil.makeNewTestDir()));
  return new GradleDistribution(){
    public boolean isFileUnderTest(    File file){
      return gradleHomeDir.isSelfOrDescendent(file) || samples.isSelfOrDescendent(file) || testDir.isSelfOrDescendent(file)|| userHomeDir.isSelfOrDescendent(file);
    }
    public TestFile getUserHomeDir(){
      return userHomeDir;
    }
    public TestFile getGradleHomeDir(){
      return gradleHomeDir;
    }
    public TestFile getSamplesDir(){
      return samples;
    }
    public TestFile getUserGuideInfoDir(){
      return userGuideInfoDir;
    }
    public TestFile getUserGuideOutputDir(){
      return userGuideOutputDir;
    }
    public TestFile getDistributionsDir(){
      return distsDir;
    }
    public TestFile getTestDir(){
      return testDir;
    }
    public TestFile testFile(    Object... path){
      return testDir.file(path);
    }
  }
;
}
