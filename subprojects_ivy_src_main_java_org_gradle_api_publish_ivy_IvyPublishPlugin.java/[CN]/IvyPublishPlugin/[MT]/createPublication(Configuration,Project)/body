{
  final DefaultIvyPublication publication=instantiator.newInstance(DefaultIvyPublication.class,"ivy",instantiator,configuration,new ProjectBackedModuleFactory(project));
  IvyDependencyDescriptorInternal descriptor=publication.getIvy();
  DslObject descriptorDslObject=new DslObject(descriptor);
  ConventionMapping descriptorConventionMapping=descriptorDslObject.getConventionMapping();
  descriptorConventionMapping.map("descriptorFile",new Callable<Object>(){
    public Object call() throws Exception {
      return new File(project.getBuildDir(),"publications/" + publication.getName() + "/ivy.xml");
    }
  }
);
  return publication;
}
