{
  lock.lock();
  try {
    Iterator<DelayedMessage> iterator=queue.iterator();
    while (iterator.hasNext()) {
      DelayedMessage next=iterator.next();
      if (next.message.equals(message)) {
        iterator.remove();
        return true;
      }
    }
    return false;
  }
  finally {
    lock.unlock();
  }
}
