{
  ArtifactType context=new DefaultArtifactType(type);
  BuildableArtifactSetResolveResult artifactSetResolveResult=new DefaultBuildableArtifactSetResolveResult();
  artifactResolver.resolveModuleArtifacts(component,context,artifactSetResolveResult);
  for (  ComponentArtifactMetaData artifactMetaData : artifactSetResolveResult.getArtifacts()) {
    BuildableArtifactResolveResult resolveResult=new DefaultBuildableArtifactResolveResult();
    artifactResolver.resolveArtifact(artifactMetaData,component.getSource(),resolveResult);
    if (resolveResult.getFailure() != null) {
      artifacts.addArtifact(type,new DefaultUnresolvedArtifactResult(resolveResult.getFailure()));
    }
 else {
      artifacts.addArtifact(type,new DefaultResolvedArtifactResult(resolveResult.getFile()));
    }
  }
}
