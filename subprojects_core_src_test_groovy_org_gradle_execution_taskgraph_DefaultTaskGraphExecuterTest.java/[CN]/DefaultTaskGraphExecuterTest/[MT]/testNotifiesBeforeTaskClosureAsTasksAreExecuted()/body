{
  final TestClosure runnable=context.mock(TestClosure.class);
  final Task a=task("a");
  final Task b=task("b");
  final Closure closure=toClosure(runnable);
  taskExecuter.beforeTask(closure);
  taskExecuter.addTasks(toList(a,b));
  context.checking(new Expectations(){
{
      one(runnable).call(a);
      one(runnable).call(b);
    }
  }
);
  taskExecuter.execute();
}
