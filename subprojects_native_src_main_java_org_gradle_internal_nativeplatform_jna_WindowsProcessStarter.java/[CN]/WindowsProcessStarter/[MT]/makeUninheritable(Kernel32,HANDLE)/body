{
  if (handle.equals(INVALID_HANDLE_VALUE)) {
    throw new IOException("Invalid handle. Errno: " + kernel32.GetLastError());
  }
  boolean ok=kernel32.SetHandleInformation(handle,HANDLE_FLAG_INHERIT,0);
  if (!ok && kernel32.GetLastError() != ERROR_INVALID_PARAMETER) {
    throw new IOException("Could not set flag on handle. Errno: " + kernel32.GetLastError());
  }
}
