{
  if (elements.isEmpty()) {
    throw new IllegalStateException("Cannot write end element! There are no started elements.");
  }
  maybeFinishElement();
  write("</");
  write(elements.removeLast());
  write(">");
  if (elements.isEmpty()) {
    output.flush();
  }
}
