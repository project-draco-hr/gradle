{
synchronized (clients) {
    for (    List<LockableSftpClient> allSftpClients : clients.values()) {
      for (      LockableSftpClient client : allSftpClients) {
        try {
          client.close();
        }
 catch (        IOException e) {
          logger.warn("Failed to close SFTP client " + client);
        }
      }
    }
  }
  sshClientManager.stopSshClient();
}
