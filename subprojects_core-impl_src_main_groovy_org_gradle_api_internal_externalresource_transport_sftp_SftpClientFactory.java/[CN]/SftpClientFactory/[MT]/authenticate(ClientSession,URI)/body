{
  session.addPasswordIdentity(credentials.getPassword());
  AuthFuture auth=session.auth().awaitUninterruptibly();
  if (!auth.isSuccess()) {
    throw new SftpException(String.format("Invalid credentials for SFTP server at sftp://%s:%d",uri.getHost(),uri.getPort()));
  }
  return session;
}
