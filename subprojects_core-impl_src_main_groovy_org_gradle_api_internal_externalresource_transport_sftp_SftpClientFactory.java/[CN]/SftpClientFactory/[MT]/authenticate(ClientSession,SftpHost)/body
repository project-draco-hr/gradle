{
  session.addPasswordIdentity(sftpHost.getPassword());
  AuthFuture auth=session.auth().awaitUninterruptibly();
  if (!auth.isSuccess()) {
    throw new SftpException(String.format("Invalid credentials for SFTP server at sftp://%s:%d",sftpHost.getHostname(),sftpHost.getPort()));
  }
  return session;
}
