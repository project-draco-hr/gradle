{
  ConnectFuture connectFuture=client.connect(sftpHost.getUsername(),sftpHost.getHostname(),sftpHost.getPort()).awaitUninterruptibly();
  if (!connectFuture.isConnected()) {
    throw new SftpException(String.format("Could not connect to SFTP server at sftp://%s:%d",sftpHost.getHostname(),sftpHost.getPort()));
  }
  return connectFuture.getSession();
}
