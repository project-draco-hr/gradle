{
  if (!name.equals("WORKER_MAIN")) {
    return super.findClassPath(name);
  }
synchronized (lock) {
    if (workerClassPath == null) {
      PersistentCache cache=cacheRepository.cache("workerMain").open();
      File classesDir=new File(cache.getBaseDir(),"classes");
      if (!cache.isValid()) {
        for (        Class<?> aClass : Arrays.asList(GradleWorkerMain.class,BootstrapClassLoaderWorker.class)) {
          String fileName=aClass.getName().replace('.','/') + ".class";
          GFileUtils.copyURLToFile(WorkerProcessClassPathProvider.class.getClassLoader().getResource(fileName),new File(classesDir,fileName));
        }
        cache.markValid();
      }
      workerClassPath=Collections.singleton(classesDir);
    }
    return workerClassPath;
  }
}
