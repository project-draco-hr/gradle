{
  if (message instanceof ChannelAvailable) {
    ChannelAvailable channelAvailable=(ChannelAvailable)message;
    LOGGER.info("Channel discovered: {}",channelAvailable);
    RequestDetails request=channels.get(channelAvailable.getChannel());
    if (request != null) {
      LOGGER.info("Processing request on channel: {}",request.lookupRequest);
      request.handleResponse(channelAvailable);
    }
 else {
      LOGGER.info("No request for channel, ignoring.");
    }
  }
 else   if (!(message instanceof LookupRequest) && !(message instanceof ChannelUnavailable)) {
    LOGGER.info("Received unknown discovery message - discarding: {}",message);
  }
 else {
    LOGGER.info("Ignored incoming discovery message {}",message);
  }
}
