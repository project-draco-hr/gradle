{
  final File expectedSettingsDir=new File("settingsDir");
  ScriptSource expectedScriptSource=context.mock(ScriptSource.class);
  Map<String,String> expectedGradleProperties=WrapUtil.toMap("key","myvalue");
  IProjectDescriptorRegistry expectedProjectDescriptorRegistry=new DefaultProjectDescriptorRegistry();
  StartParameter expectedStartParameter=HelperUtil.dummyStartParameter();
  SettingsFactory settingsFactory=new SettingsFactory(expectedProjectDescriptorRegistry);
  final URLClassLoader urlClassLoader=new URLClassLoader(new URL[0]);
  DefaultSettings settings=(DefaultSettings)settingsFactory.createSettings(expectedSettingsDir,expectedScriptSource,expectedGradleProperties,expectedStartParameter,urlClassLoader);
  assertSame(expectedProjectDescriptorRegistry,settings.getProjectDescriptorRegistry());
  assertEquals(expectedGradleProperties,settings.getAdditionalProperties());
  assertSame(expectedSettingsDir,settings.getSettingsDir());
  assertSame(expectedScriptSource,settings.getSettingsScript());
  assertSame(expectedStartParameter,settings.getStartParameter());
}
