{
  elements.put(target,candidates);
  if (replacedBy != null) {
    targetToSource.put(replacedBy,target);
    if (elements.containsKey(replacedBy)) {
      return registerConflict(target,replacedBy);
    }
  }
  K replacementSource=targetToSource.get(target);
  if (replacementSource != null) {
    return registerConflict(replacementSource,target);
  }
  if (candidates.size() > 1) {
    return registerConflict(target,target);
  }
  return null;
}
