{
  context.checking(new Expectations(){
{
      allowing(pomFilterContainerMock).getActivePomFilters();
      will(returnValue(WrapUtil.toList(pomFilterMock)));
      allowing(pomFilterMock).getName();
      will(returnValue(POMFILTER_NAME));
      allowing(pomFilterMock).getFilter();
      will(returnValue(publishFilterMock));
      allowing(pomFilterMock).getPomTemplate();
      will(returnValue(mavenTemplatePomMock));
      allowing(publishFilterMock).accept(expectedArtifact,expectedFile);
      will(returnValue(true));
      allowing(artifactPomFactoryMock).createArtifactPom(mavenTemplatePomMock);
      will(returnValue(artifactPomMock));
      one(artifactPomMock).addArtifact(expectedArtifact,expectedFile);
      allowing(artifactPomMock).getPom();
      will(returnValue(mavenPomMock));
      allowing(artifactPomMock).getArtifactFile();
      will(returnValue(expectedFile));
      allowing(artifactPomMock).getClassifiers();
      will(returnValue(new HashSet<ClassifierArtifact>()));
      one(pomFileWriterMock).write(with(same(mavenPomMock)),with(same(testConfigurations)),with(equal(expectedPomFile)));
    }
  }
);
  artifactPomContainer.addArtifact(expectedArtifact,expectedFile);
  Set<DeployableFilesInfo> deployableFilesInfos=artifactPomContainer.createDeployableFilesInfos(testConfigurations);
  assertEquals(1,deployableFilesInfos.size());
  assertEquals(expectedFile,deployableFilesInfos.iterator().next().getArtifactFile());
  assertEquals(expectedPomFile,deployableFilesInfos.iterator().next().getPomFile());
}
