{
  context.checking(new Expectations(){
{
      one(repository).getStateFor(task);
      will(returnValue(taskArtifactState));
      one(taskArtifactState).isUpToDate();
      will(returnValue(true));
      one(taskState).upToDate();
    }
  }
);
  executer.execute(task,taskState);
}
