{
  if (moduleDescriptor == null) {
    LOGGER.debug("Recording absence of module descriptor in cache: {} [changing = {}]",moduleRevisionId,isChanging);
    getCache().put(createKey(resolver,moduleRevisionId),createMissingEntry(isChanging));
  }
 else {
    LOGGER.debug("Recording module descriptor in cache: {} [changing = {}]",moduleDescriptor.getModuleRevisionId(),isChanging);
    expireArtifactsForChangingModuleIfRequired(resolver,moduleDescriptor);
    moduleDescriptorStore.putModuleDescriptor(resolver,moduleDescriptor);
    getCache().put(createKey(resolver,moduleRevisionId),createEntry(isChanging));
  }
}
