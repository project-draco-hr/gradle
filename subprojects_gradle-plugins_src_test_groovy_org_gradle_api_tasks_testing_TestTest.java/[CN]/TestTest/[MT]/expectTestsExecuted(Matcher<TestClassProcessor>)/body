{
  context.checking(new Expectations(){
{
      allowing(classpathMock).iterator();
      will(returnIterator(new File("classpath.jar")));
      one(testFrameworkInstanceMock).getProcessorFactory();
      will(returnValue(testProcessorFactoryMock));
      one(testClassScannerFactoryMock).createTestClassScanner(with(sameInstance(test)),with(testClassProcessorMatcher),with(notNullValue(TestListenerAdapter.class)));
      will(returnValue(testClassScannerMock));
      one(testClassScannerMock).run();
      one(testFrameworkInstanceMock).report();
    }
  }
);
}
