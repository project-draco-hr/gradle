{
  plugin.apply(project);
  Task task=project.getTasks().getByName(ApplicationPlugin.TASK_RUN_NAME);
  assertThat(task,instanceOf(JavaExec.class));
  assertThat(task.property("classpath"),equalTo((Object)project.getConvention().getPlugin(JavaPluginConvention.class).getSourceSets().getByName(SourceSet.MAIN_SOURCE_SET_NAME).getRuntimeClasspath()));
}
