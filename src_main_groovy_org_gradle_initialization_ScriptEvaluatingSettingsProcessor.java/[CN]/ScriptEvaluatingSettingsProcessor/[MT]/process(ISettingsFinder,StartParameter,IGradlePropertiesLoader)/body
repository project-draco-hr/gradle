{
  Clock settingsProcessingClock=new Clock();
  initDependencyManagerFactory(settingsFinder);
  SettingsInternal settings=settingsFactory.createSettings(settingsFinder.getSettingsDir(),propertiesLoader.getGradleProperties(),startParameter);
  if (settingsFinder.getSettingsScriptSource().getText() != null) {
    applySettingsScript(settingsFinder,settings);
  }
 else {
    settings=createBasicSettings(settingsFinder,startParameter);
  }
  logger.debug("Timing: Processing settings took: {}",settingsProcessingClock.getTime());
  return settings;
}
