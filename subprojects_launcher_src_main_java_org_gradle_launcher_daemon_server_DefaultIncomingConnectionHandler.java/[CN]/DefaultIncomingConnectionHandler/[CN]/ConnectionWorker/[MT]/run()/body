{
  try {
    Command command=receiveCommand();
    if (command != null) {
      handleCommand(command);
    }
  }
  finally {
    onFinishHandling(connection);
  }
}
