{
  workers.execute(new Runnable(){
    private Command command;
    public void run(){
      try {
        command=(Command)connection.receive();
        LOGGER.info("Daemon (pid: {}) received command: {}.",daemonContext.getPid(),command);
      }
 catch (      Throwable e) {
        String message=String.format("Unable to receive command from connection: '%s'",connection);
        LOGGER.warn(message + ". Dispatching the failure to the daemon client...",e);
        connection.dispatch(new DaemonFailure(new RuntimeException(message,e)));
        return;
      }
      try {
        LOGGER.debug(DaemonMessages.STARTED_EXECUTING_COMMAND + command + " with connection: "+ connection+ ".");
        commandExecuter.executeCommand(connection,command,daemonContext,stateControl);
      }
 catch (      Throwable e) {
        String message=String.format("Uncaught exception when executing command: '%s' from connection: '%s'.",command,connection);
        LOGGER.warn(message + ". Dispatching the failure to the daemon client...",e);
        connection.dispatch(new DaemonFailure(new RuntimeException(message,e)));
      }
 finally {
        LOGGER.debug(DaemonMessages.FINISHED_EXECUTING_COMMAND + command);
      }
    }
  }
);
}
