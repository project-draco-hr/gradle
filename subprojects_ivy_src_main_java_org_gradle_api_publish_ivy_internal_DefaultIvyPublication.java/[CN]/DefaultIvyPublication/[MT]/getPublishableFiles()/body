{
  final List<FileCollection> allFiles=new ArrayList<FileCollection>();
  configurations.withType(DefaultIvyConfiguration.class).all(new Action<DefaultIvyConfiguration>(){
    public void execute(    DefaultIvyConfiguration ivyConfiguration){
      allFiles.add(ivyConfiguration.getArtifacts().getFiles());
    }
  }
);
  allFiles.add(descriptorFile);
  return new UnionFileCollection(allFiles);
}
