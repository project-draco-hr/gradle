{
  ConfigurableFileCollection files=new DefaultConfigurableFileCollection("publication artifacts",fileResolver,taskResolver);
  files.from(new Callable<Set<FileCollection>>(){
    public Set<FileCollection> call() throws Exception {
      return collect(getConfigurations(),new Transformer<FileCollection,Configuration>(){
        public FileCollection transform(        Configuration configuration){
          return configuration.getAllArtifacts().getFiles();
        }
      }
);
    }
  }
);
  if (descriptorArtifact != null) {
    files.from(new Callable<File>(){
      public File call() throws Exception {
        return getDescriptorFile();
      }
    }
);
    files.builtBy(descriptorArtifact);
  }
  return files;
}
