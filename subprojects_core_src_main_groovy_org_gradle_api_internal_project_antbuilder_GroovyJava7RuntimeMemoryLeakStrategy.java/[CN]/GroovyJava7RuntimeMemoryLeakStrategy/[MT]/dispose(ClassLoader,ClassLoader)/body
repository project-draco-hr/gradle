{
  Iterator it=globalClassSetIterator();
  Set<Class> classesToBeCleared=new LinkedHashSet<Class>();
  while (it.hasNext()) {
    Object classInfo=it.next();
    if (classInfo != null) {
      Class clazz=(Class)clazzField.get(classInfo);
      if (inHierarchy(clazz,affectedLoaders)) {
        removeFromGlobalClassValue.invoke(globalClassValue,clazz);
        classesToBeCleared.add(clazz);
      }
    }
  }
  for (  Class clazz : classesToBeCleared) {
    removeClassInfoFromClassValue(clazz);
  }
}
