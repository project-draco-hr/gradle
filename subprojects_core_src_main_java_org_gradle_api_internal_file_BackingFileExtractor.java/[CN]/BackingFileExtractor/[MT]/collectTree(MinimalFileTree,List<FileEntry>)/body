{
  if (fileTree instanceof DirectoryTree) {
    DirectoryTree directoryTree=(DirectoryTree)fileTree;
    results.add(new FileEntry(directoryTree.getDir(),directoryTree.getPatterns()));
  }
 else {
    fileTree.visitTreeOrBackingFile(new FileVisitor(){
      @Override public void visitDir(      FileVisitDetails dirDetails){
        results.add(new FileEntry(dirDetails.getFile()));
      }
      @Override public void visitFile(      FileVisitDetails fileDetails){
        results.add(new FileEntry(fileDetails.getFile()));
      }
    }
);
  }
}
