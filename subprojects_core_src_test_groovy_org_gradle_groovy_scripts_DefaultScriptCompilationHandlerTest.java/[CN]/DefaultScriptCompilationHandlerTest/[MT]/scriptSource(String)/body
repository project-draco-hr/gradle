{
  final ScriptSource source=context.mock(ScriptSource.class,scriptText);
  context.checking(new Expectations(){
{
      Resource resource=context.mock(Resource.class,scriptText + "resource");
      allowing(source).getClassName();
      will(returnValue(scriptClassName));
      allowing(source).getFileName();
      will(returnValue(scriptFileName));
      allowing(source).getDisplayName();
      will(returnValue("script-display-name"));
      allowing(source).getResource();
      will(returnValue(resource));
      allowing(resource).getText();
      will(returnValue(scriptText));
    }
  }
);
  return source;
}
