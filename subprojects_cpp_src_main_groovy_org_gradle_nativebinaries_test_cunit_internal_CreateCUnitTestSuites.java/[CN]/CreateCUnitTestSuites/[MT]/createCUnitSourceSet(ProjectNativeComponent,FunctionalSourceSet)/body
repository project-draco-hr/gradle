{
  CSourceSet cunitSourceSet=componentTestSources.maybeCreate("cunit",CSourceSet.class);
  if (cunitSourceSet.getSource().getSrcDirs().isEmpty()) {
    cunitSourceSet.getSource().srcDir(String.format("src/%s/%s",componentTestSources.getName(),cunitSourceSet.getName()));
  }
  for (  LanguageSourceSet componentSourceSet : testedComponent.getSource().withType(CSourceSet.class)) {
    cunitSourceSet.lib(componentSourceSet);
  }
  createCUnitLauncherTask(cunitSourceSet);
  return cunitSourceSet;
}
