{
  LockableSftpClient client=sftpClientFactory.createSftpClient(parent,credentials);
  try {
    Vector<ChannelSftp.LsEntry> entries=client.getSftpClient().ls(parent.getPath());
    List<URI> list=new ArrayList<URI>();
    for (    ChannelSftp.LsEntry entry : entries) {
      list.add(parent.resolve(entry.getFilename()));
    }
    return list;
  }
 catch (  com.jcraft.jsch.SftpException e) {
    if (e.id == ChannelSftp.SSH_FX_NO_SUCH_FILE) {
      return null;
    }
    throw new SftpException(String.format("Could not list children for resource '%s'.",parent),e);
  }
 finally {
    sftpClientFactory.releaseSftpClient(client);
  }
}
