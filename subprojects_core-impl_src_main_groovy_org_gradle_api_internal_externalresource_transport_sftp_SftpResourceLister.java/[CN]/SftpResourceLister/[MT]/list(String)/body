{
  URI uri=toUri(parent);
  String path=uri.getPath();
  SftpClient client=sftpClientFactory.createSftpClient(uri,credentials);
  try {
    SftpClient.Handle dirHandle=client.openDir(path);
    if (dirHandle != null) {
      try {
        List<String> list=new ArrayList<String>();
        SftpClient.DirEntry[] entries=client.readDir(dirHandle);
        while (entries != null) {
          for (          SftpClient.DirEntry entry : entries) {
            list.add(parent + entry.filename);
          }
          entries=client.readDir(dirHandle);
        }
        return list;
      }
  finally {
        client.close(dirHandle);
      }
    }
 else {
      return null;
    }
  }
  finally {
    sftpClientFactory.releaseSftpClient(client);
  }
}
