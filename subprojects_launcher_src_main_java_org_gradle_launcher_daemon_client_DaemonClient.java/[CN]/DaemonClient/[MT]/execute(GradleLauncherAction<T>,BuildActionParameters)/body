{
  LOGGER.warn("Note: the Gradle build daemon is an experimental feature.");
  LOGGER.warn("As such, you may experience unexpected build failures. You may need to occasionally stop the daemon.");
  while (true) {
    DaemonConnection daemonConnection=connector.connect(compatibilitySpec);
    Result<T> result=runBuild(new Build(action,parameters),daemonConnection.getConnection());
    if (result == null || result instanceof DaemonBusy) {
      continue;
    }
 else     if (result instanceof Failure) {
      throw ((Failure)result).getValue();
    }
 else     if (result instanceof Success) {
      return result.getValue();
    }
 else {
      throw new IllegalStateException(String.format("Daemon returned %s for which there is no strategy to handle (i.e. is an unknown Result type)",result));
    }
  }
}
