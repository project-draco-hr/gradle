{
  int daemonLogLines=20;
  LOGGER.error("The message received from the daemon indicates that the daemon has disappeared." + "\nDaemon pid: " + diagnostics.getPid() + "\nDaemon log: "+ diagnostics.getDaemonLog()+ "\nBuild request sent: "+ build+ "\nAttempting to read last "+ daemonLogLines+ " lines from the daemon log...");
  try {
    String tail=GFileUtils.tail(diagnostics.getDaemonLog(),daemonLogLines);
    LOGGER.error("Last " + daemonLogLines + " lines from "+ diagnostics.getDaemonLog().getName()+ ":"+ "\n----------\n"+ tail+ "----------\n");
  }
 catch (  GFileUtils.TailReadingException e) {
    LOGGER.error("Unable to read from the daemon log file because of: " + e);
    LOGGER.debug("Problem reading the daemon log file.",e);
  }
  throw new DaemonDisappearedException();
}
