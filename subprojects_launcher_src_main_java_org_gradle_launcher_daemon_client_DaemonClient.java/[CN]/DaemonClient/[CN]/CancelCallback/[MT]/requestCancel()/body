{
  StoppableExecutor executor=executorFactory.create("Build cancellation executor.");
  LOGGER.debug("Scheduling daemon cancel request to handle build cancellation...");
  executor.execute(new Runnable(){
    public void run(){
      LOGGER.info("Request daemon to cancel build...");
      DaemonClientConnection connection=connector.maybeConnect(executingCompatibilitySpec);
      if (connection == null) {
        LOGGER.error("Cannot connect to daemon process to cancel the build.");
        return;
      }
      new CancelDispatcher(idGenerator).dispatch(connection,buildId);
      LOGGER.lifecycle("Gradle build cancelled.");
      connection.stop();
    }
  }
);
  this.executor=executor;
}
