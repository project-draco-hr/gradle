{
  super(tempFileProvider,new LazilyInitializedFileCollection(){
    @Override public FileCollectionInternal createDelegate(){
      File archiveFile=fileCollection.getSingleFile();
      String fileExtension=Files.getFileExtension(archiveFile.getName());
      FileTree archiveContents=fileExtension.equals("jar") || fileExtension.equals("zip") ? fileOperations.zipTree(archiveFile) : fileOperations.tarTree(archiveFile);
      PatternSet patternSet=new PatternSet();
      patternSet.include(path);
      return (FileCollectionInternal)archiveContents.matching(patternSet);
    }
    public TaskDependency getBuildDependencies(){
      return fileCollection.getBuildDependencies();
    }
  }
,charset);
}
