{
  context.checking(new Expectations(){
{
      one(digesterFactoryMock).createDigester();
      will(returnValue(digesterMock));
    }
  }
);
  MessageDigest digester=digesterCache.getDigester(okDigesterKey);
  assertNotNull(digester);
  assertEquals(digester,digesterMock);
  context.checking(new Expectations(){
{
      one(digesterMock).reset();
    }
  }
);
  digester=digesterCache.getDigester(okDigesterKey);
  assertNotNull(digester);
  assertEquals(digester,digesterMock);
}
