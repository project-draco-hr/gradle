{
  ExecHandleBuilder builder=new ExecHandleBuilder();
  builder.inheritEnvironment();
  builder.execDirectory(new File(System.getProperty("user.dir")));
  builder.execCommand(new File(System.getProperty("java.home") + "/bin/java").getPath());
  builder.arguments("-cp",System.getProperty("java.class.path"));
  builder.arguments(mainClass,String.valueOf(port));
  ExecHandle proc=builder.getExecHandle();
  ExecHandleState result=proc.startAndWaitForFinish();
  assertTrue(result == ExecHandleState.SUCCEEDED);
}
