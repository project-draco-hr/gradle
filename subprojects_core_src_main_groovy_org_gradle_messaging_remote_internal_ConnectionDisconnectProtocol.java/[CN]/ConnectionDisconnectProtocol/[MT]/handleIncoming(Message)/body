{
  if (message instanceof EndOfStreamEvent) {
    LOGGER.debug("Received incoming EOS. Stopping");
    assert stopping;
    context.stopped();
  }
 else   if (stopping) {
    LOGGER.debug("Discarding message received while stopping: {}",message);
  }
 else {
    context.dispatchIncoming(message);
  }
}
