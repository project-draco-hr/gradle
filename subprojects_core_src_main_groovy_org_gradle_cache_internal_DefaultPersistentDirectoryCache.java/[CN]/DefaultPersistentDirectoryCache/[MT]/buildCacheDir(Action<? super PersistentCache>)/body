{
  lockFileAccess.seek(0);
  lockFileAccess.writeByte(LOCK_PROTOCOL);
  lockFileAccess.writeBoolean(false);
  for (  File file : dir.listFiles()) {
    if (file.equals(lockFile) || file.equals(propertiesFile)) {
      continue;
    }
    FileUtils.forceDelete(file);
  }
  if (initAction != null) {
    initAction.execute(this);
  }
  GUtil.saveProperties(properties,propertiesFile);
  lockFileAccess.seek(0);
  lockFileAccess.writeByte(LOCK_PROTOCOL);
  lockFileAccess.writeBoolean(true);
}
