{
  if (OperatingSystem.current().isWindows()) {
    return new WindowsFilePermissionHandler();
  }
 else   if (Jvm.current().isJava7()) {
    try {
      String jdkFilePermissionclass="org.gradle.internal.nativeplatform.jdk7.PosixJdk7FilePermissionHandler";
      FilePermissionHandler jdk7FilePermissionHandler=(FilePermissionHandler)FilePermissionHandler.class.getClassLoader().loadClass(jdkFilePermissionclass).newInstance();
      return jdk7FilePermissionHandler;
    }
 catch (    Exception e) {
      LOGGER.warn("Unable to load Jdk7FilePermissionHandler",e);
    }
  }
  return new PosixFilePermissionHandler();
}
