{
  Instantiator instantiator=get(Instantiator.class);
  ProjectDependenciesBuildInstruction projectDependenciesBuildInstruction=new ProjectDependenciesBuildInstruction(get(StartParameter.class).isBuildProjectDependencies());
  ProjectDependencyFactory projectDependencyFactory=new ProjectDependencyFactory(projectDependenciesBuildInstruction,instantiator);
  DependencyProjectNotationParser projParser=new DependencyProjectNotationParser(projectDependenciesBuildInstruction,instantiator);
  NotationParser<? extends Dependency> moduleMapParser=new DependencyMapNotationParser<DefaultExternalModuleDependency>(instantiator,DefaultExternalModuleDependency.class);
  NotationParser<? extends Dependency> moduleStringParser=new DependencyStringNotationParser<DefaultExternalModuleDependency>(instantiator,DefaultExternalModuleDependency.class);
  NotationParser<? extends Dependency> selfResolvingDependencyFactory=new DependencyFilesNotationParser(instantiator);
  List<NotationParser<? extends Dependency>> notationParsers=WrapUtil.toList(moduleStringParser,moduleMapParser,selfResolvingDependencyFactory,projParser,new DependencyClassPathNotationParser(instantiator,get(ClassPathRegistry.class),new IdentityFileResolver()));
  DependencyNotationParser dependencyNotationParser=new DependencyNotationParser(notationParsers);
  return new DefaultDependencyFactory(dependencyNotationParser,new ClientModuleNotationParser(instantiator),projectDependencyFactory);
}
