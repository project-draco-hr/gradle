{
  ExternalArtifactCacheBuilder cacheBuilder=new ExternalArtifactCacheBuilder(get(ArtifactCacheMetaData.class),get(LocalMavenRepositoryLocator.class));
  cacheBuilder.addCurrent(get(ArtifactFileStore.class));
  cacheBuilder.addMilestone8and9();
  cacheBuilder.addMilestone7();
  cacheBuilder.addMilestone6();
  cacheBuilder.addMilestone3();
  cacheBuilder.addMavenLocal();
  cacheBuilder.setUrlCache(new ArtifactResolutionCacheArtifactCache(get(ArtifactUrlCachedResolutionIndex.class)));
  return new RepositoryTransportFactory(cacheBuilder.getExternalArtifactCache(),get(ProgressLoggerFactory.class),get(ArtifactFileStore.class),get(ArtifactUrlCachedResolutionIndex.class));
}
