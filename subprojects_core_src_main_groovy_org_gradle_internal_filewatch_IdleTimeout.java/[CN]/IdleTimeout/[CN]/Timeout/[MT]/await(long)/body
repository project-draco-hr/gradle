{
  if (lastActivityAt == -1) {
    Thread.sleep(timeoutMillis);
  }
 else {
    long sinceActivity=nowFactory.create() - lastActivityAt;
    if (sinceActivity >= timeoutMillis) {
      return true;
    }
 else {
      Thread.sleep(timeoutMillis - sinceActivity);
    }
  }
  return false;
}
