{
  DefaultBuildableComponentResolveResult rootModule=new DefaultBuildableComponentResolveResult();
  moduleResolver.resolve(configuration.getModule(),configuration.getAll(),rootModule);
  ResolveState resolveState=new ResolveState(rootModule,configuration.getName(),idResolver,metaDataResolver,dependencyToConfigurationResolver,artifactResolver);
  conflictHandler.registerResolver(new DirectDependencyForcingResolver(resolveState.root.moduleRevision));
  traverseGraph(resolveState,conflictHandler);
  assembleResult(resolveState,modelVisitor);
}
