{
  if (artifacts == null) {
    BuildableArtifactSetResolveResult result=new DefaultBuildableArtifactSetResolveResult();
    resolveState.artifactResolver.resolveModuleArtifacts(metaData.getComponent(),new DefaultComponentUsage(metaData.getName()),result);
    artifacts=result.getArtifacts();
  }
  Set<ResolvedArtifact> result=new LinkedHashSet<ResolvedArtifact>();
  ModuleIdentifier moduleId=id.getId().getModule();
  for (  ComponentArtifactMetaData artifact : artifacts) {
    IvyArtifactName artifactName=artifact.getName();
    if (!moduleResolutionFilter.acceptArtifact(moduleId,artifactName)) {
      continue;
    }
    ResolvedArtifact resolvedArtifact=resolvedArtifacts.get(artifactName);
    if (resolvedArtifact == null) {
      resolvedArtifact=builder.newArtifact(id,metaData.getComponent(),artifact,resolveState.artifactResolver);
      resolvedArtifacts.put(artifactName,resolvedArtifact);
    }
    result.add(resolvedArtifact);
  }
  return result;
}
