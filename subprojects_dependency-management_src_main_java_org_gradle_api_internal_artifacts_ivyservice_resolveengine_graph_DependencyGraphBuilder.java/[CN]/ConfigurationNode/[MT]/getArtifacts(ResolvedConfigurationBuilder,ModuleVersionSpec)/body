{
  if (requiresArtifactResolution) {
    artifacts=new LinkedHashSet<ResolvedArtifact>();
    BuildableArtifactSetResolveResult result=new DefaultBuildableArtifactSetResolveResult();
    resolveState.artifactResolver.resolveModuleArtifacts(metaData.getComponent(),new DefaultComponentUsage(metaData.getName()),result);
    boolean unsatisfiedArtifactSpec=false;
    for (    ComponentArtifactMetaData artifact : result.getArtifacts()) {
      ModuleId moduleId=ModuleId.newInstance(id.getModuleGroup(),id.getModuleName());
      ArtifactId artifactId=new ArtifactId(moduleId,artifact.getName().getName(),artifact.getName().getType(),artifact.getName().getExtension());
      if (artifactVersionSpec.isSatisfiedBy(artifactId)) {
        artifacts.add(builder.newArtifact(id,metaData.getComponent(),artifact,resolveState.artifactResolver));
      }
 else {
        unsatisfiedArtifactSpec=true;
      }
    }
    requiresArtifactResolution=unsatisfiedArtifactSpec;
  }
  return artifacts;
}
