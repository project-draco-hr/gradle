{
  ForkControl forkControl=new ForkControl(testTask.getMaximumNumberOfForks());
  PipelineFactory pipelineFactory=new PipelineFactory(testTask);
  TestPipelineSplitOrchestrator pipelineSplitOrchestrator=new TestPipelineSplitOrchestrator();
  DefaultTestClassScannerFactory testClassScannerFactory=new DefaultTestClassScannerFactory();
  TestDetectionOrchestrator detectionOrchestrator=new DefaultTestDetectionOrchestrator(testClassScannerFactory.createTestClassScanner(testTask,pipelineSplitOrchestrator.getProcessor()));
  ReportsManager reportOrchestrator=new DefaultReportsManager();
  PipelinesManager pipelinesManager=new PipelinesManager(pipelineFactory,forkControl,reportOrchestrator.getProcessor());
  return new TestOrchestratorContext(testOrchestrator,detectionOrchestrator,pipelineSplitOrchestrator,pipelinesManager,reportOrchestrator);
}
