{
  detectionRunStateLock.lock();
  try {
    if (detectionRunner != null && detectionThread != null) {
      ThreadUtils.join(detectionThread);
      detectionThread=null;
      detectionRunner=null;
    }
  }
  finally {
    detectionRunStateLock.unlock();
  }
}
