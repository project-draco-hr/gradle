{
  try {
    workingDir.mkdirs();
    if (OperatingSystem.current().isWindows()) {
      StringBuilder commandLine=new StringBuilder();
      for (      String arg : args) {
        commandLine.append('"');
        commandLine.append(arg);
        commandLine.append("\" ");
      }
      new WindowsProcessStarter().start(workingDir,commandLine.toString());
    }
 else {
      ProcessBuilder builder=new ProcessBuilder(args);
      builder.directory(workingDir);
      Process process=builder.start();
      process.getOutputStream().close();
      process.getErrorStream().close();
      process.getInputStream().close();
    }
  }
 catch (  Exception e) {
    throw new GradleException("Could not start Gradle daemon.",e);
  }
}
