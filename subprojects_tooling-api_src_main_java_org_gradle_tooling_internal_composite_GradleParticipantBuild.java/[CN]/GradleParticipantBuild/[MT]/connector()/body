{
  DefaultGradleConnector connector=(DefaultGradleConnector)GradleConnector.newConnector();
  connector.useGradleUserHomeDir(gradleUserHome);
  if (daemonBaseDir != null) {
    connector.daemonBaseDir(daemonBaseDir);
  }
  if (daemonMaxIdleTimeValue != null) {
    connector.daemonMaxIdleTime(daemonMaxIdleTimeValue,daemonMaxIdleTimeUnits);
  }
  if (isRoot()) {
    connector.searchUpwards(false);
  }
  configureDistribution(connector);
  return connector;
}
