{
  ModuleDescriptor moduleDescriptor=metaData.getDescriptor();
  LOGGER.debug("Recording module descriptor in cache: {} [changing = {}]",moduleDescriptor.getModuleRevisionId(),metaData.isChanging());
  LocallyAvailableResource resource=moduleDescriptorStore.putModuleDescriptor(repository,moduleDescriptor);
  ModuleDescriptorCacheEntry entry=createEntry(metaData,resource.getSha1(),moduleSource);
  getCache().put(createKey(repository,metaData.getComponentId()),entry);
  return new DefaultCachedMetaData(entry,null,timeProvider);
}
