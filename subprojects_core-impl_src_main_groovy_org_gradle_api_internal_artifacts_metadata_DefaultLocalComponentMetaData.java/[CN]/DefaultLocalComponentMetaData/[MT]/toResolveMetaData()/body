{
  return new AbstractModuleDescriptorBackedMetaData(id,moduleDescriptor,componentIdentifier){
    public MutableModuleVersionMetaData copy(){
      throw new UnsupportedOperationException();
    }
    public ModuleVersionMetaData withSource(    ModuleSource source){
      throw new UnsupportedOperationException();
    }
    @Override protected Set<ComponentArtifactMetaData> getArtifactsForConfiguration(    ConfigurationMetaData configurationMetaData){
      Set<ComponentArtifactMetaData> result=new LinkedHashSet<ComponentArtifactMetaData>();
      Set<ModuleVersionArtifactIdentifier> seen=new HashSet<ModuleVersionArtifactIdentifier>();
      for (      String configName : configurationMetaData.getHierarchy()) {
        for (        DefaultLocalArtifactMetaData localArtifactMetaData : artifactsByConfig.get(configName)) {
          if (seen.add(localArtifactMetaData.id)) {
            result.add(localArtifactMetaData);
          }
        }
      }
      return result;
    }
  }
;
}
