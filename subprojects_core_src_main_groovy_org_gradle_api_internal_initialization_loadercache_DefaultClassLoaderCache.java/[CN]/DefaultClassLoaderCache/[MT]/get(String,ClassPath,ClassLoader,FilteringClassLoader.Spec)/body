{
  ClassPathSnapshot s=snapshotter.snapshot(classPath);
  Key key=new Key(parent,s,filterSpec);
  ClassLoader existing=storage.get(key);
  if (existing != null) {
    return existing;
  }
  ClassLoader newLoader=(filterSpec == null) ? new URLClassLoader(classPath.getAsURLArray(),parent) : new FilteringClassLoader(get(id,classPath,parent,null),filterSpec);
  storage.put(key,newLoader);
  return newLoader;
}
