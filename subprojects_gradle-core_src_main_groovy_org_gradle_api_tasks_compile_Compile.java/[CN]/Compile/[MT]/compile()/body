{
  if (antCompile == null) {
    throw new InvalidUserDataException("The ant compile command must be set!");
  }
  List existingSourceDirs=existentDirsFilter.checkDestDirAndFindExistingDirsAndThrowStopActionIfNone(getDestinationDir(),getSrcDirs());
  if (!GUtil.isTrue(getSourceCompatibility()) || !GUtil.isTrue(getTargetCompatibility())) {
    throw new InvalidUserDataException("The sourceCompatibility and targetCompatibility must be set!");
  }
  antCompile.execute(existingSourceDirs,patternSet.getIncludes(),patternSet.getExcludes(),getDestinationDir(),getDependencyCacheDir(),getClasspath(),getSourceCompatibility(),getTargetCompatibility(),options,getProject().getAnt());
  setDidWork(antCompile.getNumFilesCompiled() > 0);
}
