{
  ModuleVersionArtifactMetaData artifact=getMetaDataArtifactFor(dependency);
  if (artifact == null) {
    return null;
  }
  ExternalResource metaDataResource=artifactResolver.resolveMetaDataArtifact(artifact);
  if (metaDataResource == null) {
    return null;
  }
  MutableModuleVersionMetaData moduleVersionMetaData=getArtifactMetadata(artifact,metaDataResource);
  if (isCheckconsistency()) {
    ModuleVersionSelector requested=dependency.getRequested();
    ModuleVersionIdentifier requestedId=DefaultModuleVersionIdentifier.newId(requested.getGroup(),requested.getName(),requested.getVersion());
    checkMetadataConsistency(requestedId,moduleVersionMetaData);
  }
  return moduleVersionMetaData;
}
