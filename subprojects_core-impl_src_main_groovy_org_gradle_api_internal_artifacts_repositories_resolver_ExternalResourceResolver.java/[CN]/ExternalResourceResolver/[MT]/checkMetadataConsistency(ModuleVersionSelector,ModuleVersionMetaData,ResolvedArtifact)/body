{
  List<String> errors=new ArrayList<String>();
  if (!selector.getGroup().equals(metadata.getId().getGroup())) {
    errors.add("bad group: expected='" + selector.getGroup() + "' found='"+ metadata.getId().getGroup()+ "'");
  }
  if (!selector.getName().equals(metadata.getId().getName())) {
    errors.add("bad module name: expected='" + selector.getName() + "' found='"+ metadata.getId().getName()+ "'");
  }
  String revision=ivyRef.artifact.getModuleRevisionId().getRevision();
  if (revision != null && !revision.startsWith("working@")) {
    if (!versionMatcher.accept(revision,metadata)) {
      errors.add("bad version: expected='" + revision + "' found='"+ metadata.getId().getVersion()+ "'");
    }
  }
  if (!metadata.getStatusScheme().contains(metadata.getStatus())) {
    errors.add("bad status: '" + metadata.getStatus() + "'; ");
  }
  if (errors.size() > 0) {
    throw new MetaDataParseException(String.format("inconsistent module metadata found. Descriptor: %s Errors: %s",ivyRef.resource,Joiner.on(SystemProperties.getLineSeparator()).join(errors)));
  }
}
