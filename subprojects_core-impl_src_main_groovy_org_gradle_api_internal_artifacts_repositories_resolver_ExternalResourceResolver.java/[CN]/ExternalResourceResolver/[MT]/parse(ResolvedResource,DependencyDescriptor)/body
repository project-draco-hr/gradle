{
  ModuleRevisionId dependencyRevisionId=dd.getDependencyRevisionId();
  if (getVersionMatcher().isDynamic(dependencyRevisionId)) {
    dependencyRevisionId=ModuleRevisionId.newInstance(dependencyRevisionId,resolvedResource.getRevision());
  }
  File moduleDescriptorFile;
  if (repositoryCacheManager.isLocal()) {
    moduleDescriptorFile=new File(resolvedResource.getResource().getName());
  }
 else {
    moduleDescriptorFile=downloadModuleDescriptorFile(dependencyRevisionId,resolvedResource);
  }
  return parseModuleDescriptor(dependencyRevisionId,moduleDescriptorFile,resolvedResource.getResource());
}
