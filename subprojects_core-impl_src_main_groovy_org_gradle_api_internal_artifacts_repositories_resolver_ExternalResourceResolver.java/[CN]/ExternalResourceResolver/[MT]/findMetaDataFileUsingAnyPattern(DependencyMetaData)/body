{
  Artifact artifact=getMetaDataArtifactFor(dependency);
  if (artifact == null) {
    return null;
  }
  ResolvedArtifact metaDataResource=findStaticResourceUsingPatterns(ivyPatterns,artifact,true);
  if (metaDataResource == null) {
    return null;
  }
  MutableModuleVersionMetaData moduleVersionMetaData=getArtifactMetadata(dependency,artifact.getId(),metaDataResource.getResource());
  if (isCheckconsistency()) {
    ModuleRevisionId moduleRevisionId=dependency.getDescriptor().getDependencyRevisionId();
    checkMetadataConsistency(DefaultModuleVersionIdentifier.newId(moduleRevisionId),moduleVersionMetaData,metaDataResource);
  }
  return new DownloadedAndParsedMetaDataArtifact(metaDataResource.resource,metaDataResource.artifact,moduleVersionMetaData);
}
