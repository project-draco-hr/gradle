{
  ModuleVersionMetaData moduleVersionMetaData;
  if (ivyRef instanceof DownloadedAndParsedMetaDataArtifact) {
    moduleVersionMetaData=((DownloadedAndParsedMetaDataArtifact)ivyRef).getModuleVersionMetaData();
  }
 else {
    moduleVersionMetaData=getArtifactMetadata(ivyRef.getArtifact(),ivyRef.getResource());
  }
  if (isCheckconsistency()) {
    checkMetadataConsistency(DefaultModuleVersionSelector.newSelector(moduleRevisionId),moduleVersionMetaData,ivyRef);
  }
  LOGGER.debug("Ivy file found for module '{}' in repository '{}'.",moduleRevisionId,getName());
  result.resolved(moduleVersionMetaData.getDescriptor(),isChanging(moduleVersionMetaData.getDescriptor()),null);
}
