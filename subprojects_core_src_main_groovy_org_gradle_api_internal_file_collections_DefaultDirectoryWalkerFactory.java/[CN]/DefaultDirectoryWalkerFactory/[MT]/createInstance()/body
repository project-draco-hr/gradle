{
  FileSystem fileSystem=FileSystems.getDefault();
  if (javaVersion.isJava8Compatible() || (javaVersion.isJava7Compatible() && defaultEncodingContainsPlatformEncoding())) {
    try {
      Class clazz=classLoader.loadClass("org.gradle.api.internal.file.collections.jdk7.Jdk7DirectoryWalker");
      return Cast.uncheckedCast(DirectInstantiator.instantiate(clazz,fileSystem));
    }
 catch (    ClassNotFoundException e) {
      throw UncheckedException.throwAsUncheckedException(e);
    }
  }
 else {
    return new DefaultDirectoryWalker(fileSystem);
  }
}
