{
  DisconnectAwareConnection connection=execution.getConnection();
  connection.onDisconnect(new Action<Disconnection<Object>>(){
    public void execute(    Disconnection<Object> disconnection){
      LOGGER.warn("client disconnection detected, we're going down (hard) - uncollected messages: {}",disconnection.getUncollectedMessages());
      System.exit(1);
    }
  }
);
  execution.proceed();
  connection.onDisconnect(null);
}
