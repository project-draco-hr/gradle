{
  DisconnectAwareConnection connection=execution.getConnection();
  connection.onDisconnect(new Runnable(){
    public void run(){
      LOGGER.warn("client disconnection detected, stopping the daemon");
      execution.getDaemonStateCoordinator().requestStop();
    }
  }
);
  try {
    execution.proceed();
  }
  finally {
    connection.onDisconnect(null);
  }
}
