{
  Class<T> concreteType=schema.getType().getConcreteClass();
  if (concreteType.equals(ManagedSet.class)) {
    return Cast.uncheckedCast(createManagedSetInstance(schema.getTypeParameterSchemas().get(0)));
  }
 else {
    return Cast.uncheckedCast(Proxy.newProxyInstance(concreteType.getClassLoader(),new Class<?>[]{concreteType,ManagedInstance.class},new ManagedModelElementInvocationHandler()));
  }
}
