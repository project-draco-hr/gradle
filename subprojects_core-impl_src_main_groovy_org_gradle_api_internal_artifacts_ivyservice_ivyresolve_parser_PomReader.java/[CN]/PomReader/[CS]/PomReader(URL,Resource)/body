{
  InputStream stream=new AddDTDFilterInputStream(URLHandlerRegistry.getDefault().openStream(descriptorURL));
  try {
    Document pomDomDoc=XMLHelper.parseToDom(stream,res,new EntityResolver(){
      public InputSource resolveEntity(      String publicId,      String systemId) throws SAXException, IOException {
        if ((systemId != null) && systemId.endsWith("m2-entities.ent")) {
          return new InputSource(org.apache.ivy.plugins.parser.m2.PomReader.class.getResourceAsStream("m2-entities.ent"));
        }
        return null;
      }
    }
);
    projectElement=pomDomDoc.getDocumentElement();
    if (!PROJECT.equals(projectElement.getNodeName()) && !MODEL.equals(projectElement.getNodeName())) {
      throw new SAXParseException("project must be the root tag",res.getName(),res.getName(),0,0);
    }
    parentElement=getFirstChildElement(projectElement,PARENT);
  }
  finally {
    if (stream != null) {
      try {
        stream.close();
      }
 catch (      IOException e) {
      }
    }
  }
}
