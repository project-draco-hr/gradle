{
  if (!GUtil.isTrue(getSourceCompatibility()) || !GUtil.isTrue(getTargetCompatibility())) {
    throw new InvalidUserDataException("The sourceCompatibility and targetCompatibility must be set!");
  }
  FileTree source=getSource();
  scalaCompiler.setSource(source);
  scalaCompiler.setDestinationDir(getDestinationDir());
  scalaCompiler.setClasspath(getClasspath());
  scalaCompiler.setScalaClasspath(getScalaClasspath());
  scalaCompiler.execute();
  FileTree javaSource=getJavaSrc();
  List<File> classpath=GUtil.addLists(Collections.singleton(getDestinationDir()),getClasspath());
  javaSource.stopExecutionIfEmpty();
  JavaCompiler javaCompiler=getJavaCompiler();
  javaCompiler.setSource(javaSource);
  javaCompiler.setDestinationDir(getDestinationDir());
  javaCompiler.setDependencyCacheDir(getDependencyCacheDir());
  javaCompiler.setClasspath(classpath);
  javaCompiler.setSourceCompatibility(getSourceCompatibility());
  javaCompiler.setTargetCompatibility(getTargetCompatibility());
  javaCompiler.execute();
}
