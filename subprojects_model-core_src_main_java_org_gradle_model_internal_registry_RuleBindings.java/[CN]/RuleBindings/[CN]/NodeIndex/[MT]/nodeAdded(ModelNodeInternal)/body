{
  Collection<Reference> references=rulesByPath.removeAll(node.getPath());
  for (  Reference reference : references) {
    reference.binding.onCreate(node);
    bound.put(new NodeAtState(node.getPath(),reference.binding.reference.getState()),reference.owner);
  }
  references=rulesByScope.get(node.getPath());
  checkTypeMatches(node,references);
  references=rulesByScope.get(node.getPath().getParent());
  checkTypeMatches(node,references);
}
