{
  Charset targetCharsetObj=Charset.forName(targetCharset);
  if (targetCharsetObj.equals(charset)) {
    return fileCollection.getSingleFile();
  }
  File targetFile=tempFileProvider.createTemporaryFile("fileCollection",".txt","resource");
  try {
    Files.asCharSource(fileCollection.getSingleFile(),charset).copyTo(Files.asCharSink(targetFile,targetCharsetObj));
  }
 catch (  IOException e) {
    throw new UncheckedIOException(e);
  }
  return targetFile;
}
