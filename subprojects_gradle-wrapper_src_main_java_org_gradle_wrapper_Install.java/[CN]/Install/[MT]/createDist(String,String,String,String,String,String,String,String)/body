{
  String gradleHome=pathAssembler.gradleHome(distBase,distPath,distName,distVersion);
  File gradleHomeFile=new File(gradleHome);
  if (!alwaysDownload && !alwaysUnpack && gradleHomeFile.isDirectory()) {
    return gradleHome;
  }
  File localZipFile=new File(pathAssembler.distZip(zipBase,zipPath,distName,distVersion,distClassifier));
  if (alwaysDownload || !localZipFile.exists()) {
    File tmpZipFile=new File(localZipFile.getParentFile(),localZipFile.getName() + ".part");
    tmpZipFile.delete();
    String downloadUrl=urlRoot + "/" + distName+ "-"+ distVersion+ "-"+ distClassifier+ ".zip";
    System.out.println("Downloading " + downloadUrl);
    download.download(downloadUrl,tmpZipFile);
    tmpZipFile.renameTo(localZipFile);
  }
  if (gradleHomeFile.isDirectory()) {
    System.out.println("Deleting directory " + gradleHomeFile.getAbsolutePath());
    deleteDir(gradleHomeFile);
  }
  File distDest=gradleHomeFile.getParentFile();
  System.out.println("Unzipping " + localZipFile.getAbsolutePath() + " to "+ distDest.getAbsolutePath());
  unzip(localZipFile,distDest);
  return gradleHome;
}
