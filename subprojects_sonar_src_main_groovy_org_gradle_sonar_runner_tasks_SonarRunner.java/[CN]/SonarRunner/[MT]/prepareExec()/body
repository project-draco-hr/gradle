{
  Map<String,Object> properties=getSonarProperties();
  if (getProject().file("sonar-project.properties").exists()) {
    LOGGER.warn("Found 'sonar-project.properties' in project directory: SonarQube Runner may read this file to override the Gradle 'sonarRunner' configuration.");
  }
  if (LOGGER.isInfoEnabled()) {
    LOGGER.info("Executing SonarQube Runner with properties:\n[{}]",Joiner.on(", ").withKeyValueSeparator(": ").join(properties));
  }
  JavaExecHandleBuilder javaExec=getExecHandleFactory().newJavaExec();
  getForkOptions().copyTo(javaExec);
  FileCollection sonarRunnerConfiguration=getProject().getConfigurations().getAt(SonarRunnerExtension.SONAR_RUNNER_CONFIGURATION_NAME);
  Properties propertiesObject=new Properties();
  propertiesObject.putAll(properties);
  File propertyFile=new File(getTemporaryDir(),"sonar-project.properties");
  GUtil.saveProperties(propertiesObject,propertyFile);
  return javaExec.systemProperty("project.settings",propertyFile.getAbsolutePath()).systemProperty("project.home",getProject().getProjectDir().getAbsolutePath()).setClasspath(sonarRunnerConfiguration).setMain(MAIN_CLASS_NAME);
}
