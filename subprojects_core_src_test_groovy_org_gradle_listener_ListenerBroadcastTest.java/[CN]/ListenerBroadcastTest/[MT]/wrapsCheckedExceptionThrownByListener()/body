{
  final TestListener listener=context.mock(TestListener.class);
  final Exception failure=new Exception();
  context.checking(new Expectations(){
{
      one(listener).event3();
      will(throwException(failure));
    }
  }
);
  broadcast.add(listener);
  try {
    broadcast.getSource().event3();
    fail();
  }
 catch (  ListenerNotificationException e) {
    assertThat(e.getMessage(),equalTo("Failed to notify test listener."));
    assertThat(e.getCause(),sameInstance((Throwable)failure));
  }
}
