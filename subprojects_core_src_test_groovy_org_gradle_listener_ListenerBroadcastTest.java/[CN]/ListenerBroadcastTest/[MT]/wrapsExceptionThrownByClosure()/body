{
  final TestClosure testClosure=context.mock(TestClosure.class);
  final RuntimeException failure=new RuntimeException();
  context.checking(new Expectations(){
{
      one(testClosure).call("param");
      will(throwException(failure));
    }
  }
);
  broadcast.add("event1",new ClosureBackedAction<Object>(toClosure(testClosure)));
  try {
    broadcast.getSource().event1("param");
    fail();
  }
 catch (  ListenerNotificationException e) {
    assertThat(e.getMessage(),equalTo("Failed to notify test listener."));
    assertThat(e.getCause(),sameInstance((Throwable)failure));
  }
}
