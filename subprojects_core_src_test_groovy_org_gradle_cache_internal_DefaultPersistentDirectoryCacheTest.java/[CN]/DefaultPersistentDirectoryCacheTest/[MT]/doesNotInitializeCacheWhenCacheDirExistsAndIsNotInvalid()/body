{
  TestFile dir=createCacheDir();
  DefaultPersistentDirectoryCache cache=new DefaultPersistentDirectoryCache(dir,"<display-name>",validator,properties,mode(LockMode.Shared),action,lockManager);
  try {
    cache.open();
    dir.file("cache.properties").assertIsFile();
    dir.file("some-file").assertIsFile();
  }
  finally {
    cache.close();
  }
}
