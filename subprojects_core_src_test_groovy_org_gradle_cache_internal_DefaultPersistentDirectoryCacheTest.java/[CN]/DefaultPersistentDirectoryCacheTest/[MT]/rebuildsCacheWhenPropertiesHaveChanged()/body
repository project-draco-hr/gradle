{
  TestFile dir=createCacheDir("prop","other-value");
  context.checking(new Expectations(){
{
      one(action).execute(with(notNullValue(PersistentCache.class)));
    }
  }
);
  DefaultPersistentDirectoryCache cache=new DefaultPersistentDirectoryCache(dir,CacheUsage.ON,properties,LockMode.Shared,action);
  assertThat(loadProperties(dir.file("cache.properties")),equalTo(properties));
}
