{
  final ByteArrayOutputStream standardOutput=new ByteArrayOutputStream();
  final ByteArrayOutputStream standardError=new ByteArrayOutputStream();
  final GradleExecutionResult gradleExecutionResult=new GradleExecutionResult(standardOutput,standardError);
  GradleConnector gradleConnector=buildConnector();
  ProjectConnection connection=gradleConnector.connect();
  try {
    BuildLauncher launcher=connection.newBuild();
    launcher.setStandardOutput(standardOutput);
    launcher.setStandardError(standardError);
    arguments.add("--no-search-upward");
    String[] argumentArray=new String[arguments.size()];
    arguments.toArray(argumentArray);
    launcher.withArguments(argumentArray);
    String[] tasksArray=new String[taskNames.size()];
    taskNames.toArray(tasksArray);
    launcher.forTasks(tasksArray);
    launcher.run();
  }
 catch (  RuntimeException t) {
    gradleExecutionResult.setThrowable(t);
  }
 finally {
    if (connection != null) {
      connection.close();
    }
  }
  return gradleExecutionResult;
}
