{
  return new ServiceRegistryFactory(){
    public ServiceRegistry createFor(    Object domainObject){
      if (domainObject instanceof GradleInternal) {
        return new GradleScopeServices(services,(GradleInternal)domainObject);
      }
      if (domainObject instanceof SettingsInternal) {
        return new SettingsScopeServices(services,(SettingsInternal)domainObject);
      }
      throw new IllegalArgumentException(String.format("Cannot create services for unknown domain object of type %s.",domainObject.getClass().getSimpleName()));
    }
  }
;
}
