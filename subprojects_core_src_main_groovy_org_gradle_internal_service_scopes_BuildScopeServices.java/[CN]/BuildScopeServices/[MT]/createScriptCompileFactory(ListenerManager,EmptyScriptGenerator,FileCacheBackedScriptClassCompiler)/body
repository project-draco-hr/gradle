{
  ScriptExecutionListener scriptExecutionListener=listenerManager.getBroadcaster(ScriptExecutionListener.class);
  return new DefaultScriptCompilerFactory(new CachingScriptClassCompiler(new ShortCircuitEmptyScriptCompiler(scriptCompiler,emptyScriptGenerator)),new DefaultScriptRunnerFactory(scriptExecutionListener,new DirectInstantiator()));
}
