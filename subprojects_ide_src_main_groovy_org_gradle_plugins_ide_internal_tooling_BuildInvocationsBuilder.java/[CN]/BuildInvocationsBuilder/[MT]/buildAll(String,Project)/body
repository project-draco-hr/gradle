{
  if (!canBuild(modelName)) {
    throw new GradleException("Unknown model name " + modelName);
  }
  List<LaunchableGradleTaskSelector> selectors=Lists.newArrayList();
  Map<String,TaskSelectorBuilder> aggregatedTasks=Maps.newLinkedHashMap();
  Set<String> visibleTasks=Sets.newLinkedHashSet();
  findTasks(project,aggregatedTasks,visibleTasks);
  for (  TaskSelectorBuilder selectorData : aggregatedTasks.values()) {
    selectors.add(selectorData.build(project,visibleTasks));
  }
  return new DefaultBuildInvocations().setSelectors(selectors).setTasks(tasks(project));
}
