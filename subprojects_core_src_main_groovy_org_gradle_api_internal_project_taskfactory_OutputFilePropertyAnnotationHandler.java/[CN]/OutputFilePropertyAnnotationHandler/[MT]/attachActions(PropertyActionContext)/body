{
  context.setValidationAction(outputDirValidation);
  context.setConfigureAction(new UpdateAction(){
    public void update(    Task task,    final Callable<Object> futureValue){
      task.getOutputs().files(futureValue);
      task.doFirst(new Action<Task>(){
        public void execute(        Task task){
          Iterable<File> files;
          try {
            files=valueTransformer.transform(futureValue.call());
          }
 catch (          Exception e) {
            throw UncheckedException.asUncheckedException(e);
          }
          for (          File file : files) {
            file=GFileUtils.canonicalise(file);
            if (!file.getParentFile().isDirectory() && !file.getParentFile().mkdirs()) {
              throw new InvalidUserDataException(String.format("Cannot create parent directory '%s' of file specified for property '%s'.",file.getParentFile(),context.getName()));
            }
          }
        }
      }
);
    }
  }
);
}
