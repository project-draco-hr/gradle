{
  LOGGER.info("{} executing tests.",workerProcessContext.getDisplayName());
  completed=new CountDownLatch(1);
  ObjectConnection serverConnection=workerProcessContext.getServerConnection();
  IdGenerator<Object> idGenerator=new CompositeIdGenerator(workerProcessContext.getWorkerId(),new LongIdGenerator());
  processor=new WorkerTestClassProcessor(factory.create(idGenerator),idGenerator.generateId(),workerProcessContext.getDisplayName(),workerProcessContext.getApplicationClassLoader());
  TestResultProcessor resultProcessor=serverConnection.addOutgoing(TestResultProcessor.class);
  processor.startProcessing(resultProcessor);
  serverConnection.addIncoming(TestClassProcessor.class,this);
  try {
    completed.await();
  }
 catch (  InterruptedException e) {
    throw new GradleException(e);
  }
  LOGGER.info("{} finished executing tests.",workerProcessContext.getDisplayName());
}
