{
  DefaultLocalArtifactMetaData artifactMetaData=new DefaultLocalArtifactMetaData(componentIdentifier,id.toString(),artifactName,file);
  if (artifactsById.containsKey(artifactMetaData.getId())) {
    artifactMetaData=artifactsById.get(artifactMetaData.getId());
  }
 else {
    artifactMetaData.ivyArtifact=new MDArtifact(moduleDescriptor,artifactName.getName(),artifactName.getType(),artifactName.getExtension(),null,artifactName.getAttributes());
    artifactsById.put(artifactMetaData.id,artifactMetaData);
    artifactsByIvyName.put(artifactName,artifactMetaData);
  }
  artifactMetaData.addConfiguration(configuration);
  moduleDescriptor.addArtifact(configuration,artifactMetaData.ivyArtifact);
}
