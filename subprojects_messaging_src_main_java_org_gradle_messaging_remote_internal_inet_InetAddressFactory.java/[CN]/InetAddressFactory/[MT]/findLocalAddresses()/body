{
  try {
    List<InetAddress> addresses=new ArrayList<InetAddress>();
    Enumeration<NetworkInterface> interfaces=NetworkInterface.getNetworkInterfaces();
    while (interfaces.hasMoreElements()) {
      NetworkInterface networkInterface=interfaces.nextElement();
      Enumeration<InetAddress> candidates=networkInterface.getInetAddresses();
      while (candidates.hasMoreElements()) {
        InetAddress candidate=candidates.nextElement();
        if (candidate.isLoopbackAddress()) {
          addresses.add(candidate);
        }
      }
    }
    if (addresses.isEmpty()) {
      addresses.add(InetAddress.getByName(null));
    }
    return addresses;
  }
 catch (  Exception e) {
    throw new RuntimeException("Could not determine the local IP addresses for this machine.",e);
  }
}
