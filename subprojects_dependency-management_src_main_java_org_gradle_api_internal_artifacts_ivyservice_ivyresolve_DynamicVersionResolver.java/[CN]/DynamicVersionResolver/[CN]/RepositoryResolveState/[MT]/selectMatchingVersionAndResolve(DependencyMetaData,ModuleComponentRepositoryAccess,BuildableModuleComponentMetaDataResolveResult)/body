{
  DefaultBuildableComponentSelectionResult componentSelectionResult=new DefaultBuildableComponentSelectionResult();
  versionedComponentChooser.selectNewestMatchingComponent(versionListingResult.result.getVersions(),dynamicVersionDependency,moduleAccess,componentSelectionResult);
switch (componentSelectionResult.getState()) {
case NoMatch:
    componentSelectionResult.applyTo(resolveResult);
  resolveResult.missing();
resolveResult.setAuthoritative(false);
break;
case Match:
ModuleComponentIdentifier selectedComponentId=componentSelectionResult.getMatch();
DependencyMetaData selectedVersionDependency=dynamicVersionDependency.withRequestedVersion(selectedComponentId.getVersion());
moduleAccess.resolveComponentMetaData(selectedVersionDependency,selectedComponentId,resolveResult);
break;
case Failed:
resolveResult.failed(componentSelectionResult.getFailure());
break;
default :
throw new IllegalStateException("Unexpected state for component selection result.");
}
}
