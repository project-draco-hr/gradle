{
  ConfigurationContainer configurations=project.getConfigurations();
  Configuration compileConfiguration=configurations.add(COMPILE_CONFIGURATION_NAME).setVisible(false).setDescription("Classpath for compiling the sources.");
  Configuration runtimeConfiguration=configurations.add(RUNTIME_CONFIGURATION_NAME).setVisible(false).extendsFrom(compileConfiguration).setDescription("Classpath for running the compiled sources.");
  Configuration compileTestsConfiguration=configurations.add(TEST_COMPILE_CONFIGURATION_NAME).setVisible(false).extendsFrom(compileConfiguration).setTransitive(false).setDescription("Classpath for compiling the test sources.");
  configurations.add(TEST_RUNTIME_CONFIGURATION_NAME).setVisible(false).extendsFrom(runtimeConfiguration,compileTestsConfiguration).setDescription("Classpath for running the test sources.");
  configurations.getByName(Dependency.DEFAULT_CONFIGURATION).extendsFrom(runtimeConfiguration);
}
