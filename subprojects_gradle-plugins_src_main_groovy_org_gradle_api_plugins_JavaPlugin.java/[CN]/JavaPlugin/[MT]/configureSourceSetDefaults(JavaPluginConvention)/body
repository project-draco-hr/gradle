{
  pluginConvention.getSourceSets().allObjects(new Action<SourceSet>(){
    public void execute(    final SourceSet sourceSet){
      final Project project=pluginConvention.getProject();
      ConventionMapping conventionMapping=((IConventionAware)sourceSet).getConventionMapping();
      conventionMapping.map("compileClasspath",new ConventionValue(){
        public Object getValue(        Convention convention,        IConventionAware conventionAwareObject){
          return project.getConfigurations().getByName(COMPILE_CONFIGURATION_NAME);
        }
      }
);
      conventionMapping.map("runtimeClasspath",new ConventionValue(){
        public Object getValue(        Convention convention,        IConventionAware conventionAwareObject){
          return sourceSet.getClasses().plus(project.getConfigurations().getByName(RUNTIME_CONFIGURATION_NAME));
        }
      }
);
    }
  }
);
}
