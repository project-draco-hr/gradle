{
  Test test=project.getTasks().add(TEST_TASK_NAME,Test.class);
  test.setDescription("Runs the unit tests.");
  test.setTaskGroup(JavaBasePlugin.VERIFICATION_GROUP);
  test.getConventionMapping().map("testClassesDir",new Callable<Object>(){
    public Object call() throws Exception {
      return pluginConvention.getSourceSets().getByName(SourceSet.TEST_SOURCE_SET_NAME).getClassesDir();
    }
  }
);
  test.getConventionMapping().map("classpath",new Callable<Object>(){
    public Object call() throws Exception {
      return pluginConvention.getSourceSets().getByName(SourceSet.TEST_SOURCE_SET_NAME).getRuntimeClasspath();
    }
  }
);
  test.getConventionMapping().map("testSrcDirs",new Callable<Object>(){
    public Object call() throws Exception {
      return new ArrayList<File>(pluginConvention.getSourceSets().getByName(SourceSet.TEST_SOURCE_SET_NAME).getJava().getSrcDirs());
    }
  }
);
}
