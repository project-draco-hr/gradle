{
  Class<T> target=targetTypeProvider.getTargetType(targetType,protocolObject);
  if (target.isInstance(protocolObject)) {
    return target.cast(protocolObject);
  }
  Object proxy=Proxy.newProxyInstance(target.getClassLoader(),new Class<?>[]{target},new InvocationHandlerImpl(protocolObject,versionDetails));
  return target.cast(proxy);
}
