{
  if (javaVersion.isJava7Compatible()) {
    Class clazz;
    try {
      clazz=classLoader.loadClass("org.gradle.internal.filewatch.jdk7.Jdk7FileWatcherFactory");
      return Cast.uncheckedCast(DirectInstantiator.instantiate(clazz,executor));
    }
 catch (    ClassNotFoundException e) {
      LOG.error("Could not load JDK7 class with a JDK7+ JVM, falling back to no-op implementation.",e);
    }
  }
  LOG.debug("Using no-op file watcher service.");
  return new NoOpFileWatcherFactory();
}
