{
  if (path == null || path.getParent() == null || !visitedDirs.add(path)) {
    return;
  }
  maybeVisit(path.getParent());
  FileVisitDetails dir=pendingDirs.remove(path);
  if (dir == null) {
    dir=new FileVisitDetailsImpl(path);
  }
  visitor.visitDir(dir);
}
