{
  List<ModuleResolution> resolutionList=createResolutionList(dd,data);
  ModuleResolution latestCached=lookupAllInCacheAndGetLatest(resolutionList);
  if (latestCached != null) {
    LOGGER.debug("Found module {} in resolver cache {}",latestCached.getModule(),latestCached.resolver.getName());
    rememberResolverToUseForArtifactDownload(latestCached.resolver,latestCached.getModule());
    return latestCached.getModule();
  }
  ModuleResolution latestResolved=resolveAllAndGetLatest(resolutionList);
  if (latestResolved != null) {
    ResolvedModuleRevision downloadedModule=latestResolved.getModule();
    LOGGER.debug("Found module {} using resolver {}",downloadedModule,downloadedModule.getArtifactResolver());
    rememberResolverToUseForArtifactDownload(downloadedModule.getArtifactResolver(),downloadedModule);
    return downloadedModule;
  }
  return null;
}
