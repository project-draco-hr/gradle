{
  TaskStateInternal state=(TaskStateInternal)task.getState();
  long startTime=state.getStartTime();
  long endTime=state.getEndTime();
  if (state.getUpToDate()) {
    return new DefaultTaskSuccessResult(startTime,endTime,true);
  }
  if (state.getSkipped()) {
    return new DefaultTaskSkippedResult(startTime,endTime,state.getSkipMessage());
  }
  Throwable failure=state.getFailure();
  if (failure == null) {
    return new DefaultTaskSuccessResult(startTime,endTime,false);
  }
  return new DefaultTaskFailureResult(startTime,endTime,Collections.singletonList(DefaultFailure.fromThrowable(failure)));
}
