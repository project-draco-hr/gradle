{
  final File file=new File("file");
  final FileCollection source=context.mock(FileCollection.class);
  SelfResolvingDependency dependency=new DefaultSelfResolvingDependency(source);
  context.checking(new Expectations(){
{
      one(source).getFiles();
      will(returnValue(toSet(file)));
    }
  }
);
  assertThat(dependency.resolve(),equalTo(toLinkedSet(file)));
}
