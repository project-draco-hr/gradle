{
  requestStop();
  if (executing.get() != null) {
    throw new IllegalStateException("Cannot stop this executor from an executor thread.");
  }
  try {
    try {
      if (!executor.awaitTermination(timeoutValue,timeoutUnits)) {
        executor.shutdownNow();
        throw new IllegalStateException("Timeout waiting for concurrent jobs to complete.");
      }
    }
 catch (    InterruptedException e) {
      throw new UncheckedException(e);
    }
    try {
      failureHandler.stop();
    }
 catch (    DispatchException e) {
      throw UncheckedException.throwAsUncheckedException(e.getCause());
    }
  }
  finally {
    executors.remove(this);
  }
}
