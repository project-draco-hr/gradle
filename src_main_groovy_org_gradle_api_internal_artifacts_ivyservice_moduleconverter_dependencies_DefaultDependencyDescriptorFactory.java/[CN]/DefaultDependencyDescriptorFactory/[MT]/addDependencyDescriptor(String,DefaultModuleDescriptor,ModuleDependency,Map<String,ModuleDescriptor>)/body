{
  InternalDependencyFactory internalDependencyFactory=null;
  if (dependency instanceof ClientModule) {
    internalDependencyFactory=new ClientModuleDependencyFactory((ClientModule)dependency,configuration,moduleDescriptor,clientModuleRegistry);
  }
 else   if (dependency instanceof ProjectDependency) {
    internalDependencyFactory=new ProjectDependencyFactory((ProjectDependency)dependency,configuration,moduleDescriptor);
  }
 else   if (dependency instanceof ExternalModuleDependency) {
    internalDependencyFactory=new ExternalModuleDependencyFactory((ExternalModuleDependency)dependency,configuration,moduleDescriptor);
  }
 else {
    throw new GradleException("Can't map dependency of type: " + dependency.getClass());
  }
  addDependency(configuration,moduleDescriptor,internalDependencyFactory);
}
