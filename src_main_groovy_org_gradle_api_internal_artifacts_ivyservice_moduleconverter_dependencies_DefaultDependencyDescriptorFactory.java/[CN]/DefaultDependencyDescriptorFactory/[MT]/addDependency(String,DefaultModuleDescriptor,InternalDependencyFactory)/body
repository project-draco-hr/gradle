{
  ModuleRevisionId moduleRevisionId=internalDependencyFactory.createModuleRevisionId();
  DefaultDependencyDescriptor existingDependencyDescriptor=findExistingDescriptor(moduleDescriptor,moduleRevisionId);
  if (existingDependencyDescriptor == null) {
    moduleDescriptor.addDependency(internalDependencyFactory.createDependencyDescriptor(moduleRevisionId));
  }
 else {
    existingDependencyDescriptor.addDependencyConfiguration(configuration,internalDependencyFactory.getDependencyConfiguration());
  }
}
