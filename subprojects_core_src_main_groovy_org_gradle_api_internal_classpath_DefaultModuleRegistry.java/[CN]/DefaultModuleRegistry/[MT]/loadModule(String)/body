{
  List<File> implementationClasspath=new ArrayList<File>();
  String resource=String.format("%s-classpath.properties",name);
  Properties properties;
  URL url=classLoader.getResource(resource);
  if (url != null) {
    properties=GUtil.loadProperties(url);
    findImplementationClasspath(name,implementationClasspath);
    implementationClasspath.add(ClasspathUtil.getClasspathForResource(classLoader,resource));
  }
 else   if (distDir != null) {
    File jarFile=findModuleJar(name);
    implementationClasspath.add(jarFile);
    properties=loadModuleProperties(jarFile,resource);
  }
 else {
    throw new IllegalArgumentException(String.format("Cannot locate classpath manifest '%s' in classpath.",resource));
  }
  List<File> runtimeClasspath=new ArrayList<File>();
  for (  String jarName : properties.getProperty("runtime").split(",")) {
    runtimeClasspath.add(findDependencyJar(jarName));
  }
  return new DefaultModule(implementationClasspath,runtimeClasspath);
}
