{
  this.classLoader=classLoader;
  this.distDir=distDir;
  for (  URL url : ClasspathUtil.getClasspath(classLoader)) {
    if (url.getProtocol().equals("file")) {
      try {
        File entry=new File(url.toURI());
        classpath.add(entry);
        if (entry.isFile()) {
          classpathJars.put(entry.getName(),entry);
        }
      }
 catch (      URISyntaxException e) {
        throw new UncheckedIOException(e);
      }
    }
  }
  if (distDir != null) {
    libDirs.add(new File(distDir,"lib"));
    libDirs.add(new File(distDir,"lib/plugins"));
    libDirs.add(new File(distDir,"lib/core-impl"));
  }
}
