{
  this.classLoader=classLoader;
  this.distDir=distDir;
  for (  File classpathFile : new EffectiveClassPath(classLoader).getAsFiles()) {
    classpath.add(classpathFile);
    if (classpathFile.isFile() && !classpathJars.containsKey(classpathFile.getName())) {
      classpathJars.put(classpathFile.getName(),classpathFile);
    }
  }
  if (distDir != null) {
    libDirs.add(new File(distDir,"lib"));
    libDirs.add(new File(distDir,"lib/plugins"));
    libDirs.add(new File(distDir,"lib/distributionOnly"));
  }
}
