{
  BoundModelMutator<T> boundMutator=new BoundModelMutator<T>(mutator,ruleBinder.getSubjectBinding(),ruleBinder.getInputBindings());
  ModelPath path=boundMutator.getSubject().getPath();
  mutationBinders.remove(path,ruleBinder);
  ModelNodeInternal subject=modelGraph.get(path);
  if (!subject.canApply(type)) {
    throw new IllegalStateException(String.format("Cannot add %s rule '%s' for model element '%s' when element is in state %s.",type,boundMutator.getMutator().getDescriptor(),path,subject.getState()));
  }
  actions.put(new MutationKey(path,type),boundMutator);
}
