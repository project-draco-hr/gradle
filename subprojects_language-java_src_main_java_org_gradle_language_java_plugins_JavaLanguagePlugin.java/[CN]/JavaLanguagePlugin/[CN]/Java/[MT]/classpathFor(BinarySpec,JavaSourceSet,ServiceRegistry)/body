{
  Iterable<DependencySpec> dependencies=compileDependencies(binary,javaSourceSet);
  ArtifactDependencyResolver dependencyResolver=serviceRegistry.get(ArtifactDependencyResolver.class);
  RepositoryHandler repositories=serviceRegistry.get(RepositoryHandler.class);
  List<ResolutionAwareRepository> resolutionAwareRepositories=CollectionUtils.collect(repositories,Transformers.cast(ResolutionAwareRepository.class));
  return new DependencyResolvingClasspath(binary,javaSourceSet,dependencies,dependencyResolver,schemaStore,resolutionAwareRepositories);
}
