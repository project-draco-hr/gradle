{
  setUpMocksAndAttributes(compile);
  context.checking(new Expectations(){
{
      one(antCompileMock).execute(with(hasSameItems(compile.getSource())),with(equalTo(compile.getDestinationDir())),with(equalTo(compile.getDependencyCacheDir())),with(equalTo(compile.getClasspath())),with(equalTo(compile.getSourceCompatibility())),with(equalTo(compile.getTargetCompatibility())),with(equalTo(compile.getOptions())),with(equalTo(compile.getAnt())));
      one(antCompileMock).getNumFilesCompiled();
      will(returnValue(numFilesCompiled));
    }
  }
);
  compile.execute();
}
