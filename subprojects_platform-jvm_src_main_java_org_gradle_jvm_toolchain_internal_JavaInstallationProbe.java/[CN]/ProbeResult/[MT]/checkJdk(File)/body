{
  if (!jdkPath.exists()) {
    return new ProbeResult(InstallType.NO_SUCH_DIRECTORY,unknown());
  }
  EnumMap<SysProp,String> metadata=cache.getUnchecked(jdkPath);
  String version=metadata.get(SysProp.VERSION);
  if (UNKNOWN.equals(version)) {
    return new ProbeResult(InstallType.INVALID_JDK,metadata);
  }
  try {
    JavaVersion.toVersion(version);
  }
 catch (  IllegalArgumentException ex) {
    return new ProbeResult(InstallType.INVALID_JDK,metadata);
  }
  if (javaExe(jdkPath,"javac").exists()) {
    return new ProbeResult(InstallType.IS_JDK,metadata);
  }
  return new ProbeResult(InstallType.IS_JRE,metadata);
}
