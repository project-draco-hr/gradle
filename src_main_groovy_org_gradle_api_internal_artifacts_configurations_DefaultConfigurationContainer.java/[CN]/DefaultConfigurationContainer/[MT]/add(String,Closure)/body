{
  if (configurations.containsKey(name)) {
    throw new InvalidUserDataException(String.format("Cannot add configuration '%s' as a configuration with that name already exists.",name));
  }
  DefaultConfiguration configuration=new DefaultConfiguration(name,this,ivyService,resolverProvider,dependencyMetaDataProvider);
  configurations.put(name,configuration);
  ConfigureUtil.configure(configureClosure,configuration);
  return configuration;
}
