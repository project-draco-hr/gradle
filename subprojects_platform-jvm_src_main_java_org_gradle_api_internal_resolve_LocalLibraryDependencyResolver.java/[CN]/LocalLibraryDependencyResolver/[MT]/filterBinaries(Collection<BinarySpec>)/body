{
  if (values.isEmpty()) {
    return values;
  }
  TreeMultimap<JavaPlatform,JvmBinarySpec> platformToBinary=TreeMultimap.create(JAVA_PLATFORM_COMPARATOR,JVM_BINARY_SPEC_COMPARATOR);
  Set<String> resolveDimensions=variantsMetaData.getDimensions();
  for (  BinarySpec binarySpec : values) {
    if (binarySpec instanceof JvmBinarySpec) {
      JvmBinarySpec jvmSpec=(JvmBinarySpec)binarySpec;
      if (jvmSpec.getTargetPlatform().getTargetCompatibility().compareTo(javaPlatform.getTargetCompatibility()) <= 0) {
        VariantsMetaData binaryVariants=DefaultVariantsMetaData.extractFrom(jvmSpec);
        Set<String> commonsDimensions=Sets.intersection(resolveDimensions,binaryVariants.getDimensions());
        boolean matching=true;
        for (        String dimension : commonsDimensions) {
          if (!isPlatformDimension(dimension)) {
            String resolveValue=variantsMetaData.getValueAsString(dimension);
            String binaryValue=binaryVariants.getValueAsString(dimension);
            matching=matching && com.google.common.base.Objects.equal(resolveValue,binaryValue);
          }
        }
        if (matching) {
          platformToBinary.put(jvmSpec.getTargetPlatform(),jvmSpec);
        }
      }
    }
  }
  if (platformToBinary.isEmpty()) {
    return Collections.emptyList();
  }
  JavaPlatform first=platformToBinary.keySet().last();
  return platformToBinary.get(first);
}
