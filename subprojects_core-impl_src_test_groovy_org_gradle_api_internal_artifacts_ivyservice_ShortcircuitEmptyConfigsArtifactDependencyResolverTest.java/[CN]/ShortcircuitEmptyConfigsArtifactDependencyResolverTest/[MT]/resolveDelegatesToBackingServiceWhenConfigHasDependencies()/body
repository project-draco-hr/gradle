{
  final ResolvedConfiguration resolvedConfigDummy=context.mock(ResolvedConfiguration.class);
  context.checking(new Expectations(){
{
      allowing(configuration).getAllDependencies();
      will(returnValue(dependencies));
      allowing(dependencies).isEmpty();
      will(returnValue(false));
      one(delegate).resolve(configuration);
      will(returnValue(resolvedConfigDummy));
    }
  }
);
  assertThat(dependencyResolver.resolve(configuration),sameInstance(resolvedConfigDummy));
}
