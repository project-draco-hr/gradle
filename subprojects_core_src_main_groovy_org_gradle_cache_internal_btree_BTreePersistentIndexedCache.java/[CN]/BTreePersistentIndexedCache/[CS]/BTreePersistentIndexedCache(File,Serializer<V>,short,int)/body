{
  this.serializer=serializer;
  this.maxChildIndexEntries=maxChildIndexEntries;
  this.minIndexChildNodes=maxChildIndexEntries / 2;
  cacheFile=new File(cacheDir,"cache.bin");
  BlockStore cachingStore=new CachingBlockStore(new FileBackedBlockStore(cacheFile),IndexBlock.class,FreeListBlockStore.FreeListBlock.class);
  store=new StateCheckBlockStore(new FreeListBlockStore(cachingStore,maxFreeListEntries));
  try {
    open();
  }
 catch (  Exception e) {
    throw new UncheckedIOException(String.format("Could not open %s.",this),e);
  }
}
