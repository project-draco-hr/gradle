{
  this.idGenerator=idGenerator;
  DefaultFileSnapshotterSerializer defaultSnapshotSerializer=new DefaultFileSnapshotterSerializer();
  OutputFilesSnapshotSerializer outputSnapshotSerializer=new OutputFilesSnapshotSerializer(defaultSnapshotSerializer);
  DefaultSerializerRegistry<FileCollectionSnapshot> registry=new DefaultSerializerRegistry<FileCollectionSnapshot>();
  registry.register(DefaultFileCollectionSnapshotter.FileCollectionSnapshotImpl.class,defaultSnapshotSerializer);
  registry.register(OutputFilesCollectionSnapshotter.OutputFilesSnapshot.class,outputSnapshotSerializer);
  cache=cacheAccess.createCache("fileSnapshots",Long.class,registry.build());
}
