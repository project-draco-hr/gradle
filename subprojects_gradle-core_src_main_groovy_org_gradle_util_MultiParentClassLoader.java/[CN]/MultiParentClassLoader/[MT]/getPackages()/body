{
  Set<Package> packages=new LinkedHashSet<Package>();
  for (  ClassLoader parent : parents) {
    Package[] parentPackages=(Package[])ReflectionUtil.invoke(parent,"getPackages",new Object[0]);
    packages.addAll(Arrays.asList(parentPackages));
  }
  return packages.toArray(new Package[packages.size()]);
}
