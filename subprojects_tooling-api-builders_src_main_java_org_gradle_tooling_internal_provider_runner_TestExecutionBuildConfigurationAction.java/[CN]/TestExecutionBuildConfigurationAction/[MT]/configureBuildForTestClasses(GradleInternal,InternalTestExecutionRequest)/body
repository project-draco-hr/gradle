{
  if (testExecutionRequest.getTestClassNames().isEmpty()) {
    return Collections.emptyList();
  }
  List<Test> tasksToExecute=new ArrayList<Test>();
  final Collection<String> testClassNames=testExecutionRequest.getTestClassNames();
  final Set<Project> allprojects=gradle.getRootProject().getAllprojects();
  for (  Project project : allprojects) {
    final TaskCollection<Test> testTasks=project.getTasks().withType(Test.class);
    for (    Test testTask : testTasks) {
      configureTestClassFilter(testTask,testClassNames);
    }
    tasksToExecute.addAll(testTasks);
  }
  return tasksToExecute;
}
