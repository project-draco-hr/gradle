{
  StringBuilder name=new StringBuilder(displayName);
  boolean encode=!key.equals(displayName);
  for (int i=0; i < name.length(); i++) {
    char ch=name.charAt(i);
    if (!Character.isLetterOrDigit(ch) && ch != '_') {
      name.setCharAt(i,'_');
      encode=true;
    }
 else     if (Character.isUpperCase(ch)) {
      name.setCharAt(i,Character.toLowerCase(ch));
      encode=true;
    }
  }
  name.append('_');
  if (!encode) {
    return name.toString();
  }
  name.append(HashUtil.createHash(key));
  return name.toString();
}
