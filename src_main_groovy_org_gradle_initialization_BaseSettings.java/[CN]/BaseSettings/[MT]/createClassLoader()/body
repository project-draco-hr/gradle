{
  URLClassLoader classLoader=(URLClassLoader)Thread.currentThread().getContextClassLoader();
  StartParameter startParameter=buildSrcStartParameter.newInstance();
  startParameter.setCurrentDir(new File(getRootDir(),DEFAULT_BUILD_SRC_DIR));
  Set<File> additionalClasspath=buildSourceBuilder.createBuildSourceClasspath(startParameter);
  additionalClasspath.addAll(dependencyManager.configuration(BUILD_CONFIGURATION).getFiles());
  File toolsJar=ClasspathUtil.getToolsJar();
  if (toolsJar != null) {
    additionalClasspath.add(toolsJar);
  }
  logger.debug("Adding to classpath: {}",additionalClasspath);
  ClasspathUtil.addUrl(classLoader,additionalClasspath);
  return classLoader;
}
