{
  if (modelType == BuildEnvironment.class && !versionDetails.isModelSupported(BuildEnvironment.class)) {
    return adapter.adapt(modelType,new VersionOnlyBuildEnvironment(versionDetails.getVersion()),mapper);
  }
  if (!versionDetails.isModelSupported(modelType)) {
    throw Exceptions.unsupportedModel(modelType,versionDetails.getVersion());
  }
  Class<? extends ProjectVersion3> protocolType=modelMapping.getProtocolType(modelType).asSubclass(ProjectVersion3.class);
  final ProjectVersion3 model=delegate.getModel(protocolType,operationParameters);
  return adapter.adapt(modelType,model,mapper);
}
