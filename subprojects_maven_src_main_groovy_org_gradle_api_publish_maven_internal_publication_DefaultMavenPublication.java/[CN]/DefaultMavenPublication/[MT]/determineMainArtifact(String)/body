{
  Set<MavenArtifact> candidateMainArtifacts=CollectionUtils.filter(mavenArtifacts,new Spec<MavenArtifact>(){
    public boolean isSatisfiedBy(    MavenArtifact element){
      return hasNoClassifier(element) && artifactPossibleForPackaging(element,packaging);
    }
  }
);
  if (candidateMainArtifacts.isEmpty()) {
    if (packaging == null) {
      return null;
    }
    return determineMainArtifact(null);
  }
  if (candidateMainArtifacts.size() > 1) {
    throw new InvalidMavenPublicationException(name,"Cannot determine main artifact - multiple artifacts found with empty classifier.");
  }
  return candidateMainArtifacts.iterator().next();
}
