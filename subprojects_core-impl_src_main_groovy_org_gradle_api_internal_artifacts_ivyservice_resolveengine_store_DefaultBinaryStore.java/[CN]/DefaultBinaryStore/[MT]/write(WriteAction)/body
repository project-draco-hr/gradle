{
  if (outputStream == null) {
    try {
      outputStream=new DataOutputStream(new BufferedOutputStream(new FileOutputStream(file)));
    }
 catch (    FileNotFoundException e) {
      throw throwAsUncheckedException(e);
    }
  }
  if (offset == -1) {
    this.offset=outputStream.size();
  }
  try {
    write.write(outputStream);
  }
 catch (  IOException e) {
    throw new RuntimeException("Problems writing to " + diagnose(),e);
  }
}
