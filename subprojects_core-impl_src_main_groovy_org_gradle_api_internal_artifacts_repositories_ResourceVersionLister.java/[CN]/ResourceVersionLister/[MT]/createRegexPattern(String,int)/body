{
  int endNameIndex=pattern.indexOf(fileSep,prefixLastSlashIndex + 1);
  String namePattern;
  if (endNameIndex != -1) {
    namePattern=pattern.substring(prefixLastSlashIndex + 1,endNameIndex);
  }
 else {
    namePattern=pattern.substring(prefixLastSlashIndex + 1);
  }
  namePattern=namePattern.replaceAll("\\.","\\\\.");
  String acceptNamePattern=".*?" + namePattern.replaceAll("\\[revision\\]","([^" + fileSep + "]+)") + "($|"+ fileSep+ ".*)";
  return Pattern.compile(acceptNamePattern);
}
