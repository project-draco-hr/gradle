{
  final ModelType<T> elementModelType=ModelType.of(elementType);
  mapNode.ensureUsable();
  if (mapNode.isMutable()) {
    return mapNode.asMutable(ModelTypes.modelMap(elementModelType),RuleContext.get()).getInstance();
  }
 else {
    return mapNode.asImmutable(ModelTypes.modelMap(elementModelType),RuleContext.get()).getInstance();
  }
}
