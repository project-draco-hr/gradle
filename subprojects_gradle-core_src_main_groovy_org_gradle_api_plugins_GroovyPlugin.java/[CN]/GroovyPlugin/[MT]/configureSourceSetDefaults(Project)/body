{
  final ProjectInternal projectInternal=(ProjectInternal)project;
  project.getConvention().getPlugin(JavaPluginConvention.class).getSource().allObjects(new Action<SourceSet>(){
    public void execute(    SourceSet sourceSet){
      DefaultGroovySourceSet groovySourceSet=new DefaultGroovySourceSet(sourceSet.getName(),projectInternal.getFileResolver());
      ((DynamicObjectAware)sourceSet).getConvention().getPlugins().put("groovy",groovySourceSet);
      groovySourceSet.getGroovy().srcDir(String.format("src/%s/groovy",sourceSet.getName()));
    }
  }
);
}
