{
  if (snapshots.isEmpty()) {
    return this;
  }
  FileCollectionSnapshotImpl newSnapshotImpl=(FileCollectionSnapshotImpl)newSnapshot;
  if (newSnapshotImpl.snapshots.isEmpty()) {
    return newSnapshotImpl;
  }
  Map<String,IncrementalFileSnapshot> newSnapshots=new HashMap<String,IncrementalFileSnapshot>(snapshots.size());
  for (  String path : snapshots.keySet()) {
    IncrementalFileSnapshot newValue=newSnapshotImpl.snapshots.get(path);
    if (newValue != null) {
      newSnapshots.put(path,newValue);
    }
  }
  return new FileCollectionSnapshotImpl(newSnapshots);
}
