{
  try {
    try {
      connection.dispatch(new Stop(idGenerator.generateId()));
    }
 catch (    Exception e) {
      LOGGER.lifecycle("Unable to send the Stop command to one of the daemons. The daemon has already stopped or crashed.");
      LOGGER.debug("Unable to send Stop.",e);
      return;
    }
    try {
      connection.receive();
    }
 catch (    Exception e) {
      LOGGER.lifecycle("The daemon didn't reply to Stop command. It is already stopped or crashed.");
      LOGGER.debug("Unable to receive reply.",e);
    }
  }
  finally {
    connection.stop();
  }
}
