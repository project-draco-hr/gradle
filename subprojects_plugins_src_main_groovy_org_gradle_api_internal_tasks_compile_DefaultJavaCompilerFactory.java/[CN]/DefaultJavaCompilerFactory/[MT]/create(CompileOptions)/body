{
  fallBackToAntIfNecessary(options);
  if (options.isUseAnt()) {
    return new AntJavaCompiler(antBuilderFactory);
  }
  Compiler<JavaCompileSpec> result=createTargetCompiler(options);
  if (!groovyJointCompilation) {
    result=new NormalizingJavaCompiler(result);
  }
  return result;
}
