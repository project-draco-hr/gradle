{
  if (options.isFork() && options.getForkOptions().getExecutable() != null) {
    return new CommandLineJavaCompiler(createSerializableTempFileProvider(),project.getProjectDir());
  }
  Compiler<JavaCompileSpec> compiler=inProcessCompilerFactory.create(options);
  if (options.isFork() && !jointCompilation) {
    return new DaemonJavaCompiler(project,compiler,compilerDaemonManager);
  }
  return compiler;
}
