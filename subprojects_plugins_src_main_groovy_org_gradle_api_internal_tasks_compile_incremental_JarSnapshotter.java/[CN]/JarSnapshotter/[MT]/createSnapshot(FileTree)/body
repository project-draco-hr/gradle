{
  final Map<String,byte[]> hashes=new HashMap<String,byte[]>();
  archivedClasses.visit(new FileVisitor(){
    public void visitDir(    FileVisitDetails dirDetails){
    }
    public void visitFile(    FileVisitDetails fileDetails){
      hashes.put(fileDetails.getPath().replaceAll("/",".").replaceAll("\\.class$",""),hasher.hash(fileDetails.getFile()));
    }
  }
);
  return new JarSnapshot(hashes);
}
