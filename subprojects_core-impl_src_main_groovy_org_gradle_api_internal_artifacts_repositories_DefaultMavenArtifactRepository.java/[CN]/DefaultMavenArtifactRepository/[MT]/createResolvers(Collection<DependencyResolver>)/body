{
  URI rootUri=getUrl();
  if (rootUri == null) {
    throw new InvalidUserDataException("You must specify a URL for a Maven repository.");
  }
  MavenResolver resolver=new MavenResolver();
  resolver.setName(name);
  if (rootUri.getScheme().equalsIgnoreCase("file")) {
    resolver.setRepository(new FileRepository());
    resolver.setRepositoryCacheManager(new LocalFileRepositoryCacheManager(name));
    resolver.setRoot(getFilePath(rootUri));
    Collection<URI> artifactUrls=getArtifactUrls();
    for (    URI repoUrl : artifactUrls) {
      resolver.addArtifactUrl(getFilePath(repoUrl));
    }
  }
 else {
    resolver.setRepository(new CommonsHttpClientBackedRepository(null,null));
    resolver.setRoot(getUriPath(rootUri));
    Collection<URI> artifactUrls=getArtifactUrls();
    for (    URI repoUrl : artifactUrls) {
      resolver.addArtifactUrl(getUriPath(repoUrl));
    }
  }
  resolvers.add(resolver);
}
