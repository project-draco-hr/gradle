{
  validateBuildDirectory(buildDirectory);
  Factory<GradleLauncher> factory=new ContextualGradleLauncherFactory(buildDirectory,gradleLauncherFactory,startParameter,requestContext,sharedServices);
  Factory<GradleLauncher> nestedFactory=requestContext == null ? null : new ContextualGradleLauncherFactory(buildDirectory,gradleLauncherFactory,startParameter,null,sharedServices);
  DefaultIncludedBuild includedBuild=instantiator.newInstance(DefaultIncludedBuild.class,buildDirectory,factory,nestedFactory);
  validateIncludedBuild(includedBuild,buildDirectory);
  includedBuild.initialize();
  return includedBuild;
}
