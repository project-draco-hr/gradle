{
  expectEmptyCacheLocated();
  TestFile otherFile=outputDir.file("other").createFile();
  TaskInternal task=task();
  TaskArtifactState state=repository.getStateFor(task);
  assertFalse(state.isUpToDate());
  task.execute();
  otherFile.write("new content");
  state.update();
  otherFile.delete();
  state=repository.getStateFor(task());
  assertFalse(state.isUpToDate());
  assertThat(state.getExecutionHistory().getOutputFiles().getFiles(),(Matcher)hasItem(otherFile));
}
