{
  execute();
  outputDirFile.delete();
  TaskArtifactState state=repository.getStateFor(task());
  assertFalse(state.isUpToDate());
  state.update();
  outputDirFile.write("ignore me");
  state=repository.getStateFor(task());
  assertTrue(state.isUpToDate());
  assertThat(state.getExecutionHistory().getOutputFiles().getFiles(),(Matcher)not(hasItem(outputDirFile)));
  state.update();
}
