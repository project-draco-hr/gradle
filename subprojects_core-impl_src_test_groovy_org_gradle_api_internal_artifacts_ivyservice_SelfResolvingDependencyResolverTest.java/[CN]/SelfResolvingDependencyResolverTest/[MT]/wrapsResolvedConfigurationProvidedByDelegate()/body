{
  context.checking(new Expectations(){
{
      one(delegate).resolve(configuration);
      will(returnValue(resolvedConfiguration));
      allowing(dependencies).iterator();
      will(returnIterator(emptyList()));
      allowing(configuration).isTransitive();
      will(returnValue(true));
    }
  }
);
  ResolvedConfiguration configuration=resolver.resolve(this.configuration);
  assertThat(configuration,not(sameInstance(resolvedConfiguration)));
  final File file=new File("file");
  context.checking(new Expectations(){
{
      one(resolvedConfiguration).getFiles(Specs.SATISFIES_ALL);
      will(returnValue(toSet(file)));
    }
  }
);
  assertThat(configuration.getFiles(Specs.SATISFIES_ALL),equalTo(toLinkedSet(file)));
}
