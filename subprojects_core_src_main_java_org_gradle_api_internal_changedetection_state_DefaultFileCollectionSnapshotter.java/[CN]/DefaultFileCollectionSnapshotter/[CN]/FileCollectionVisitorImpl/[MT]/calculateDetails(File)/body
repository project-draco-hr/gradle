{
  String path=getPath(file);
  if (!file.exists()) {
    return new FileSnapshotDetails(path,FileType.Missing,new MissingFileVisitDetails(file));
  }
 else   if (file.isDirectory()) {
    return new FileSnapshotDetails(path,FileType.Directory,new SingletonFileTree.SingletonFileVisitDetails(file,fileSystem,true));
  }
 else {
    return new FileSnapshotDetails(path,FileType.RegularFile,new SingletonFileTree.SingletonFileVisitDetails(file,fileSystem,false));
  }
}
