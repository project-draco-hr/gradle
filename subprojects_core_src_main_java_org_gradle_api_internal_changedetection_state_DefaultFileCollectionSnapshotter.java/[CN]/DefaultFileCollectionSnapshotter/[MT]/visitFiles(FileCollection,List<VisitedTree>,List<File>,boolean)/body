{
  DefaultFileCollectionResolveContext context=new DefaultFileCollectionResolveContext(fileResolver);
  context.add(input);
  List<FileTreeInternal> fileTrees=context.resolveAsFileTrees();
  for (  FileTreeInternal fileTree : fileTrees) {
    visitedTrees.add(treeVisitor.visitTreeForSnapshotting(fileTree,allowReuse));
  }
}
