{
  final TestClosure closure=context.mock(TestClosure.class);
  final PublishArtifact artifact=createPublishArtifact("name1","ext1","type1","classifier1");
  context.checking(new Expectations(){
{
      one(closure).call(artifact);
    }
  }
);
  configuration.getArtifacts().whenObjectAdded(TestUtil.toClosure(closure));
  configuration.getArtifacts().add(artifact);
}
