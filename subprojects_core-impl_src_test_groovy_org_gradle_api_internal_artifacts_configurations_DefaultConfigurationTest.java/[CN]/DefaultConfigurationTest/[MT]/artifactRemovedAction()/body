{
  final TestClosure closure=context.mock(TestClosure.class);
  final PublishArtifact artifact=createPublishArtifact("name1","ext1","type1","classifier1");
  configuration.getArtifacts().add(artifact);
  context.checking(new Expectations(){
{
      one(closure).call(artifact);
    }
  }
);
  configuration.getArtifacts().whenObjectRemoved(HelperUtil.toClosure(closure));
  configuration.getArtifacts().remove(artifact);
}
