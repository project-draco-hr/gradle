{
  Dependency mavenDependency=new Dependency();
  mavenDependency.setGroupId(dependency.getGroup());
  if (dependency instanceof ProjectDependency) {
    ProjectDependency projectDependency=(ProjectDependency)dependency;
    mavenDependency.setArtifactId(determineProjectDependencyArtifactId(projectDependency));
    final String artifactId=determineProjectDependencyArtifactId((ProjectDependency)dependency);
    PublishArtifactSet configurationArtifacts=projectDependency.getProjectConfiguration().getArtifacts();
    if (configurationArtifacts.size() > 0) {
      Object[] matchingArtifacts=configurationArtifacts.matching(new Spec<PublishArtifact>(){
        public boolean isSatisfiedBy(        PublishArtifact element){
          return element.getName().equals(artifactId);
        }
      }
).toArray();
      PublishArtifact artifactToPublish;
      if (matchingArtifacts.length > 0) {
        artifactToPublish=(PublishArtifact)matchingArtifacts[0];
        if (artifactToPublish.getClassifier() != null) {
          classifier=artifactToPublish.getClassifier();
        }
      }
    }
  }
 else {
    mavenDependency.setArtifactId(name);
  }
  mavenDependency.setVersion(mapToMavenSyntax(dependency.getVersion()));
  mavenDependency.setType(type);
  mavenDependency.setScope(scope);
  mavenDependency.setClassifier(classifier);
  mavenDependency.setExclusions(getExclusions(dependency,configurations));
  return mavenDependency;
}
