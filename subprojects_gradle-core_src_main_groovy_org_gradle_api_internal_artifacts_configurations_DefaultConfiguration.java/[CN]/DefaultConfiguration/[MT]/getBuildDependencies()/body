{
  if (!projectDependenciesBuildInstruction.isRebuild()) {
    return new DefaultTaskDependency();
  }
  return new TaskDependency(){
    public Set<? extends Task> getDependencies(    Task task){
      DefaultTaskDependency taskDependency=new DefaultTaskDependency();
      addBuildDependenciesFromExtendedConfigurations(taskDependency);
      addUploadTaskAndAdditionalTasksFromProjectDependencies(taskDependency);
      return taskDependency.getDependencies(task);
    }
  }
;
}
