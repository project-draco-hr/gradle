{
synchronized (lock) {
    if (localAddress == null) {
      localAddress=connector.accept(handShakeAction());
    }
    URI localAddress;
    try {
      localAddress=new URI(String.format("channel:%s!%d",this.localAddress,nextId++));
    }
 catch (    URISyntaxException e) {
      throw UncheckedException.asUncheckedException(e);
    }
    pendingActions.put(localAddress,action);
    return localAddress;
  }
}
