{
  GradleInternal gradle=context.getGradle();
  Set<String> excludedTaskNames=gradle.getStartParameter().getExcludedTaskNames();
  if (!excludedTaskNames.isEmpty()) {
    final Set<Task> excludedTasks=new HashSet<Task>();
    for (    String taskName : excludedTaskNames) {
      selector.init(gradle);
      selector.selectTasks(taskName);
      excludedTasks.addAll(selector.getTasks());
    }
    gradle.getTaskGraph().useFilter(new Spec<Task>(){
      public boolean isSatisfiedBy(      Task task){
        return !excludedTasks.contains(task);
      }
    }
);
  }
  context.proceed();
}
