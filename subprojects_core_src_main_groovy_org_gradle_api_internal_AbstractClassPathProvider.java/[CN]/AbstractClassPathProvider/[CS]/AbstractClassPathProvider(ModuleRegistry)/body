{
  this.moduleRegistry=moduleRegistry;
  File codeSource=ClasspathUtil.getClasspathForClass(AbstractClassPathProvider.class);
  if (codeSource.isFile()) {
    File gradleHome=codeSource.getParentFile().getParentFile();
    runtimeLibs=new DirScanner(new File(gradleHome + "/lib"));
    pluginLibs=new DirScanner(new File(gradleHome + "/lib/plugins"));
  }
 else {
    runtimeLibs=new ClassPathScanner(codeSource);
    pluginLibs=runtimeLibs;
  }
}
