{
  File codeSource=ClasspathUtil.getClasspathForClass(DefaultClassPathProvider.class);
  if (codeSource.isFile()) {
    gradleHome=codeSource.getParentFile().getParentFile();
    runtimeLibs=new DirScanner(new File(gradleHome + "/lib"));
    pluginLibs=new DirScanner(new File(gradleHome + "/lib/plugins"));
    coreImplLibs=new DirScanner(new File(gradleHome + "/lib/core-impl"));
  }
 else {
    gradleHome=null;
    runtimeLibs=new ClassPathScanner(codeSource);
    pluginLibs=runtimeLibs;
    coreImplLibs=runtimeLibs;
  }
}
