{
  if (spec instanceof JavaCompileSpec) {
    CompileOptions options=((JavaCompileSpec)spec).getCompileOptions();
    return (Compiler)compilerFactory.create(options);
  }
  if (spec instanceof JavadocSpec) {
    return (Compiler)new JavadocGenerator(execActionFactory);
  }
  throw new IllegalArgumentException(String.format("Don't know how to compile using spec of type %s.",spec.getClass().getSimpleName()));
}
