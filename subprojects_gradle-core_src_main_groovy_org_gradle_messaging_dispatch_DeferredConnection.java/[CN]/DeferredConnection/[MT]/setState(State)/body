{
  if (!this.state.canTransitionTo(state)) {
    throw new IllegalStateException(String.format("Cannot change state from %s to %s.",this.state,state));
  }
  this.state=state;
  condition.signalAll();
}
