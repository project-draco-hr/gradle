{
  if (!specType.equals(JavaCompileSpec.class)) {
    throw new IllegalArgumentException(String.format("Don't know how to compile using spec of type %s.",specType.getSimpleName()));
  }
  JavaCompilerFactory inProcessCompilerFactory=new InProcessJavaCompilerFactory();
  JavaCompilerFactory defaultCompilerFactory=new DefaultJavaCompilerFactory(gradle.getRootProject().getProjectDir(),inProcessCompilerFactory,compilerDaemonFactory);
  return (Compiler)new DelegatingJavaCompiler(defaultCompilerFactory);
}
