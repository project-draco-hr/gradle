{
  if (artifacts.isEmpty()) {
    return Collections.emptySet();
  }
  MavenArtifact mainArtifact=getMainArtifact();
  Set<ArtifactKey> keys=new HashSet<ArtifactKey>();
  Set<MavenArtifact> additionalArtifacts=new LinkedHashSet<MavenArtifact>();
  for (  MavenArtifact artifact : artifacts) {
    if (artifact == mainArtifact) {
      continue;
    }
    ArtifactKey key=new ArtifactKey(artifact);
    if (keys.contains(key)) {
      throw new MavenPublishException(String.format("Cannot publish 2 artifacts with the identical extension '%s' and classifier '%s'.",artifact.getExtension(),artifact.getClassifier()));
    }
    keys.add(key);
    additionalArtifacts.add(artifact);
  }
  return additionalArtifacts;
}
