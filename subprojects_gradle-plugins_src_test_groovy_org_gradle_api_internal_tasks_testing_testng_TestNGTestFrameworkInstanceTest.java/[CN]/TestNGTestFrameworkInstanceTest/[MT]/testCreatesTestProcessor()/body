{
  testNGTestFrameworkInstance=new TestNGTestFrameworkInstance(testMock);
  setMocks();
  context.checking(new Expectations(){
{
      allowing(testMock).getTestSrcDirs();
      will(returnValue(testSrcDirs));
      allowing(testMock).getTestReportDir();
      will(returnValue(testReportDir));
      allowing(serviceRegistry).get(IdGenerator.class);
      will(returnValue(idGeneratorMock));
      one(testngOptionsMock).setTestResources(testSrcDirs);
      one(testngOptionsMock).getSuites(testReportDir);
    }
  }
);
  TestClassProcessor processor=testNGTestFrameworkInstance.getProcessorFactory().create(serviceRegistry);
  assertThat(processor,instanceOf(TestNGTestClassProcessor.class));
}
