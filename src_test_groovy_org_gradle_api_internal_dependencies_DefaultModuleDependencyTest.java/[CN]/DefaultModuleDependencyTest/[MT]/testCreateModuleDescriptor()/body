{
  moduleDependency=new DefaultModuleDependency(TEST_CONF_MAPPING,TEST_MODULE_DESCRIPTOR).setChanging(true).setForce(true);
  moduleDependency.setDependencyDescriptorFactory(dependencyDescriptorFactoryMock);
  context.checking(new Expectations(){
{
      one(dependencyDescriptorFactoryMock).createFromModuleDependency(getParentModuleDescriptorMock(),moduleDependency);
      will(returnValue(expectedDependencyDescriptor));
    }
  }
);
  assertSame(expectedDependencyDescriptor,moduleDependency.createDependencyDescriptor(getParentModuleDescriptorMock()));
}
