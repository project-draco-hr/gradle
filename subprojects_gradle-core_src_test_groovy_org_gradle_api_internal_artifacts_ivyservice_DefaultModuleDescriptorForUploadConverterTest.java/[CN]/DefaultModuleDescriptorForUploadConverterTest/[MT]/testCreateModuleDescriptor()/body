{
  DefaultModuleDescriptor sourceModuleDescriptor=new DefaultModuleDescriptor(ModuleRevisionId.newInstance("org","name","version"),"status",new Date());
  sourceModuleDescriptor.addDependency(new DefaultDependencyDescriptor(ModuleRevisionId.newInstance("deporg","depname","depversion"),true));
  String confName="someConf";
  sourceModuleDescriptor.addConfiguration(new Configuration(confName));
  Map noFilePathExtraAttributes=WrapUtil.toMap("someKey","someValue");
  sourceModuleDescriptor.addArtifact(confName,new DefaultArtifact(sourceModuleDescriptor.getModuleRevisionId(),new Date(),"someName","someType","someExt",GUtil.addMaps(noFilePathExtraAttributes,WrapUtil.toMap(DefaultIvyDependencyPublisher.FILE_PATH_EXTRA_ATTRIBUTE,"somePath"))));
  ModuleDescriptor convertedModuleDescriptor=new DefaultModuleDescriptorForUploadConverter().createModuleDescriptor(sourceModuleDescriptor);
  assertThat(convertedModuleDescriptor.getModuleRevisionId(),equalTo(sourceModuleDescriptor.getModuleRevisionId()));
  assertThat(convertedModuleDescriptor.getStatus(),equalTo(sourceModuleDescriptor.getStatus()));
  assertThat(convertedModuleDescriptor.getPublicationDate(),equalTo(sourceModuleDescriptor.getPublicationDate()));
  assertThat(convertedModuleDescriptor.getConfigurations(),equalTo(sourceModuleDescriptor.getConfigurations()));
  assertThat(convertedModuleDescriptor.getDependencies(),equalTo(sourceModuleDescriptor.getDependencies()));
  assertThatArtifactsAreEqualExceptFilePathAttribute(sourceModuleDescriptor.getArtifacts(confName)[0],convertedModuleDescriptor.getArtifacts(confName)[0],noFilePathExtraAttributes);
}
