{
  context.checking(new Expectations(){
{
      allowing(configuration).getAllDependencies();
      will(returnValue(dependencies));
      allowing(dependencies).isEmpty();
      will(returnValue(true));
    }
  }
);
  ResolvedConfiguration resolvedConfig=ivyService.resolve(configuration);
  assertFalse(resolvedConfig.hasError());
  resolvedConfig.rethrowFailure();
  assertThat(resolvedConfig.getFiles(Specs.<Dependency>satisfyAll()),isEmpty());
  assertThat(resolvedConfig.getFirstLevelModuleDependencies(),isEmpty());
  assertThat(resolvedConfig.getResolvedArtifacts(),isEmpty());
}
