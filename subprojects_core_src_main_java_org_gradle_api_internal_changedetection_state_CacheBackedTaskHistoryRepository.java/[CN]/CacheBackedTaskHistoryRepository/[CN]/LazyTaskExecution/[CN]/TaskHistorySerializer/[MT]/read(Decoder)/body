{
  LazyTaskExecution execution=new LazyTaskExecution();
  int inputFilesSnapshotIdCount=decoder.readInt();
  ImmutableSortedMap.Builder<String,Long> inputFilesSnapshotIds=ImmutableSortedMap.naturalOrder();
  for (int snapshotIdx=0; snapshotIdx < inputFilesSnapshotIdCount; snapshotIdx++) {
    String property=decoder.readString();
    long id=decoder.readLong();
    inputFilesSnapshotIds.put(property,id);
  }
  execution.inputFilesSnapshotIds=inputFilesSnapshotIds.build();
  execution.setInputFilesHash(HashCode.fromBytes(decoder.readBinary()));
  execution.outputFilesSnapshotId=decoder.readLong();
  execution.setOutputFilesHash(decoder.readInt());
  execution.discoveredFilesSnapshotId=decoder.readLong();
  execution.setTaskClass(decoder.readString());
  if (decoder.readBoolean()) {
    execution.setTaskClassLoaderHash(HashCode.fromBytes(decoder.readBinary()));
  }
  if (decoder.readBoolean()) {
    execution.setTaskActionsClassLoaderHash(HashCode.fromBytes(decoder.readBinary()));
  }
  int outputFiles=decoder.readInt();
  Set<String> files=new HashSet<String>();
  for (int j=0; j < outputFiles; j++) {
    files.add(stringInterner.intern(decoder.readString()));
  }
  execution.setOutputFiles(files);
  boolean inputProperties=decoder.readBoolean();
  if (inputProperties) {
    Map<String,Object> map=inputPropertiesSerializer.read(decoder);
    execution.setInputProperties(map);
  }
 else {
    execution.setInputProperties(new HashMap<String,Object>());
  }
  return execution;
}
