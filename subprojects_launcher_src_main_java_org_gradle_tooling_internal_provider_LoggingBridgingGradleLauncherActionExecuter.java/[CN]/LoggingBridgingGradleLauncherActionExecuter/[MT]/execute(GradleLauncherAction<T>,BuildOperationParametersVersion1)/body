{
  LoggingManagerInternal loggingManager=loggingManagerFactory.create();
  if (!Boolean.TRUE.equals(actionParameters.isEmbedded())) {
    loggingManager.disableStandardOutputCapture();
  }
  if (actionParameters.getStandardOutput() != null) {
    loggingManager.addStandardOutputListener(new StreamBackedStandardOutputListener(actionParameters.getStandardOutput()));
  }
  if (actionParameters.getStandardError() != null) {
    loggingManager.addStandardErrorListener(new StreamBackedStandardOutputListener(actionParameters.getStandardError()));
  }
  ProgressListenerVersion1 progressListener=actionParameters.getProgressListener();
  OutputEventListenerAdapter listener=new OutputEventListenerAdapter(progressListener);
  loggingManager.addOutputEventListener(listener);
  loggingManager.start();
  try {
    return executer.execute(action,actionParameters);
  }
  finally {
    loggingManager.stop();
  }
}
