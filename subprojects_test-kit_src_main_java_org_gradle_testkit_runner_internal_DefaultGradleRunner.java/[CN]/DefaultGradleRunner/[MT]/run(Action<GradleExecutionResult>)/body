{
  if (projectDirectory == null) {
    throw new InvalidRunnerConfigurationException("Please specify a project directory before executing the build");
  }
  File testKitDir=createTestKitDir(testKitDirProvider);
  GradleExecutionResult execResult=gradleExecutor.run(new GradleExecutionParameters(gradleHome,testKitDir,projectDirectory,arguments,jvmArguments,classpath,debug));
  resultVerification.execute(execResult);
  return new DefaultBuildResult(execResult.getStandardOutput(),execResult.getStandardError(),execResult.getTasks());
}
