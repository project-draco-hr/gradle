{
  ModelPath creationModelPath=ModelPath.path(path);
  ModelCreation<?> existingCreation=creations.get(creationModelPath);
  if (existingCreation != null) {
    throw new DuplicateModelException(String.format("Cannot register model creation rule '%s' for path '%s' as the rule '%s' is already registered to create a model element at this path",toString(creator.getSourceDescriptor()),path,toString(existingCreation.getCreator().getSourceDescriptor())));
  }
  ModelElement<?> existing=store.get(creationModelPath);
  if (existing != null) {
    throw new DuplicateModelException(String.format("Cannot register model creation rule '%s' for path '%s' as the rule '%s' is already registered (and the model element has been created)",toString(creator.getSourceDescriptor()),path,toString(existing.getCreatorDescriptor())));
  }
  notifyCreationListeners(creator);
  creations.put(creationModelPath,new ModelCreation<T>(creator,toModelPaths(inputPaths)));
}
