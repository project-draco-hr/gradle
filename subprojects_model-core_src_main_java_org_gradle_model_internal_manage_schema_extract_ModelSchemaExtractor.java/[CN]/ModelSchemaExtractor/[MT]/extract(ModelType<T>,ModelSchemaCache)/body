{
  ModelSchemaExtractionContext<T> context=ModelSchemaExtractionContext.root(type);
  List<ModelSchemaExtractionContext<?>> validations=Lists.newLinkedList();
  Queue<ModelSchemaExtractionContext<?>> unsatisfiedDependencies=Lists.newLinkedList();
  ModelSchemaExtractionContext<?> extractionContext=context;
  validations.add(extractionContext);
  while (extractionContext != null) {
    extractSchema(extractionContext,cache);
    Iterable<? extends ModelSchemaExtractionContext<?>> dependencies=extractionContext.getChildren();
    Iterables.addAll(validations,dependencies);
    pushUnsatisfiedDependencies(dependencies,unsatisfiedDependencies,cache);
    extractionContext=unsatisfiedDependencies.poll();
  }
  for (  ModelSchemaExtractionContext<?> validationContext : Lists.reverse(validations)) {
    validate(validationContext,cache);
  }
  return context.getResult();
}
