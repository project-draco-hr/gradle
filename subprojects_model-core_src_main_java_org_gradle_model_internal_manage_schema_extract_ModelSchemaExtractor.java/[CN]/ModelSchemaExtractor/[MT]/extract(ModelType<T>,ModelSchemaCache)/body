{
  Queue<ModelSchemaExtractionContext<?>> unsatisfiedDependencies=Lists.newLinkedList();
  ModelSchemaExtractionContext<?> extractionContext=ModelSchemaExtractionContext.root(type);
  while (extractionContext != null) {
    ModelSchemaExtractionResult<?> nextSchema=extractSchema(extractionContext,cache);
    pushUnsatisfiedDependencies(nextSchema.getDependencies(),unsatisfiedDependencies,cache);
    extractionContext=unsatisfiedDependencies.poll();
  }
  return cache.get(type);
}
