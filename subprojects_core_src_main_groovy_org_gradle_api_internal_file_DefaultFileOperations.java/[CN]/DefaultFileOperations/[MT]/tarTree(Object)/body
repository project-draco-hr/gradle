{
  File tarFile=null;
  ReadableResource resource;
  if (tarPath instanceof ReadableResource) {
    resource=(ReadableResource)tarPath;
  }
 else {
    tarFile=file(tarPath);
    resource=new MaybeCompressedFileResource(new FileResource(tarFile));
  }
  TarFileTree tarTree=new TarFileTree(tarFile,resource,getExpandDir(),fileSystem);
  return new FileTreeAdapter(tarTree);
}
