{
  statusLock.lock();
  try {
    if (status != ForkStatus.RESTARTING) {
      if (status != ForkStatus.STARTED) {
        throw new IllegalStateException("can't change status to STOPPING, current status is " + status);
      }
      status=ForkStatus.STOPPING;
    }
  }
  finally {
    statusLock.unlock();
  }
}
