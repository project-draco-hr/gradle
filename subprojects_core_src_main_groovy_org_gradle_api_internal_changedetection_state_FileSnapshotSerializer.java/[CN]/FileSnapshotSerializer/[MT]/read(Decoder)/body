{
  byte kind=decoder.readByte();
  if (kind == 1) {
    return defaultSnapshotSerializer.read(decoder);
  }
 else   if (kind == 2) {
    return outputSnapshotSerializer.read(decoder);
  }
 else {
    throw new RuntimeException("Unable to read from file snapshot cache. Unexpected value found in the data stream.");
  }
}
