{
  if (value instanceof DefaultFileCollectionSnapshotter.FileCollectionSnapshotImpl) {
    encoder.writeByte((byte)1);
    DefaultFileCollectionSnapshotter.FileCollectionSnapshotImpl cached=(DefaultFileCollectionSnapshotter.FileCollectionSnapshotImpl)value;
    defaultSnapshotSerializer.write(encoder,cached);
  }
 else   if (value instanceof OutputFilesCollectionSnapshotter.OutputFilesSnapshot) {
    encoder.writeByte((byte)2);
    OutputFilesCollectionSnapshotter.OutputFilesSnapshot cached=(OutputFilesCollectionSnapshotter.OutputFilesSnapshot)value;
    outputSnapshotSerializer.write(encoder,cached);
  }
 else {
    throw new RuntimeException("Unable to write to file snapshot cache. Unexpected type to write: " + value);
  }
}
