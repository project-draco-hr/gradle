{
  if (value instanceof DefaultFileSnapshotter.FileCollectionSnapshotImpl) {
    dataOutput.writeByte(1);
    DefaultFileSnapshotter.FileCollectionSnapshotImpl cached=(DefaultFileSnapshotter.FileCollectionSnapshotImpl)value;
    DefaultFileSnapshotterSerializer serializer=new DefaultFileSnapshotterSerializer();
    serializer.write(dataOutput,cached);
  }
 else   if (value instanceof OutputFilesSnapshotter.OutputFilesSnapshot) {
    dataOutput.writeByte(2);
    OutputFilesSnapshotter.OutputFilesSnapshot cached=(OutputFilesSnapshotter.OutputFilesSnapshot)value;
    OutputFilesSnapshotSerializer serializer=new OutputFilesSnapshotSerializer();
    serializer.write(dataOutput,cached);
  }
 else {
    throw new RuntimeException("Unable to write to file snapshot cache. Unexpected type to write: " + value);
  }
}
