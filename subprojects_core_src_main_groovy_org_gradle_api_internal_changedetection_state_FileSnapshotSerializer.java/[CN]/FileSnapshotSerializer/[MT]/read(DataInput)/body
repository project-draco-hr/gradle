{
  byte kind=dataInput.readByte();
  if (kind == 1) {
    DefaultFileSnapshotterSerializer serializer=new DefaultFileSnapshotterSerializer();
    return serializer.read(dataInput);
  }
 else   if (kind == 2) {
    OutputFilesSnapshotSerializer serializer=new OutputFilesSnapshotSerializer();
    return serializer.read(dataInput);
  }
 else {
    throw new RuntimeException("Unable to read from file snapshot cache. Unexpected value found in the data stream.");
  }
}
