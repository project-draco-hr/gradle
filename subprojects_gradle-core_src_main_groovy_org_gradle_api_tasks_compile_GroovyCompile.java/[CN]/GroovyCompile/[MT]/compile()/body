{
  if (getAntGroovyCompile() == null)   throw new InvalidUserDataException("The ant groovy compile command must be set!");
  if (getSourceCompatibility() == null || getTargetCompatibility() == null) {
    throw new InvalidUserDataException("The sourceCompatibility and targetCompatibility must be set!");
  }
  List<File> classpath=null;
  List existingGroovySourceDirs=existentDirsFilter.findExistingDirs(getGroovySourceDirs());
  if (existingGroovySourceDirs.size() > 0) {
    if (classpath == null) {
      classpath=GUtil.addLists(getClasspath());
    }
    List<File> taskClasspath=new ArrayList<File>(getGroovyClasspath().getFiles());
    throwExceptionIfTaskClasspathIsEmpty(taskClasspath);
    antGroovyCompile.execute(getProject().getAnt(),existingGroovySourceDirs,getGroovyIncludes(),getGroovyExcludes(),getDestinationDir(),classpath,getSourceCompatibility(),getTargetCompatibility(),getGroovyOptions(),getOptions(),taskClasspath);
    setDidWork(antGroovyCompile.getNumFilesCompiled() > 0);
  }
}
