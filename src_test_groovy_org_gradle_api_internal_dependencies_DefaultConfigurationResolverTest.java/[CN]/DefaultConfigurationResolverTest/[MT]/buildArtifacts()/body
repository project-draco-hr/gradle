{
  final TaskDependency taskDependencyMock=context.mock(TaskDependency.class);
  final Task taskMock=context.mock(Task.class);
  context.checking(new Expectations(){
{
      allowing(artifactContainerMock).getArtifacts(confs(TEST_CONF_NAME));
      will(returnValue(WrapUtil.toSet(publishArtifactMock)));
      allowing(publishArtifactMock).getTaskDependency();
      will(returnValue(taskDependencyMock));
      allowing(taskDependencyMock).getDependencies(with(any(Task.class)));
      will(returnValue(WrapUtil.toSet(taskMock)));
    }
  }
);
  assertThat((Set<Task>)configurationResolver.getBuildArtifactDependencies().getDependencies(taskMock),equalTo(WrapUtil.toSet(taskMock)));
}
