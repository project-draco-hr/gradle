{
  final DependencyResolver loopback=this;
  return cacheLockingManager.useCache(String.format("Resolve %s",dd),new Factory<ResolvedModuleRevision>(){
    public ResolvedModuleRevision create(){
      DefaultBuildableModuleVersionResolveResult result=new DefaultBuildableModuleVersionResolveResult();
      DefaultDependencyMetaData dependency=new DefaultDependencyMetaData(dd);
      IvyContext ivyContext=IvyContext.pushNewCopyContext();
      try {
        ivyContext.setResolveData(data);
        userResolverChain.resolve(dependency,result);
      }
  finally {
        IvyContext.popContext();
      }
      return new ResolvedModuleRevision(loopback,loopback,result.getMetaData().getDescriptor(),null);
    }
  }
);
}
