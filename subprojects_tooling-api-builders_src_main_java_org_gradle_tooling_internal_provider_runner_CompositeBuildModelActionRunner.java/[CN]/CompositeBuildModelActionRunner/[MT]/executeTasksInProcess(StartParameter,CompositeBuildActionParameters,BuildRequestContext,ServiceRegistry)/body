{
  CompositeParameters compositeParameters=actionParameters.getCompositeParameters();
  List<GradleParticipantBuild> participantBuilds=compositeParameters.getBuilds();
  GradleLauncherFactory launcherFactory=sharedServices.get(GradleLauncherFactory.class);
  boolean buildFound=false;
  for (  GradleParticipantBuild participant : participantBuilds) {
    buildFound=true;
    if (buildRequestContext.getCancellationToken().isCancellationRequested()) {
      break;
    }
    StartParameter startParameter=parentStartParam.newInstance();
    startParameter.setProjectDir(participant.getProjectDir());
    startParameter.setSearchUpwards(false);
    DefaultBuildRequestContext requestContext=new DefaultBuildRequestContext(new DefaultBuildRequestMetaData(new GradleLauncherMetaData(),System.currentTimeMillis()),buildRequestContext.getCancellationToken(),buildRequestContext.getEventConsumer(),buildRequestContext.getOutputListener(),buildRequestContext.getErrorListener());
    GradleLauncher launcher=launcherFactory.newInstance(startParameter,requestContext,sharedServices);
    try {
      launcher.run();
    }
  finally {
      launcher.stop();
    }
  }
  if (!buildFound) {
    throw new IllegalStateException("Build not part of composite");
  }
}
