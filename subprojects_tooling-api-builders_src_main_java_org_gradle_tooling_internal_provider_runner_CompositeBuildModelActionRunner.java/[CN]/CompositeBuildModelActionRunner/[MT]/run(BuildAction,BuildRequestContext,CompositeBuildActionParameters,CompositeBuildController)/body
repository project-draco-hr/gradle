{
  if (!(action instanceof BuildModelAction)) {
    return;
  }
  BuildModelAction buildModelAction=(BuildModelAction)action;
  Map<Object,Object> results=null;
  if (isModelRequest(buildModelAction)) {
    results=fetchCompositeModelsInProcess(buildModelAction,requestContext,actionParameters.getCompositeParameters().getBuilds(),buildController.getBuildScopeServices());
  }
 else {
    if (!buildModelAction.isRunTasks()) {
      throw new IllegalStateException("No tasks defined.");
    }
    executeTasksInProcess(action.getStartParameter(),actionParameters,requestContext,buildController.getBuildScopeServices());
  }
  PayloadSerializer payloadSerializer=buildController.getBuildScopeServices().get(PayloadSerializer.class);
  buildController.setResult(new BuildActionResult(payloadSerializer.serialize(results),null));
}
