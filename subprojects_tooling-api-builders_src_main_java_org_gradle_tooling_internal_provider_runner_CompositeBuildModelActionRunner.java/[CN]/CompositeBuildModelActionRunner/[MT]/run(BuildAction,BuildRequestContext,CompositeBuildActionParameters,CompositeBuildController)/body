{
  if (!(action instanceof BuildModelAction)) {
    return;
  }
  Class<?> modelType=resolveModelType((BuildModelAction)action);
  Map<Object,Object> results=null;
  if (modelType != Void.class) {
    results=new HashMap<Object,Object>();
    results.putAll(fetchCompositeModelsInProcess((BuildModelAction)action,modelType,actionParameters.getCompositeParameters().getBuilds(),requestContext.getCancellationToken(),buildController.getBuildScopeServices()));
  }
 else {
    if (!((BuildModelAction)action).isRunTasks()) {
      throw new IllegalStateException("No tasks defined.");
    }
    executeTasksInProcess(action.getStartParameter(),actionParameters,requestContext.getCancellationToken(),buildController.getBuildScopeServices());
  }
  PayloadSerializer payloadSerializer=buildController.getBuildScopeServices().get(PayloadSerializer.class);
  buildController.setResult(new BuildActionResult(payloadSerializer.serialize(results),null));
}
