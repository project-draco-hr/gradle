{
  System.out.println("  attach via " + this);
  System.out.println("    " + from + " -> "+ childConfiguration);
  DefaultResolvedDependency parent=from.getResult();
  DefaultResolvedDependency child=childConfiguration.getResult();
  parent.addChild(child);
  Set<ResolvedArtifact> artifacts=getArtifacts(childConfiguration,resolvedArtifactFactory,resolver);
  if (!artifacts.isEmpty()) {
    child.addParentSpecificArtifacts(parent,artifacts);
  }
  boolean includeDefaults=dependency.descriptor instanceof EnhancedDependencyDescriptor && ((EnhancedDependencyDescriptor)dependency.descriptor).isIncludeDefaultArtifacts();
  if (artifacts.isEmpty() || includeDefaults) {
    child.addParentSpecificArtifacts(parent,childConfiguration.getArtifacts(resolvedArtifactFactory,resolver));
  }
  for (  ResolvedArtifact artifact : child.getParentArtifacts(parent)) {
    result.addArtifact(artifact);
  }
  if (parent == result.getRoot()) {
    EnhancedDependencyDescriptor enhancedDependencyDescriptor=(EnhancedDependencyDescriptor)dependency.descriptor;
    result.addFirstLevelDependency(enhancedDependencyDescriptor.getModuleDependency(),child);
  }
}
