{
  if (options.isFork() && options.getForkOptions().getExecutable() != null) {
    return new CommandLineJavaCompiler();
  }
  Compiler<JavaCompileSpec> compiler=new JdkJavaCompiler(javaHomeBasedJavaCompilerFactory);
  if (options.isFork() && !jointCompilation) {
    return new DaemonJavaCompiler(daemonWorkingDir,compiler,compilerDaemonFactory);
  }
  return compiler;
}
