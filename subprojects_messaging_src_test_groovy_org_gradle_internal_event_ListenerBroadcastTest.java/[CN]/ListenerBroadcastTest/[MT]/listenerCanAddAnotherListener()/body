{
  final TestListener listener1=context.mock(TestListener.class,"listener1");
  final TestListener listener2=context.mock(TestListener.class,"listener2");
  final TestListener listener3=context.mock(TestListener.class,"listener3");
  broadcast.add(listener1);
  broadcast.add(listener2);
  context.checking(new Expectations(){
{
      ignoring(listener2);
      one(listener1).event1("event");
      will(new org.jmock.api.Action(){
        public void describeTo(        Description description){
          description.appendText("add listener");
        }
        public Object invoke(        Invocation invocation) throws Throwable {
          broadcast.add(listener3);
          return null;
        }
      }
);
    }
  }
);
  broadcast.getSource().event1("event");
}
