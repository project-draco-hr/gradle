{
  if (logLevel == LogLevel.DEBUG) {
    Layout<ILoggingEvent> layout=new DebugLayout();
    layout.setContext(loggerContext);
    layout.start();
    return new LayoutBasedFormatter(layout,getBroadcastWithTarget());
  }
  if (terminal) {
    return new LogEventFormatter(){
      public void format(      ILoggingEvent event){
        consoleFormatter.format(event);
        nonConsoleFormatter.format(event);
      }
    }
;
  }
 else {
    return nonConsoleFormatter;
  }
}
