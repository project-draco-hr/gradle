{
  if (logLevel == LogLevel.DEBUG) {
    Layout<ILoggingEvent> layout=new DebugLayout();
    layout.setContext(loggerContext);
    layout.start();
    return new LayoutBasedFormatter(layout);
  }
 else   if (isTerminal) {
    return new ConsoleBackedFormatter(loggerContext);
  }
 else {
    return new BasicProgressLoggingAwareFormatter(loggerContext);
  }
}
