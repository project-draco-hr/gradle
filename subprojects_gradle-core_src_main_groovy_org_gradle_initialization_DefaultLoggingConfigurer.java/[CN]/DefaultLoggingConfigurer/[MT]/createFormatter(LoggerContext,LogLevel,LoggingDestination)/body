{
  if (logLevel == LogLevel.DEBUG) {
    Layout<ILoggingEvent> layout=new DebugLayout();
    layout.setContext(loggerContext);
    layout.start();
    return new LayoutBasedFormatter(layout,target.target);
  }
 else   if (target.console != null) {
    return new ConsoleBackedFormatter(loggerContext,target.console);
  }
 else {
    return new BasicProgressLoggingAwareFormatter(loggerContext,target.target);
  }
}
