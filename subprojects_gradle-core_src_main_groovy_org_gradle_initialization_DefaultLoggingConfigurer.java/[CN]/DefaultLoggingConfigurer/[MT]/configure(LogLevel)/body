{
  LoggerContext lc=(LoggerContext)LoggerFactory.getILoggerFactory();
  ch.qos.logback.classic.Logger rootLogger;
  if (!applied) {
    SLF4JBridgeHandler.install();
    lc.reset();
    stderrConsoleAppender.setContext(lc);
    stderrConsoleAppender.setTarget("System.err");
    stdoutConsoleAppender.setContext(lc);
    rootLogger=lc.getLogger("ROOT");
    rootLogger.addAppender(stdoutConsoleAppender);
    rootLogger.addAppender(stderrConsoleAppender);
    Message.setDefaultLogger(new IvyLoggingAdaper());
  }
 else {
    rootLogger=lc.getLogger("ROOT");
  }
  applied=true;
  stderrConsoleAppender.stop();
  stdoutConsoleAppender.stop();
  stderrConsoleAppender.clearAllFilters();
  stdoutConsoleAppender.clearAllFilters();
  stderrConsoleAppender.addFilter(createLevelFilter(lc,Level.ERROR,FilterReply.ACCEPT,FilterReply.DENY));
  Level level=Level.INFO;
  setLayouts(logLevel,stderrConsoleAppender,stdoutConsoleAppender,lc);
  MarkerFilter quietFilter=new MarkerFilter(FilterReply.DENY,Logging.QUIET);
  stdoutConsoleAppender.addFilter(quietFilter);
  if (!(logLevel == LogLevel.QUIET)) {
    quietFilter.setOnMismatch(FilterReply.NEUTRAL);
    if (logLevel == LogLevel.DEBUG) {
      level=Level.DEBUG;
      stdoutConsoleAppender.addFilter(createLevelFilter(lc,Level.INFO,FilterReply.ACCEPT,FilterReply.NEUTRAL));
      stdoutConsoleAppender.addFilter(createLevelFilter(lc,Level.DEBUG,FilterReply.ACCEPT,FilterReply.NEUTRAL));
    }
 else {
      if (logLevel == LogLevel.INFO) {
        level=Level.INFO;
        stdoutConsoleAppender.addFilter(createLevelFilter(lc,Level.INFO,FilterReply.ACCEPT,FilterReply.NEUTRAL));
      }
 else {
        stdoutConsoleAppender.addFilter(new MarkerFilter(Logging.LIFECYCLE,Logging.PROGRESS));
      }
    }
    stdoutConsoleAppender.addFilter(createLevelFilter(lc,Level.WARN,FilterReply.ACCEPT,FilterReply.DENY));
  }
  rootLogger.setLevel(level);
  stdoutConsoleAppender.start();
  stderrConsoleAppender.start();
}
