{
  Method match;
  try {
    match=delegate.getClass().getMethod(method.getName(),method.getParameterTypes());
  }
 catch (  NoSuchMethodException e) {
    throw new IncompatibleVersionException(String.format("Method not found. The version of Gradle you connect to does not support this method: %s.%s()\n" + "Most likely, this method was added in one of the later versions of Gradle.\n" + "To resolve the problem you can change/upgrade the target version of Gradle you connect to.\n"+ "Alternatively, you can handle and ignore this exception.",method.getDeclaringClass().getSimpleName(),method.getName(),delegate.getClass().getSimpleName()),e);
  }
  LinkedList<Class<?>> queue=new LinkedList<Class<?>>();
  queue.add(delegate.getClass());
  while (!queue.isEmpty()) {
    Class<?> c=queue.removeFirst();
    try {
      match=c.getMethod(method.getName(),method.getParameterTypes());
    }
 catch (    NoSuchMethodException e) {
    }
    for (    Class<?> interfaceType : c.getInterfaces()) {
      queue.addFirst(interfaceType);
    }
    if (c.getSuperclass() != null) {
      queue.addFirst(c.getSuperclass());
    }
  }
  match.setAccessible(true);
  return match;
}
