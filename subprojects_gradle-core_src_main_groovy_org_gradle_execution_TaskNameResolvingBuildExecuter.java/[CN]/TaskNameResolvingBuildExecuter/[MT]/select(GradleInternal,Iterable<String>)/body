{
  Set<String> unknownTasks=new LinkedHashSet<String>();
  Project project=gradle.getDefaultProject();
  List<Collection<Task>> matches=new ArrayList<Collection<Task>>();
  for (  String taskName : names) {
    Set<Task> tasksForName=findTasks(project,taskName);
    if (tasksForName.size() == 0) {
      unknownTasks.add(taskName);
    }
 else {
      matches.add(tasksForName);
    }
  }
  if (unknownTasks.size() == 0) {
    return matches;
  }
  if (unknownTasks.size() == 1) {
    throw new UnknownTaskException(String.format("Task %s not found in %s.",GUtil.toString(unknownTasks),project));
  }
 else {
    throw new UnknownTaskException(String.format("Tasks %s not found in %s.",GUtil.toString(unknownTasks),project));
  }
}
