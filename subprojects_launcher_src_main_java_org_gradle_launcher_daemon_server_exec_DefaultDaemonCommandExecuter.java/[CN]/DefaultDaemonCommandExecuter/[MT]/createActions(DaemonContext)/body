{
  DaemonDiagnostics daemonDiagnostics=new DaemonDiagnostics(daemonLog,daemonContext.getPid());
  return new LinkedList<DaemonCommandAction>(Arrays.asList(new StopConnectionAfterExecution(),new HandleClientDisconnectBeforeSendingCommand(),new CatchAndForwardDaemonFailure(),new HandleStop(),new StartBuildOrRespondWithBusy(daemonDiagnostics),new EstablishBuildEnvironment(processEnvironment),new LogToClient(loggingManager,daemonDiagnostics),new ForwardClientInput(executorFactory),new ReturnResult(),new StartStopIfBuildAndStop(),new ResetDeprecationLogger(),new WatchForDisconnection(),new ExecuteBuild(launcherFactory)));
}
