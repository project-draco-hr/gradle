{
  if (workingDir != null) {
    executer.inDirectory(workingDir);
  }
  if (projectDir != null) {
    executer.usingProjectDirectory(projectDir);
  }
  if (buildScript != null) {
    executer.usingBuildScript(buildScript);
  }
  if (buildScriptText != null) {
    executer.usingBuildScript(buildScriptText);
  }
  if (settingsFile != null) {
    executer.usingSettingsFile(settingsFile);
  }
  if (javaHome != null) {
    executer.withJavaHome(javaHome);
  }
  for (  File initScript : initScripts) {
    executer.usingInitScript(initScript);
  }
  executer.withTasks(tasks);
  executer.withArguments(args);
  executer.withEnvironmentVars(getAllEnvironmentVars());
  executer.usingExecutable(executable);
  if (quiet) {
    executer.withQuietLogging();
  }
  if (taskList) {
    executer.withTaskList();
  }
  if (dependencyList) {
    executer.withDependencyList();
  }
  executer.withUserHomeDir(userHomeDir);
  if (stdin != null) {
    executer.withStdIn(stdin);
  }
  if (defaultCharacterEncoding != null) {
    executer.withDefaultCharacterEncoding(defaultCharacterEncoding);
  }
  executer.withGradleOpts(gradleOpts.toArray(new String[gradleOpts.size()]));
}
