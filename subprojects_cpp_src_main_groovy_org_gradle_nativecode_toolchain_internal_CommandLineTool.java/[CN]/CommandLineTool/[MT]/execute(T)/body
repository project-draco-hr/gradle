{
  ExecAction compiler=execActionFactory.create();
  compiler.executable(executable);
  if (workDir != null) {
    compiler.workingDir(workDir);
  }
  toArguments.collectArguments(spec,new ExecSpecBackedArgCollector(compiler));
  if (GUtil.isTrue(path)) {
    compiler.environment("PATH",path + File.pathSeparator + compiler.getEnvironment().get("PATH"));
  }
  compiler.environment(environment);
  try {
    compiler.execute();
  }
 catch (  ExecException e) {
    throw new GradleException(String.format("%s failed; see the error output for details.",action),e);
  }
  return new SimpleWorkResult(true);
}
