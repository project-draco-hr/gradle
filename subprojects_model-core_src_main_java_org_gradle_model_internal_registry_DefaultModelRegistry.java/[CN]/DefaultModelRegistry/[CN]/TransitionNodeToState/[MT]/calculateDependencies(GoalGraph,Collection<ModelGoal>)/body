{
  if (!seenPredecessor) {
    dependencies.add(graph.nodeAtState(new NodeIsAtState(getPath(),getTargetState().previous())));
    seenPredecessor=true;
    return false;
  }
  if (node == null) {
    throw new IllegalStateException(String.format("Cannot transition model element '%s' to state %s as it does not exist.",getPath(),getTargetState().name()));
  }
  return doCalculateDependencies(graph,dependencies);
}
