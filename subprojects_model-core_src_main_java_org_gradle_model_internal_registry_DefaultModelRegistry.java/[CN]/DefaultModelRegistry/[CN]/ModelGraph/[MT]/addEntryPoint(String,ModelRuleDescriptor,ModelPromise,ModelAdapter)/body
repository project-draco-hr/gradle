{
  ModelPath.validateName(name);
  ModelNodeImpl node=new ModelNodeImpl(ModelPath.path(name),descriptor,promise,adapter);
  ModelNodeImpl previous=entryNodes.put(name,node);
  if (previous != null) {
    throw new IllegalStateException("attempt to replace node link: " + name);
  }
  flattened.put(ModelPath.path(name),node);
  return node;
}
