{
  ModelPath path=newRegistration.getPath();
  ModelNodeInternal node=modelGraph.find(path);
  if (node == null) {
    ModelNodeInternal parent=modelGraph.find(path.getParent());
    if (parent == null) {
      throw new IllegalStateException("Cannot create '" + path + "' as its parent node does not exist");
    }
    parent.addLink(newRegistration);
  }
 else {
    replace(newRegistration);
  }
  return this;
}
