{
  ModelReference<?> mappedReference;
  if (subjectReference.getPath() == null) {
    mappedReference=subjectReference.inScope(scope);
  }
 else {
    mappedReference=subjectReference.withPath(scope.descendant(subjectReference.getPath()));
  }
  if (role.getTargetState() != null) {
    return new BindingPredicate(mappedReference.atState(role.getTargetState()));
  }
 else {
    return new AnyStateBindingPredicate(mappedReference);
  }
}
