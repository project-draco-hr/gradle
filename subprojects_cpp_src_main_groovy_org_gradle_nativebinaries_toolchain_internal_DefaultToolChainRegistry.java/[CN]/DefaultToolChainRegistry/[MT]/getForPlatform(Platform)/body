{
  for (  ToolChainInternal toolChain : searchOrder) {
    if (toolChain.canTargetPlatform(targetPlatform).isAvailable()) {
      return toolChain;
    }
  }
  TreeFormatter failureMessage=new TreeFormatter();
  failureMessage.node(String.format("No tool chain is available to build for platform '%s'",targetPlatform.getName()));
  failureMessage.startChildren();
  for (  ToolChainInternal toolChain : searchOrder) {
    failureMessage.node(toolChain.getDisplayName());
    failureMessage.startChildren();
    toolChain.canTargetPlatform(targetPlatform).explain(failureMessage);
    failureMessage.endChildren();
  }
  if (searchOrder.isEmpty()) {
    failureMessage.node("No tool chain plugin applied.");
  }
  failureMessage.endChildren();
  return new UnavailableToolChain(failureMessage.toString());
}
