{
  final ClientModule clientModule=new DefaultClientModule(null,"gradle-core",null,TEST_DEP_CONF);
  final ModuleRevisionId testModuleRevisionId=IvyUtil.createModuleRevisionId(clientModule);
  final MutableModuleVersionMetaData moduleVersionMetaData=context.mock(MutableModuleVersionMetaData.class);
  context.checking(new Expectations(){
{
      allowing(clientModuleMetaDataFactory).createModuleDescriptor(testModuleRevisionId,WrapUtil.<ModuleDependency>toSet());
      will(returnValue(moduleVersionMetaData));
    }
  }
);
  DefaultDependencyDescriptor dependencyDescriptor=clientModuleDependencyDescriptorFactory.createDependencyDescriptor(TEST_CONF,clientModule,moduleDescriptor);
  assertThat(dependencyDescriptor.getDependencyRevisionId(),equalTo(testModuleRevisionId));
}
