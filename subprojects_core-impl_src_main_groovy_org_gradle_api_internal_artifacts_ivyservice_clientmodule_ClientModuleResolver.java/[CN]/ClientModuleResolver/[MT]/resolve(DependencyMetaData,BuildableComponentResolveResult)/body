{
  resolver.resolve(dependency,result);
  if (result.getFailure() != null) {
    return;
  }
  DependencyDescriptor descriptor=dependency.getDescriptor();
  if (descriptor instanceof EnhancedDependencyDescriptor) {
    ModuleDependency maybeClientModule=((EnhancedDependencyDescriptor)descriptor).getModuleDependency();
    if (maybeClientModule instanceof ClientModule) {
      ClientModule clientModule=(ClientModule)maybeClientModule;
      MutableModuleVersionMetaData clientModuleMetaData=toModuleVersionMetaData.transform(result.getMetaData()).copy();
      addClientModuleDependencies(clientModule,clientModuleMetaData);
      setClientModuleArtifact(clientModuleMetaData);
      result.setMetaData(clientModuleMetaData);
    }
  }
}
