{
  try {
    byte[] encodedFilePath=getEncodedFilePath(f);
    libc.chmod(encodedFilePath,mode);
  }
 catch (  LastErrorException exception) {
    throw new IOException(String.format("Failed to set file permissions %s on file %s. errno: %d",mode,f.getName(),exception.getErrorCode()));
  }
}
