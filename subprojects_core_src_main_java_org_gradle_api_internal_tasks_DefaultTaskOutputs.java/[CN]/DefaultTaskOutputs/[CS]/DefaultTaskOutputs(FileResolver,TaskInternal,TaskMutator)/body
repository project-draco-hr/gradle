{
  this.resolver=resolver;
  this.taskName=task.getName();
  this.taskMutator=taskMutator;
  final DefaultTaskDependency buildDependencies=new DefaultTaskDependency();
  buildDependencies.add(task);
  this.allOutputFiles=new CompositeFileCollection(){
    @Override public String getDisplayName(){
      return task + " output files";
    }
    @Override public void visitContents(    FileCollectionResolveContext context){
      for (      PropertySpec fileProperty : fileProperties) {
        context.add(fileProperty.getPropertyFiles());
      }
    }
    @Override public void visitDependencies(    TaskDependencyResolveContext context){
      context.add(buildDependencies);
      super.visitDependencies(context);
    }
  }
;
}
