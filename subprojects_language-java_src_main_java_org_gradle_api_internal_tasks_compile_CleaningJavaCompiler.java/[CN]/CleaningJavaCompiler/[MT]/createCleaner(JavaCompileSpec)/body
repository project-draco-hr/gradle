{
  if (spec.getCompileOptions().isUseDepend()) {
    AntDependsStaleClassCleaner cleaner=new AntDependsStaleClassCleaner(antBuilderFactory,spec.getCompileOptions());
    cleaner.setDestinationDir(spec.getDestinationDir());
    cleaner.setSource(spec.getSource());
    cleaner.setDependencyCacheDir(spec.getDependencyCacheDir());
    return cleaner;
  }
 else {
    return new SimpleStaleClassCleaner(taskOutputs,"destinationDir");
  }
}
