{
  context.checking(new Expectations(){
{
      one(cache).get(file);
      will(returnValue(new CachingHasher.FileInfo(hash,file.length(),12)));
      one(delegate).hash(file);
      will(returnValue(hash));
      one(cache).put(with(equalTo(file)),with(reflectionEquals(new CachingHasher.FileInfo(hash,file.length(),file.lastModified()))));
    }
  }
);
  assertThat(hasher.hash(file),sameInstance(hash));
}
