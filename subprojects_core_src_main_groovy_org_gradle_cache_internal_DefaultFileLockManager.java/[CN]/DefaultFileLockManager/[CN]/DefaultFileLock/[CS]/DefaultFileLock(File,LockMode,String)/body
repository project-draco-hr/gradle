{
  this.mode=mode;
  this.displayName=displayName;
  lockFile=new File(target.getParentFile(),target.getName() + ".lock");
  try {
    lockFile.getParentFile().mkdirs();
    lockFile.createNewFile();
    lockFileAccess=new RandomAccessFile(lockFile,"rw");
    try {
      lock=lock(mode);
    }
 catch (    Throwable t) {
      lockFileAccess.close();
      throw t;
    }
  }
 catch (  Throwable throwable) {
    throw UncheckedException.asUncheckedException(throwable);
  }
}
