{
  componentSpecs.registerFactory(type.getConcreteClass(),new NamedDomainObjectFactory<T>(){
    public T create(    String name){
      FunctionalSourceSet componentSourceSet=projectSourceSet.maybeCreate(name);
      ComponentSpecIdentifier id=new DefaultComponentSpecIdentifier(projectIdentifier.getPath(),name);
      @SuppressWarnings("unchecked") T created=(T)BaseComponentSpec.create(implementation.getConcreteClass(),id,componentSourceSet,instantiator);
      return created;
    }
  }
);
}
