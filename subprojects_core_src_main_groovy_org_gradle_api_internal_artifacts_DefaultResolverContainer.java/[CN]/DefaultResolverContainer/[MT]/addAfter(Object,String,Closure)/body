{
  if (!GUtil.isTrue(beforeResolverName)) {
    throw new InvalidUserDataException("You must specify beforeResolverName");
  }
  final ArtifactRepository before=getByName(beforeResolverName);
  return addInternal(userDescription,configureClosure,new Action<ArtifactRepository>(){
    public void execute(    ArtifactRepository repository){
      int insertPos=repositories.indexOf(before) + 1;
      if (insertPos == repositories.size()) {
        repositories.add(repository);
      }
 else {
        repositories.add(insertPos,repository);
      }
    }
  }
);
}
