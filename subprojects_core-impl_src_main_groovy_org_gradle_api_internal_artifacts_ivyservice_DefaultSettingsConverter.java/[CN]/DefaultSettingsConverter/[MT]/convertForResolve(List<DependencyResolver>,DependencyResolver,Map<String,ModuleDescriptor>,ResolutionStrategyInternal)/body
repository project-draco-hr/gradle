{
  if (resolveSettings == null) {
    resolveSettings=settingsFactory.create();
    userResolverChain=createUserResolverChain();
    ClientModuleResolver clientModuleResolver=createClientModuleResolver(clientModuleRegistry,userResolverChain);
    DependencyResolver outerChain=new TopLeveResolverChain(clientModuleResolver,projectResolver,userResolverChain);
    outerChain.setName(TOP_LEVEL_RESOLVER_CHAIN_NAME);
    entryPointResolver=new EntryPointResolver(outerChain);
    entryPointResolver.setName(ENTRY_POINT_RESOLVER);
    initializeResolvers(resolveSettings,WrapUtil.toList(userResolverChain,clientModuleResolver,outerChain,entryPointResolver));
  }
  new EntryPointResolverConfigurer().configureResolver(entryPointResolver,resolutionStrategy);
  userResolverChain.setCachePolicy(resolutionStrategy.getCachePolicy());
  replaceResolvers(dependencyResolvers,userResolverChain);
  resolveSettings.setDefaultResolver(entryPointResolver.getName());
  return resolveSettings;
}
