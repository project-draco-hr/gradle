{
  if (resolveSettings == null) {
    resolveSettings=settingsFactory.create();
    userResolverChain=createUserResolverChain();
    ClientModuleResolver clientModuleResolver=createClientModuleResolver(clientModuleRegistry,userResolverChain);
    outerChain=new TopLeveResolverChain(clientModuleResolver,projectResolver,userResolverChain);
    outerChain.setName(TOP_LEVEL_RESOLVER_CHAIN_NAME);
    initializeResolvers(resolveSettings,WrapUtil.toList(userResolverChain,clientModuleResolver,outerChain));
  }
  userResolverChain.setCachePolicy(resolutionStrategy.getCachePolicy());
  replaceResolvers(dependencyResolvers,userResolverChain);
  resolveSettings.setDefaultResolver(outerChain.getName());
  return resolveSettings;
}
