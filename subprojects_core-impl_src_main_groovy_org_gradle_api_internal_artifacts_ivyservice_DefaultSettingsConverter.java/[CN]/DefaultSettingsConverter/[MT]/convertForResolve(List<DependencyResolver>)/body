{
  Clock clock=new Clock();
  if (resolveSettings == null) {
    resolveSettings=createIvySettings();
    userResolverChain=createUserResolverChain();
    DependencyResolver clientModuleResolver=createClientModuleResolver(userResolverChain);
    outerChain=createOuterChain(WrapUtil.toLinkedSet(clientModuleResolver,userResolverChain));
    initializeResolvers(resolveSettings,WrapUtil.toList(internalRepository,userResolverChain,clientModuleResolver,outerChain));
  }
  replaceResolvers(dependencyResolvers,userResolverChain);
  initializeResolvers(resolveSettings,dependencyResolvers);
  resolveSettings.setDefaultResolver(outerChain.getName());
  logger.debug("Timing: Ivy convert for resolve took {}",clock.getTime());
  return resolveSettings;
}
