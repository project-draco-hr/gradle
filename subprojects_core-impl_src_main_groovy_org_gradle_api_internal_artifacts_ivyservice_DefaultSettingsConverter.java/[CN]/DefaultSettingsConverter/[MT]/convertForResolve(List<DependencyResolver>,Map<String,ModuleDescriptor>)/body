{
  if (resolveSettings == null) {
    resolveSettings=settingsFactory.create();
    userResolverChain=createUserResolverChain();
    DependencyResolver clientModuleResolver=createClientModuleResolver(clientModuleRegistry,userResolverChain);
    DependencyResolver outerChain=createOuterChain(WrapUtil.toLinkedSet(clientModuleResolver,userResolverChain));
    entryPointResolver=new EntryPointResolver(outerChain);
    entryPointResolver.setName(ENTRY_POINT_RESOLVER);
    entryPointResolver.setRepositoryCacheManager(new NoOpRepositoryCacheManager(entryPointResolver.getName()));
    initializeResolvers(resolveSettings,WrapUtil.toList(userResolverChain,clientModuleResolver,outerChain,entryPointResolver));
  }
  replaceResolvers(dependencyResolvers,userResolverChain);
  resolveSettings.setDefaultResolver(entryPointResolver.getName());
  return resolveSettings;
}
