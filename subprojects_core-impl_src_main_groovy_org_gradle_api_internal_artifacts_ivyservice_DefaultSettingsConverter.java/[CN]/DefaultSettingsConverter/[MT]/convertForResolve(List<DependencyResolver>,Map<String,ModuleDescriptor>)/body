{
  if (resolveSettings == null) {
    resolveSettings=settingsFactory.create();
    userResolverChain=createUserResolverChain();
    DependencyResolver clientModuleResolver=createClientModuleResolver(clientModuleRegistry,userResolverChain);
    outerChain=createOuterChain(WrapUtil.toLinkedSet(clientModuleResolver,userResolverChain));
    initializeResolvers(resolveSettings,WrapUtil.toList(userResolverChain,clientModuleResolver,outerChain));
  }
  replaceResolvers(dependencyResolvers,userResolverChain);
  initializeResolvers(resolveSettings,dependencyResolvers);
  resolveSettings.setDefaultResolver(outerChain.getName());
  return resolveSettings;
}
