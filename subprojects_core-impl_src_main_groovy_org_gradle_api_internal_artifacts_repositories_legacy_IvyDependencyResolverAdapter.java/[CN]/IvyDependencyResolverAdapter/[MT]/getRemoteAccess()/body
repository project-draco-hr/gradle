{
  return new ModuleComponentRepositoryAccess(){
    public void listModuleVersions(    DependencyMetaData dependency,    BuildableModuleVersionSelectionResolveResult result){
      IvyContext.getContext().setResolveData(resolveData);
      try {
        ResolvedModuleRevision revision=resolver.getDependency(dependency.getDescriptor(),resolveData);
        if (revision == null) {
          result.listed(new DefaultModuleVersionListing());
        }
 else {
          result.listed(new DefaultModuleVersionListing(revision.getId().getRevision()));
        }
      }
 catch (      ParseException e) {
        throw UncheckedException.throwAsUncheckedException(e);
      }
    }
    public void resolveComponentMetaData(    DependencyMetaData dependency,    ModuleComponentIdentifier moduleComponent,    BuildableModuleVersionMetaDataResolveResult result){
      IvyContext.getContext().setResolveData(resolveData);
      try {
        ResolvedModuleRevision revision=resolver.getDependency(dependency.getDescriptor(),resolveData);
        if (revision == null) {
          LOGGER.debug("Performed resolved of module '{}' in repository '{}': not found",moduleComponent,getName());
          result.missing();
        }
 else {
          LOGGER.debug("Performed resolved of module '{}' in repository '{}': found",moduleComponent,getName());
          MutableModuleVersionMetaData metaData=new DefaultIvyModuleVersionMetaData(revision.getDescriptor());
          metaData.setChanging(isChanging(revision));
          result.resolved(metaData,null);
        }
      }
 catch (      ParseException e) {
        throw UncheckedException.throwAsUncheckedException(e);
      }
    }
    public void resolveModuleArtifacts(    ComponentMetaData component,    ArtifactType artifactType,    BuildableArtifactSetResolveResult result){
      try {
        result.resolved(getCandidateArtifacts((ModuleVersionMetaData)component,artifactType.getType()));
      }
 catch (      Exception e) {
        result.failed(new ArtifactResolveException(component.getComponentId(),e));
      }
    }
    public void resolveModuleArtifacts(    ComponentMetaData component,    ComponentUsage componentUsage,    BuildableArtifactSetResolveResult result){
      String configurationName=componentUsage.getConfigurationName();
      result.resolved(component.getConfiguration(configurationName).getArtifacts());
    }
    public void resolveArtifact(    ComponentArtifactMetaData artifact,    ModuleSource moduleSource,    BuildableArtifactResolveResult result){
      org.apache.ivy.core.module.descriptor.Artifact ivyArtifact=((ModuleVersionArtifactMetaData)artifact).toIvyArtifact();
      ArtifactDownloadReport artifactDownloadReport=resolver.download(new org.apache.ivy.core.module.descriptor.Artifact[]{ivyArtifact},downloadOptions).getArtifactReport(ivyArtifact);
      if (downloadFailed(artifactDownloadReport)) {
        if (artifactDownloadReport instanceof EnhancedArtifactDownloadReport) {
          EnhancedArtifactDownloadReport enhancedReport=(EnhancedArtifactDownloadReport)artifactDownloadReport;
          result.failed(new ArtifactResolveException(artifact.getId(),enhancedReport.getFailure()));
        }
 else {
          result.failed(new ArtifactResolveException(artifact.getId(),artifactDownloadReport.getDownloadDetails()));
        }
        return;
      }
      File localFile=artifactDownloadReport.getLocalFile();
      if (localFile != null) {
        result.resolved(localFile);
      }
 else {
        result.notFound(artifact.getId());
      }
    }
  }
;
}
