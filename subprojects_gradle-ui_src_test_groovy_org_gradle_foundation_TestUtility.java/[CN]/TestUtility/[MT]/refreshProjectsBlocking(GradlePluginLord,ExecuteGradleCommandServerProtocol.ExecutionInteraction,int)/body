{
  gradlePluginLord.startExecutionQueue();
  final BooleanHolder isComplete=new BooleanHolder();
  Request request=gradlePluginLord.addRefreshRequestToQueue();
  gradlePluginLord.addRequestObserver(new GradlePluginLord.RequestObserver(){
    public void executionRequestAdded(    ExecutionRequest request){
    }
    public void refreshRequestAdded(    RefreshTaskListRequest request){
    }
    public void aboutToExecuteRequest(    Request request){
    }
    public void requestExecutionComplete(    Request request,    int result,    String output){
      isComplete.value=true;
    }
  }
,false);
  Assert.assertNotNull(request);
  int totalWaitTime=0;
  while (!isComplete.value && totalWaitTime <= maximumWaitSeconds) {
    try {
      Thread.sleep(1000);
    }
 catch (    InterruptedException e) {
      e.printStackTrace();
    }
    totalWaitTime+=1;
  }
  if (!isComplete.value) {
    request.cancel();
    throw new AssertionFailedError("Failed to complete refresh in alotted time: " + maximumWaitSeconds + " seconds. Considering this failed.");
  }
}
