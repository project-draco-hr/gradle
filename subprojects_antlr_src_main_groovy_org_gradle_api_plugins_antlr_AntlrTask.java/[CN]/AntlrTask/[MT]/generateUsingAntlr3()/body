{
  List<GenerationPlan> generationPlans=new GenerationPlanBuilder(outputDirectory).buildGenerationPlans(getSource().getFiles());
  LOGGER.debug("using ANTLR v3");
  boolean error=false;
  for (  GenerationPlan generationPlan : generationPlans) {
    String[] args=new String[]{"-o",generationPlan.getGenerationDirectory().getAbsolutePath(),generationPlan.getId()};
    Tool tool=new Tool(args);
    tool.process();
    if (ErrorManager.getNumErrors() > 0) {
      error=true;
    }
  }
  if (error) {
    throw new GradleException("errors encountered while compiling ANTLR grammar");
  }
}
