{
  final FileCopyDetails mappedDetails=expectActionExecutedWhenFileVisited();
  context.checking(new Expectations(){
{
      one(details).open();
      will(returnValue(new ByteArrayInputStream("content".getBytes())));
    }
  }
);
  mappedDetails.filter(HelperUtil.toClosure("{ 'PREFIX: ' + it } "));
  assertThat(mappedDetails.getSize(),equalTo(15L));
}
