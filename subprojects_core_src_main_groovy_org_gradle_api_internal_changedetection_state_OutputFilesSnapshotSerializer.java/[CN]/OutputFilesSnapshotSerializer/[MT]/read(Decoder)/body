{
  Map<String,Long> rootFileIds=new HashMap<String,Long>();
  int rootFileIdsCount=decoder.readSmallInt();
  for (int i=0; i < rootFileIdsCount; i++) {
    String key=stringInterner.intern(decoder.readString());
    boolean notNull=decoder.readBoolean();
    Long value=notNull ? decoder.readLong() : null;
    rootFileIds.put(key,value);
  }
  FileCollectionSnapshot snapshot=serializer.read(decoder);
  return new OutputFilesCollectionSnapshotter.OutputFilesSnapshot(rootFileIds,snapshot);
}
