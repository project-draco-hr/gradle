{
  if (spec instanceof ScalaJavaJointCompileSpec) {
    ScalaJavaJointCompileSpec scalaJavaJointCompileSpec=(ScalaJavaJointCompileSpec)spec;
    scalaJavaJointCompileSpec.setScalaClasspath(resolveDependency(String.format("org.scala-lang:scala-compiler:%s",scalaVersion)).getFiles());
    scalaJavaJointCompileSpec.setZincClasspath(resolveDependency(String.format("com.typesafe.zinc:zinc:%s",ScalaBasePlugin.DEFAULT_ZINC_VERSION)).getFiles());
    File projectDir=projectFinder.getProject(":").getProjectDir();
    ScalaCompilerFactory scalaCompilerFactory=new ScalaCompilerFactory(projectDir,antBuilder,javaCompilerFactory,compilerDaemonManager);
    @SuppressWarnings("unchecked") org.gradle.language.base.internal.compile.Compiler<T> delegatingCompiler=(Compiler<T>)scalaCompilerFactory.newCompiler(scalaJavaJointCompileSpec);
    return delegatingCompiler;
  }
  throw new IllegalArgumentException(String.format("Cannot create Compiler for unsupported CompileSpec type '%s'",spec.getClass().getSimpleName()));
}
