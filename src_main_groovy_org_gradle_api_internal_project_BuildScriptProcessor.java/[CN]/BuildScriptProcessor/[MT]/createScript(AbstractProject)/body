{
  ScriptSource source;
  if (GUtil.isTrue(inMemoryScriptText)) {
    source=new StringScriptSource("embedded build script",inMemoryScriptText);
  }
 else {
    source=new FileScriptSource("build file",buildFile(project));
  }
  source=new ImportsScriptSource(source,importsReader,project.getRootDir());
  Script projectScript=scriptProcessor.createScript(source,project.getBuildScriptClassLoader(),ProjectScript.class);
  projectScriptMetaData.applyMetaData(projectScript,project);
  return projectScript;
}
