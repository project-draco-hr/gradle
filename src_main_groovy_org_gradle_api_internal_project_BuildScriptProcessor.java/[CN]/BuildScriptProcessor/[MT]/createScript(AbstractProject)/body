{
  String imports=importsReader.getImports(project.getRootDir());
  Script projectScript;
  if (GUtil.isTrue(inMemoryScriptText)) {
    projectScript=scriptProcessor.createScriptFromText(inMemoryScriptText,imports,project.getBuildFileCacheName(),project.getBuildScriptClassLoader(),ProjectScript.class);
  }
 else {
    projectScript=scriptProcessor.createScriptFromFile(cacheDir(project),buildFile(project),imports,cacheUsage,project.getBuildScriptClassLoader(),ProjectScript.class);
  }
  projectScriptMetaData.applyMetaData(projectScript,project);
  return projectScript;
}
