{
  Script projectScript;
  if (GUtil.isTrue(inMemoryScriptText)) {
    ScriptSource source=new StringScriptSource("embedded build script",inMemoryScriptText,project.getRootDir(),importsReader);
    projectScript=scriptProcessor.createScript(source,project.getBuildScriptClassLoader(),ProjectScript.class);
  }
 else {
    ScriptSource source=new FileScriptSource("build file",buildFile(project),importsReader);
    projectScript=scriptProcessor.createScript(source,project.getBuildScriptClassLoader(),ProjectScript.class);
  }
  projectScriptMetaData.applyMetaData(projectScript,project);
  return projectScript;
}
