{
  ModuleIdentifier candidateId=DefaultModuleIdentifier.newId(selector.getGroup(),selector.getModule());
  Collection<String> providingProjects=replacementProjects.get(candidateId);
  if (providingProjects.isEmpty()) {
    return null;
  }
  if (providingProjects.size() == 1) {
    return providingProjects.iterator().next();
  }
  SortedSet<String> sortedProjects=Sets.newTreeSet(providingProjects);
  String failureMessage=String.format("Module version '%s' is not unique in composite: can be provided by projects %s.",selector.getDisplayName(),sortedProjects);
  throw new ModuleVersionResolveException(selector,failureMessage);
}
