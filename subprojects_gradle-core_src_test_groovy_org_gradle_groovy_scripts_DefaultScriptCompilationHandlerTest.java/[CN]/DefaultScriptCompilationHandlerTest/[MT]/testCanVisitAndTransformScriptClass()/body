{
  Transformer visitor=new AbstractScriptTransformer(){
    protected int getPhase(){
      return Phases.CANONICALIZATION;
    }
    @Override public void call(    SourceUnit source) throws CompilationFailedException {
      source.getAST().getStatementBlock().visit(new CodeVisitorSupport(){
        @Override public void visitMethodCallExpression(        MethodCallExpression call){
          call.setObjectExpression(new ClassExpression(ClassHelper.make(System.class)));
          call.setMethod(new ConstantExpression("setProperty"));
          ArgumentListExpression arguments=(ArgumentListExpression)call.getArguments();
          arguments.addExpression(new ConstantExpression(TEST_EXPECTED_SYSTEMPROP_KEY));
          arguments.addExpression(new ConstantExpression(TEST_EXPECTED_SYSTEMPROP_VALUE));
        }
      }
);
    }
  }
;
  Script script=scriptCompilationHandler.compileScript(scriptSource("transformMe()"),classLoader,visitor,expectedScriptClass);
  evaluateScript(script);
}
