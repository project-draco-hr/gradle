{
  cachePropertiesHandlerMock=context.mock(CachePropertiesHandler.class);
  File testProjectDir=HelperUtil.makeNewTestDir("projectdir");
  classLoader=new InputStreamClassLoader();
  InputStream inputStream=this.getClass().getResourceAsStream("/org/gradle/api/ClasspathTester.dat");
  classLoader.loadClass("org.gradle.api.ClasspathTester",inputStream);
  scriptCompilationHandler=new DefaultScriptCompilationHandler(cachePropertiesHandlerMock);
  scriptCacheDir=new File(testProjectDir,"cache");
  testScript="System.setProperty('" + TEST_EXPECTED_SYSTEMPROP_KEY + "', '"+ TEST_EXPECTED_SYSTEMPROP_VALUE+ "')";
  scriptSource=new StringScriptSource("script",testScript);
  expectedClassName=scriptSource.getClassName();
  cachedFile=new File(scriptCacheDir,scriptSource.getClassName() + ".class");
  expectedScriptClass=TestBaseScript.class;
  expectedProperties=Collections.singletonMap(DefaultScriptCompilationHandler.DEBUGINFO_KEY,scriptSource.getDebugInfo());
}
