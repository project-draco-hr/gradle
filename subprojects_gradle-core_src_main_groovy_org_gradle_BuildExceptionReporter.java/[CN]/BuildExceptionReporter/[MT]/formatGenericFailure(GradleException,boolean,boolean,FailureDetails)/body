{
  details.summary.format("Build failed with an exception.");
  if (!fullStacktrace) {
    if (!stacktrace) {
      details.resolution.format("Run with -%s or -%s option to get more details. ",DefaultCommandLineConverter.STACKTRACE,LoggingCommandLineConverter.DEBUG);
    }
    details.resolution.format("Run with -%s option to get the full (very verbose) stacktrace.",DefaultCommandLineConverter.FULL_STACKTRACE);
  }
  if (failure instanceof LocationAwareException) {
    LocationAwareException scriptException=(LocationAwareException)failure;
    if (scriptException.getLocation() != null) {
      details.location.format("%s",scriptException.getLocation());
    }
    details.details.format("%s",scriptException.getOriginalMessage());
    for (    Throwable cause : scriptException.getReportableCauses()) {
      details.details.format("%nCause: %s",getMessage(cause));
    }
  }
 else {
    details.details.format("%s",getMessage(failure));
  }
}
