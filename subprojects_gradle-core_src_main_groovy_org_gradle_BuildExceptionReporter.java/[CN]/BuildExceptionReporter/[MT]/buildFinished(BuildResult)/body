{
  Throwable failure=result.getFailure();
  if (failure == null) {
    return;
  }
  FailureDetails details=new FailureDetails(failure);
  if (failure instanceof GradleException) {
    reportBuildFailure((GradleException)failure,details);
  }
 else {
    reportInternalError(details);
  }
  write(details);
}
