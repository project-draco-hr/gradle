{
  Clock clock=new Clock();
  logger.debug("Compiling script using {} with {}.",source.getDisplayName(),transformer);
  GFileUtils.deleteDirectory(scriptCacheDir);
  scriptCacheDir.mkdirs();
  CompilerConfiguration configuration=createBaseCompilerConfiguration(scriptBaseClass);
  configuration.setTargetDirectory(scriptCacheDir);
  compileScript(source,classLoader,configuration,transformer);
  cachePropertiesHandler.writeProperties(source,scriptCacheDir,singletonMap(DEBUGINFO_KEY,source.getDebugInfo()));
  logger.debug("Timing: Writing script to cache at {} took: {}",scriptCacheDir.getAbsolutePath(),clock.getTime());
}
