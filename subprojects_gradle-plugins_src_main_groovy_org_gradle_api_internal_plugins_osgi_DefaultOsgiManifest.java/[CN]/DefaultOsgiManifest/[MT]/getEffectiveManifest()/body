{
  DefaultManifest manifest=super.getEffectiveManifest();
  ContainedVersionAnalyzer analyzer=analyzerFactory.createAnalyzer();
  try {
    setAnalyzerProperties(analyzer);
    Manifest osgiManifest=analyzer.calcManifest();
    for (    Map.Entry<Object,Object> entry : osgiManifest.getMainAttributes().entrySet()) {
      manifest.attributes(WrapUtil.toMap(entry.getKey().toString(),(String)entry.getValue()));
    }
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  return manifest;
}
