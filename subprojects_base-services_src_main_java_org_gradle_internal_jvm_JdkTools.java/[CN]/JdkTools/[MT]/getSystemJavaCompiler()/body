{
  if (Jvm.current().getJavaVersion().isJava9Compatible()) {
    return ToolProvider.getSystemJavaCompiler();
  }
  Class<?> compilerImplClass;
  try {
    compilerImplClass=isolatedToolsLoader.loadClass(DEFAULT_COMPILER_IMPL_NAME);
  }
 catch (  ClassNotFoundException e) {
    throw new IllegalStateException("Could not load class '" + DEFAULT_COMPILER_IMPL_NAME + "' from "+ Jvm.current().getToolsJar());
  }
  return DirectInstantiator.instantiate(compilerImplClass.asSubclass(JavaCompiler.class));
}
