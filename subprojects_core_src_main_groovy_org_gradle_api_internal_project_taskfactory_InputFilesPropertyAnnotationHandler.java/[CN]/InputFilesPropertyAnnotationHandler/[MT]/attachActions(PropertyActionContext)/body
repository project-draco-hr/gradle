{
  final boolean isSourceFiles=context.getTarget().getAnnotation(SkipWhenEmpty.class) != null;
  context.setConfigureAction(new UpdateAction(){
    public void update(    TaskInternal task,    Callable<Object> futureValue){
      if (isSourceFiles) {
        task.getInputs().source(futureValue);
      }
 else {
        task.getInputs().files(futureValue);
      }
    }
  }
);
}
