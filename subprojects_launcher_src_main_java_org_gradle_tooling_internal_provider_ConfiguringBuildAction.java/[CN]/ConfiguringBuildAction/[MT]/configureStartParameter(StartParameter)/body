{
  startParameter.setProjectDir(projectDirectory);
  if (gradleUserHomeDir != null) {
    startParameter.setGradleUserHomeDir(gradleUserHomeDir);
  }
  if (searchUpwards != null) {
    startParameter.setSearchUpwards(searchUpwards);
  }
  if (action instanceof InitializationAware) {
    InitializationAware initializationAware=(InitializationAware)action;
    initializationAware.configureStartParameter(startParameter);
  }
  DefaultCommandLineConverter converter=new DefaultCommandLineConverter();
  try {
    converter.convert(arguments,startParameter);
  }
 catch (  CommandLineArgumentException e) {
    throw new UnsupportedOperationException(e.getMessage() + "\nEither it is not a valid build option or it is not supported in the target Gradle version." + "\nNot all of the Gradle command line options are supported build arguments."+ "\nExamples of supported build arguments: '--info', '-u', '-p'."+ "\nExamples of unsupported build options: '--daemon', '-?', '-v'.",e);
  }
  startParameter.setShowStacktrace(ShowStacktrace.ALWAYS);
  startParameter.setLogLevel(buildLogLevel);
}
