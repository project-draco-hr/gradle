{
  logger.debug("Determining if {} is up-to-date",task);
  TaskArtifactState taskArtifactState=repository.getStateFor(task);
  if (!startParameter.isNoOpt() && taskArtifactState.isUpToDate()) {
    logger.debug("{} is up-to-date",task);
    return upToDateResult;
  }
  logger.debug("{} is not up-to-date",task);
  taskArtifactState.invalidate();
  TaskExecutionResult executionResult=executer.execute(task,state);
  if (executionResult.getFailure() == null) {
    taskArtifactState.update();
  }
  return executionResult;
}
