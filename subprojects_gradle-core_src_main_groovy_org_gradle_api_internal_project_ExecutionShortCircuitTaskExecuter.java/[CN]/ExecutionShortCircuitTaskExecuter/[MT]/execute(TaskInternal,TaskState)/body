{
  LOGGER.debug("Determining if {} is up-to-date",task);
  TaskArtifactState taskArtifactState=repository.getStateFor(task);
  if (taskArtifactState.isUpToDate()) {
    LOGGER.debug("{} is up-to-date",task);
    return UP_TO_DATE_RESULT;
  }
  LOGGER.debug("{} is not up-to-date",task);
  taskArtifactState.invalidate();
  TaskExecutionResult executionResult=executer.execute(task,state);
  if (executionResult.getFailure() == null) {
    taskArtifactState.update();
  }
  return executionResult;
}
