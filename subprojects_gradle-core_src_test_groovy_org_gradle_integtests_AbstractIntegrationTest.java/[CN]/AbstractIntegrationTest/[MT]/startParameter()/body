{
  StartParameter parameter=new StartParameter();
  parameter.setGradleHomeDir(testFile("gradle-home"));
  testFile("gradle-home/gradle-imports").writelns("import static org.junit.Assert.*","import static org.hamcrest.Matchers.*","import org.gradle.api.*","import org.gradle.api.file.*","import org.gradle.api.logging.*","import org.gradle.api.tasks.*");
  testFile("gradle-home/plugin.properties").writelns("java=org.gradle.api.plugins.JavaPlugin","groovy=org.gradle.api.plugins.GroovyPlugin","war=org.gradle.api.plugins.WarPlugin","maven=org.gradle.api.plugins.MavenPlugin","code-quality=org.gradle.api.plugins.quality.CodeQualityPlugin");
  parameter.setGradleUserHomeDir(testFile("user-home"));
  parameter.setSearchUpwards(false);
  parameter.setCacheUsage(CacheUsage.ON);
  parameter.setCurrentDir(getTestDir());
  return parameter;
}
