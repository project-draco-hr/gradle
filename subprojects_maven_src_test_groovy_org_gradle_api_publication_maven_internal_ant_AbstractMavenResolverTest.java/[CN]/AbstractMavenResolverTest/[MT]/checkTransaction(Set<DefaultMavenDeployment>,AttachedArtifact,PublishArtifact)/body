{
  context.checking(new Expectations(){
{
      for (      DefaultMavenDeployment defaultMavenDeployment : defaultMavenDeployments) {
        one(getInstallDeployTask()).setProject(with(any(Project.class)));
        one(getInstallDeployTask()).setFile(defaultMavenDeployment.getMainArtifact().getFile());
        one(getInstallDeployTask()).addPom(with(pomMatcher(defaultMavenDeployment.getPomArtifact().getFile(),getInstallDeployTask().getProject())));
        one(loggingManagerMock).captureStandardOutput(LogLevel.INFO);
        will(returnValue(loggingManagerMock));
        one(loggingManagerMock).start();
        one(getInstallDeployTask()).execute();
        one(loggingManagerMock).stop();
        will(returnValue(loggingManagerMock));
        one(getMavenResolver().mavenSettingsSupplier).supply(getInstallDeployTask());
        one(getMavenResolver().mavenSettingsSupplier).done();
      }
    }
  }
);
  getMavenResolver().commitPublishTransaction();
  assertThat(attachedArtifact.getFile(),equalTo(classifierArtifact.getFile()));
  assertThat(attachedArtifact.getType(),equalTo(classifierArtifact.getType()));
  assertThat(attachedArtifact.getClassifier(),equalTo(classifierArtifact.getClassifier()));
}
