{
  Set<File> dirs=getDirs();
  if (dirs.isEmpty()) {
    throw new InvalidUserDataException("You must specify at least one directory for a flat directory repository.");
  }
  FileSystemResolver resolver=new FileSystemResolver();
  resolver.setName(getName());
  for (  File root : dirs) {
    resolver.addArtifactPattern(root.getAbsolutePath() + "/[artifact]-[revision](-[classifier]).[ext]");
    resolver.addArtifactPattern(root.getAbsolutePath() + "/[artifact](-[classifier]).[ext]");
  }
  resolver.setValidate(false);
  resolver.setRepositoryCacheManager(localCacheManager);
  return resolver;
}
