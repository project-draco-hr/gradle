{
  Set<File> dirs=getDirs();
  if (dirs.isEmpty()) {
    throw new InvalidUserDataException("You must specify at least one directory for a flat directory repository.");
  }
  IvyResolver resolver=new IvyResolver(getName(),transportFactory.createFileTransport(getName()),locallyAvailableResourceFinder,metaDataParser,metadataProcessor);
  for (  File root : dirs) {
    resolver.addArtifactPattern(root.getAbsolutePath() + "/[artifact]-[revision](-[classifier]).[ext]");
    resolver.addArtifactPattern(root.getAbsolutePath() + "/[artifact](-[classifier]).[ext]");
  }
  return resolver;
}
