{
  this.parent=parent;
  this.startParameter=startParameter;
  this.services=parentRegistry.createFor(this);
  this.listenerManager=services.get(ListenerManager.class);
  taskGraph=services.get(TaskGraphExecuter.class);
  distributionLocator=services.get(GradleDistributionLocator.class);
  pluginContainer=services.get(PluginContainer.class);
  fileResolver=services.get(FileResolver.class);
  scriptPluginFactory=services.get(ScriptPluginFactory.class);
  scriptHandlerFactory=services.get(ScriptHandlerFactory.class);
  scriptCompileScope=services.get(BuildClassLoaderRegistry.class).getRootCompileScope();
  buildListenerBroadcast=listenerManager.createAnonymousBroadcaster(BuildListener.class);
  projectEvaluationListenerBroadcast=listenerManager.createAnonymousBroadcaster(ProjectEvaluationListener.class);
  buildListenerBroadcast.add(new BuildAdapter(){
    @Override public void projectsLoaded(    Gradle gradle){
      rootProjectActions.execute(rootProject);
      rootProjectActions=null;
    }
  }
);
}
