{
  final File tempFile=File.createTempFile("gradle","test");
  try {
    context.checking(new Expectations(){
{
        one(digesterMock).update(tempFile.getAbsolutePath().getBytes());
        one(digesterMock).update(((Long)tempFile.lastModified()).byteValue());
        one(digesterMock).update(((Long)tempFile.length()).byteValue());
      }
    }
);
    strategy.digestFile(digesterMock,tempFile);
  }
  finally {
    assertTrue(tempFile.delete());
  }
}
