{
  if (candidates.size() > 0) {
    String sha1=getSha1FromServer(source);
    for (    CachedArtifact candidate : candidates) {
      if (candidate.getSha1().equals(sha1)) {
        return new CachedResource(source,candidate);
      }
    }
  }
  int result;
  try {
    result=executeMethod(method);
  }
 catch (  IOException e) {
    throw new UncheckedIOException(String.format("Could not GET '%s'.",source),e);
  }
  if (result == 404) {
    LOGGER.debug("Resource missing: {}.",source);
    return new MissingResource(source);
  }
  if (!wasSuccessful(result)) {
    throw new UncheckedIOException(String.format("Could not GET '%s'. Received status code %s from server: %s",source,result,method.getStatusText()));
  }
  return new HttpResource(source,method);
}
