{
  if (!options.getConfigFailurePolicy().equals(TestNGOptions.DEFAULT_CONFIG_FAILURE_POLICY)) {
    try {
      Class<?> testNg=classLoaderFactory.create().loadClass("org.testng.TestNG");
      testNg.getMethod("setConfigFailurePolicy",String.class);
    }
 catch (    ClassNotFoundException e) {
      throw new GradleException("Could not load TestNG.",e);
    }
catch (    NoSuchMethodException e) {
      throw new InvalidUserDataException(String.format("The version of TestNG used does not support setting config failure policy to '%s'.",options.getConfigFailurePolicy()));
    }
  }
}
