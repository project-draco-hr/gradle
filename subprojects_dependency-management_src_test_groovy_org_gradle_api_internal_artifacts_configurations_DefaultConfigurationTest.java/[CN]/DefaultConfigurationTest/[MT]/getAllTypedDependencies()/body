{
  ProjectDependency projectDependencyCurrentConf=context.mock(ProjectDependency.class,"projectDepCurrentConf");
  configuration.getDependencies().add(context.mock(Dependency.class,"depCurrentConf"));
  configuration.getDependencies().add(projectDependencyCurrentConf);
  Configuration otherConf=createNamedConfiguration("otherConf");
  configuration.extendsFrom(otherConf);
  ProjectDependency projectDependencyExtendedConf=context.mock(ProjectDependency.class,"projectDepExtendedConf");
  otherConf.getDependencies().add(context.mock(Dependency.class,"depExtendedConf"));
  otherConf.getDependencies().add(projectDependencyExtendedConf);
  assertThat(configuration.getAllDependencies().withType(ProjectDependency.class),hasSameItems(toLinkedSet(projectDependencyCurrentConf,projectDependencyExtendedConf)));
}
