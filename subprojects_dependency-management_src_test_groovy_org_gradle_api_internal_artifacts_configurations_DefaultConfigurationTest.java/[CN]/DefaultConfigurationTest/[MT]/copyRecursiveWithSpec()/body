{
  prepareConfigurationForCopyRecursiveTest();
  Set<Dependency> expectedDependenciesToCopy=new HashSet<Dependency>(configuration.getAllDependencies());
  configuration.getDependencies().add(createDependency("group3","name3","version3"));
  Closure specClosure=TestUtil.toClosure("{ element ->  !element.group.equals(\"group3\")}");
  Configuration copiedConfiguration=configuration.copyRecursive(specClosure);
  assertThatCopiedConfigurationHasElementsAndName(copiedConfiguration,expectedDependenciesToCopy);
}
