{
  context.checking(new Expectations(){
{
      ResolverResults result=new ResolverResults();
      ResolvedProjectConfigurationResults projectConfigurationResults=context.mock(ResolvedProjectConfigurationResults.class);
      result.resolved(context.mock(ResolutionResult.class),projectConfigurationResults);
      allowing(projectConfigurationResults).getAllProjectConfigurationResults();
      will(returnValue(Collections.emptySet()));
      allowing(dependencyResolver).resolve(configuration,result);
      allowing(dependencyResolver).resolveArtifacts(configuration,result);
      allowing(resolvedConfiguration).hasError();
      will(returnValue(withErrors));
    }
  }
);
}
