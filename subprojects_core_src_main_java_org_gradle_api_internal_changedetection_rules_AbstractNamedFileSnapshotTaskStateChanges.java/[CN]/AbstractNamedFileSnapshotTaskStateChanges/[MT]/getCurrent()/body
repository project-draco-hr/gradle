{
  if (fileSnapshots == null) {
    ImmutableMap.Builder<String,FileCollectionSnapshot> builder=ImmutableMap.builder();
    for (    Map.Entry<String,FileCollectionSnapshot.PreCheck> entry : preChecks.entrySet()) {
      String propertyName=entry.getKey();
      FileCollectionSnapshot.PreCheck preCheck=entry.getValue();
      FileCollectionSnapshot result;
      try {
        result=snapshotter.snapshot(preCheck);
      }
 catch (      UncheckedIOException e) {
        throw new UncheckedIOException(String.format("Failed to capture snapshot of %s files for task '%s' property '%s' during up-to-date check.",title.toLowerCase(),taskName,propertyName),e);
      }
      builder.put(propertyName,result);
    }
    fileSnapshots=builder.build();
  }
  return fileSnapshots;
}
