{
  GradleDistributionLocator gradleDistributionLocator=new DefaultGradleDistributionLocator(GradleRunner.class);
  final File gradleHome=gradleDistributionLocator.getGradleHome();
  if (gradleHome == null) {
    try {
      File classpathForClass=ClasspathUtil.getClasspathForClass(GradleRunner.class);
      throw new IllegalStateException("Could not create a GradleRunner, as the GradleRunner class was loaded from " + classpathForClass + " which is not a Gradle distribution");
    }
 catch (    Exception e) {
      throw new IllegalStateException("Could not create a GradleRunner, as the GradleRunner class was not loaded from a Gradle distribution");
    }
  }
  return new DefaultGradleRunner(gradleHome);
}
