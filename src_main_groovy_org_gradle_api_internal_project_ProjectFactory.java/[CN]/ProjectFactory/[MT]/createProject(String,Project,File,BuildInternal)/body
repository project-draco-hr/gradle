{
  File buildFile=new File(projectDir,startParameter.getBuildFileName());
  ScriptSource source;
  if (embeddedScript != null) {
    source=embeddedScript;
  }
 else   if (!buildFile.exists()) {
    source=new StringScriptSource("empty build file","");
  }
 else {
    source=new FileScriptSource("build file",buildFile);
  }
  return new DefaultProject(name,parent,projectDir,startParameter.getBuildFileName(),source,build.getBuildScriptClassLoader(),taskFactory,dependencyManagerFactory,antBuilderFactory,buildScriptProcessor,pluginRegistry,build.getProjectRegistry(),this,build);
}
