{
  FileCopyDetails copyDetails=expectActionExecutedWhenFileVisited();
  context.checking(new Expectations(){
{
      one(details).isDirectory();
      will(returnValue(true));
      one(spec).getDirMode();
      will(returnValue(null));
      one(details).getMode();
      will(returnValue(123));
    }
  }
);
  assertThat(copyDetails.getMode(),equalTo(123));
}
