{
  FileCopyDetails copyDetails=expectActionExecutedWhenFileVisited();
  context.checking(new Expectations(){
{
      one(details).isDirectory();
      will(returnValue(true));
      one(spec).getDirMode();
      will(returnValue(345));
    }
  }
);
  assertThat(copyDetails.getMode(),equalTo(345));
}
