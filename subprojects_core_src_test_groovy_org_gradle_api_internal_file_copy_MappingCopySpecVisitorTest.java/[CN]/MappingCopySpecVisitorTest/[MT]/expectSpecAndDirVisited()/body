{
  final Collector<FileVisitDetails> collector=collector();
  context.checking(new Expectations(){
{
      one(delegate).visitSpec(spec);
      one(delegate).visitDir(with(not(sameInstance(details))));
      will(collectTo(collector));
    }
  }
);
  visitor.visitSpec(spec);
  visitor.visitDir(details);
  return collector.get();
}
