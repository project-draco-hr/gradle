{
  System.out.println("Starting Gradle compiler daemon.");
  WorkerProcessBuilder builder=project.getServices().getFactory(WorkerProcessBuilder.class).create();
  File toolsJar=Jvm.current().getToolsJar();
  if (toolsJar != null) {
    builder.getApplicationClasspath().add(toolsJar);
  }
  JavaExecHandleBuilder javaCommand=builder.getJavaCommand();
  javaCommand.setMinHeapSize("128m");
  javaCommand.setMaxHeapSize("1g");
  javaCommand.setWorkingDir(project.getRootProject().getProjectDir());
  daemon=new DefaultCompilerDaemon();
  process=builder.worker(daemon).build();
  process.start();
  System.out.println("Gradle compiler daemon started.");
}
