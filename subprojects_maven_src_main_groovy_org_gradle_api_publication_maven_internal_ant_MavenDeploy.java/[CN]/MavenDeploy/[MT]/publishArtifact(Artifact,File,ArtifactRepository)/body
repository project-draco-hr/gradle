{
  ArtifactDeployer deployer=(ArtifactDeployer)lookup(ArtifactDeployer.ROLE);
  ArtifactRepository deploymentRepository=getRemoteArtifactRepository(artifact);
  LOGGER.info("Deploying to " + deploymentRepository.getUrl());
  try {
    deployer.deploy(artifactFile,artifact,deploymentRepository,localRepo);
  }
 catch (  ArtifactDeploymentException e) {
    throw new BuildException("Error deploying artifact '" + artifact.getDependencyConflictId() + "': "+ e.getMessage(),e);
  }
}
