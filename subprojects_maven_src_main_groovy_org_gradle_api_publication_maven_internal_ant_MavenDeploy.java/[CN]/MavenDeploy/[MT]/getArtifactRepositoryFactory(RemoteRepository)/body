{
  WagonManager manager=(WagonManager)lookup(WagonManager.ROLE);
  Authentication authentication=repository.getAuthentication();
  if (authentication != null) {
    manager.addAuthenticationInfo(repository.getId(),authentication.getUserName(),authentication.getPassword(),authentication.getPrivateKey(),authentication.getPassphrase());
  }
  Proxy proxy=repository.getProxy();
  if (proxy != null) {
    manager.addProxy(proxy.getType(),proxy.getHost(),proxy.getPort(),proxy.getUserName(),proxy.getPassword(),proxy.getNonProxyHosts());
  }
  return (ArtifactRepositoryFactory)lookup(ArtifactRepositoryFactory.ROLE);
}
