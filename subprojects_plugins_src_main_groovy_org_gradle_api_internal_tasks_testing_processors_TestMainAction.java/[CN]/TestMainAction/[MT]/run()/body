{
  RootTestSuiteDescriptor suite=new RootTestSuiteDescriptor(idGenerator.generateId(),"Test Run");
  resultProcessor.started(suite,new TestStartEvent(timeProvider.getCurrentTime()));
  try {
    processor.startProcessing(resultProcessor);
    try {
      detector.run();
    }
  finally {
      processor.stop();
    }
  }
  finally {
    resultProcessor.completed(suite.getId(),new TestCompleteEvent(timeProvider.getCurrentTime()));
  }
}
