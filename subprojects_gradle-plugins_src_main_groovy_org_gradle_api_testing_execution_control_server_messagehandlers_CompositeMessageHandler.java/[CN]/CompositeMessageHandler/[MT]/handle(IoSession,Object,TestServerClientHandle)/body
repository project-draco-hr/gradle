{
  Class<?> messageClass=controlMessage.getClass();
  TestControlMessageHandler handler=handlers.get(messageClass);
  if (handler != null) {
    handler.handle(ioSession,controlMessage,client);
  }
 else {
    QueueingPipeline pipeline=pipelineDispatcher.getPipeline();
    LOGGER.error("received unknown message of type {} on pipeline ",messageClass,pipeline.getName());
    ioSession.write(new StopForkActionMessage(pipeline.getId()));
  }
}
