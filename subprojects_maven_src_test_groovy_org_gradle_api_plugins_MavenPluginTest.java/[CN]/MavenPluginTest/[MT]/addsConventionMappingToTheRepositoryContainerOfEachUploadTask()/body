{
  project.getPlugins().apply(JavaPlugin.class);
  project.getPlugins().apply(MavenPlugin.class);
  Upload task=project.getTasks().withType(Upload.class).getByName(MavenPlugin.INSTALL_TASK_NAME);
  MavenRepositoryHandlerConvention convention=new DslObject(task.getRepositories()).getConvention().getPlugin(MavenRepositoryHandlerConvention.class);
  assertThat(convention,notNullValue());
  task=project.getTasks().add("customUpload",Upload.class);
  convention=new DslObject(task.getRepositories()).getConvention().getPlugin(MavenRepositoryHandlerConvention.class);
  assertThat(convention,notNullValue());
}
