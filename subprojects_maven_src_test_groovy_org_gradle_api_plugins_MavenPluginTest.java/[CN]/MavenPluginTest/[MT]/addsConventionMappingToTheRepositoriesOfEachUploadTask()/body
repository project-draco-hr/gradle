{
  project.getPlugins().apply(JavaPlugin.class);
  mavenPlugin.apply(project);
  Upload task=project.getTasks().withType(Upload.class).getByName(MavenPlugin.INSTALL_TASK_NAME);
  MavenRepositoryHandlerConvention convention=((DynamicObjectAware)task.getRepositories()).getConvention().getPlugin(MavenRepositoryHandlerConvention.class);
  assertThat(convention,notNullValue());
  task=project.getTasks().add("customUpload",Upload.class);
  convention=((DynamicObjectAware)task.getRepositories()).getConvention().getPlugin(MavenRepositoryHandlerConvention.class);
  assertThat(convention,notNullValue());
}
