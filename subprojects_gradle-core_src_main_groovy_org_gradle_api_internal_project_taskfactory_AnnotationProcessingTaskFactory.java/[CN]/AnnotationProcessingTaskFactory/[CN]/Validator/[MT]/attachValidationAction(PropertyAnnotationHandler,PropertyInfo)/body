{
  final Method method=propertyInfo.method;
  Class<? extends Annotation> annotationType=handler.getAnnotationType();
  if (!isGetter(method)) {
    if (method.getAnnotation(annotationType) != null) {
      throw new GradleException(String.format("Cannot attach @%s to non-getter method %s().",annotationType.getSimpleName(),method.getName()));
    }
    return;
  }
  AnnotatedElement annotationTarget=null;
  if (method.getAnnotation(annotationType) != null) {
    annotationTarget=method;
  }
 else {
    try {
      Field field=method.getDeclaringClass().getDeclaredField(propertyInfo.propertyName);
      if (field.getAnnotation(annotationType) != null) {
        annotationTarget=field;
      }
    }
 catch (    NoSuchFieldException e) {
    }
  }
  if (annotationTarget == null) {
    return;
  }
  Annotation optional=annotationTarget.getAnnotation(Optional.class);
  if (optional == null) {
    propertyInfo.setNotNullValidator(notNullValidator);
  }
  propertyInfo.attachActions(handler);
}
