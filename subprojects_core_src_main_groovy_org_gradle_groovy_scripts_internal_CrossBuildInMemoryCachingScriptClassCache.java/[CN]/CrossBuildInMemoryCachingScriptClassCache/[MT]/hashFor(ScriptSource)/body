{
  File file=source.getResource().getFile();
  if (file != null && file.exists()) {
    CachingFileSnapshotter.FileInfo snapshot=snapshotter.snapshot(file);
    return snapshot.getHash();
  }
  return HashUtil.createHash(source.getResource().getText(),"md5").asByteArray();
}
