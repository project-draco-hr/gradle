{
  setUpMocksAndAttributes(compile);
  context.checking(new Expectations(){
{
      WorkResult result=context.mock(WorkResult.class);
      one(compilerMock).execute((JavaCompileSpec)with(Matchers.notNullValue()));
      will(returnValue(result));
      allowing(result).getDidWork();
      will(returnValue(numFilesCompiled > 0));
    }
  }
);
  compile.compile();
}
