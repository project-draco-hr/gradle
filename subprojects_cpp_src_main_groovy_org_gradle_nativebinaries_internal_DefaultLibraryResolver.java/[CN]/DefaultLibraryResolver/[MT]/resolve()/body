{
  for (  LibraryBinary candidate : library.getBinaries().withType(type)) {
    if (library.getFlavors().size() == 1) {
      return candidate.resolve();
    }
    if (flavor.equals(candidate.getFlavor())) {
      return candidate.resolve();
    }
  }
  String typeName=type == SharedLibraryBinary.class ? "shared" : "static";
  throw new InvalidUserDataException(String.format("No %s library binary available for %s with %s",typeName,library,flavor));
}
