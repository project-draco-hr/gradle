{
  super.setUp();
  context.setImposteriser(ClassImposteriser.INSTANCE);
  wrapper=new Wrapper(getProject(),AbstractTaskTest.TEST_TASK_NAME);
  wrapperScriptGeneratorMock=context.mock(WrapperScriptGenerator.class);
  wrapper.setScriptDestinationPath("scriptDestination");
  wrapper.setGradleVersion("1.0");
  testDir=HelperUtil.makeNewTestDir();
  File testGradleHome=new File(testDir,"testGradleHome");
  File testGradleHomeLib=new File(testGradleHome,"lib");
  testGradleHomeLib.mkdirs();
  createSourceWrapperJar(testGradleHomeLib);
  ((DefaultBuild)getProject().getBuild()).getStartParameter().setGradleHomeDir(testGradleHome);
  targetWrapperJarPath="jarPath";
  expectedTargetWrapperJar=targetWrapperJarPath + "/" + Install.WRAPPER_JAR;
  new File(getProject().getProjectDir(),targetWrapperJarPath).mkdirs();
  distributionPath="somepath";
  wrapper.setJarPath(targetWrapperJarPath);
  wrapper.setDistributionPath(distributionPath);
  wrapper.setUnixWrapperScriptGenerator(wrapperScriptGeneratorMock);
}
