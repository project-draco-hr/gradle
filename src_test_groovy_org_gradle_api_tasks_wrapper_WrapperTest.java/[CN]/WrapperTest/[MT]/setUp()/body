{
  super.setUp();
  context.setImposteriser(ClassImposteriser.INSTANCE);
  wrapper=new Wrapper(getProject(),AbstractTaskTest.TEST_TASK_NAME);
  unixWrapperScriptGeneratorMock=context.mock(UnixWrapperScriptGenerator.class);
  wrapper.setScriptDestinationPath("scriptDestination");
  wrapper.setGradleVersion("1.0");
  testDir=HelperUtil.makeNewTestDir();
  File testGradleHome=new File(testDir,"testGradleHome");
  File testGradleHomeLib=new File(testGradleHome,"lib");
  testGradleHomeLib.mkdirs();
  createSourceWrapperJar(testGradleHomeLib);
  originalGradleHome=System.getProperty(Main.GRADLE_HOME_PROPERTY_KEY);
  System.setProperty(Main.GRADLE_HOME_PROPERTY_KEY,testGradleHome.getAbsolutePath());
  targetWrapperJarPath="jarPath";
  expectedTargetWrapperJar=targetWrapperJarPath + "/" + Install.WRAPPER_JAR;
  new File(getProject().getProjectDir(),targetWrapperJarPath).mkdirs();
  distributionPath="somepath";
  zipPath="myzippath";
  wrapper.setJarPath(targetWrapperJarPath);
  wrapper.setDistributionPath(distributionPath);
  expectedDistributionBase=Wrapper.PathBase.PROJECT;
  expectedZipBase=Wrapper.PathBase.PROJECT;
}
