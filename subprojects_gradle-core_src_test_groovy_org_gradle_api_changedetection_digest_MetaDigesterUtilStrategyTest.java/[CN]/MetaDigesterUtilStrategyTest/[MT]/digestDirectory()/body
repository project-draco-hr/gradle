{
  final File tempDir=HelperUtil.makeNewTestDir();
  try {
    context.checking(new Expectations(){
{
        one(digesterMock).update(tempDir.getAbsolutePath().getBytes());
        one(digesterMock).update(((Long)tempDir.lastModified()).byteValue());
        one(digesterMock).update(((Long)okDirectorySize).byteValue());
      }
    }
);
    strategy.digestDirectory(digesterMock,tempDir,okDirectorySize);
  }
  finally {
    assertTrue(tempDir.delete());
  }
}
