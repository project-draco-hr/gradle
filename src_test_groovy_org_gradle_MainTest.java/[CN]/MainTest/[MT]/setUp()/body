{
  oldGradleHome=System.getProperty(Main.GRADLE_HOME_PROPERTY_KEY);
  System.setProperty(Main.GRADLE_HOME_PROPERTY_KEY,TEST_GRADLE_HOME);
  context.setImposteriser(ClassImposteriser.INSTANCE);
  gradleMock=context.mock(Gradle.class);
  Gradle.injectCustomFactory(new GradleFactory(){
    public Gradle newInstance(    StartParameter startParameter){
      actualStartParameter=startParameter;
      return gradleMock;
    }
  }
);
  expectedGradleUserHome=new File(Main.DEFAULT_GRADLE_USER_HOME);
  expectedGradleImportsFile=new File(TEST_GRADLE_HOME,Main.IMPORTS_FILE_NAME).getCanonicalFile();
  expectedPluginPropertiesFile=new File(TEST_GRADLE_HOME,Main.DEFAULT_PLUGIN_PROPERTIES).getCanonicalFile();
  expectedTaskNames=toList();
  expectedProjectDir=new File("").getCanonicalFile();
  expectedProjectProperties=new HashMap();
  expectedSystemProperties=new HashMap();
  expectedSettingsFile=null;
  expectedBuildFile=null;
  expectedCacheUsage=CacheUsage.ON;
  expectedSearchUpwards=true;
  expectedEmbeddedScript="somescript";
  expectedLogLevel=LogLevel.LIFECYCLE;
}
