{
  previousGradleHome=System.getProperty("gradle.home");
  System.setProperty("gradle.home","roadToNowhere");
  context.setImposteriser(ClassImposteriser.INSTANCE);
  gradleMock=context.mock(Gradle.class);
  Gradle.injectCustomFactory(new GradleFactory(){
    public Gradle newInstance(    StartParameter startParameter){
      actualStartParameter=startParameter;
      return gradleMock;
    }
    public Gradle newInstance(    String[] commandLineArgs){
      throw new UnsupportedOperationException();
    }
    public StartParameter createStartParameter(    String[] commandLineArgs){
      throw new UnsupportedOperationException();
    }
  }
);
  expectedGradleImportsFile=new File(TEST_GRADLE_HOME,Main.IMPORTS_FILE_NAME).getCanonicalFile();
  expectedPluginPropertiesFile=new File(TEST_GRADLE_HOME,Main.DEFAULT_PLUGIN_PROPERTIES).getCanonicalFile();
  expectedProjectDir=new File("").getCanonicalFile();
}
