{
  Main main=new Main(TEST_ARGS);
  RuntimeException exception=new RuntimeException();
  BuildResult buildResult=HelperUtil.createBuildResult(exception);
  StartParameter startParameter=new StartParameter();
  setUpMain(main,startParameter);
  setUpGradle(buildResult,startParameter);
  try {
    main.execute();
    fail();
  }
 catch (  BuildCompletedError e) {
    assertThat((RuntimeException)(e.getCause().getCause()),sameInstance(exception));
  }
}
