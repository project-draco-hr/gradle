{
  setUpMocks(test);
  context.checking(new Expectations(){
{
      one(testFrameworkInstanceMock).prepare(getProject(),test,testClassReceiverMock);
      one(testClassReceiverMock).getTestClassNames();
      will(returnValue(okTestClassNames));
      one(testFrameworkInstanceMock).execute(getProject(),test,okTestClassNames,new ArrayList<String>());
    }
  }
);
  getProject().getAnt().setProperty(AntTest.FAILURES_OR_ERRORS_PROPERTY,"true");
  try {
    test.executeTests();
    fail();
  }
 catch (  GradleException e) {
    assertThat(e.getMessage(),equalTo("??"));
  }
}
