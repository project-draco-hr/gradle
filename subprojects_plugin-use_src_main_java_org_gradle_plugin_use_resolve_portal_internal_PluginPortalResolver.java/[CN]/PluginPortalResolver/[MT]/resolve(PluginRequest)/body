{
  if (startParameter.isOffline()) {
    throw new GradleException(String.format("Plugin cannot be resolved from plugin portal because Gradle is running in offline mode."));
  }
  PluginUseMetaData metaData=portalClient.queryPluginMetadata(pluginRequest,getUrl());
  if (metaData == null) {
    return null;
  }
  ClassPath classPath=resolvePluginDependencies(metaData);
  return new ClassPathPluginResolution(instantiator,pluginRequest.getId(),Factories.constant(classPath));
}
