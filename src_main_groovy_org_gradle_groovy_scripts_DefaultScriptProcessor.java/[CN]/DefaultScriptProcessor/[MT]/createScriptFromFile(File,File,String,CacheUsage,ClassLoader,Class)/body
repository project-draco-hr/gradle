{
  if (buildFile == null || !buildFile.isFile()) {
    return returnEmptyScript();
  }
  String cacheFileName=ConfigureUtil.dot2underscore(buildFile.getName());
  if (cacheUsage == CacheUsage.OFF) {
    return scriptHandler.createScript(concatenate(GFileUtils.readFileToString(buildFile),scriptAttachement),classLoader,cacheFileName,scriptBaseClass);
  }
  if (cacheUsage == CacheUsage.ON) {
    Script cachedScript=scriptHandler.loadFromCache(buildFile.lastModified(),classLoader,cacheFileName,cacheDir);
    if (cachedScript != null) {
      return cachedScript;
    }
  }
  return scriptHandler.writeToCache(concatenate(GFileUtils.readFileToString(buildFile),scriptAttachement),classLoader,cacheFileName,cacheDir,scriptBaseClass);
}
