{
  File sourceFile=source.getSourceFile();
  File cacheDir=new File(sourceFile.getParentFile(),Project.CACHE_DIR_NAME);
  String cacheFileName=source.getClassName();
  if (cacheUsage == CacheUsage.ON) {
    Script cachedScript=scriptHandler.loadFromCache(sourceFile.lastModified(),classLoader,cacheFileName,cacheDir);
    if (cachedScript != null) {
      return cachedScript;
    }
  }
  return scriptHandler.writeToCache(source.getText(),classLoader,cacheFileName,cacheDir,scriptBaseClass);
}
