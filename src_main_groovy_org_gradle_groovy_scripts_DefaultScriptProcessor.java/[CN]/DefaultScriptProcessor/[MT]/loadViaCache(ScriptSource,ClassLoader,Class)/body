{
  File sourceFile=source.getSourceFile();
  File cacheDir=new File(sourceFile.getParentFile(),Project.CACHE_DIR_NAME);
  File scriptCacheDir=new File(cacheDir,sourceFile.getName());
  String scriptClassName=source.getClassName();
  if (cacheUsage == CacheUsage.ON) {
    Script cachedScript=scriptHandler.loadFromCache(sourceFile.lastModified(),classLoader,scriptClassName,scriptCacheDir);
    if (cachedScript != null) {
      return cachedScript;
    }
  }
  return scriptHandler.writeToCache(source.getText(),classLoader,scriptClassName,scriptCacheDir,scriptBaseClass);
}
