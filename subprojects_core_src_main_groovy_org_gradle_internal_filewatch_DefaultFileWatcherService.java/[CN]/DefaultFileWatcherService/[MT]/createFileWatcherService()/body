{
  if (javaVersion.isJava7Compatible()) {
    Class clazz;
    try {
      clazz=classLoader.loadClass("org.gradle.internal.filewatch.jdk7.DefaultFileWatcher");
    }
 catch (    ClassNotFoundException e) {
      throw new RuntimeException("Cannot find FileWatcherService implementation class",e);
    }
    return Cast.uncheckedCast(DirectInstantiator.instantiate(clazz,executor));
  }
 else {
    return new NoOpFileWatcherService();
  }
}
