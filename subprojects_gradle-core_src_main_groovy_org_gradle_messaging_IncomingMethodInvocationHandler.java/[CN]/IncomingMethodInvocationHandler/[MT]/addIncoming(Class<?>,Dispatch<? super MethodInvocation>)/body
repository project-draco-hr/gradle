{
  Set<Class<?>> incomingTypes=new HashSet<Class<?>>();
  addInterfaces(type,incomingTypes);
  for (  Class<?> incomingType : incomingTypes) {
    if (incoming.containsKey(incomingType)) {
      throw new IllegalArgumentException(String.format("A handler has already been added for type '%s'.",incomingType.getName()));
    }
    incoming.put(incomingType,dispatch);
  }
}
