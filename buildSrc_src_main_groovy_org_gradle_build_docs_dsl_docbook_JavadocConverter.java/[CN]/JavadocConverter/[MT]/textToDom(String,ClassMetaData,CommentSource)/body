{
  JavadocLexer lexer=new JavadocLexer(new JavadocScanner(rawCommentText));
  NodeStack nodes=new NodeStack(document);
  HtmlGeneratingTokenHandler handler=new HtmlGeneratingTokenHandler(nodes,document);
  handler.add(new TagToElementTranslatingTokenHandler(nodes,document));
  handler.add(new HeaderHandler(nodes,document));
  handler.add(new LinkHandler(nodes,linkConverter,classMetaData));
  handler.add(new InheritDocHandler(nodes,inheritedCommentSource));
  handler.add(new UnknownElementTagHandler(nodes,document));
  while (lexer.next()) {
switch (lexer.token) {
case Text:
      handler.onText(lexer.value);
    break;
case StartElement:
case StartTag:
  handler.onStartTag(lexer.value,lexer.token);
break;
case End:
handler.onEndTag(lexer.value);
break;
}
}
nodes.complete();
return nodes.nodes;
}
