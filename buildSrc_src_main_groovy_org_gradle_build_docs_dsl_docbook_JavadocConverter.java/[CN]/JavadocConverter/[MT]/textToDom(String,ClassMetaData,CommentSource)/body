{
  JavadocLexer lexer=new HtmlToXmlJavadocLexer(new BasicJavadocLexer(new JavadocScanner(rawCommentText)));
  NodeStack nodes=new NodeStack(document);
  HtmlGeneratingTokenHandler handler=new HtmlGeneratingTokenHandler(nodes,document);
  handler.add(new TagToElementTranslatingTokenHandler(nodes,document));
  handler.add(new HeaderHandler(nodes,document));
  handler.add(new LinkHandler(nodes,linkConverter,classMetaData));
  handler.add(new InheritDocHandler(nodes,inheritedCommentSource));
  handler.add(new ValueTagHandler(nodes,linkConverter,classMetaData));
  handler.add(new TableHandler(nodes,document));
  handler.add(new UnknownElementTagHandler(nodes,document));
  while (lexer.next()) {
    JavadocLexer.Token token=lexer.getToken();
switch (token.tokenType) {
case Text:
      handler.onText(token.value);
    break;
case StartElement:
case StartTag:
  handler.onStartTag(token.value,token.tokenType);
break;
case End:
handler.onEndTag(token.value);
break;
}
}
nodes.complete();
return nodes.nodes;
}
