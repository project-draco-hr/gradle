{
  BufferedWriter writer=null;
  try {
    final Map<String,JavadocOptionFileOption> options=optionFile.getOptions();
    writer=new BufferedWriter(new FileWriter(outputFile));
    JavadocOptionFileWriterContext writerContext=new JavadocOptionFileWriterContext(writer);
    JavadocOptionFileOption localeOption=options.get("locale");
    if (localeOption != null) {
      localeOption.write(writerContext);
    }
    final Map<String,JavadocOptionFileOption> optionsWithoutLocale=CollectionUtils.filter(options,new Spec<Map.Entry<String,JavadocOptionFileOption>>(){
      public boolean isSatisfiedBy(      Map.Entry<String,JavadocOptionFileOption> element){
        return "locale".equals(element.getKey());
      }
    }
);
    for (    final String option : optionsWithoutLocale.keySet()) {
      options.get(option).write(writerContext);
    }
    optionFile.getSourceNames().write(writerContext);
  }
  finally {
    IOUtils.closeQuietly(writer);
  }
}
