{
  context.checking(new Expectations(){
{
      one(dependencyDescriptorFactoryMock).createDescriptor(getParentModuleDescriptor(),TEST_MODULE_DESCRIPTOR,artifactDependency.isForce(),false,false,TEST_CONF_SET,new ArrayList<ExcludeRule>());
      will(returnValue(expectedDependencyDescriptor));
    }
  }
);
  assertSame(expectedDependencyDescriptor,artifactDependency.createDepencencyDescriptor(getParentModuleDescriptor()));
  DependencyArtifactDescriptor artifactDescriptor=expectedDependencyDescriptor.getAllDependencyArtifacts()[0];
  assertEquals(expectedDependencyDescriptor.getDependencyRevisionId().getName(),artifactDescriptor.getName());
  assertEquals("jar",artifactDescriptor.getExt());
  assertEquals("jar",artifactDescriptor.getType());
  assertArrayEquals(WrapUtil.toArray(TEST_CONF),artifactDescriptor.getConfigurations());
}
