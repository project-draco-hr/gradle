{
  DirCacheReference cacheReference=open(cacheDir,usage,properties);
  if (cacheReference.stateCache == null) {
    PersistentCache cache=cacheReference.getCache();
    SimpleStateCache<E> stateCache=new SimpleStateCache<E>(cache,serializer);
    cacheReference.stateCache=new StateCacheReference<E>(stateCache,cacheReference);
  }
  cacheReference.stateCache.addReference();
  return cacheReference.stateCache;
}
