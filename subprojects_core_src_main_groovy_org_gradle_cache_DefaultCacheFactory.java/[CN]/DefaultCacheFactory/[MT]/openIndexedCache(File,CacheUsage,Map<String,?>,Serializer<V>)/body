{
  DirCacheReference cacheReference=open(cacheDir,usage,properties);
  if (cacheReference.indexedCache == null) {
    PersistentCache cache=cacheReference.getCache();
    BTreePersistentIndexedCache<K,V> indexedCache=new BTreePersistentIndexedCache<K,V>(cache,serializer);
    cacheReference.indexedCache=new IndexedCacheReference<K,V>(indexedCache,cacheReference);
  }
  cacheReference.indexedCache.addReference();
  return cacheReference.indexedCache;
}
