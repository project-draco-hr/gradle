{
  HttpPut method=new HttpPut(destination);
  final RepeatableInputStreamEntity entity=new RepeatableInputStreamEntity(source,contentLength,ContentType.APPLICATION_OCTET_STREAM);
  method.setEntity(entity);
  HttpResponse response=http.performHttpRequest(method);
  EntityUtils.consume(response.getEntity());
  if (!http.wasSuccessful(response)) {
    throw new IOException(String.format("Could not PUT '%s'. Received status code %s from server: %s",destination,response.getStatusLine().getStatusCode(),response.getStatusLine().getReasonPhrase()));
  }
}
