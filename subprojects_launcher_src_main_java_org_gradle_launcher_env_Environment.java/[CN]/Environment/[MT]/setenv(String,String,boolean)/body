{
  if (name.lastIndexOf("=") != -1) {
    throw new IllegalArgumentException("Environment variable cannot contain '='");
  }
  Map<String,String> map=getenv();
  boolean contains=map.containsKey(name);
  if (!contains || overwrite) {
    map.put(name,value);
    Map<String,String> env2=getwinenv();
    env2.put(name,value);
  }
  return libc.setenv(name,value,overwrite ? 1 : 0);
}
