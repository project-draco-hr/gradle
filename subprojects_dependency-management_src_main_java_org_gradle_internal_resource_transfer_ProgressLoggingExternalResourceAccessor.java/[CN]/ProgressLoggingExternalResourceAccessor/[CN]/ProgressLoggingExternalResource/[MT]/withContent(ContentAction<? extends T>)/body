{
  return resource.withContent(new ContentAction<T>(){
    @Override public T execute(    InputStream inputStream,    ExternalResourceMetaData metaData) throws IOException {
      final ResourceOperation downloadOperation=createResourceOperation(resource.getName(),ResourceOperation.Type.download,getClass(),metaData.getContentLength());
      try {
        return readAction.execute(new ProgressLoggingInputStream(inputStream,downloadOperation),metaData);
      }
  finally {
        downloadOperation.completed();
      }
    }
  }
);
}
