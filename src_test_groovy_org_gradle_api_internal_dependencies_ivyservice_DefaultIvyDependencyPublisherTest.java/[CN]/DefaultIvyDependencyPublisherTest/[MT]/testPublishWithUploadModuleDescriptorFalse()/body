{
  final PublishInstruction publishInstruction=new PublishInstruction();
  publishInstruction.getModuleDescriptor().setPublish(false);
  context.checking(new Expectations(){
{
      allowing(publishOptionsFactoryMock).createPublishOptions(WrapUtil.toSet(expectedConf),publishInstruction,null);
      will(returnValue(expectedPublishOptions));
      one(publishEngineMock).publish(moduleDescriptorMock,DefaultIvyDependencyPublisher.ARTIFACT_PATTERN,expectedResolverList.get(0),expectedPublishOptions);
    }
  }
);
  ivyDependencyPublisher.publish(WrapUtil.toSet(expectedConf),publishInstruction,expectedResolverList,moduleDescriptorMock,publishEngineMock);
}
