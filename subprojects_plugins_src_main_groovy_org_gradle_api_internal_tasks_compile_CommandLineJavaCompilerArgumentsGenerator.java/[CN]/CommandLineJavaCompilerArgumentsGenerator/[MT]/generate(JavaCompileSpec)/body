{
  JavaCompilerArgumentsBuilder builder=new JavaCompilerArgumentsBuilder(spec).logArguments(false);
  List<String> launcherOptions=builder.includeLauncherOptions(true).includeMainOptions(false).includeSourceFiles(false).build();
  List<String> remainingArgs=builder.includeLauncherOptions(false).includeMainOptions(true).includeSourceFiles(true).build();
  Iterable<String> allArgs=Iterables.concat(launcherOptions,remainingArgs);
  if (exceedsWindowsCommandLineLengthLimit(allArgs)) {
    return Iterables.concat(launcherOptions,shortenArgs(remainingArgs));
  }
  return allArgs;
}
