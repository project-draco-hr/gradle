{
  Configuration configurationStub1=createNamesAndExtendedConfigurationStub("conf1");
  Configuration configurationStub2=createNamesAndExtendedConfigurationStub("conf2",configurationStub1);
  DefaultModuleDescriptor moduleDescriptor=TestUtil.createModuleDescriptor(Collections.EMPTY_SET);
  MutableLocalComponentMetaData metaData=new DefaultLocalComponentMetaData(moduleDescriptor,null);
  configurationsToModuleDescriptorConverter.addConfigurations(metaData,WrapUtil.toSet(configurationStub1,configurationStub2));
  assertIvyConfigurationIsCorrect(moduleDescriptor.getConfiguration(configurationStub1.getName()),expectedIvyConfiguration(configurationStub1));
  assertIvyConfigurationIsCorrect(moduleDescriptor.getConfiguration(configurationStub2.getName()),expectedIvyConfiguration(configurationStub2));
  assertThat(moduleDescriptor.getConfigurations().length,equalTo(2));
}
