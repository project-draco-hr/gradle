{
  Map<String,ModuleDescriptor> clientModuleRegistry=metaDataProvider.getClientModuleRegistry();
  Ivy ivy=ivyForResolve(resolverProvider.getResolvers(),metaDataProvider.getGradleUserHomeDir(),clientModuleRegistry);
  ModuleDescriptor moduleDescriptor=moduleDescriptorConverter.convertForResolve(configuration,metaDataProvider.getModule(),clientModuleRegistry,ivy.getSettings());
  final ResolveReport resolveReport=dependencyResolver.resolveAsReport(configuration,ivy,moduleDescriptor,false);
  return new ResolvedConfiguration(){
    public ResolveReport getResolveReport(){
      return resolveReport;
    }
    public boolean hasError(){
      return resolveReport.hasError();
    }
    public Set<File> getFiles(){
      return dependencyResolver.resolveFromReport(configuration,resolveReport);
    }
  }
;
}
