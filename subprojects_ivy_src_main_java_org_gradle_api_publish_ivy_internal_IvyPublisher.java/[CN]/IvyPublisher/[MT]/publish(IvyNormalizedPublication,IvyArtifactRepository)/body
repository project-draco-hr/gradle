{
  DependencyResolver dependencyResolver=Cast.cast(ArtifactRepositoryInternal.class,repository).createResolver();
  ModuleRevisionId moduleRevisionId=IvyUtil.createModuleRevisionId(publication.getModule());
  try {
    for (    PublishArtifact publishArtifact : publication.getArtifacts()) {
      Artifact ivyArtifact=createIvyArtifact(publishArtifact,moduleRevisionId);
      dependencyResolver.publish(ivyArtifact,publishArtifact.getFile(),true);
    }
    Artifact artifact=DefaultArtifact.newIvyArtifact(moduleRevisionId,null);
    dependencyResolver.publish(artifact,publication.getDescriptorFile(),true);
  }
 catch (  IOException e) {
    throw new UncheckedIOException(e);
  }
}
