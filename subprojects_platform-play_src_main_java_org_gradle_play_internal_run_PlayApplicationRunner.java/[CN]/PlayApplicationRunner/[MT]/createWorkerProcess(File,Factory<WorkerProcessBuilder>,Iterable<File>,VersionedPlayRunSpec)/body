{
  WorkerProcessBuilder builder=workerFactory.create();
  builder.setBaseName("Gradle Play Worker");
  List<File> combinedClasspath=new ArrayList<File>();
  for (  File file : docsClasspath) {
    combinedClasspath.add(file);
  }
  for (  File file : spec.getClasspath()) {
    combinedClasspath.add(file);
  }
  builder.applicationClasspath(combinedClasspath);
  builder.setLogLevel(LogLevel.DEBUG);
  builder.sharedPackages(spec.getSharedPackages());
  JavaExecHandleBuilder javaCommand=builder.getJavaCommand();
  javaCommand.setWorkingDir(workingDir);
  javaCommand.setMinHeapSize(spec.getForkOptions().getMemoryInitialSize());
  javaCommand.setMaxHeapSize(spec.getForkOptions().getMemoryMaximumSize());
  WorkerProcess process=builder.worker(new PlayWorkerServer(spec,docsClasspath)).build();
  return process;
}
