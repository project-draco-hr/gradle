{
  ClassLoader classLoader=ClassLoader.getSystemClassLoader();
  List jars=new ArrayList();
  File[] files=getGradleClasspath();
  for (int i=0; i < files.length; i++) {
    jars.add(files[i].toURL());
  }
  ClassLoader contextClassLoader=new URLClassLoader((URL[])jars.toArray(new URL[jars.size()]),classLoader.getParent());
  classLoader=contextClassLoader;
  Thread.currentThread().setContextClassLoader(contextClassLoader);
  Class mainClass=classLoader.loadClass("org.gradle.Main");
  Method mainMethod=mainClass.getMethod("main",new Class[]{String[].class});
  List argList=new ArrayList(Arrays.asList(args));
  argList.add(0,"-B Adding jars to context loader: " + jars);
  mainMethod.invoke(null,new Object[]{(String[])argList.toArray(new String[argList.size()])});
}
