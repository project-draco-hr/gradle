{
  boolean modernCompilerFound=false;
  ClassLoader classLoader=ClassLoader.getSystemClassLoader();
  try {
    classLoader.loadClass("com.sun.tools.javac.Main");
    modernCompilerFound=true;
    toolsMainInfo.add("Modern compiler found.");
  }
 catch (  ClassNotFoundException e) {
    toolsMainInfo.add("No modern compiler.");
  }
  if (!modernCompilerFound) {
    ClassLoader _cl=classLoader;
    while (_cl.getParent() != null) {
      _cl=_cl.getParent();
    }
    File toolsJar=Locator.getToolsJar();
    List jars=new ArrayList();
    File[] files=GradleUtil.getGradleClasspath();
    for (int i=0; i < files.length; i++) {
      jars.add(Locator.fileToURL(files[i]));
    }
    jars.add(Locator.fileToURL(toolsJar));
    ClassLoader contextClassLoader=new URLClassLoader((URL[])jars.toArray(new URL[jars.size()]),_cl);
    contextClassLoader.loadClass("com.sun.tools.javac.Main");
    classLoader=contextClassLoader;
    Thread.currentThread().setContextClassLoader(contextClassLoader);
  }
  Class mainClass=classLoader.loadClass("org.gradle.Main");
  Method mainMethod=mainClass.getMethod("main",new Class[]{String[].class});
  mainMethod.invoke(null,new Object[]{args});
}
