{
  ModelNode node=new ModelNode(path,descriptor,promise,adapter);
  ModelNode previous=entryNodes.put(path.getName(),node);
  if (previous != null) {
    throw new IllegalStateException("attempt to replace node link: " + path);
  }
  flattened.put(path,node);
  return node;
}
