{
  flattened.put(node.getPath(),node);
  notifying=true;
  try {
    Iterator<ModelCreationListener> iterator=listeners.iterator();
    while (iterator.hasNext()) {
      ModelCreationListener listener=iterator.next();
      if (maybeNotify(listener,node)) {
        iterator.remove();
      }
    }
  }
  finally {
    notifying=false;
  }
}
