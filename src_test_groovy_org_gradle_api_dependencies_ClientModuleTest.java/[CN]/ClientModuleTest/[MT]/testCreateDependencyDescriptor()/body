{
  clientModule=new ClientModule(dependencyFactory,parentConfs,TEST_MODULE_DESCRIPTOR_WITH_CLASSIFIER,testModuleRegistry);
  clientModule.setDependencyDescriptorFactory(dependencyDescriptorFactoryMock);
  final ModuleDescriptor parentModuleDescriptorMock=context.mock(ModuleDescriptor.class);
  context.checking(new Expectations(){
{
      one(dependencyDescriptorFactoryMock).createFromClientModule(parentModuleDescriptorMock,clientModule);
      will(returnValue(expectedDependencyDescriptor));
    }
  }
);
  assertSame(expectedDependencyDescriptor,clientModule.createDependencyDescriptor(parentModuleDescriptorMock));
}
