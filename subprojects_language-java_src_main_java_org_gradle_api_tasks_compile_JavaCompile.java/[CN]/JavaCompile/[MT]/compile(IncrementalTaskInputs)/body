{
  if (!compileOptions.isIncremental()) {
    compile();
    return;
  }
  SingleMessageLogger.incubatingFeatureUsed("Incremental java compilation");
  DefaultJavaCompileSpec spec=createSpec();
  final CacheRepository repository1=getCacheRepository();
  final JavaCompile javaCompile1=this;
  final GeneralCompileCaches generalCaches1=getGeneralCompileCaches();
  CompileCaches compileCaches=new CompileCaches(){
    private final CacheRepository repository=repository1;
    private final JavaCompile javaCompile=javaCompile1;
    private final GeneralCompileCaches generalCaches=generalCaches1;
    public ClassAnalysisCache getClassAnalysisCache(){
      return generalCaches.getClassAnalysisCache();
    }
    public JarSnapshotCache getJarSnapshotCache(){
      return generalCaches.getJarSnapshotCache();
    }
    public LocalJarClasspathSnapshotStore getLocalJarClasspathSnapshotStore(){
      return new LocalJarClasspathSnapshotStore(repository,javaCompile);
    }
    public LocalClassSetAnalysisStore getLocalClassSetAnalysisStore(){
      return new LocalClassSetAnalysisStore(repository,javaCompile);
    }
  }
;
  IncrementalCompilerFactory factory=new IncrementalCompilerFactory((FileOperations)getProject(),getPath(),createCompiler(spec),source,compileCaches,(IncrementalTaskInputsInternal)inputs);
  Compiler<JavaCompileSpec> compiler=factory.createCompiler();
  performCompilation(spec,compiler);
}
