{
  CompositeSubstitutionsActionRunner contextBuilder=new CompositeSubstitutionsActionRunner(context);
  for (  IncludedBuild build : includedBuilds) {
    IncludedBuildInternal buildInternal=(IncludedBuildInternal)build;
    context.registerBuild(buildInternal.getName(),build);
    DependencySubstitutionsInternal substitutions=buildInternal.resolveDependencySubstitutions();
    if (!substitutions.hasRules()) {
      LOGGER.lifecycle("[composite-build] Configuring build: " + buildInternal.getProjectDir());
      contextBuilder.run(buildInternal);
    }
 else {
      context.registerSubstitution(substitutions.getRuleAction());
    }
  }
}
