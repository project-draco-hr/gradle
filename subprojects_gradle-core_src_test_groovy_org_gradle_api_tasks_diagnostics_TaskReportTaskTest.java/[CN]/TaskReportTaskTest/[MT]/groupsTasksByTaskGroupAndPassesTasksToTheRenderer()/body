{
  context.checking(new Expectations(){
{
      Task task1=task("a","group a");
      Task task2=task("b","group b");
      Task task3=task("c","group b");
      List<String> testDefaultTasks=toList("defaultTask1","defaultTask2");
      allowing(project).getDefaultTasks();
      will(returnValue(testDefaultTasks));
      one(taskContainer).getAll();
      will(returnValue(toLinkedSet(task2,task3,task1)));
      allowing(taskContainer).getRules();
      will(returnValue(toList()));
      Sequence sequence=context.sequence("seq");
      one(renderer).addDefaultTasks(testDefaultTasks);
      inSequence(sequence);
      one(renderer).startTaskGroup("group a");
      inSequence(sequence);
      one(renderer).addTask(task1);
      inSequence(sequence);
      one(renderer).startTaskGroup("group b");
      inSequence(sequence);
      one(renderer).addTask(task2);
      inSequence(sequence);
      one(renderer).addTask(task3);
      inSequence(sequence);
      one(renderer).completeTasks();
      inSequence(sequence);
    }
  }
);
  task.generate(project);
}
