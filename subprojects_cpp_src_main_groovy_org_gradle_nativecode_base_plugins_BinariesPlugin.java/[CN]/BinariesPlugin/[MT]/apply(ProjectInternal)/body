{
  project.getPlugins().apply(BasePlugin.class);
  project.getPlugins().apply(LanguageBasePlugin.class);
  final BinariesContainer binaries=project.getExtensions().getByType(BinariesContainer.class);
  final ToolChainRegistry toolChains=project.getExtensions().create("compilers",DefaultToolChainRegistry.class,instantiator);
  final NamedDomainObjectSet<Executable> executables=project.getExtensions().create("executables",FactoryNamedDomainObjectContainer.class,Executable.class,instantiator,new ReflectiveNamedDomainObjectFactory<Executable>(DefaultExecutable.class));
  final NamedDomainObjectSet<Library> libraries=project.getExtensions().create("libraries",FactoryNamedDomainObjectContainer.class,Library.class,instantiator,new ReflectiveNamedDomainObjectFactory<Library>(DefaultLibrary.class,project.getFileResolver()));
  configurationActions.add(new Action<ProjectInternal>(){
    public void execute(    ProjectInternal projectInternal){
      ToolChain defaultToolChain=toolChains.getDefaultToolChain();
      for (      Library library : libraries) {
        DefaultSharedLibraryBinary sharedLibraryBinary=instantiator.newInstance(DefaultSharedLibraryBinary.class,library,defaultToolChain);
        register(setupDefaults(project,sharedLibraryBinary),library,binaries);
        register(setupDefaults(project,instantiator.newInstance(DefaultStaticLibraryBinary.class,library,defaultToolChain)),library,binaries);
      }
      for (      Executable executable : executables) {
        register(setupDefaults(project,instantiator.newInstance(DefaultExecutableBinary.class,executable,defaultToolChain)),executable,binaries);
      }
    }
  }
);
}
