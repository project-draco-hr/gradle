{
  compile.setSrcDirs(WrapUtil.toList(new File("sourceDir1"),new File("sourceDir2")));
  compile.setIncludes(TEST_INCLUDES);
  compile.setExcludes(TEST_EXCLUDES);
  setupExistingDirsFilter(scalaCompile,new ExistingDirsFilter(){
    @Override public List<File> checkDestDirAndFindExistingDirsAndThrowStopActionIfNone(    File destDir,    Collection<File> dirFiles){
      assertSame(destDir,compile.getDestinationDir());
      assertSame(dirFiles,compile.getScalaSrcDirs());
      return compile.getScalaSrcDirs();
    }
  }
);
  compile.setTargetCompatibility("1.5");
  compile.setDestinationDir(TEST_TARGET_DIR);
  compile.setClasspath(new AbstractFileCollection(){
    @Override public String getDisplayName(){
      throw new UnsupportedOperationException();
    }
    public Set<File> getFiles(){
      return new LinkedHashSet<File>(TEST_DEPENDENCY_MANAGER_CLASSPATH);
    }
  }
);
}
