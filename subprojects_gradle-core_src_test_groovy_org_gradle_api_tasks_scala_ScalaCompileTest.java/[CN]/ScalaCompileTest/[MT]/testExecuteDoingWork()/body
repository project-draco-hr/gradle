{
  setUpMocksAndAttributes(scalaCompile);
  context.checking(new Expectations(){
{
      one(antScalaCompileMock).execute(scalaCompile.getSrcDirs(),scalaCompile.getIncludes(),scalaCompile.getExcludes(),scalaCompile.getDestinationDir(),scalaCompile.getClasspath(),scalaCompile.getScalaCompileOptions());
      Set<String> expectedExcludes=new HashSet<String>();
      expectedExcludes.addAll(scalaCompile.getExcludes());
      expectedExcludes.add("**/*.scala");
      List<File> expectedClassPath=new ArrayList<File>();
      expectedClassPath.add(scalaCompile.getDestinationDir());
      for (      File file : scalaCompile.getClasspath()) {
        expectedClassPath.add(file);
      }
      one(antCompileMock).execute(scalaCompile.getSrcDirs(),scalaCompile.getIncludes(),expectedExcludes,scalaCompile.getDestinationDir(),scalaCompile.getDependencyCacheDir(),expectedClassPath,scalaCompile.getSourceCompatibility(),scalaCompile.getTargetCompatibility(),scalaCompile.getOptions(),scalaCompile.getAnt());
    }
  }
);
  scalaCompile.compile();
}
