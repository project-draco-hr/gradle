{
  boolean dynamicSelector=componentChooser.canSelectMultipleComponents(dependency.getRequested());
  LinkedList<RepositoryResolveState> queue=new LinkedList<RepositoryResolveState>();
  for (  ModuleComponentRepository repository : repositories) {
    queue.add(createRepositoryResolveState(repository,dynamicSelector));
  }
  LinkedList<RepositoryResolveState> missing=new LinkedList<RepositoryResolveState>();
  RepositoryChainModuleResolution best=findLatestModule(dependency,dynamicSelector,queue,failures,missing);
  if (best != null) {
    return best;
  }
  queue.addAll(missing);
  missing.clear();
  return findLatestModule(dependency,dynamicSelector,queue,failures,missing);
}
