{
  if (environment.isLongLivingProcess()) {
    return new HashClassPathSnapshotter(new Hasher(){
      public byte[] hash(      File file){
        return fileSnapshotter.snapshot(file).getHash();
      }
    }
);
  }
 else {
    return new FileClassPathSnapshotter();
  }
}
