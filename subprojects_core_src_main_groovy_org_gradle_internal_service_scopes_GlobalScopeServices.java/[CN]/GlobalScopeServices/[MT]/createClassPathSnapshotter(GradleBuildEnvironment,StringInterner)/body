{
  if (environment.isLongLivingProcess()) {
    CachingFileSnapshotter fileSnapshotter=new CachingFileSnapshotter(new DefaultHasher(),new NonThreadsafeInMemoryStore(),stringInterner);
    return new HashClassPathSnapshotter(fileSnapshotter);
  }
 else {
    return new FileClassPathSnapshotter();
  }
}
