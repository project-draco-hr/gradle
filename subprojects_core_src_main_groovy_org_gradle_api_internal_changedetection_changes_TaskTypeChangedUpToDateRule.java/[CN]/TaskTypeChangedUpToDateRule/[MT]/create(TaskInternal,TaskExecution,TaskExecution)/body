{
  final String taskClass=task.getClass().getName();
  currentExecution.setTaskClass(taskClass);
  return new SimpleUpToDateState(){
    @Override protected void addAllChanges(    List<TaskUpToDateChange> changes){
      if (!taskClass.equals(previousExecution.getTaskClass())) {
        changes.add(new DescriptiveChange("%s has changed type from '%s' to '%s'.",StringUtils.capitalize(task.toString()),previousExecution.getTaskClass(),task.getClass().getName()));
      }
    }
    public void snapshotAfterTask(){
    }
  }
;
}
