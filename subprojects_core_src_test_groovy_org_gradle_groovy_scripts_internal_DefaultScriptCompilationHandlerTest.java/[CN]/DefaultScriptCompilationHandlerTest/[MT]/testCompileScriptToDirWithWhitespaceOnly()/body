{
  final ScriptSource scriptSource=scriptSource("// ignore me\n");
  scriptCompilationHandler.compileToDir(scriptSource,classLoader,scriptCacheDir,metadataCacheDir,null,classpathClosureName,expectedScriptClass,verifier);
  checkEmptyScriptInCache();
  CompiledScript<? extends Script,Void> compiledScript=scriptCompilationHandler.loadFromDir(scriptSource,classLoader,scriptCacheDir,metadataCacheDir,null,expectedScriptClass,classLoaderId);
  Script script=compiledScript.loadClass().newInstance();
  assertThat(script,isA(expectedScriptClass));
}
