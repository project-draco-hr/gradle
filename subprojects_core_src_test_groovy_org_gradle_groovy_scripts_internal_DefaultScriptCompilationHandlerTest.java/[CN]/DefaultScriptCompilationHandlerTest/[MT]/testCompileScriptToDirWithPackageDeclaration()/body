{
  final ScriptSource scriptSource=scriptSource("package org.gradle.test\n" + scriptText);
  try {
    scriptCompilationHandler.compileToDir(scriptSource,classLoader,scriptCacheDir,metadataCacheDir,null,expectedScriptClass,verifier);
    fail();
  }
 catch (  UnsupportedOperationException e) {
    assertThat(e.getMessage(),equalTo("Script-display-name should not contain a package statement."));
  }
}
