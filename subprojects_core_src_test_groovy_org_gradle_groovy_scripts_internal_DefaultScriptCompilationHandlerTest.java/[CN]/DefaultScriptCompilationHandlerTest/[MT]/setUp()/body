{
  File testProjectDir=tmpDir.createDir("projectDir");
  classLoader=getClass().getClassLoader();
  importsReader=context.mock(ImportsReader.class);
  context.checking(new Expectations(){
{
      allowing(importsReader).getImportPackages();
      will(returnValue(Collections.emptyList()));
    }
  }
);
  scriptCompilationHandler=new DefaultScriptCompilationHandler(new AsmBackedEmptyScriptGenerator(),new DummyClassLoaderCache(),importsReader);
  scriptCacheDir=new File(testProjectDir,"cache");
  metadataCacheDir=new File(testProjectDir,"metadata");
  scriptText="System.setProperty('" + TEST_EXPECTED_SYSTEMPROP_KEY + "', '"+ TEST_EXPECTED_SYSTEMPROP_VALUE+ "')";
  scriptClassName="ScriptClassName";
  scriptFileName="script-file-name";
  classpathClosureName="buildscript";
  scriptSource=scriptSource();
  cachedFile=new File(scriptCacheDir,scriptClassName + ".class");
  expectedScriptClass=TestBaseScript.class;
}
