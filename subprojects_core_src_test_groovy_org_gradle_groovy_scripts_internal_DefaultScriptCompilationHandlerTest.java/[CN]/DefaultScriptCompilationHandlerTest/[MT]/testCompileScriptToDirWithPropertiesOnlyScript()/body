{
  final ScriptSource scriptSource=scriptSource("String a");
  scriptCompilationHandler.compileToDir(scriptSource,classLoader,scriptCacheDir,null,classpathClosureName,expectedScriptClass,verifier);
  checkScriptClassesInCache();
  checkHasImperativeStatementsMarkerInCache();
  CompiledScript<? extends Script> compiledScript=scriptCompilationHandler.loadFromDir(scriptSource,classLoader,scriptCacheDir,expectedScriptClass);
  assertThat(compiledScript.hasImperativeStatements(),is(true));
  Script script=compiledScript.loadClass().newInstance();
  assertThat(script,isA(expectedScriptClass));
}
