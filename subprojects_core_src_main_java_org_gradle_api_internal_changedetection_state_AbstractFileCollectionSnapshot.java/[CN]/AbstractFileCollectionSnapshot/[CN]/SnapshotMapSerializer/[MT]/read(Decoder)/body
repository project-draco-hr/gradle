{
  Map<String,IncrementalFileSnapshot> snapshots=Maps.newLinkedHashMap();
  int snapshotsCount=decoder.readSmallInt();
  for (int i=0; i < snapshotsCount; i++) {
    String path=stringInterner.intern(decoder.readString());
    IncrementalFileSnapshot snapshot=snapshotSerializer.read(decoder);
    snapshots.put(path,snapshot);
  }
  return snapshots;
}
