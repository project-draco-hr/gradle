{
  if (fullRebuildNeeded != null) {
    return;
  }
  File inputFile=inputFileDetails.getFile();
  String name=inputFile.getName();
  if (name.endsWith(".java")) {
    JavaSourceClass source=mapper.toJavaSourceClass(inputFile);
    compiler.addStaleClass(source);
    changedSourceOnly.include(source.getRelativePath());
    Set<String> actualDependents=dependencyInfo.getActualDependents(source.getClassName());
    if (actualDependents == null) {
      fullRebuildNeeded="change to " + source.getClassName() + " requires full rebuild";
      return;
    }
    for (    String d : actualDependents) {
      JavaSourceClass dSource=mapper.toJavaSourceClass(d);
      compiler.addStaleClass(dSource);
      changedSourceOnly.include(dSource.getRelativePath());
    }
  }
  if (name.endsWith(".jar")) {
    fullRebuildNeeded="change to " + inputFile + " requires full rebuild";
    return;
  }
}
