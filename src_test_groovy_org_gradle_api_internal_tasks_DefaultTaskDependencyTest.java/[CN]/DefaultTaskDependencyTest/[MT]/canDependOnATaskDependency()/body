{
  final TaskDependency otherDependency=context.mock(TaskDependency.class);
  dependency.add(otherDependency);
  context.checking(new Expectations(){
{
      one(otherDependency).getDependencies(task);
      will(returnValue(WrapUtil.toSet(otherTask)));
    }
  }
);
  assertThat(dependency.getDependencies(task),equalTo(WrapUtil.<Task>toSet(otherTask)));
}
