{
  ClassPath implementationClasspath=distribution.getToolingImplementationClasspath(progressLoggerFactory,userHomeDir,cancellationToken);
  LOGGER.debug("Using tooling provider classpath: {}",implementationClasspath);
  MultiParentClassLoader parentObfuscatingClassLoader=new MultiParentClassLoader(classLoader);
  FilteringClassLoader.Spec filterSpec=new FilteringClassLoader.Spec();
  filterSpec.allowPackage("org.gradle.tooling.internal.protocol");
  FilteringClassLoader filteringClassLoader=new FilteringClassLoader(parentObfuscatingClassLoader,filterSpec);
  return new VisitableURLClassLoader(filteringClassLoader,implementationClasspath);
}
