{
  ClassPath implementationClasspath=distribution.getToolingImplementationClasspath(progressLoggerFactory,userHomeDir,cancellationToken);
  LOGGER.debug("Using tooling provider classpath: {}",implementationClasspath);
  MultiParentClassLoader parentObfuscatingClassLoader=new MultiParentClassLoader(classLoader);
  FilteringClassLoader filteringClassLoader=new FilteringClassLoader(parentObfuscatingClassLoader);
  filteringClassLoader.allowPackage("org.gradle.tooling.internal.protocol");
  return new VisitableURLClassLoader(filteringClassLoader,implementationClasspath.getAsURLArray());
}
