{
  return new BiFunction<ModelCreators.Builder,MutableModelNode,ModelReference<? extends T>>(){
    @Override public ModelCreators.Builder apply(    MutableModelNode parent,    ModelReference<? extends T> reference){
      final ModelPath path=reference.getPath();
      final ModelType<? extends T> modelType=reference.getType();
      return ModelCreators.of(ModelReference.of(path,modelType),new BiAction<MutableModelNode,List<ModelView<?>>>(){
        @Override public void execute(        MutableModelNode modelNode,        List<ModelView<?>> modelViews){
          doExecute(modelNode,modelType,modelViews);
        }
        public <S extends T>void doExecute(        MutableModelNode modelNode,        ModelType<S> subType,        List<ModelView<?>> modelViews){
          NamedEntityInstantiator<? super T> instantiator=ModelViews.getInstance(modelViews.get(0),instantiatorReference);
          S item=instantiator.create(path.getName(),subType.getConcreteClass());
          modelNode.setPrivateData(subType,item);
          modelNode.applyToSelf(ModelActionRole.Initialize,BiActionBackedModelAction.single(ModelReference.of(path,subType),new SimpleModelRuleDescriptor("DefaultCollectionBuilder.createAndStoreVia() - " + path),storeReference,new BiAction<S,Collection<? super T>>(){
            @Override public void execute(            S s,            Collection<? super T> objects){
              objects.add(s);
            }
          }
));
        }
      }
).inputs(instantiatorReference);
    }
  }
;
}
