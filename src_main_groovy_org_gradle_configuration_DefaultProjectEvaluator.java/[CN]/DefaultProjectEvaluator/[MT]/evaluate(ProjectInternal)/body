{
  listener.beforeEvaluate(project);
  GradleScriptException failure=null;
  try {
    ScriptSource source=new ImportsScriptSource(project.getBuildScriptSource(),importsReader,project.getRootDir());
    Script buildScript=scriptProcessor.createScript(source,project.getBuildScriptClassLoader(),ProjectScript.class);
    projectScriptMetaData.applyMetaData(buildScript,project);
    project.setBuildScript(buildScript);
    project.getStandardOutputRedirector().on(LogLevel.QUIET);
    try {
      buildScript.run();
    }
  finally {
      project.getStandardOutputRedirector().flush();
    }
  }
 catch (  Throwable t) {
    failure=new GradleScriptException(String.format("A problem occurred evaluating %s.",project),t,project.getBuildScriptSource());
  }
  listener.afterEvaluate(project,failure);
  if (failure != null) {
    throw failure;
  }
}
