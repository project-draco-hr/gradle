{
  if (things == null) {
    return Collections.singletonList(null);
  }
 else   if (things.length == 0) {
    return Collections.emptyList();
  }
 else   if (things.length == 1) {
    Object thing=things[0];
    if (thing == null) {
      return Collections.singletonList(null);
    }
    if (thing.getClass().isArray()) {
      Object[] thingArray=(Object[])thing;
      List<T> list=new ArrayList<T>(thingArray.length);
      for (      Object thingThing : thingArray) {
        list.addAll(flattenToList(type,thingThing));
      }
      return list;
    }
    if (thing instanceof Iterable) {
      Iterable<?> iterableThing=(Iterable<?>)thing;
      List<T> list=new ArrayList<T>();
      for (      Object thingThing : iterableThing) {
        list.addAll(flattenToList(type,thingThing));
      }
      return list;
    }
    return Collections.singletonList(cast(type,thing));
  }
 else {
    List<T> list=new ArrayList<T>();
    for (    Object thing : things) {
      list.addAll(flattenToList(type,thing));
    }
    return list;
  }
}
