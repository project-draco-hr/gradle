{
  final MockFile root=new MockFile(context,"root",false);
  final MockFile fileToCopy=root.addFile("file.txt");
  fileToCopy.setExpectations();
  context.checking(new Expectations(){
{
      one(visitor).visitFile(with(file(fileToCopy)));
    }
  }
);
  DirectoryFileTree fileTree=new DirectoryFileTree(fileToCopy.getMock(),new PatternSet(),directoryWalkerFactory);
  fileTree.visit(visitor);
}
