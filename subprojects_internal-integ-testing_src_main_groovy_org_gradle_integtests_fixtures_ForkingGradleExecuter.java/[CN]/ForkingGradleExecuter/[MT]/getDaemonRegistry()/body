{
  File userHome=getUserHomeDir();
  if (userHome == null) {
    userHome=StartParameter.DEFAULT_GRADLE_USER_HOME;
  }
  File daemonBaseDir=DaemonDir.calculateDirectoryViaPropertiesOrUseDefaultInGradleUserHome(getSystemPropertiesFromArgs(),userHome);
  return new DaemonRegistryServices(daemonBaseDir).get(DaemonRegistry.class);
}
