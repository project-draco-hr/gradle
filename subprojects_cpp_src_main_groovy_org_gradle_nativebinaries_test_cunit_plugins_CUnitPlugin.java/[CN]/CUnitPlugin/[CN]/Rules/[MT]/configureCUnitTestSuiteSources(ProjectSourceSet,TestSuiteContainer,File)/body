{
  for (  final CUnitTestSuiteSpec suite : testSuites.withType(CUnitTestSuiteSpec.class)) {
    FunctionalSourceSet suiteSourceSet=projectSourceSet.maybeCreate(suite.getName());
    CSourceSet launcherSources=suiteSourceSet.maybeCreate(CUNIT_LAUNCHER_SOURCE_SET,CSourceSet.class);
    File baseDir=new File(buildDir,String.format("src/%s/cunitLauncher",suite.getName()));
    launcherSources.getSource().srcDir(new File(baseDir,"c"));
    launcherSources.getExportedHeaders().srcDir(new File(baseDir,"headers"));
    suite.source(launcherSources);
    CSourceSet testSources=suiteSourceSet.maybeCreate("c",CSourceSet.class);
    suite.source(testSources);
    testSources.lib(launcherSources);
  }
}
