{
  setMocks();
  context.checking(new Expectations(){
{
      allowing(projectMock).getPlugins();
      will(returnValue(projectPluginsHandlerMock));
      allowing(projectPluginsHandlerMock).hasPlugin(JavaPlugin.class);
      will(returnValue(true));
      allowing(projectPluginsHandlerMock).hasPlugin(with(Matchers.not(JavaPlugin.class)));
      will(returnValue(true));
      one(jUnitOptionsMock).getForkOptions();
      will(returnValue(jUnitForkOptionsMock));
      one(jUnitOptionsMock).setFork(true);
      one(jUnitForkOptionsMock).setForkMode(ForkMode.PER_TEST);
      one(projectMock).getProjectDir();
      will(returnValue(projectDir));
      one(jUnitForkOptionsMock).setDir(projectDir);
    }
  }
);
  jUnitTestFramework.initialize(projectMock,testMock);
  assertNotNull(jUnitTestFramework.getOptions());
  assertNotNull(jUnitTestFramework.getAntJUnitExecute());
  assertNotNull(jUnitTestFramework.getAntJUnitReport());
}
