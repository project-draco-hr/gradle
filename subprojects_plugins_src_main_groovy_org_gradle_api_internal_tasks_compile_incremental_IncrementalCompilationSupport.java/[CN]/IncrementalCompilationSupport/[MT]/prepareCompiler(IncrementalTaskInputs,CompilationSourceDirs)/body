{
  final Compiler<JavaCompileSpec> compiler=getCompiler(inputs,sourceDirs);
  ClassDependencyInfoUpdater updater=new ClassDependencyInfoUpdater(dependencyInfoSerializer,fileOperations,new ClassDependencyInfoExtractor(analyzer));
  return new IncrementalCompilationFinalizer(compiler,jarSnapshotFeeder,new ClasspathJarFinder(fileOperations),updater);
}
