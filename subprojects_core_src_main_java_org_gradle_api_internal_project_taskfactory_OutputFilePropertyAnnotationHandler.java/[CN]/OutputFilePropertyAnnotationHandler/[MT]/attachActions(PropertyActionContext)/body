{
  context.setValidationAction(outputDirValidation);
  context.setConfigureAction(new UpdateAction(){
    public void update(    TaskInternal task,    final Callable<Object> futureValue){
      task.getOutputs().files(futureValue);
      task.prependParallelSafeAction(new Action<Task>(){
        public void execute(        Task task){
          Iterable<File> files;
          try {
            files=valueTransformer.transform(futureValue.call());
          }
 catch (          Exception e) {
            throw UncheckedException.throwAsUncheckedException(e);
          }
          for (          File file : files) {
            file=FileUtils.canonicalize(file);
            GFileUtils.mkdirs(file.getParentFile());
          }
        }
      }
);
    }
  }
);
}
