{
  ModelSchemaExtractionResult<T> schemaExtraction=extractSchema(type,cache,null);
  Queue<ModelSchemaExtractionContext> unsatisfiedDependencies=Lists.newLinkedList();
  pushUnsatisfiedDependencies(schemaExtraction.getDependencies(),unsatisfiedDependencies,cache);
  ModelSchemaExtractionContext dependency=unsatisfiedDependencies.poll();
  while (dependency != null) {
    ModelSchemaExtractionResult<?> nextSchema;
    try {
      nextSchema=extractSchema(dependency.getType(),cache,dependency);
    }
 catch (    InvalidManagedModelElementTypeException e) {
      throw dependency.wrap(e);
    }
    pushUnsatisfiedDependencies(nextSchema.getDependencies(),unsatisfiedDependencies,cache);
    dependency=unsatisfiedDependencies.poll();
  }
  return schemaExtraction.getSchema();
}
