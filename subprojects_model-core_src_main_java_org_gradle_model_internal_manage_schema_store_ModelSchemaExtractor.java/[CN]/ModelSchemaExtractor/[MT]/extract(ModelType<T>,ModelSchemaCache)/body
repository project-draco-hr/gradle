{
  ModelSchemaExtractionResult<T> schemaExtraction=extractSchema(type,cache,null);
  Extraction extraction=new Extraction();
  pushDependencies(schemaExtraction.getDependencies(),extraction,cache);
  while (extraction.hasNext()) {
    ModelSchemaExtractionContext next=extraction.next();
    ModelSchemaExtractionResult<?> nextSchema;
    try {
      nextSchema=extractSchema(next.getType(),cache,next);
    }
 catch (    InvalidManagedModelElementTypeException e) {
      throw next.wrap(e);
    }
    pushDependencies(nextSchema.getDependencies(),extraction,cache);
  }
  return schemaExtraction.getSchema();
}
