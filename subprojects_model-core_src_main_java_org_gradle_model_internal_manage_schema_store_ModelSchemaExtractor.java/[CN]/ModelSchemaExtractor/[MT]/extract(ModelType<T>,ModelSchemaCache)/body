{
  ModelSchemaExtractionResult<T> schemaExtraction=extractSchema(type,cache,null);
  Queue<ModelSchemaExtractionContext> unsatisfiedDependencies=Lists.newLinkedList();
  pushUnsatisfiedDependencies(schemaExtraction.getDependencies(),unsatisfiedDependencies,cache);
  ModelSchemaExtractionContext dependency=unsatisfiedDependencies.poll();
  while (dependency != null) {
    ModelSchemaExtractionResult<?> nextSchema;
    nextSchema=extractSchema(dependency.getType(),cache,dependency);
    pushUnsatisfiedDependencies(nextSchema.getDependencies(),unsatisfiedDependencies,cache);
    dependency=unsatisfiedDependencies.poll();
  }
  return schemaExtraction.getSchema();
}
