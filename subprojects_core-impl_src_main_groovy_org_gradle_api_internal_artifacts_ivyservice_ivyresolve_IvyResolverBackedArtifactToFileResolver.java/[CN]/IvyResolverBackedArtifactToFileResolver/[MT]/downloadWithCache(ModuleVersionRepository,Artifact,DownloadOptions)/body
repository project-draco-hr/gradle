{
  if (artifactRepository.isLocal()) {
    return downloadFromResolver(artifactRepository,artifact,options).getLocalFile();
  }
  ArtifactResolutionCache.CachedArtifactResolution cachedArtifactResolution=artifactResolutionCache.getCachedArtifactResolution(artifactRepository,artifact.getId());
  if (cachedArtifactResolution != null) {
    if (cachedArtifactResolution.getArtifactFile() == null) {
      if (!cachePolicy.mustRefreshMissingArtifact(cachedArtifactResolution.getAgeMillis())) {
        LOGGER.debug("Detected non-existence of artifact '{}' in resolver cache",artifact.getId());
        return null;
      }
    }
 else     if (cachedArtifactResolution.getArtifactFile().exists()) {
      LOGGER.debug("Found artifact '{}' in resolver cache: {}",artifact.getId(),cachedArtifactResolution.getArtifactFile());
      return cachedArtifactResolution.getArtifactFile();
    }
  }
  return downloadArtifact(artifactRepository,artifact,options);
}
