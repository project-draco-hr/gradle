{
  CompilationState previousCompileState=previousCompileStateCache.get();
  final IncrementalCompileFiles result=new IncrementalCompileFiles(previousCompileState);
  for (  File sourceFile : sourceFiles) {
    result.processSource(sourceFile);
  }
  previousCompileStateCache.set(result.current);
  return new DefaultIncrementalCompilation(result.getModifiedSources(),result.getRemovedSources());
}
