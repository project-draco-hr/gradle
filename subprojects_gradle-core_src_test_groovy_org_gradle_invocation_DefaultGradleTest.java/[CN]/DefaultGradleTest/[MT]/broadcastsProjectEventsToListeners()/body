{
  final ProjectEvaluationListener listener=context.mock(ProjectEvaluationListener.class,"listener");
  final ProjectEvaluationListener broadcaster=context.mock(ProjectEvaluationListener.class,"broadcaster");
  context.checking(new Expectations(){
{
      one(listenerManager).addListener(listener);
      one(listenerManager).getBroadcaster(ProjectEvaluationListener.class);
      will(returnValue(broadcaster));
    }
  }
);
  gradle.addListener(listener);
  assertThat(gradle.getProjectEvaluationBroadcaster(),sameInstance(broadcaster));
}
