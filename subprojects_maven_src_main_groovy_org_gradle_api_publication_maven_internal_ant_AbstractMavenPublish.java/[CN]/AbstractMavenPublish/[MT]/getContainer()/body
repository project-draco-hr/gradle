{
  if (container == null) {
    try {
      ClassWorld classWorld=new ClassWorld();
      classWorld.newRealm("plexus.core",getClass().getClassLoader());
      Embedder embedder=new Embedder();
      embedder.start(classWorld);
      container=embedder.getContainer();
    }
 catch (    PlexusContainerException e) {
      throw new BuildException("Unable to start embedder",e);
    }
catch (    DuplicateRealmException e) {
      throw new BuildException("Unable to create embedder ClassRealm",e);
    }
  }
  return container;
}
