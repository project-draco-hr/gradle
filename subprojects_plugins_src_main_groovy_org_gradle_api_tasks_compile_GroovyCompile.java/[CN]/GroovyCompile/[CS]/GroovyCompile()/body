{
  ProjectInternal projectInternal=(ProjectInternal)getProject();
  IsolatedAntBuilder antBuilder=getServices().get(IsolatedAntBuilder.class);
  ClassPathRegistry classPathRegistry=getServices().get(ClassPathRegistry.class);
  Factory<AntBuilder> antBuilderFactory=getServices().getFactory(AntBuilder.class);
  JavaCompilerFactory inProcessCompilerFactory=new InProcessJavaCompilerFactory();
  tempFileProvider=projectInternal.getServices().get(TemporaryFileProvider.class);
  DefaultJavaCompilerFactory javaCompilerFactory=new DefaultJavaCompilerFactory(projectInternal,tempFileProvider,antBuilderFactory,inProcessCompilerFactory);
  GroovyCompilerFactory groovyCompilerFactory=new GroovyCompilerFactory(projectInternal,antBuilder,classPathRegistry,javaCompilerFactory);
  Compiler<GroovyJavaJointCompileSpec> delegatingCompiler=new DelegatingGroovyCompiler(groovyCompilerFactory);
  compiler=new IncrementalGroovyCompiler(delegatingCompiler,getOutputs());
}
