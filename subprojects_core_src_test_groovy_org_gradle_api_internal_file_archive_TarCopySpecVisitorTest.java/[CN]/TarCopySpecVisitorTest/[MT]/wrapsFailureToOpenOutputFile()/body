{
  final TestFile tarFile=tmpDir.createDir("test.tar");
  context.checking(new Expectations(){
{
      allowing(copyAction).getArchivePath();
      will(returnValue(tarFile));
      allowing(copyAction).getCompressor();
      will(returnValue(new DefaultCompressor(Compression.NONE)));
    }
  }
);
  try {
    visitor.startVisit(copyAction);
    fail();
  }
 catch (  GradleException e) {
    assertThat(e.getMessage(),equalTo(String.format("Could not create TAR '%s'.",tarFile)));
  }
}
