{
  if (classLoader == null) {
    ClassLoader current=getBaseCompilationClassLoader();
    Set<File> classPath=getClasspathConfiguration().getFiles();
    if (!classPath.isEmpty()) {
      MutableURLClassLoader mutableClassLoader=new MutableURLClassLoader(current);
      addClassPath(mutableClassLoader);
      current=mutableClassLoader;
    }
    if (!parents.isEmpty()) {
      parents.add(0,current);
      current=new CachingClassLoader(new MultiParentClassLoader(parents));
    }
    this.classLoader=current;
  }
 else {
    addClassPath(scriptClassPathClassLoader);
    for (    ClassLoader parent : parents) {
      multiParentClassLoader.addParent(parent);
    }
  }
  parents=null;
}
