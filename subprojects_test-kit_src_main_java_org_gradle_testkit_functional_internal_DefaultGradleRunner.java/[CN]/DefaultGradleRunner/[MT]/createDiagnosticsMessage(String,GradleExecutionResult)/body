{
  String lineBreak=SystemProperties.getInstance().getLineSeparator();
  StringBuilder message=new StringBuilder();
  message.append(trailingMessage);
  message.append(" in ");
  message.append(getWorkingDir().getAbsolutePath());
  message.append(" with arguments ");
  message.append(getArguments());
  message.append(lineBreak).append(lineBreak);
  message.append("Output:");
  message.append(lineBreak);
  message.append(gradleExecutionResult.getStandardOutput());
  message.append(lineBreak);
  message.append("-----");
  message.append(lineBreak);
  message.append("Error:");
  message.append(lineBreak);
  message.append(gradleExecutionResult.getStandardError());
  message.append(lineBreak);
  message.append("-----");
  if (gradleExecutionResult.getThrowable() != null) {
    message.append(lineBreak);
    message.append("Reason:");
    message.append(lineBreak);
    message.append(determineExceptionMessage(gradleExecutionResult.getThrowable()));
    message.append(lineBreak);
    message.append("-----");
  }
  return message.toString();
}
