{
  DefaultRecompilationSpec spec=new DefaultRecompilationSpec();
  JavaChangeProcessor javaChangeProcessor=new JavaChangeProcessor(previousCompilation,sourceToNameConverter);
  JarChangeProcessor jarChangeProcessor=new JarChangeProcessor(fileOperations,jarClasspathSnapshot,previousCompilation);
  InputChangeAction action=new InputChangeAction(spec,javaChangeProcessor,jarChangeProcessor);
  inputs.outOfDate(action);
  if (action.spec.getFullRebuildCause() != null) {
    return action.spec;
  }
  inputs.removed(action);
  return action.spec;
}
