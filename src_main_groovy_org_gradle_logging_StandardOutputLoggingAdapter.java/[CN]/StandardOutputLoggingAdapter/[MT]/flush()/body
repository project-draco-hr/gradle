{
  if (hasFlushableInput()) {
    final byte[] theBytes=new byte[count];
    System.arraycopy(buf,0,theBytes,0,count);
    String message=new String(theBytes);
    String lineSeparator=System.getProperty("line.separator");
    if (message.endsWith(lineSeparator)) {
      message=message.substring(0,message.length() - lineSeparator.length());
    }
    logger.filterAndLog(Logger.FQCN,marker,level,message,null,null);
  }
  reset();
}
