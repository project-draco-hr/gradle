{
  FileCollectionSnapshotImpl other=(FileCollectionSnapshotImpl)newSnapshot;
  final Map<String,IncrementalFileSnapshot> newSnapshots=new HashMap<String,IncrementalFileSnapshot>(snapshots);
  diff(other.snapshots,snapshots,new MapMergeChangeListener<String,IncrementalFileSnapshot>(newSnapshots){
    @Override public void added(    Map.Entry<String,IncrementalFileSnapshot> element){
    }
  }
);
  return new FileCollectionSnapshotImpl(newSnapshots);
}
