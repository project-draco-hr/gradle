{
  FileCollectionSnapshotImpl other=(FileCollectionSnapshotImpl)newSnapshot;
  final Map<String,IncrementalFileSnapshot> newSnapshots=new HashMap<String,IncrementalFileSnapshot>(snapshots);
  diff(other.snapshots,snapshots,ChangeType.UpdatesOnly,new MapMergeChangeListener<String,IncrementalFileSnapshot>(newSnapshots));
  return new FileCollectionSnapshotImpl(newSnapshots);
}
