{
  if (instance instanceof ManagedInstance) {
    return Cast.uncheckedCast(((ManagedInstance)instance).getManagedType());
  }
  return ModelType.of(Cast.<Class<T>>uncheckedCast(instance.getClass()));
}
