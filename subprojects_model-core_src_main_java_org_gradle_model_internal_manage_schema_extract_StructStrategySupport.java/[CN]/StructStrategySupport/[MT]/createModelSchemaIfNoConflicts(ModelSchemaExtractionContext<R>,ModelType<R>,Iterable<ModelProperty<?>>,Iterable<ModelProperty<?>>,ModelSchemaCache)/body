{
  Map<String,ModelProperty<?>> propertiesByName=Maps.newHashMap();
  Iterable<ModelProperty<?>> notOverwrittenInheritedProperties=filterOverwrittenInheritedProperties(declaredProperties,inheritedProperties);
  Iterable<ModelProperty<?>> properties=Iterables.concat(declaredProperties,notOverwrittenInheritedProperties);
  for (  ModelProperty<?> property : properties) {
    String propertyName=property.getName();
    ModelProperty<?> previous=propertiesByName.get(propertyName);
    if (previous != null && !previous.equals(property)) {
      throw incompatibleProperties(propertyName,previous,property,extractionContext,cache);
    }
    propertiesByName.put(propertyName,property);
  }
  return createModelSchema(type,declaredProperties,notOverwrittenInheritedProperties);
}
