{
switch (input.readByte()) {
case 1:
    ChannelIdentifier channelId=readChannelId();
  String payload=input.readString();
return new ChannelMessage(channelId,payload);
case 2:
return new EndOfStream();
default :
throw new IllegalArgumentException();
}
}
