{
switch (inputStream.readByte()) {
case 1:
    String channel=inputStream.readUTF();
  String payload=inputStream.readUTF();
return new ChannelMessage(new ChannelIdentifier(channel),payload);
case 2:
return new EndOfStream();
default :
throw new IllegalArgumentException();
}
}
