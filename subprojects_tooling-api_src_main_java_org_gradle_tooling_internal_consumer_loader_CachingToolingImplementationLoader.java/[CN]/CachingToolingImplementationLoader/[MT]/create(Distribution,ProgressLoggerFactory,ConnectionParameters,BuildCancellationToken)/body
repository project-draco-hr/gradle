{
  ClassPath classpath=distribution.getToolingImplementationClasspath(progressLoggerFactory,connectionParameters.getGradleUserHomeDir(),cancellationToken);
  Long hash=createHash(classpath);
  ConsumerConnection connection=connections.get(hash);
  if (connection == null) {
    connection=loader.create(distribution,progressLoggerFactory,connectionParameters,cancellationToken);
    connections.put(hash,connection);
  }
  return connection;
}
