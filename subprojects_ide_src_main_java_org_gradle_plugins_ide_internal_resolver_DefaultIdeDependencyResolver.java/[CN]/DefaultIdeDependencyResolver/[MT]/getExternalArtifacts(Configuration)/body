{
  ResolutionResult result=getIncomingResolutionResult(configuration);
  List<ResolvedComponentResult> resolvedComponents=new ArrayList<ResolvedComponentResult>();
  findAllResolvedDependencyResultsAndTheirDependencies(resolvedComponents,result.getRoot().getDependencies(),ModuleComponentIdentifier.class);
  Map<ModuleVersionIdentifier,ResolvedComponentResult> mappedComponents=mapComponents(resolvedComponents);
  Set<ResolvedArtifact> artifacts=configuration.getResolvedConfiguration().getLenientConfiguration().getArtifacts(Specs.satisfyAll());
  Set<ResolvedArtifact> resolvedArtifacts=new LinkedHashSet<ResolvedArtifact>();
  for (  ResolvedArtifact artifact : artifacts) {
    if (mappedComponents.containsKey(artifact.getModuleVersion().getId())) {
      resolvedArtifacts.add(artifact);
    }
  }
  return resolvedArtifacts;
}
