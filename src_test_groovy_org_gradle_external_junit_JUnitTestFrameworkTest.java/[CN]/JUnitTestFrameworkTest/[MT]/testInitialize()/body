{
  setMocks();
  context.checking(new Expectations(){
{
      one(projectMock).getAppliedPlugins();
      will(returnValue(new HashSet(Arrays.asList(JavaPlugin.class))));
      one(jUnitOptionsMock).getForkOptions();
      will(returnValue(jUnitForkOptionsMock));
      one(jUnitOptionsMock).setFork(true);
      one(jUnitForkOptionsMock).setForkMode(ForkMode.PER_TEST);
      one(projectMock).getProjectDir();
      will(returnValue(projectDir));
      one(jUnitForkOptionsMock).setDir(projectDir);
    }
  }
);
  jUnitTestFramework.initialize(projectMock,testMock);
  assertNotNull(jUnitTestFramework.getOptions());
  assertNotNull(jUnitTestFramework.getAntJUnitExecute());
  assertNotNull(jUnitTestFramework.getAntJUnitReport());
}
