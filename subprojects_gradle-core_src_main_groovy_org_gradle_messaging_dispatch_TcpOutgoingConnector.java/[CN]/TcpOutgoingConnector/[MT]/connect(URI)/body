{
  if (!destinationUri.getScheme().equals("tcp") || !destinationUri.getHost().equals("localhost")) {
    throw new IllegalArgumentException(String.format("Cannot create connection to destination URI '%s'.",destinationUri));
  }
  try {
    SocketChannel socketChannel;
    InetAddress loopBackAddress=InetAddress.getByName(null);
    LOGGER.debug("Connecting to address {}.",loopBackAddress);
    LOGGER.debug("Using interface {}.",NetworkInterface.getByInetAddress(loopBackAddress));
    socketChannel=SocketChannel.open(new InetSocketAddress(loopBackAddress,destinationUri.getPort()));
    URI localAddress=new URI(String.format("tcp://localhost:%d",socketChannel.socket().getLocalPort()));
    return new SocketConnection(socketChannel,localAddress,destinationUri,classLoader);
  }
 catch (  Exception e) {
    throw new GradleException(e);
  }
}
