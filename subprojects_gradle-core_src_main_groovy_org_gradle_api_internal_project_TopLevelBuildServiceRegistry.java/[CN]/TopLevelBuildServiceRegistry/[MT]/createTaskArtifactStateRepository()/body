{
  FileSnapshotter fileSnapshotter=new DefaultFileSnapshotter(new CachingHasher(new DefaultHasher(),get(CacheRepository.class)));
  FileSnapshotter outputFilesSnapshotter=new OutputFilesSnapshotter(fileSnapshotter);
  return new ShortCircuitTaskArtifactStateRepository(startParameter,new DefaultTaskArtifactStateRepository(get(CacheRepository.class),fileSnapshotter,outputFilesSnapshotter));
}
