{
  if (message != null) {
    try {
      final int forkId=((TestClientControlMessage)message).getForkId();
      final TestServerClientHandle client=clientHandles.get(forkId);
      if (client == null) {
        clientConnection.dispatch(new WaitActionMesssage(pipeline.getId(),1000L));
      }
 else {
        messageHandler.handle(message,client,clientConnection);
      }
    }
 catch (    Throwable t) {
      LOGGER.error("failed to handle " + message,t);
    }
  }
}
