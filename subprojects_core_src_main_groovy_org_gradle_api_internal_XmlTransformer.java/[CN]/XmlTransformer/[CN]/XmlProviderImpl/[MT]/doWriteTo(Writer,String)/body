{
  writeXmlDeclaration(writer,encoding);
  try {
    if (node != null) {
      PrintWriter printWriter=new PrintWriter(writer);
      XmlNodePrinter nodePrinter=new XmlNodePrinter(printWriter,indentation);
      nodePrinter.setPreserveWhitespace(true);
      nodePrinter.print(node);
      printWriter.flush();
    }
 else     if (element != null) {
      printNode(element,writer);
    }
 else     if (builder != null) {
      writer.append(removeAnyXmlDeclaration(builder));
    }
 else {
      writer.append(removeAnyXmlDeclaration(stringValue));
    }
  }
 catch (  IOException e) {
    throw UncheckedException.asUncheckedException(e);
  }
}
