{
  if (type.isAssignableFrom(EclipseProjectVersion3.class)) {
    StartParameter startParameter=new ConnectionToStartParametersConverter().convert(parameters);
    GradleLauncher gradleLauncher=GradleLauncher.newInstance(startParameter);
    boolean minimalModelOnly=type.isAssignableFrom(HierarchicalEclipseProjectVersion1.class);
    AbstractModelBuilder builder=minimalModelOnly ? new MinimalModelBuilder() : new ModelBuilder();
    ModelBuildingAdapter adapter=minimalModelOnly ? new ModelBuildingAdapter(builder) : new ModelBuildingAdapter(builder).configurer(new EclipsePluginApplier());
    gradleLauncher.addListener(adapter);
    gradleLauncher.getBuildAnalysis().rethrowFailure();
    return type.cast(adapter.getProject());
  }
  throw new UnsupportedOperationException();
}
