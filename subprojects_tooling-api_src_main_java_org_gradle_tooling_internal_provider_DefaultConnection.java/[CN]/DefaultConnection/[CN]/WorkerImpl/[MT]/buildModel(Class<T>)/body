{
  if (!type.isAssignableFrom(EclipseProjectVersion3.class)) {
    throw new UnsupportedOperationException(String.format("Cannot build model of type '%s'.",type.getSimpleName()));
  }
  StartParameter startParameter=new ConnectionToStartParametersConverter().convert(parameters);
  startParameter.setTaskNames(asList(":eclipseConfigurer"));
  GradleLauncher gradleLauncher=GradleLauncher.newInstance(startParameter);
  ModelBuildingAdapter adapter=new ModelBuildingAdapter();
  gradleLauncher.addListener(adapter);
  boolean fullModel=EclipseProjectVersion3.class.isAssignableFrom(type);
  boolean includeTasks=BuildableProjectVersion1.class.isAssignableFrom(type);
  if (fullModel) {
    adapter.setConfigurer(new EclipsePluginApplier());
  }
 else {
    adapter.setConfigurer(new MinimalModelConfigurer());
  }
  adapter.setBuilder(new ModelBuilder(includeTasks));
  runAndWrapFailure(gradleLauncher);
  return type.cast(adapter.getProject());
}
