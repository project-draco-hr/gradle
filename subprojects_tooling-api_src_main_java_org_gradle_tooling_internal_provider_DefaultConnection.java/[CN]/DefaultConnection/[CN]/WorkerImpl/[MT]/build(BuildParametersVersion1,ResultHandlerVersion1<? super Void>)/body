{
  try {
    StartParameter startParameter=new ConnectionToStartParametersConverter().convert(parameters);
    startParameter.setTaskNames(buildParameters.getTasks());
    GradleLauncher gradleLauncher=GradleLauncher.newInstance(startParameter);
    if (buildParameters.getStandardOutput() != null) {
      gradleLauncher.addStandardOutputListener(new StreamBackedStandardOutputListener(buildParameters.getStandardOutput()));
    }
    if (buildParameters.getStandardError() != null) {
      gradleLauncher.addStandardErrorListener(new StreamBackedStandardOutputListener(buildParameters.getStandardError()));
    }
    wrapAndRethrowFailure(gradleLauncher.run());
    handler.onComplete(null);
  }
 catch (  Throwable t) {
    handler.onFailure(t);
  }
}
