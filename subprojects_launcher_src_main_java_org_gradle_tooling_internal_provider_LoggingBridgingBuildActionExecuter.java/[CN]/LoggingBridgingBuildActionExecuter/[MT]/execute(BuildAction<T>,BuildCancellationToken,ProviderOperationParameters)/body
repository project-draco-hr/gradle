{
  LoggingManagerInternal loggingManager=loggingManagerFactory.create();
  loggingManager.removeAllOutputEventListeners();
  if (actionParameters.isColorOutput() != null && actionParameters.isColorOutput()) {
    loggingManager.attachConsole(true);
  }
 else {
    if (actionParameters.getStandardOutput() != null) {
      loggingManager.addStandardOutputListener(new StreamBackedStandardOutputListener(actionParameters.getStandardOutput()));
    }
    if (actionParameters.getStandardError() != null) {
      loggingManager.addStandardErrorListener(new StreamBackedStandardOutputListener(actionParameters.getStandardError()));
    }
  }
  ProgressListenerVersion1 progressListener=actionParameters.getProgressListener();
  OutputEventListenerAdapter listener=new OutputEventListenerAdapter(progressListener);
  loggingManager.addOutputEventListener(listener);
  loggingManager.setLevel(actionParameters.getBuildLogLevel());
  loggingManager.start();
  try {
    return executer.execute(action,cancellationToken,actionParameters);
  }
  finally {
    loggingManager.removeAllOutputEventListeners();
    loggingManager.stop();
  }
}
