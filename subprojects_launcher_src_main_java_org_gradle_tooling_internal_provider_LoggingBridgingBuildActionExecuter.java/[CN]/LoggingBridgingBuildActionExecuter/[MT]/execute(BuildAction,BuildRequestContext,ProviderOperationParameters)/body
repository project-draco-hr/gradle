{
  LoggingManagerInternal loggingManager=loggingManagerFactory.create();
  loggingManager.removeAllOutputEventListeners();
  if (Boolean.TRUE.equals(actionParameters.isColorOutput(null)) && actionParameters.getStandardOutput() != null) {
    loggingManager.attachAnsiConsole(actionParameters.getStandardOutput());
  }
 else {
    if (actionParameters.getStandardOutput() != null) {
      loggingManager.addStandardOutputListener(actionParameters.getStandardOutput());
    }
    if (actionParameters.getStandardError() != null) {
      loggingManager.addStandardErrorListener(actionParameters.getStandardError());
    }
  }
  ProgressListenerVersion1 progressListener=actionParameters.getProgressListener();
  OutputEventListenerAdapter listener=new OutputEventListenerAdapter(progressListener);
  loggingManager.addOutputEventListener(listener);
  loggingManager.setLevel(actionParameters.getBuildLogLevel());
  loggingManager.start();
  try {
    return executer.execute(action,buildRequestContext,actionParameters);
  }
  finally {
    loggingManager.removeAllOutputEventListeners();
    loggingManager.stop();
  }
}
