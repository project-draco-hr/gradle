{
  if (os != null) {
    final int workAroundRegisterSize=(registerSize == 64 && os.isWindows()) ? 32 : registerSize;
    DefaultNativePlatform matchingPlatform=(DefaultNativePlatform)CollectionUtils.find(defaults,new Predicate(){
      public boolean evaluate(      Object object){
        DefaultNativePlatform platform=(DefaultNativePlatform)object;
        return platform.architecture.getInstructionSet().equals(instructionSet) && platform.architecture.getRegisterSize() == workAroundRegisterSize && platform.operatingSystem.getInternalOs().equals(os);
      }
    }
);
    return matchingPlatform;
  }
 else {
    return null;
  }
}
