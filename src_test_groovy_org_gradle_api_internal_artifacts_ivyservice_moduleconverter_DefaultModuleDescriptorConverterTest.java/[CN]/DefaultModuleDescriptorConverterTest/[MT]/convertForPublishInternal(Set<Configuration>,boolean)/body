{
  commonSetUp();
  moduleDescriptorConverter.setArtifactsToModuleDescriptorConverter(context.mock(ArtifactsToModuleDescriptorConverter.class));
  final IvyArtifactFilePathVariableProvider filePathVariableProviderDummy=context.mock(IvyArtifactFilePathVariableProvider.class);
  defineCommonExpectations(configurations,new HashMap());
  context.checking(new Expectations(){
{
      one(moduleDescriptorConverter.getArtifactsToModuleDescriptorConverter()).addArtifacts(moduleDescriptorDummy,configurations,ivySettingsDummy,filePathVariableProviderDummy);
    }
  }
);
  DefaultModuleDescriptor actualModuleDescriptor=(DefaultModuleDescriptor)moduleDescriptorConverter.convertForPublish(configurations,publishDescriptor,moduleDummy,ivySettingsDummy,filePathVariableProviderDummy);
  assertThat(actualModuleDescriptor,equalTo(moduleDescriptorDummy));
}
