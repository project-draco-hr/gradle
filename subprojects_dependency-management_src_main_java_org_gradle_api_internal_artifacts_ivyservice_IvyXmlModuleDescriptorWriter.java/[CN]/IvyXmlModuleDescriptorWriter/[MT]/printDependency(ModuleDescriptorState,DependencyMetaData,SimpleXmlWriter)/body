{
  writer.startElement("dependency");
  ModuleVersionSelector requested=dep.getRequested();
  writer.attribute("org",requested.getGroup());
  writer.attribute("name",requested.getName());
  writer.attribute("rev",requested.getVersion());
  if (dep.getDynamicConstraintVersion() != null && !dep.getDynamicConstraintVersion().equals(requested.getVersion())) {
    writer.attribute("revConstraint",dep.getDynamicConstraintVersion());
  }
  if (dep.isForce()) {
    writer.attribute("force","true");
  }
  if (dep.isChanging()) {
    writer.attribute("changing","true");
  }
  if (!dep.isTransitive()) {
    writer.attribute("transitive","false");
  }
  writer.attribute("conf",getConfMapping(dep));
  Map<IvyArtifactName,Set<String>> depArtifacts=((DefaultDependencyMetaData)dep).getArtifactMappings();
  for (  Map.Entry<IvyArtifactName,Set<String>> artifactEntry : depArtifacts.entrySet()) {
    printDependencyArtifact(descriptor,writer,artifactEntry.getKey(),artifactEntry.getValue());
  }
  Set<ExcludeRule> excludes=((DefaultDependencyMetaData)dep).getAllExcludeRules();
  printDependencyExcludeRules(descriptor,writer,excludes);
  writer.endElement();
}
