{
  ArtifactDeployer deployer=(ArtifactDeployer)lookup(ArtifactDeployer.ROLE);
  ArtifactRepository deploymentRepository=getRemoteArtifactRepository(artifact);
  log("Deploying to " + deploymentRepository.getUrl(),Project.MSG_INFO);
  try {
    deployer.deploy(pomFile,artifact,deploymentRepository,localRepo);
  }
 catch (  ArtifactDeploymentException e) {
    throw new BuildException("Error deploying artifact '" + artifact.getDependencyConflictId() + "': "+ e.getMessage(),e);
  }
}
