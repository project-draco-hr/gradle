{
  String publicationName=publication.getName();
  String repositoryName=repository.getName();
  String publishTaskName=calculatePublishTaskName(publicationName,repositoryName);
  if (tasks.findByName(publishTaskName) == null) {
    PublishToMavenRepository publishTask=tasks.create(publishTaskName,PublishToMavenRepository.class);
    publishTask.setPublication(publication);
    publishTask.setRepository(repository);
    publishTask.setGroup(PublishingPlugin.PUBLISH_TASK_GROUP);
    publishTask.setDescription(String.format("Publishes Maven publication '%s' to Maven repository '%s'.",publicationName,repositoryName));
    publishLifecycleTask.dependsOn(publishTask);
  }
}
