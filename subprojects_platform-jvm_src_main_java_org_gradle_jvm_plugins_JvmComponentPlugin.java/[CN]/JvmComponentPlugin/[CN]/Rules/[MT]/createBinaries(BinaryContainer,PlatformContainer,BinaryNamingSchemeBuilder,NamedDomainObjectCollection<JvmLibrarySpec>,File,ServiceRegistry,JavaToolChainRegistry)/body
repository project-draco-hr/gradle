{
  Instantiator instantiator=serviceRegistry.get(Instantiator.class);
  List<Action<? super JarBinarySpec>> actions=Lists.newArrayList();
  actions.add(new JarBinarySpecInitializer(buildDir));
  actions.add(new MarkBinariesBuildable());
  Action<JarBinarySpec> initAction=Actions.composite(actions);
  JarBinariesFactory factory=new DefaultJarBinariesFactory(instantiator,initAction);
  Action<JvmLibrarySpec> createBinariesAction=new JvmLibrarySpecInitializer(factory,namingSchemeBuilder,toolChains,platforms);
  for (  JvmLibrarySpec jvmLibrary : libraries) {
    createBinariesAction.execute(jvmLibrary);
    binaries.addAll(jvmLibrary.getBinaries());
  }
}
