{
  File buildFile=new File(getTestDir(),"javadocs.gradle");
  writeStringToFile(buildFile,"usePlugin(org.gradle.api.plugins.JavaPlugin)");
  writeStringToFile(new File(getTestDir(),"src/main/java/org/gradle/broken.java"),"broken");
  GradleExecutionFailure failure=usingBuildFile(buildFile).runTasksAndExpectFailure("javadoc");
  failure.assertHasFileName(String.format("Build file '%s'",buildFile));
  failure.assertHasContext("Execution failed for task :javadoc");
  failure.assertHasDescription("Javadoc generation failed.");
}
