{
  Class<?> closureArgumentType=closure.getParameterTypes()[0];
  if (!Object.class.equals(closureArgumentType) && !type.equals(closureArgumentType)) {
    throw new IllegalArgumentException(String.format("Closure argument type '%s' is not a subtype of '%s'.",closureArgumentType,elementType));
  }
}
