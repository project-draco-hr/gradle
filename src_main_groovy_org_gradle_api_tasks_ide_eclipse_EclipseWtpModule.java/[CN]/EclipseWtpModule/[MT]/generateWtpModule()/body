{
  File wtpFile=getProject().file(EclipseWtp.WTP_FILE_DIR + "/" + EclipseWtp.WTP_FILE_NAME);
  if (wtpFile.exists()) {
    wtpFile.delete();
  }
  if (!wtpFile.getParentFile().exists()) {
    wtpFile.getParentFile().mkdirs();
  }
  try {
    XMLWriter writer=new XMLWriter(new FileWriter(wtpFile),OutputFormat.createPrettyPrint());
    writer.write(createXmlDocument());
    writer.close();
    createFacets(getProject());
  }
 catch (  IOException e) {
    throw new GradleException("Problem when writing Eclipse project file.",e);
  }
}
