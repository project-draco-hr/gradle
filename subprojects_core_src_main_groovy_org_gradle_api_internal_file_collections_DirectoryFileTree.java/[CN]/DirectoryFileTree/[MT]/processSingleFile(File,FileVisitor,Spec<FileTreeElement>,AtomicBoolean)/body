{
  RelativePath path=new RelativePath(true,file.getName());
  FileVisitDetails details=new CachingFileVisitDetails(file,path,stopFlag,fileSystem,fileSystem,false);
  if (isAllowed(details,spec)) {
    visitor.visitFile(details);
  }
}
