{
  LOG.debug("thread {}: dispatching {}",Thread.currentThread().getId(),message);
  try {
    connection.dispatch(message);
  }
 catch (  Exception e) {
    LOG.debug("Problem dispatching message to the daemon. Performing 'on failure' operation...");
    onFailure.run();
    throw new GradleException("Unable to dispatch the message to the daemon.",e);
  }
}
