{
  URLResolver resolver=new URLResolver();
  resolver.setName(name);
  for (  String artifactPattern : artifactPatterns) {
    resolver.addArtifactPattern(artifactPattern);
    try {
      if (username != null) {
        URI uri=new URI(artifactPattern.replaceAll("\\[.*\\]","token"));
        if (uri.getScheme().equalsIgnoreCase("http") || uri.getScheme().equalsIgnoreCase("https")) {
          org.apache.ivy.util.url.CredentialsStore.INSTANCE.addCredentials(realm,uri.getHost(),username,password);
        }
      }
    }
 catch (    URISyntaxException e) {
    }
  }
  return resolver;
}
