{
  URI uri=getUrl();
  Set<String> schemes=new LinkedHashSet<String>();
  layout.addSchemes(uri,schemes);
  additionalPatternsLayout.addSchemes(uri,schemes);
  PatternBasedResolver resolver=createResolver(schemes);
  layout.apply(uri,resolver);
  additionalPatternsLayout.apply(uri,resolver);
  if (resolver.getArtifactPatterns().isEmpty()) {
    throw new InvalidUserDataException("You must specify a base url or at least one artifact pattern for an Ivy repository.");
  }
  resolvers.add(resolver);
}
