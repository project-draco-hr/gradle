{
  JavaVersion javaVersion=JavaVersion.current();
  if (!javaVersion.isJava6Compatible()) {
    throw UnsupportedJavaRuntimeException.usingUnsupportedVersion("Gradle Tooling API",JavaVersion.VERSION_1_6);
  }
  ConnectionFactory connectionFactory=new ConnectionFactory(singletonRegistry.get(ToolingImplementationLoader.class));
  return new DefaultGradleConnector(connectionFactory,new DistributionFactory(new DefaultExecutorServiceFactory()));
}
