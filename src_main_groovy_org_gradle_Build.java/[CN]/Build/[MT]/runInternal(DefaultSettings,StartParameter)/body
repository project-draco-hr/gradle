{
  Throwable failure=null;
  try {
    ClassLoader classLoader=settings.createClassLoader();
    Boolean rebuildDag=true;
    List<String> taskNames=startParameter.getTaskNames();
    TaskSelector selector=taskNames.size() == 0 ? new ProjectDefaultsTaskSelector() : new NameResolvingTaskSelector(taskNames);
    while (selector.hasNext()) {
      if (rebuildDag) {
        projectLoader.load(settings,classLoader,startParameter,gradlePropertiesLoader.getGradleProperties(),getAllSystemProperties(),getAllEnvProperties());
        buildConfigurer.process(projectLoader.getRootProject());
      }
 else {
        logger.info("DAG must not be rebuild as the task chain before was dag neutral!");
      }
      selector.select(projectLoader.getCurrentProject());
      logger.info(String.format("++++ Starting build for %s.",selector.getDescription()));
      logger.debug(String.format("Selected for execution: %s.",selector.getTasks()));
      rebuildDag=buildExecuter.execute(selector.getTasks(),projectLoader.getRootProject());
    }
  }
 catch (  Throwable t) {
    failure=t;
  }
  BuildResult buildResult=new BuildResult(settings,failure);
  for (  BuildListener buildListener : buildListeners) {
    buildListener.buildFinished(buildResult);
  }
  return buildResult;
}
