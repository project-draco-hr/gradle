{
  FileCopyDetails details=(FileCopyDetails)visitDetails;
  DuplicatesStrategy strategy=determineStrategy(details);
  if (strategy == DuplicatesStrategy.exclude) {
    maybeDefer(visitDetails);
    return;
  }
  if (warnOnIncludeDuplicate && !visitedFiles.add(details.getRelativePath())) {
    DeprecationLogger.nagUserOfDeprecatedBehaviour(String.format("Including duplicate file %s",details.getRelativePath()));
  }
  super.visitFile(visitDetails);
}
