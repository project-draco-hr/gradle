{
  FileCopyDetails details=(FileCopyDetails)fileDetails;
  if (!visitedFiles.add(details.getRelativePath())) {
    if (details.getDuplicatesStrategy() == DuplicatesStrategy.EXCLUDE) {
      return;
    }
    if (warnOnIncludeDuplicate) {
      DeprecationLogger.nagUserOfDeprecatedBehaviour(String.format("Including duplicate file %s",details.getRelativePath()));
    }
  }
  getVisitor().visitFile(fileDetails);
}
