{
  FileCopyDetails details=(FileCopyDetails)visitDetails;
  DuplicatesStrategy strategy=determineStrategy(details);
  if (!visitedFiles.add(details.getRelativePath())) {
    if (strategy == DuplicatesStrategy.exclude) {
      return;
    }
    if (warnOnIncludeDuplicate) {
      DeprecationLogger.nagUserOfDeprecatedBehaviour(String.format("Including duplicate file %s",details.getRelativePath()));
    }
  }
  super.visitFile(visitDetails);
}
