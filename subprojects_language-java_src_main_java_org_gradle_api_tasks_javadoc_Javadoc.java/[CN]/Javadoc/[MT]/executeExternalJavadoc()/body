{
  JavadocSpec spec=new JavadocSpec();
  spec.setExecutable(executable);
  spec.setOptions(options);
  spec.setIgnoreFailures(!failOnError);
  spec.setWorkingDir(getProject().getProjectDir());
  spec.setOptionsFile(getOptionsFile());
  JavaPlatform dummyPlatform=new DefaultJavaPlatform(JavaVersion.current());
  Compiler<JavadocSpec> generator=((JavaToolChainInternal)getToolChain()).select(dummyPlatform).newCompiler(spec);
  generator.execute(spec);
}
