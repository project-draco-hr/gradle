{
  testFile(testDir,"build.gradle").writelns("apply id: 'java'","compileJava.options.depend()");
  writeShortInterface();
  writeTestClass();
  inDirectory(testDir).withTasks("classes").run();
  try {
    Thread.sleep(1000L);
  }
 catch (  InterruptedException e) {
    throw new RuntimeException(e);
  }
  writeLongInterface();
  ExecutionFailure failure=inDirectory(testDir).withTasks("classes").runWithFailure();
  failure.assertHasDescription("Execution failed for task ':compileJava'.");
  testFile(testDir,"build/dependency-cache/dependencies.txt").assertExists();
}
