{
  if (!(descriptor instanceof ProjectDependencyDescriptor)) {
    return null;
  }
  ProjectDependencyDescriptor projectDependencyDescriptor=(ProjectDependencyDescriptor)descriptor;
  ProjectInternal project=projectDependencyDescriptor.getTargetProject();
  Module projectModule=project.getModule();
  IvySettings ivySettings=IvyContext.getContext().getIvy().getSettings();
  DefaultResolutionStrategy whateverStrategy=new DefaultResolutionStrategy();
  IvyConfig ivyConfig=new IvyConfig(ivySettings,whateverStrategy);
  ModuleDescriptor projectDescriptor=moduleDescriptorConverter.convert(project.getConfigurations(),projectModule,ivyConfig);
  for (  DependencyArtifactDescriptor artifactDescriptor : descriptor.getAllDependencyArtifacts()) {
    for (    Artifact artifact : projectDescriptor.getAllArtifacts()) {
      if (artifact.getName().equals(artifactDescriptor.getName()) && artifact.getExt().equals(artifactDescriptor.getExt())) {
        String path=artifact.getExtraAttribute(DefaultIvyDependencyPublisher.FILE_PATH_EXTRA_ATTRIBUTE);
        ReflectionUtil.invoke(artifactDescriptor,"setExtraAttribute",new Object[]{DefaultIvyDependencyPublisher.FILE_PATH_EXTRA_ATTRIBUTE,path});
      }
    }
  }
  return projectDescriptor;
}
