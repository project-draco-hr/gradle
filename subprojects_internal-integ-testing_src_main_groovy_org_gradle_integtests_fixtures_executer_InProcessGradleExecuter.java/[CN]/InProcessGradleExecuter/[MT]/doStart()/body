{
  return new ForkingGradleHandle(getResultAssertion(),getDefaultCharacterEncoding(),new Factory<JavaExecHandleBuilder>(){
    public JavaExecHandleBuilder create(){
      JavaExecHandleBuilder builder=new JavaExecHandleBuilder(new IdentityFileResolver());
      builder.workingDir(getWorkingDir());
      Set<File> classpath=new DefaultModuleRegistry().getFullClasspath();
      builder.classpath(classpath);
      builder.setMain(Main.class.getName());
      builder.args(getAllArgs());
      return builder;
    }
  }
).start();
}
