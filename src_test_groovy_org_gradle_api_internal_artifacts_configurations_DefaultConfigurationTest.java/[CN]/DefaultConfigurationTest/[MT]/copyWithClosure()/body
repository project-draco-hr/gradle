{
  prepareConfigurationForCopyTest();
  Set<Dependency> expectedDependenciesToCopy=new HashSet(configuration.getDependencies());
  configuration.addDependency(HelperUtil.createDependency("group3","name3","version3"));
  Closure specClosure=HelperUtil.toClosure("{ element ->  !element.group.equals(\"group3\")}");
  Configuration copiedConfiguration=configuration.copy(specClosure);
  assertThatCopiedConfigurationHasElementsAndName(copiedConfiguration,expectedDependenciesToCopy);
}
