{
  Set<org.gradle.api.artifacts.Configuration> expectedConfigurations=new HashSet<org.gradle.api.artifacts.Configuration>();
  expectedConfigurations.add(configurationContainer.add("root1"));
  expectedConfigurations.add(configurationContainer.add("root2"));
  configurationContainer.add("root3");
  expectedConfigurations.add(configurationContainer.add("middle1").extendsFrom("root1"));
  expectedConfigurations.add(configurationContainer.add("middle2").extendsFrom("root1","root2"));
  org.gradle.api.artifacts.Configuration leaf=configurationContainer.add("leaf1").extendsFrom("middle1","middle2");
  expectedConfigurations.add(leaf);
  assertThat((Set<org.gradle.api.artifacts.Configuration>)leaf.getChain(),equalTo(expectedConfigurations));
}
