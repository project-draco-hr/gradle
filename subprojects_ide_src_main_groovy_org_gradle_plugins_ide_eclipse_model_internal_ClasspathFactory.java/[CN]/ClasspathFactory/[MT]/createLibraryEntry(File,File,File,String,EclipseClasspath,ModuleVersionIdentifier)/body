{
  FileReferenceFactory referenceFactory=classpath.getFileReferenceFactory();
  FileReference binaryRef=referenceFactory.fromFile(binary);
  FileReference sourceRef=referenceFactory.fromFile(source);
  FileReference javadocRef=referenceFactory.fromFile(javadoc);
  final AbstractLibrary out=binaryRef.isRelativeToPathVariable() ? new Variable(binaryRef) : new Library(binaryRef);
  out.setJavadocPath(javadocRef);
  out.setSourcePath(sourceRef);
  out.setExported(false);
  DeprecationLogger.whileDisabled(new Runnable(){
    @Override public void run(){
      out.setDeclaredConfigurationName(declaredConfigurationName);
    }
  }
);
  out.setModuleVersion(id);
  return out;
}
