{
  try {
    dependencyResolver.resolve(configuration,repositories,metadataHandler,results);
  }
 catch (  final Throwable e) {
    results.failed(new BrokenResolvedConfiguration(e,configuration),wrapException(e,configuration));
    return;
  }
  ResolvedConfiguration wrappedConfiguration=new ErrorHandlingResolvedConfiguration(results.getResolvedConfiguration(),configuration);
  ResolutionResult wrappedResult=new ErrorHandlingResolutionResult(results.getResolutionResult(),configuration);
  ResolvedProjectConfigurationResults wrappedProjectResults=new ErrorHandlingResolvedProjectConfigurationResults(results.getResolvedProjectConfigurationResults(),configuration);
  results.resolved(wrappedConfiguration,wrappedResult,wrappedProjectResults);
}
