{
  task.getOutputs().configure(new Action<TaskOutputs>(){
    @Override public void execute(    TaskOutputs taskOutputs){
      Iterable<File> directories=uncheckedCast(uncheckedCall(futureValue));
      if (directories != null) {
        int counter=0;
        for (        File directory : directories) {
          taskOutputs.includeDir(directory).withPropertyName(context.getName() + "$" + (++counter));
        }
      }
    }
  }
);
  task.prependParallelSafeAction(new Action<Task>(){
    public void execute(    Task task){
      Iterable<File> directories=uncheckedCast(uncheckedCall(futureValue));
      if (directories != null) {
        for (        File directory : directories) {
          ensureDirectoryExists(directory);
        }
      }
    }
  }
);
}
