{
  URI location;
  try {
    location=resource.toURI();
    String path=location.getPath();
    if (location.getScheme().equals("file")) {
      if (path.endsWith(".jar")) {
        System.err.println("resource is JAR" + location);
        return new File(path);
      }
      File candidate=new File(path);
      if (candidate.isDirectory() && new File(candidate,resourceName).exists()) {
        System.err.println("resource is directory root " + candidate);
        return candidate;
      }
      candidate=new File(candidate,"bin");
      if (candidate.isDirectory() && new File(candidate,resourceName).exists()) {
        System.err.println("resource is directory root used by Eclipse PDE " + candidate);
        return candidate;
      }
    }
  }
 catch (  URISyntaxException e) {
    throw UncheckedException.throwAsUncheckedException(e);
  }
  throw new GradleException(String.format("Cannot determine classpath for resource '%s' from location '%s'.",resourceName,location));
}
