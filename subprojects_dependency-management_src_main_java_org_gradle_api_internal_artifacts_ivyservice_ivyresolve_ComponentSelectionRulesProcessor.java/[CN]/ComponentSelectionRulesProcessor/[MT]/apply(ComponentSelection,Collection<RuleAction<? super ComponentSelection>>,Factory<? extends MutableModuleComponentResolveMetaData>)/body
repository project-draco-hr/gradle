{
  MetadataProvider metadataProvider=new MetadataProvider(metaDataSupplier);
  List<RuleAction<? super ComponentSelection>> noInputRules=Lists.newArrayList();
  List<RuleAction<? super ComponentSelection>> inputRules=Lists.newArrayList();
  for (  RuleAction<? super ComponentSelection> rule : rules) {
    if (rule.getInputTypes().isEmpty()) {
      noInputRules.add(rule);
    }
 else {
      inputRules.add(rule);
    }
  }
  if (processRules(noInputRules,selection,metadataProvider)) {
    processRules(inputRules,selection,metadataProvider);
  }
}
