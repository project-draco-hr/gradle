{
  boolean windowsPathLimitation=OperatingSystem.current().isWindows();
  MutableCommandLineToolInvocation invocation=baseInvocation.copy();
  invocation.setWorkDirectory(spec.getObjectFileDir());
  if (useCommandFile) {
    invocation.addPostArgsAction(getPostArgsAction(spec));
  }
  for (  File sourceFile : spec.getSourceFiles()) {
    SingleSourceCompileArgTransformer<T> sourceArgTransformer=new SingleSourceCompileArgTransformer<T>(sourceFile,objectFileSuffix,new ShortCircuitArgsTransformer<T>(argsTransformer),windowsPathLimitation,outputFileArgTransformer);
    invocation.setArgs(sourceArgTransformer.transform(specTransformer.transform(spec)));
    commandLineTool.execute(invocation);
  }
  return new SimpleWorkResult(!spec.getSourceFiles().isEmpty());
}
