{
  requestStop();
  CompositeStoppable stoppable=new CompositeStoppable();
  lock.lock();
  try {
    stoppable.add(unicastOutgoing);
    stoppable.add(broadcastOutgoing);
    stoppable.add(handlers);
    stoppable.add(connections);
    stoppable.add(router);
    stoppable.add(executors);
  }
  finally {
    executors.clear();
    unicastOutgoing=null;
    lock.unlock();
  }
  stoppable.stop();
}
