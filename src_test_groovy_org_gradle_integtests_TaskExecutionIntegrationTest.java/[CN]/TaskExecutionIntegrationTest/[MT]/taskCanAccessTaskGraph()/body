{
  TestFile buildFile=testFile("build.gradle");
  buildFile.writelns("import org.gradle.integtests.TaskExecutionIntegrationTest","createTask('a') { task ->","    assertTrue(build.taskGraph.hasTask(':a'))","    assertTrue(build.taskGraph.allTasks.contains(task))","}","build.taskGraph.whenReady { graph ->","    assertTrue(graph.hasTask(':a'))","    assertTrue(graph.allTasks.contains(task('a')))","    TaskExecutionIntegrationTest.graphChecked = true","}");
  usingBuildFile(buildFile).runTasks("a").assertTasksExecuted(":a");
  assertTrue(graphChecked);
}
