{
  TestFile buildFile=testFile("build.gradle");
  buildFile.writelns("build.taskGraph.whenReady { assertFalse(project.hasProperty('graphReady')); graphReady = true }","createTask('a') { task -> project.executedA = task }","createTask('b') { ","    assertSame(a, project.executedA);","    assertTrue(build.taskGraph.hasTask(':a'))","}","createTask('c', dependsOn: 'a')","createTask('d', dependsOn: 'a')","createTask('e', dependsOn: ['a', 'd'])");
  usingBuildFile(buildFile).runTasks("a","b").assertTasksExecuted(":a",":b");
  usingBuildFile(buildFile).runTasks("a","a").assertTasksExecuted(":a");
  usingBuildFile(buildFile).runTasks("c","a").assertTasksExecuted(":a",":c");
  usingBuildFile(buildFile).runTasks("c","e").assertTasksExecuted(":a",":c",":d",":e");
}
