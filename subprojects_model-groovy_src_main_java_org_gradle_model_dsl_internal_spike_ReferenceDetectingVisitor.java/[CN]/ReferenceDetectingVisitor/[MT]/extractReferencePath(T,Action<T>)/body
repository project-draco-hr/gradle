{
  boolean topLevel=referenceStack.isEmpty();
  action.execute(expression);
  if (topLevel) {
    if (referenceEncountered) {
      String path=CollectionUtils.join(".",referenceStack);
      expression.setNodeMetaData(AST_NODE_REFERENCE_PATH_KEY,path);
      referenceEncountered=false;
    }
    referenceStack.clear();
  }
}
