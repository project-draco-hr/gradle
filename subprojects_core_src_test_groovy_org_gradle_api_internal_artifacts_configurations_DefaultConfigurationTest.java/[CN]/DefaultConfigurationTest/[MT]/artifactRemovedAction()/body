{
  final TestClosure closure=context.mock(TestClosure.class);
  final PublishArtifact artifact=HelperUtil.createPublishArtifact("name1","ext1","type1","classifier1");
  configuration.addArtifact(artifact);
  context.checking(new Expectations(){
{
      one(closure).call(artifact);
    }
  }
);
  configuration.getArtifactCollection().whenObjectRemoved(HelperUtil.toClosure(closure));
  configuration.removeArtifact(artifact);
}
