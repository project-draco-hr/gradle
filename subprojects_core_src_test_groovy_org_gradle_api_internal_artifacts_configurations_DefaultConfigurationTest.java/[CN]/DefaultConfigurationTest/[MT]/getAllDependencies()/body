{
  Dependency dependencyConf=HelperUtil.createDependency("group1","name1","version1");
  Dependency dependencyOtherConf1=HelperUtil.createDependency("group1","name1","version1");
  Dependency dependencyOtherConf2=context.mock(Dependency.class,"dep2");
  Configuration otherConf=createNamedConfiguration("otherConf");
  configuration.getDependencies().add(dependencyConf);
  configuration.extendsFrom(otherConf);
  otherConf.getDependencies().add(dependencyOtherConf1);
  otherConf.getDependencies().add(dependencyOtherConf2);
  assertThat(configuration.getAllDependencies(),equalTo(toSet(dependencyConf,dependencyOtherConf2)));
  assertCorrectInstanceInAllDependencies(configuration.getAllDependencies(),dependencyConf);
}
