{
  if (message instanceof Request) {
    Request request=(Request)message;
    if (consumers.isEmpty()) {
      queue.add(request.getPayload());
    }
 else {
      for (      Object consumer : consumers) {
        context.dispatchOutgoing(new Request(consumer,request.getPayload()));
      }
    }
  }
 else {
    throw new IllegalArgumentException(String.format("Unexpected outgoing message dispatched: %s",message));
  }
}
