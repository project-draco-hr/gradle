{
  ModuleDescriptorState moduleDescriptor=metaData.getDescriptor();
  LOGGER.debug("Recording module descriptor in cache: {} [changing = {}]",moduleDescriptor.getComponentIdentifier(),metaData.isChanging());
  LocallyAvailableResource resource=moduleDescriptorStore.putModuleDescriptor(repository,metaData.getComponentId(),moduleDescriptor);
  ModuleDescriptorCacheEntry entry=createEntry(metaData,resource.getSha1());
  getCache().put(createKey(repository,metaData.getComponentId()),entry);
  return new DefaultCachedMetaData(entry,null,timeProvider);
}
