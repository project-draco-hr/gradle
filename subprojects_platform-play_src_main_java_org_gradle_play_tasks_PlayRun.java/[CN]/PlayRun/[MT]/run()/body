{
  PlayApplicationDeploymentHandle deploymentHandle=deploymentRegistry.get(PlayApplicationDeploymentHandle.class,deploymentId);
  if (deploymentHandle == null) {
    throw new GradleException("There are no deployment handles registered with id '".concat(deploymentId).concat("'"));
  }
  ProgressLoggerFactory progressLoggerFactory=getServices().get(ProgressLoggerFactory.class);
  ProgressLogger progressLogger=progressLoggerFactory.newOperation(PlayRun.class).start("Start Play server","Starting Play");
  int httpPort=getHttpPort();
  PlayRunSpec spec=new DefaultPlayRunSpec(runtimeClasspath,applicationJar,assetsJar,getProject().getProjectDir(),getForkOptions(),httpPort);
  try {
    deploymentHandle.start(spec);
    progressLogger.completed();
    progressLogger=progressLoggerFactory.newOperation(PlayRun.class).start(String.format("Run Play App at http://localhost:%d/",httpPort),String.format("Running at http://localhost:%d/",httpPort));
    if (!getProject().getGradle().getStartParameter().isContinuous()) {
      waitForCtrlD();
    }
  }
  finally {
    progressLogger.completed();
  }
}
