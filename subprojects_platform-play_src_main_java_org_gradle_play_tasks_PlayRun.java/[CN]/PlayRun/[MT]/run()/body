{
  ProgressLoggerFactory progressLoggerFactory=getServices().get(ProgressLoggerFactory.class);
  ProgressLogger progressLogger=progressLoggerFactory.newOperation(PlayRun.class).start("Start Play server","Starting Play");
  int httpPort=getHttpPort();
  FileCollection applicationJars=new SimpleFileCollection(applicationJar,assetsJar);
  applicationJars=applicationJars.plus(runtimeClasspath);
  PlayRunSpec spec=new DefaultPlayRunSpec(applicationJars,getProject().getProjectDir(),getForkOptions(),httpPort);
  try {
    PlayApplicationRunnerToken runnerToken=playApplicationRunnerTool.get().start(spec);
    progressLogger.completed();
    progressLogger=progressLoggerFactory.newOperation(PlayRun.class).start(String.format("Run Play App at http://localhost:%d/",httpPort),String.format("Running at http://localhost:%d/ (stop with ctrl+d)",httpPort));
    waitForCtrlD();
    runnerToken.stop();
  }
  finally {
    progressLogger.completed();
  }
}
