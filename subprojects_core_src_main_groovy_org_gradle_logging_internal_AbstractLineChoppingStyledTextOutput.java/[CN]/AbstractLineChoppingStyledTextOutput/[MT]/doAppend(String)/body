{
  int max=text.length();
  int pos=0;
  int start=0;
  while (pos < max) {
    if (seenCharsFromEol == eol.length) {
      doStartLine();
      seenCharsFromEol=0;
    }
    if (seenCharsFromEol < eol.length && text.charAt(pos) == eol[seenCharsFromEol]) {
      seenCharsFromEol++;
      pos++;
      if (seenCharsFromEol == eol.length) {
        doLineText(text.substring(start,pos),true);
        doFinishLine();
        start=pos;
      }
    }
 else {
      seenCharsFromEol=0;
      pos++;
    }
  }
  if (pos > start) {
    doLineText(text.substring(start,pos),false);
  }
}
