{
  testFile("build.gradle").writelns("String name = 'a'; task name","def taskNameMethod(String name = 'c') { name } ","task taskNameMethod('d')","def addTaskMethod(String methodParam) { task methodParam }","addTaskMethod('e')","def addTaskWithClosure(String methodParam) { task(methodParam) { ext.property = 'value' } }","addTaskWithClosure('f')","def addTaskWithMap(String methodParam) { task(methodParam, description: 'description') }","addTaskWithMap('g')","ext.cl = { String taskNameParam -> task taskNameParam }","cl.call('h')","cl = { String taskNameParam -> task(taskNameParam) { ext.property = 'value' } }","cl.call('i')","assert 'value' == f.property","assert 'value' == i.property","task all(dependsOn: tasks as List)");
  inTestDirectory().withTasks("all").run().assertTasksExecuted(":a",":d",":e",":f",":g",":h",":i",":all");
}
