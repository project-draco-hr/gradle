{
  Project dependencyProject=dependency.getDependencyProject();
  PublishingExtension publishing=dependencyProject.getExtensions().findByType(PublishingExtension.class);
  if (publishing == null) {
    ivyDependencies.add(new DefaultIvyDependency(dependency.getGroup(),dependencyProject.getName(),dependency.getVersion(),confMapping));
    return;
  }
  Set<IvyPublication> ivyPublications=publishing.getPublications().withType(IvyPublication.class);
  for (  IvyPublication ivyPublication : ivyPublications) {
    ivyDependencies.add(new DefaultIvyDependency(ivyPublication.getOrganisation(),ivyPublication.getModule(),ivyPublication.getRevision(),confMapping));
  }
}
