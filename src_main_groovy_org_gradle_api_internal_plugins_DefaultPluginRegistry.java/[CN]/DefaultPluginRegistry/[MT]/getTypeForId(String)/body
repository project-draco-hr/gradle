{
  if (!GUtil.isTrue(properties.getProperty(pluginId))) {
    throw new PluginNotAvailableException("The plugin with the id " + pluginId + " is not available.");
  }
  try {
    return Class.forName(properties.getProperty(pluginId)).asSubclass(Plugin.class);
  }
 catch (  ClassNotFoundException e) {
    throw new PluginInstantiationException(e);
  }
}
