{
  if (spec instanceof CppCompileSpec) {
    return (Compiler)createCppCompiler();
  }
  if (spec instanceof CCompileSpec) {
    return (Compiler)createCCompiler();
  }
  if (spec instanceof ObjectiveCppCompileSpec) {
    return (Compiler)createObjectiveCppCompiler();
  }
  if (spec instanceof ObjectiveCCompileSpec) {
    return (Compiler)createObjectiveCCompiler();
  }
  if (spec instanceof WindowsResourceCompileSpec) {
    throw new RuntimeException("Windows resource compiler is not available");
  }
  if (spec instanceof AssembleSpec) {
    return (Compiler)createAssembler();
  }
  if (spec instanceof LinkerSpec) {
    return (Compiler)createLinker();
  }
  if (spec instanceof StaticLibraryArchiverSpec) {
    return (Compiler)createStaticLibraryArchiver();
  }
  throw new IllegalArgumentException(String.format("Don't know how to compile from a spec of type %s.",spec.getClass().getSimpleName()));
}
