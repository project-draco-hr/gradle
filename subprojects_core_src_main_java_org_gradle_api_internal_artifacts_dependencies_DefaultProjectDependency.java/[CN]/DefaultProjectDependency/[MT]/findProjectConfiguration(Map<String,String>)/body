{
  Configuration selectedConfiguration=null;
  if (clientAttributes != null && !clientAttributes.isEmpty()) {
    ConfigurationContainer dependencyConfigurations=getDependencyProject().getConfigurations();
    for (    Configuration dependencyConfiguration : dependencyConfigurations) {
      if (dependencyConfiguration.hasAttributes()) {
        Map<String,String> attributes=dependencyConfiguration.getAttributes();
        if (attributes.entrySet().containsAll(clientAttributes.entrySet())) {
          selectedConfiguration=dependencyConfiguration;
          break;
        }
      }
    }
  }
  if (selectedConfiguration == null) {
    selectedConfiguration=getProjectConfiguration();
  }
  return selectedConfiguration;
}
