{
  ModuleRevisionId moduleRevisionId=createModuleRevisionId(dependency);
  ClientModule clientModule=getClientModule(dependency);
  MutableModuleVersionMetaData moduleVersionMetaData=clientModuleMetaDataFactory.createModuleMetaData(moduleRevisionId,clientModule.getDependencies());
  EnhancedDependencyDescriptor dependencyDescriptor=new ClientModuleDependencyDescriptor(clientModule,parent,moduleVersionMetaData,moduleRevisionId,clientModule.isForce(),false,clientModule.isTransitive());
  addExcludesArtifactsAndDependencies(configuration,clientModule,dependencyDescriptor);
  return dependencyDescriptor;
}
