{
  this.connection=connection;
  this.receiveHandler=receiveHandler;
  StoppableExecutor outgoingExecutor=executor.create(String.format("%s send",connection));
  executors.add(outgoingExecutor);
  outgoing=new AsyncDispatch<T>(outgoingExecutor);
  outgoing.dispatchTo(connection);
  StoppableExecutor incomingExecutor=executor.create(String.format("%s receive",connection));
  executors.add(incomingExecutor);
  incoming=new AsyncReceive<T>(incomingExecutor);
  incoming.receiveFrom(new IncomingReceive());
}
