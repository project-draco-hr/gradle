{
  if (finished) {
    return null;
  }
  T message=connection.receive();
  if (message == null) {
    finished=true;
    return receiveHandler.endOfStream();
  }
 else   if (receiveHandler.isEndOfStream(message)) {
    finished=true;
  }
  return message;
}
