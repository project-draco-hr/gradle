{
  try {
    HtmlReportRenderer htmlRenderer=new HtmlReportRenderer();
    htmlRenderer.render(model,new ReportRenderer<AllTestResults,HtmlReportContext<SimpleHtmlWriter>>(){
      @Override public void render(      AllTestResults model,      HtmlReportContext<SimpleHtmlWriter> output) throws IOException {
        output.requireResource(getClass().getResource("/org/gradle/reporting/report.js"));
        output.requireResource(getClass().getResource("/org/gradle/reporting/base-style.css"));
        output.requireResource(getClass().getResource("/org/gradle/reporting/css3-pie-1.0beta3.htc"));
        output.requireResource(getClass().getResource("style.css"));
        output.renderPage("index.html",model,new OverviewPageRenderer());
        for (        PackageTestResults packageResults : model.getPackages()) {
          output.renderPage(packageResults.getBaseUrl(),packageResults,new PackagePageRenderer());
          for (          ClassTestResults classResults : packageResults.getClasses()) {
            output.renderPage(classResults.getBaseUrl(),classResults,new ClassPageRenderer(classResults.getId(),resultsProvider));
          }
        }
      }
    }
,reportDir);
  }
 catch (  Exception e) {
    throw new GradleException(String.format("Could not generate test report to '%s'.",reportDir),e);
  }
}
