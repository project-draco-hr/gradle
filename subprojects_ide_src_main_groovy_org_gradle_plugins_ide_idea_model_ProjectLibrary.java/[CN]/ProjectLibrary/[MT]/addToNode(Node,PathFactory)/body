{
  ImmutableMap.Builder attributes=ImmutableMap.builder().put("name",name);
  if (type != null) {
    attributes.put("type",type);
  }
  Node libraryNode=parentNode.appendNode("library",attributes.build());
  Node classesNode=libraryNode.appendNode("CLASSES");
  for (  File file : classes) {
    classesNode.appendNode("root",ImmutableMap.of("url",pathFactory.path(file).getUrl()));
  }
  Node javadocNode=libraryNode.appendNode("JAVADOC");
  for (  File file : javadoc) {
    javadocNode.appendNode("root",ImmutableMap.of("url",pathFactory.path(file).getUrl()));
  }
  Node sourcesNode=libraryNode.appendNode("SOURCES");
  for (  File file : sources) {
    sourcesNode.appendNode("root",ImmutableMap.of("url",pathFactory.path(file).getUrl()));
  }
  if (compilerClasspath.size() > 0) {
    Node properties=libraryNode.appendNode("properties");
    Node compilerClasspathNode=properties.appendNode("compiler-classpath");
    for (    File file : compilerClasspath) {
      compilerClasspathNode.appendNode("root",ImmutableMap.of("url",pathFactory.path(file,true).getUrl()));
    }
  }
}
