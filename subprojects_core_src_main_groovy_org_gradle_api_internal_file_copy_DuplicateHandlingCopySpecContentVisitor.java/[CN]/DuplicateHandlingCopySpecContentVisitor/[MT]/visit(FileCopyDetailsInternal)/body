{
  if (!details.isDirectory()) {
    DuplicatesStrategy strategy=details.getDuplicatesStrategy();
    if (!visitedFiles.add(details.getRelativePath())) {
      if (strategy == DuplicatesStrategy.EXCLUDE) {
        return;
      }
      onUnhandledDuplicate.execute(details);
    }
  }
  super.visit(details);
}
