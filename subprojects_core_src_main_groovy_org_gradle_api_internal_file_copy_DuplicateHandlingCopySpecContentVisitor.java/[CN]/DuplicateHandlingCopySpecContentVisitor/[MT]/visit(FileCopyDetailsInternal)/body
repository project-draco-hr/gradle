{
  if (!details.isDirectory()) {
    DuplicatesStrategy strategy=determineStrategy(details);
    if (!visitedFiles.add(details.getRelativePath())) {
      if (strategy == DuplicatesStrategy.EXCLUDE) {
        return;
      }
      if (strategy != DuplicatesStrategy.INCLUDE) {
        onUnhandledDuplicate.execute(details);
      }
    }
  }
  super.visit(details);
}
