{
  for (  final PlayDistribution distribution : distributions) {
    final String stageTaskName=String.format("stage%sDist",StringUtils.capitalize(distribution.getName()));
    final File stageDir=new File(buildDir,"stage");
    final String baseName=StringUtils.isNotEmpty(distribution.getBaseName()) ? distribution.getBaseName() : distribution.getName();
    tasks.create(stageTaskName,Copy.class,new Action<Copy>(){
      @Override public void execute(      Copy copy){
        copy.setDescription("Copies the binary distribution to a staging directory.");
        copy.setGroup(DISTRIBUTION_GROUP);
        copy.setDestinationDir(stageDir);
        CopySpecInternal baseSpec=copy.getRootSpec().addChild();
        baseSpec.into(baseName);
        baseSpec.with(distribution.getContents());
      }
    }
);
    final Task stageTask=tasks.get(stageTaskName);
    String distributionTaskName=String.format("create%sDist",StringUtils.capitalize(distribution.getName()));
    tasks.create(distributionTaskName,Zip.class,new Action<Zip>(){
      @Override public void execute(      final Zip zip){
        zip.setDescription("Bundles the play binary as a distribution.");
        zip.setGroup(DISTRIBUTION_GROUP);
        zip.setArchiveName(String.format("%s.zip",baseName));
        zip.setDestinationDir(new File(buildDir,"distributions"));
        zip.from(stageTask);
      }
    }
);
  }
}
