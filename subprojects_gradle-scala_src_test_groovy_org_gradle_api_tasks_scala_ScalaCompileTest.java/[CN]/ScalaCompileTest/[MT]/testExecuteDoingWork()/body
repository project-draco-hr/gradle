{
  setUpMocksAndAttributes(scalaCompile);
  context.checking(new Expectations(){
{
      one(scalaCompiler).setSource(with(hasSameItems(scalaCompile.getSource())));
      one(scalaCompiler).setDestinationDir(scalaCompile.getDestinationDir());
      one(scalaCompiler).setClasspath(scalaCompile.getClasspath());
      one(scalaCompiler).setScalaClasspath(scalaCompile.getScalaClasspath());
      one(scalaCompiler).execute();
      List<File> expectedClassPath=new ArrayList<File>();
      expectedClassPath.add(scalaCompile.getDestinationDir());
      for (      File file : scalaCompile.getClasspath()) {
        expectedClassPath.add(file);
      }
      FileCollection javaSrc=scalaCompile.getJavaSrc();
      one(javaCompiler).setSource(with(hasSameItems(javaSrc)));
      one(javaCompiler).setClasspath(expectedClassPath);
      one(javaCompiler).setDestinationDir(scalaCompile.getDestinationDir());
      one(javaCompiler).setDependencyCacheDir(scalaCompile.getDependencyCacheDir());
      one(javaCompiler).setSourceCompatibility(scalaCompile.getSourceCompatibility());
      one(javaCompiler).setTargetCompatibility(scalaCompile.getTargetCompatibility());
      one(javaCompiler).execute();
    }
  }
);
  scalaCompile.compile();
}
