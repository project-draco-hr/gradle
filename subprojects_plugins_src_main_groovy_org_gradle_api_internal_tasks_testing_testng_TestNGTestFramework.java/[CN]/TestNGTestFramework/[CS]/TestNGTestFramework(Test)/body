{
  this.testTask=testTask;
  options=new TestNGOptions(testTask.getProject().getProjectDir());
  options.setAnnotationsOnSourceCompatibility(JavaVersion.toVersion(testTask.getProject().property("sourceCompatibility")));
  detector=new TestNGDetector(testTask.getTestClassesDir(),testTask.getClasspath(),new ClassFileExtractionManager(testTask.getTemporaryDirFactory()));
  reporter=new DefaultTestReport();
}
