{
  this.testTask=testTask;
  this.filter=filter;
  options=new TestNGOptions(testTask.getProject().getProjectDir());
  options.setAnnotationsOnSourceCompatibility(JavaVersion.toVersion(testTask.getProject().property("sourceCompatibility")));
  options.setOutputDirectory(testTask.getReports().getHtml().getDestination());
  detector=new TestNGDetector(new ClassFileExtractionManager(testTask.getTemporaryDirFactory()));
}
