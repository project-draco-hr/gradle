{
  commonSetUp();
  moduleDescriptorConverter.setArtifactsToModuleDescriptorConverter(context.mock(ArtifactsToModuleDescriptorConverter.class));
  defineCommonExpectations(configurations);
  context.checking(new Expectations(){
{
      one(moduleDescriptorConverter.getArtifactsToModuleDescriptorConverter()).addArtifacts(moduleDescriptorDummy,configurations);
    }
  }
);
  DefaultModuleDescriptor actualModuleDescriptor=(DefaultModuleDescriptor)moduleDescriptorConverter.convertForPublish(configurations,publishDescriptor,moduleDummy,ivySettingsDummy);
  assertThat(actualModuleDescriptor,equalTo(moduleDescriptorDummy));
}
