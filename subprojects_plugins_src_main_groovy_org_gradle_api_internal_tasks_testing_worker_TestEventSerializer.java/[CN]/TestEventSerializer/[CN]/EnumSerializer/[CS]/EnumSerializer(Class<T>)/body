{
  this.type=type;
  if (type.getEnumConstants().length > Byte.MAX_VALUE) {
    throw new IllegalArgumentException(String.format("Too many constants for enum %s",type.getName()));
  }
}
