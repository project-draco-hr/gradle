{
  TestState testState=executing.remove(testId);
  if (testState == null) {
    throw new IllegalArgumentException(String.format("Received a completed event for test with unknown id '%s'. Registered test ids: '%s'",testId,executing.keySet()));
  }
  testState.completed(event);
  completed(testState);
  if (testState.test.isComposite()) {
    garbage=new HashMap<Object,TestState>();
  }
 else {
    garbage.put(testId,testState);
  }
}
