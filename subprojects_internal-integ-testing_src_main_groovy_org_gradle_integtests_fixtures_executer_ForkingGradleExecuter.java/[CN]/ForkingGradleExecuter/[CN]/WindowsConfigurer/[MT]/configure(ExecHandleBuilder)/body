{
  String cmd;
  if (getExecutable() != null) {
    cmd=getExecutable().replace('/',File.separatorChar);
  }
 else {
    cmd="gradle";
  }
  builder.executable("cmd");
  builder.args("/c",cmd);
  String gradleHome=gradleHomeDir.getAbsolutePath();
  Object path=builder.getEnvironment().get("PATH");
  if (path == null) {
    path=builder.getEnvironment().get("Path");
  }
  builder.environment("Path",String.format("%s\\bin;%s",gradleHome,path));
  builder.environment("GRADLE_EXIT_CONSOLE","true");
  LOG.info("Initializing windows process so that child process will be fully detached...");
  new WindowsHandlesManipulator().uninheritStandardStreams();
}
