{
  final FileCollection fileCollectionMock=context.mock(FileCollection.class);
  final FileTree fileTreeDummy=context.mock(FileTree.class);
  FileCollection collection=new PathResolvingFileCollection(resolverMock,toList((Object)fileCollectionMock));
  context.checking(new Expectations(){
{
      one(fileCollectionMock).getAsFileTree();
      will(returnValue(fileTreeDummy));
    }
  }
);
  FileTree fileTree=collection.getAsFileTree();
  assertThat(fileTree,instanceOf(CompositeFileTree.class));
  assertThat(((CompositeFileTree)fileTree).getSourceCollections().iterator().next(),sameInstance(fileTreeDummy));
}
