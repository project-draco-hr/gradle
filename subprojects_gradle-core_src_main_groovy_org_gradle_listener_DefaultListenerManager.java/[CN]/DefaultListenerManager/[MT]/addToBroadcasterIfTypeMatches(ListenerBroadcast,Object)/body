{
  if (listener instanceof ClosureListener) {
    ClosureListener closureListener=(ClosureListener)listener;
    if (broadcaster.getType().isAssignableFrom(closureListener.listenerType)) {
      broadcaster.add(closureListener.method,closureListener.closure);
    }
  }
 else   if (broadcaster.getType().isAssignableFrom(listener.getClass())) {
    broadcaster.add(listener);
  }
}
