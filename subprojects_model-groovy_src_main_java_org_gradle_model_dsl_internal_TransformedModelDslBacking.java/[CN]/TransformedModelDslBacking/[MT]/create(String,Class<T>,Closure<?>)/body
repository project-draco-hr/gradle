{
  List<ModelReference<?>> inputs=inputPathsExtractor.transform(closure);
  SourceLocation sourceLocation=ruleLocationExtractor.transform(closure);
  ModelPath modelPath=ModelPath.path(modelPathString);
  ModelSchema<T> schema=schemaStore.getSchema(ModelType.of(type));
  ModelRuleDescriptor descriptor=toDescriptor(sourceLocation,modelPath);
  if (!schema.getKind().isManaged()) {
    throw new InvalidModelRuleDeclarationException(descriptor,"Cannot create an element of type " + type.getName() + " as it is not a managed type");
  }
  ModelCreator creator=modelCreatorFactory.creator(descriptor,modelPath,schema,inputs,new ExecuteClosure<T>(closure));
  modelRegistry.create(creator);
}
