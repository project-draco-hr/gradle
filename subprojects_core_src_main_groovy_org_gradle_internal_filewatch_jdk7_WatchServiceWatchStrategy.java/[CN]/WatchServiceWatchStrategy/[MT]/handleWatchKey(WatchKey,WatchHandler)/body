{
  Path watchedPath=(Path)watchKey.watchable();
  for (  WatchEvent<?> event : watchKey.pollEvents()) {
    WatchEvent.Kind kind=event.kind();
    if (kind == OVERFLOW) {
      watchHandler.onOverflow();
      continue;
    }
    if (kind.type() == Path.class) {
      WatchEvent<Path> ev=Cast.uncheckedCast(event);
      Path fullPath=watchedPath.resolve(ev.context());
      ChangeDetails changeDetails=new ChangeDetails(watchedPath,fullPath,toChangeType(kind));
      watchHandler.onChange(changeDetails);
    }
  }
  watchKey.reset();
}
