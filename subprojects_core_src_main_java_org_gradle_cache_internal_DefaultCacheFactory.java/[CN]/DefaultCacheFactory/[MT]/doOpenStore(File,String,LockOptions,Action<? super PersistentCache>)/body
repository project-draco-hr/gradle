{
  if (initializer != null) {
    throw new UnsupportedOperationException("Initializer actions are not currently supported by the directory store implementation.");
  }
  File canonicalDir=FileUtils.canonicalize(storeDir);
  DirCacheReference dirCacheReference=dirCaches.get(canonicalDir);
  if (dirCacheReference == null) {
    ReferencablePersistentCache cache=new DefaultPersistentDirectoryStore(canonicalDir,displayName,lockOptions,lockManager,executorFactory);
    cache.open();
    dirCacheReference=new DirCacheReference(cache,Collections.<String,Object>emptyMap(),lockOptions);
    dirCaches.put(canonicalDir,dirCacheReference);
  }
  return new ReferenceTrackingCache(dirCacheReference);
}
