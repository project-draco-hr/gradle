{
  ProcessBuilder processBuilder=processBuilderFactory.createProcessBuilder(execHandle);
  int exitCode;
  try {
    Process process;
synchronized (START_LOCK) {
      process=processBuilder.start();
      streamsForwarder.connectStreams(process);
    }
synchronized (lock) {
      this.process=process;
    }
    streamsForwarder.start(executor);
    execHandle.started();
    if (execHandle.isDaemon()) {
      streamsForwarder.close();
      waitForStreamsEOF();
      execHandle.demonized();
      return;
    }
    exitCode=process.waitFor();
    streamsForwarder.close();
  }
 catch (  Throwable t) {
    execHandle.failed(t);
    return;
  }
  if (aborted) {
    execHandle.aborted(exitCode);
  }
 else {
    execHandle.finished(exitCode);
  }
}
