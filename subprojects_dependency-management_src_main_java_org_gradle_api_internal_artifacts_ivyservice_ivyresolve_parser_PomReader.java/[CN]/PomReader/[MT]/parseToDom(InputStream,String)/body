{
  EntityResolver entityResolver=new EntityResolver(){
    public InputSource resolveEntity(    String publicId,    String systemId) throws SAXException, IOException {
      if ((systemId != null) && systemId.endsWith("m2-entities.ent")) {
        return new InputSource(org.apache.ivy.plugins.parser.m2.PomReader.class.getResourceAsStream("m2-entities.ent"));
      }
      return null;
    }
  }
;
  InputStream dtdStream=new AddDTDFilterInputStream(stream);
  DocumentBuilder docBuilder=XMLHelper.getDocBuilder(entityResolver);
  return docBuilder.parse(dtdStream,systemId);
}
