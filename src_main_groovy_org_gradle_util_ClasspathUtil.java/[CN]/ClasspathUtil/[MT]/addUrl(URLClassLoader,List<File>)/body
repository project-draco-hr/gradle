{
  try {
    Method method=URLClassLoader.class.getDeclaredMethod("addURL",URL.class);
    method.setAccessible(true);
    for (    File classpathElement : classpathElements) {
      logger.info("Adding to classpath: " + classpathElement);
      method.invoke(classLoader,classpathElement.toURL());
    }
  }
 catch (  Throwable t) {
    t.printStackTrace();
    throw new RuntimeException("Error, could not add URL to system classloader",t);
  }
}
