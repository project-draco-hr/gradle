{
  File buildFile=new File(rootDir,"build.gradle");
  FileUtils.writeStringToFile(buildFile,"build");
  ProjectDescriptor descriptor=descriptor("somename",rootDir,buildFile,"build.gradle");
  DefaultProject project=projectFactory.createProject(descriptor,null,gradle);
  assertEquals("somename",project.getName());
  assertEquals(buildFile,project.getBuildFile());
  assertNull(project.getParent());
  assertSame(rootDir,project.getRootDir());
  assertSame(rootDir,project.getProjectDir());
  assertSame(project,project.getRootProject());
  checkProjectResources(project);
  ScriptSource expectedScriptSource=new FileScriptSource("build file",buildFile);
  assertThat(project.getBuildScriptSource(),Matchers.reflectionEquals(expectedScriptSource));
}
