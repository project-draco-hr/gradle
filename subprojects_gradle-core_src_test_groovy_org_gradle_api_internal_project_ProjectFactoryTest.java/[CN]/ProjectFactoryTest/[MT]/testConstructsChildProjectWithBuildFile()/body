{
  File buildFile=new File(projectDir,"build.gradle");
  FileUtils.writeStringToFile(buildFile,"build");
  ProjectDescriptor rootDescriptor=descriptor("root");
  ProjectDescriptor parentDescriptor=descriptor("parent");
  ProjectDescriptor projectDescriptor=descriptor("somename",projectDir,buildFile,"build.gradle");
  DefaultProject rootProject=projectFactory.createProject(rootDescriptor,null,gradle);
  DefaultProject parentProject=projectFactory.createProject(parentDescriptor,rootProject,gradle);
  DefaultProject project=projectFactory.createProject(projectDescriptor,parentProject,gradle);
  assertEquals("somename",project.getName());
  assertEquals(buildFile,project.getBuildFile());
  assertSame(parentProject,project.getParent());
  assertSame(rootDir,project.getRootDir());
  assertSame(projectDir,project.getProjectDir());
  assertSame(rootProject,project.getRootProject());
  assertSame(project,parentProject.getChildProjects().get("somename"));
  checkProjectResources(project);
  assertThat(project.getBuildScriptSource(),instanceOf(UriScriptSource.class));
  assertThat(project.getBuildScriptSource().getDisplayName(),startsWith("build file "));
  assertThat(project.getBuildScriptSource().getResource().getFile(),equalTo(buildFile));
}
