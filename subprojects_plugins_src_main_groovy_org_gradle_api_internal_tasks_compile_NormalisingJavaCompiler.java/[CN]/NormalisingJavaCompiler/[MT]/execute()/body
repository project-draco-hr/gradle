{
  source=new SimpleFileCollection(source.getFiles());
  classpath=new SimpleFileCollection(Lists.newArrayList(classpath));
  for (  File file : source) {
    if (!file.getName().endsWith(".java")) {
      throw new InvalidUserDataException(String.format("Cannot compile non-Java source file '%s'.",file));
    }
  }
  configure(compiler);
  return compiler.execute();
}
