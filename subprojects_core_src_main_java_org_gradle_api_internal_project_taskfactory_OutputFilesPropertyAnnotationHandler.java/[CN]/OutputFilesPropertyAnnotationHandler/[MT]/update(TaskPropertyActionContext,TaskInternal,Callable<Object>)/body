{
  task.getOutputs().configure(new Action<TaskOutputs>(){
    @Override public void execute(    TaskOutputs taskOutputs){
      Iterable<File> files=uncheckedCast(uncheckedCall(futureValue));
      if (files != null) {
        int counter=0;
        for (        File file : files) {
          taskOutputs.file(file).withPropertyName(context.getName() + "$" + (++counter));
        }
      }
    }
  }
);
  task.prependParallelSafeAction(new Action<Task>(){
    public void execute(    Task task){
      Iterable<File> files=uncheckedCast(uncheckedCall(futureValue));
      if (files != null) {
        for (        File file : files) {
          ensureParentDirectoryExists(file);
        }
      }
    }
  }
);
}
