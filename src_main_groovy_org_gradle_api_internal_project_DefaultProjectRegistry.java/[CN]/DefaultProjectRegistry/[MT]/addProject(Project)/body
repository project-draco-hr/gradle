{
  if (projectDir2Project.get(project.getProjectDir()) != null) {
    throw new InvalidUserDataException(StringUtils.capitalize(String.format("%s has already existing projectDir: %s",project,project.getProjectDir())));
  }
  projects.put(project.getPath(),project);
  subProjects.put(project.getPath(),new TreeSet());
  addProjectToParentSubProjects(project);
  projectDir2Project.put(project.getProjectDir(),project);
}
