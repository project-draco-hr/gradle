{
  final IvySettings ivySettingsDummy=new IvySettings();
  context.checking(new Expectations(){
{
      allowing(dependencyMetaDataProviderMock).getInternalRepository();
      will(returnValue(internalRepositoryDummy));
      allowing(dependencyMetaDataProviderMock).getGradleUserHomeDir();
      will(returnValue(cacheParentDirDummy));
      allowing(dependencyMetaDataProviderMock).getModule();
      will(returnValue(moduleDummy));
      allowing(ivyService.getSettingsConverter()).convertForPublish(publishResolversDummy,cacheParentDirDummy,internalRepositoryDummy);
      will(returnValue(ivySettingsDummy));
      allowing(setUpIvyFactory(ivySettingsDummy,ivyService)).getPublishEngine();
      will(returnValue(publishEngineDummy));
      allowing(ivyService.getModuleDescriptorConverter()).convertForPublish(configurations,publishInstruction.isUploadDescriptor(),moduleDummy,ivySettingsDummy);
      will(returnValue(moduleDescriptorDummy));
    }
  }
);
}
