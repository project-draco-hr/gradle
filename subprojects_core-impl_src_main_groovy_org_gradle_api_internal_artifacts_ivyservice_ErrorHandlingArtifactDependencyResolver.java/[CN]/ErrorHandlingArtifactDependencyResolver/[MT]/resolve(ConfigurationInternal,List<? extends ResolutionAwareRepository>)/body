{
  final ResolverResults results;
  try {
    results=dependencyResolver.resolve(configuration,repositories);
  }
 catch (  final Throwable e) {
    return new ResolverResults(new BrokenResolvedConfiguration(e,configuration),wrapException(e,configuration));
  }
  ResolvedConfiguration wrappedConfiguration=new ErrorHandlingResolvedConfiguration(results.getResolvedConfiguration(),configuration);
  ResolutionResult wrappedResult=new ErrorHandlingResolutionResult(results.getResolutionResult(),configuration);
  return new ResolverResults(wrappedConfiguration,wrappedResult);
}
