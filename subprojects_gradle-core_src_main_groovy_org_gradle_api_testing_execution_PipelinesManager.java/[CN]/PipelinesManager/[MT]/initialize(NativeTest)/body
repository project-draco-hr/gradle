{
  final Map<String,PipelineConfig> pipelineConfigs=testTask.getPipelineConfigs();
  if (pipelineConfigs.isEmpty()) {
    final PipelineConfig defaultPipelineConfig=new PipelineConfig("default");
    pipelineConfigs.put(defaultPipelineConfig.getName(),defaultPipelineConfig);
  }
  for (  final PipelineConfig pipelineConfig : pipelineConfigs.values()) {
    final Pipeline pipeline=addPipeline(pipelineConfig);
    final ForkPolicyConfig forkPolicyConfig=pipelineConfig.getForkPolicyConfig();
    final ForkPolicy forkPolicy=ForkPolicyRegister.getForkPolicy(forkPolicyConfig.getPolicyName());
    final ForkPolicyInstance forkPolicyInstance=forkPolicy.getForkPolicyInstance(pipeline,forkControl);
    pipeline.setForkPolicyInstance(forkPolicyInstance);
    pipeline.getForkPolicyInstance().initialize();
    pipeline.getReforkController().initialize(testTask,pipelineConfig);
  }
}
