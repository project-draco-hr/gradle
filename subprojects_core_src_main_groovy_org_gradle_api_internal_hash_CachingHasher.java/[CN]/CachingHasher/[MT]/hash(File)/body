{
  FileInfo info=cache.get(file);
  long length=file.length();
  long timestamp=file.lastModified();
  if (info != null && length == info.length && timestamp == info.timestamp) {
    return info.hash;
  }
  byte[] hash=hasher.hash(file);
  cache.put(file,new FileInfo(hash,length,timestamp));
  return hash;
}
