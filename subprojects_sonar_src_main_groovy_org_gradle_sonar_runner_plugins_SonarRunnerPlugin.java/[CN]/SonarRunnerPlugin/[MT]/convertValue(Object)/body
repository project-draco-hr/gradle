{
  if (value == null) {
    return null;
  }
  if (value instanceof Iterable<?>) {
    Iterable<String> flattened=Iterables.transform((Iterable<?>)value,new Function<Object,String>(){
      public String apply(      Object input){
        return convertValue(input);
      }
    }
);
    Iterable<String> filtered=Iterables.filter(flattened,Predicates.notNull());
    String joined=COMMA_JOINER.join(filtered);
    return joined.isEmpty() ? null : joined;
  }
 else {
    return value.toString();
  }
}
