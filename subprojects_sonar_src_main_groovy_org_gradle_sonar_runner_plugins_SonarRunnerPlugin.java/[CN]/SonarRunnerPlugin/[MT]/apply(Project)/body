{
  targetProject=project;
  SonarRunner sonarRunnerTask=createTask(project);
  SonarRunnerRootExtension rootExtension=project.getExtensions().create(SonarRunnerExtension.SONAR_RUNNER_EXTENSION_NAME,SonarRunnerRootExtension.class);
  addConfiguration(project,rootExtension);
  rootExtension.setForkOptions(sonarRunnerTask.getForkOptions());
  project.subprojects(new Action<Project>(){
    public void execute(    Project project11){
      project11.getExtensions().create(SonarRunnerExtension.SONAR_RUNNER_EXTENSION_NAME,SonarRunnerExtension.class);
    }
  }
);
}
