{
  if (!validateType(toClassName(superName))) {
    throw new InvalidPublicAPIException(String.format("'%s' extends '%s' and its package is not one of the allowed packages.",toClassName(name),toClassName(superName)));
  }
  Set<String> invalidReferencedTypes=invalidReferencedTypes(signature);
  if (!invalidReferencedTypes.isEmpty()) {
    if (invalidReferencedTypes.size() == 1) {
      throw new InvalidPublicAPIException(String.format("'%s' references disallowed API type '%s' in superclass or interfaces.",toClassName(name),invalidReferencedTypes.iterator().next()));
    }
 else {
      StringBuilder sb=new StringBuilder("The following types are referenced in ");
      sb.append(toClassName(name));
      sb.append(" superclass but their package don't belong to the allowed packages:\n");
      for (      String invalidReferencedType : invalidReferencedTypes) {
        sb.append("   - ").append(invalidReferencedType).append("\n");
      }
      throw new InvalidPublicAPIException(sb.toString());
    }
  }
  if (interfaces != null) {
    for (    String intf : interfaces) {
      if (!validateType(toClassName(intf))) {
        throw new InvalidPublicAPIException(String.format("'%s' declares interface '%s' and its package is not one of the allowed packages.",toClassName(name),toClassName(intf)));
      }
    }
  }
}
