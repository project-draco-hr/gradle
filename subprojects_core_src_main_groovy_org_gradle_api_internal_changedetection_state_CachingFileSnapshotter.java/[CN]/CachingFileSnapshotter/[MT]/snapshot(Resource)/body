{
  File file=resource.getFile();
  if (file != null && file.exists()) {
    return snapshot(file);
  }
  final HashValue md5=HashUtil.createHash(resource.getText(),"md5");
  return new FileSnapshot(){
    @Override public HashValue getHash(){
      return md5;
    }
  }
;
}
