{
  List<URL> classPath=actionClasspathFactory.getClassPathForAction(serializationDetails.getActionClasses());
  final ClassLoaderDetails actionClassLoader=new ClassLoaderDetails(UUID.randomUUID(),classPath);
  SerializedPayload serializedAction=payloadSerializer.serialize(clientAction,new SerializeMap(){
    public ClassLoaderDetails getDetails(    ClassLoader target){
      return actionClassLoader;
    }
  }
);
  BuildAction<SerializedPayload> action=new ClientProvidedBuildAction(serializedAction);
  Parameters params=initParams(providerParameters);
  SerializedPayload result=run(action,providerParameters,params.properties);
  return payloadSerializer.deserialize(result,new DeserializeMap(){
    public ClassLoader getClassLoader(    ClassLoaderDetails classLoaderDetails){
      if (classLoaderDetails.uuid.equals(actionClassLoader.uuid)) {
        return serializationDetails.getResultClassLoader();
      }
      return null;
    }
  }
);
}
