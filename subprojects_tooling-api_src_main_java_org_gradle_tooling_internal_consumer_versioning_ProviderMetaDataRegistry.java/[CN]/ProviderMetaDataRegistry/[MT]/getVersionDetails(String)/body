{
  GradleVersion version=GradleVersion.version(providerVersion);
  if (version.compareTo(M3) < 0) {
    throw new IllegalArgumentException("Unexpected provider version requested.");
  }
  if (version.compareTo(M5) < 0) {
    return new M3VersionDetails(providerVersion);
  }
  if (version.compareTo(M8) < 0) {
    return new M5VersionDetails(providerVersion);
  }
  if (version.compareTo(V1_2_RC_1) < 0) {
    return new M8VersionDetails(providerVersion);
  }
  if (version.compareTo(V1_6_RC_1) < 0) {
    return new R12VersionDetails(providerVersion);
  }
  return new R16VersionDetails(providerVersion);
}
