{
synchronized (lock) {
    BroadcastDispatch<T> dispatcher=dispatchers.get(listenerClass);
    if (dispatcher == null) {
      dispatcher=new BroadcastDispatch<T>(listenerClass);
      dispatchers.put(listenerClass,dispatcher);
      for (      Object listener : allListeners) {
        maybeAddToDispatcher(dispatcher,listener);
      }
    }
    return dispatcher;
  }
}
