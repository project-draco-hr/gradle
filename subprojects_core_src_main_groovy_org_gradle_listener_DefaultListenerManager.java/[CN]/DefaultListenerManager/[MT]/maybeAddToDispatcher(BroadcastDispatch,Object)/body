{
  if (listener instanceof ClosureListener) {
    ClosureListener closureListener=(ClosureListener)listener;
    if (broadcaster.getType().isAssignableFrom(closureListener.listenerType)) {
      broadcaster.add(new ClosureBackedMethodInvocationDispatch(closureListener.method,closureListener.closure));
    }
  }
 else   if (broadcaster.getType().isInstance(listener)) {
    broadcaster.add(listener);
  }
}
