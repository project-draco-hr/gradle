{
  try {
    ModelSchema<PUBLICTYPE> schema=schemaStore.getSchema(publicType);
    TypeBuilderInternal<PUBLICTYPE> builder=new DefaultTypeBuilder<PUBLICTYPE>(getAnnotationType(),schema);
    invoker.invoke(builder);
    ModelType<?> implModelType=determineImplementationType(builder);
    registry.register(publicType,builder.getInternalViews(),implModelType,ruleDefinition.getDescriptor());
  }
 catch (  InvalidModelException e) {
    throw invalidModelRule(ruleDefinition,e);
  }
}
