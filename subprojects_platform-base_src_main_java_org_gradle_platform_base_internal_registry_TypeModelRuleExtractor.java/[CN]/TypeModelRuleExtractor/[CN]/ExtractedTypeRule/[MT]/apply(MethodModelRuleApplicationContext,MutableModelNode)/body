{
  ModelAction<?> action;
  try {
    ModelSchema<PUBLICTYPE> schema=schemaStore.getSchema(publicType);
    BUILDER builder=createBuilder(schema);
    ruleDefinition.getRuleInvoker().invoke(builder);
    ModelType<? extends BASEIMPL> implModelType=determineImplementationType(publicType,builder);
    action=createRegistrationAction(schema,builder,implModelType);
  }
 catch (  InvalidModelException e) {
    throw invalidModelRule(ruleDefinition,e);
  }
  context.getRegistry().configure(ModelActionRole.Defaults,action,target.getPath());
}
