{
  IvyModuleDescriptorInternal descriptorInternal=toIvyModuleDescriptorInternal(getDescriptor());
  XmlTransformer xmlTransformer=new XmlTransformer();
  xmlTransformer.addAction(descriptorInternal.getXmlAction());
  IvyDescriptorBuilder ivyDescriptorBuilder=new IvyDescriptorBuilder(publicationServices.getDescriptorFileModuleConverter(),descriptorInternal.getModule());
  for (  IvyConfiguration ivyConfiguration : descriptorInternal.getConfigurations()) {
    ivyDescriptorBuilder.addConfiguration(ivyConfiguration);
    for (    IvyArtifact ivyArtifact : ivyConfiguration.getArtifacts()) {
      ivyDescriptorBuilder.addArtifact(ivyConfiguration.getName(),ivyArtifact);
    }
  }
  for (  Dependency runtimeDependency : descriptorInternal.getRuntimeDependencies()) {
    ivyDescriptorBuilder.addDependency("runtime",runtimeDependency);
  }
  IvyModuleDescriptorWriter ivyModuleDescriptorWriter=publicationServices.getIvyModuleDescriptorWriter();
  ivyModuleDescriptorWriter.write(ivyDescriptorBuilder.build(),getDestination(),xmlTransformer);
}
