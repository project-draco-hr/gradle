{
  TransferListener transferListener=new TransferListener(){
    public void transferProgress(    TransferEvent evt){
      if (evt.getResource().isLocal()) {
        return;
      }
      if (evt.getEventType() == TransferEvent.TRANSFER_STARTED) {
        logger.info(Logging.LIFECYCLE_ALLWAYS,String.format("downloading (%s) %s",getLengthText(evt),evt.getResource().getName()));
      }
      if (evt.getEventType() == TransferEvent.TRANSFER_PROGRESS) {
        StandardOutputLogging.printToDefaultOut(".");
      }
      if (evt.getEventType() == TransferEvent.TRANSFER_COMPLETED || evt.getEventType() == TransferEvent.TRANSFER_ERROR) {
        StandardOutputLogging.printToDefaultOut(String.format("%n"));
      }
    }
  }
;
  for (  DependencyResolver dependencyResolver : allResolvers) {
    ivySettings.addResolver(dependencyResolver);
    ((DefaultRepositoryCacheManager)dependencyResolver.getRepositoryCacheManager()).setSettings(ivySettings);
    if (dependencyResolver instanceof RepositoryResolver) {
      ((RepositoryResolver)dependencyResolver).getRepository().addTransferListener(transferListener);
    }
  }
}
