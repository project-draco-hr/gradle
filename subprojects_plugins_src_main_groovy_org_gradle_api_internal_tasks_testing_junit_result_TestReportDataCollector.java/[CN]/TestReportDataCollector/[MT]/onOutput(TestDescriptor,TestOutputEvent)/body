{
  String className=testDescriptor.getClassName();
  if (className == null) {
    return;
  }
  TestDescriptorInternal testDescriptorInternal=(TestDescriptorInternal)testDescriptor;
  TestClassResult classResult=results.get(className);
  if (classResult == null) {
    classResult=new TestClassResult(internalIdCounter++,className,0);
    results.put(className,classResult);
  }
  String name=testDescriptor.getName();
  boolean isClassLevelOutput=name.equals(className);
  if (isClassLevelOutput) {
    outputWriter.onOutput(classResult.getId(),outputEvent);
  }
 else {
    outputWriter.onOutput(classResult.getId(),getInternalId(testDescriptorInternal),outputEvent);
  }
}
