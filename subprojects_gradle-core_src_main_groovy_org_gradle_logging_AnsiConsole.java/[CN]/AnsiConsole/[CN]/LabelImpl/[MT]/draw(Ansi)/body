{
  String prefix=StringUtils.getCommonPrefix(new String[]{text,displayedText});
  if (prefix.length() < displayedText.length()) {
    ansi.cursorLeft(displayedText.length() - prefix.length());
  }
  if (prefix.length() < text.length()) {
    ansi.a(text.substring(prefix.length()));
  }
  if (displayedText.length() > text.length()) {
    ansi.eraseLine(Ansi.Erase.FORWARD);
  }
  displayedText=text;
}
