{
  sources.all(new Action<FunctionalSourceSet>(){
    public void execute(    final FunctionalSourceSet functionalSourceSet){
      NamedDomainObjectFactory<? extends LanguageSourceSet> namedDomainObjectFactory=new NamedDomainObjectFactory<LanguageSourceSet>(){
        public LanguageSourceSet create(        String name){
          Class<? extends LanguageSourceSet> sourceSetImplementation=languageRegistration.getSourceSetImplementation();
          return instantiator.newInstance(sourceSetImplementation,name,functionalSourceSet,fileResolver);
        }
      }
;
      functionalSourceSet.registerFactory(languageRegistration.getSourceSetType(),namedDomainObjectFactory);
    }
  }
);
}
