{
  ModelSchema<T> modelSchema=getModelSchema(managedType,ruleDefinition);
  if (modelSchema.getKind().equals(ModelSchema.Kind.VALUE)) {
    throw new InvalidModelRuleDeclarationException(ruleDefinition.getDescriptor(),"a void returning model element creation rule cannot take a value type as the first parameter, which is the element being created. Return the value from the method.");
  }
  if (!modelSchema.getKind().isManaged()) {
    String description=String.format("a void returning model element creation rule has to take an instance of a managed type as the first argument");
    throw new InvalidModelRuleDeclarationException(ruleDefinition.getDescriptor(),description);
  }
  List<ModelReference<?>> bindings=ruleDefinition.getReferences();
  List<ModelReference<?>> inputs=bindings.subList(1,bindings.size());
  ModelRuleDescriptor descriptor=ruleDefinition.getDescriptor();
  BiAction<MutableModelNode,Inputs> initializer;
  ModelProjection projection;
  if (managedType.getConcreteClass().equals(ManagedSet.class)) {
    initializer=new ManagedModelRuleInvokerInstanceBackedTransformer<T>(modelSchema,modelInstantiator,ruleDefinition.getRuleInvoker(),descriptor,inputs);
    projection=new ManagedSetModelProjection<T>(managedType);
  }
 else {
    return ManagedModelInitializer.creator(descriptor,modelPath,modelSchema,schemaStore,modelInstantiator,proxyFactory,inputs,new BiAction<ModelView<? extends T>,Inputs>(){
      public void execute(      ModelView<? extends T> modelView,      Inputs inputs){
        T instance=modelView.getInstance();
        Object[] args=new Object[inputs.size() + 1];
        args[0]=instance;
        for (int i=0; i < inputs.size(); i++) {
          args[i + 1]=inputs.get(i,inputs.getReferences().get(i).getType()).getInstance();
        }
        ruleDefinition.getRuleInvoker().invoke(args);
      }
    }
);
  }
  return ModelCreators.of(ModelReference.of(modelPath,managedType),initializer).withProjection(projection).descriptor(descriptor).inputs(inputs).build();
}
