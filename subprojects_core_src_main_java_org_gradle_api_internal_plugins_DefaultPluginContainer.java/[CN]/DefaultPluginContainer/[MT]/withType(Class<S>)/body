{
  if (!Plugin.class.isAssignableFrom(type)) {
    throw new IllegalArgumentException(String.format("'%s' does not implement the Plugin interface.",type.getName()));
  }
  return super.withType(type);
}
