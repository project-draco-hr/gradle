{
  final Collector<FileVisitDetails> collector=collectParam();
  context.checking(new Expectations(){
{
      one(delegate).visitSpec(spec);
      one(delegate).visitFile(with(notNullValue(FileVisitDetails.class)));
      will(collector);
    }
  }
);
  visitor.visitSpec(spec);
  visitor.visitFile(details);
  return collector;
}
