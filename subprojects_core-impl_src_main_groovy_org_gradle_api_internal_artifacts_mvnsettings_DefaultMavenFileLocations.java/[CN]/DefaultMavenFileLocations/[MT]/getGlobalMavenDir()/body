{
  String m2Home=System.getenv("M2_HOME");
  if (m2Home == null) {
    m2Home=System.getProperty("M2_HOME");
    if (m2Home == null) {
      return null;
    }
    DeprecationLogger.nagUserOfDeprecated("Found defined M2_HOME system property. Handling M2_HOME system property","Please use the M2_HOME environment variable instead");
  }
  return new File(m2Home);
}
