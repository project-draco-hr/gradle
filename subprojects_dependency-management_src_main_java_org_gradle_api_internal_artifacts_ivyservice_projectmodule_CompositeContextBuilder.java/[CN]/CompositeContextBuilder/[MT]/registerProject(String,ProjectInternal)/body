{
  LocalComponentRegistry localComponentRegistry=project.getServices().get(LocalComponentRegistry.class);
  ProjectComponentIdentifier originalIdentifier=DefaultProjectComponentIdentifier.newId(project.getPath());
  DefaultLocalComponentMetadata originalComponent=(DefaultLocalComponentMetadata)localComponentRegistry.getComponent(originalIdentifier);
  ProjectComponentIdentifier componentIdentifier=new DefaultProjectComponentIdentifier(createExternalProjectPath(buildName,project.getPath()));
  LocalComponentMetadata compositeComponent=createCompositeCopy(buildName,componentIdentifier,originalComponent);
  context.register(compositeComponent.getId().getModule(),componentIdentifier,compositeComponent,project.getProjectDir());
  for (  ComponentArtifactMetadata artifactMetaData : localComponentRegistry.getAdditionalArtifacts(originalIdentifier)) {
    context.registerAdditionalArtifact(componentIdentifier,createCompositeCopy(componentIdentifier,artifactMetaData));
  }
}
