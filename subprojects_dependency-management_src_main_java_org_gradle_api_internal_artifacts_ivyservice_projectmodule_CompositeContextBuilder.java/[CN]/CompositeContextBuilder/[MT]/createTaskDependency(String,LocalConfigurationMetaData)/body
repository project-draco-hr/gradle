{
  final String taskName=createSyntheticTaskName(projectPath,configuration.getName());
  final Set<String> targetTaskNames=determineTargetTaskNames(configuration);
  return new TaskDependency(){
    @Override public Set<? extends Task> getDependencies(    Task task){
      TaskContainer tasks=task.getProject().getRootProject().getTasks();
      Task depTask=tasks.findByName(taskName);
      if (depTask == null) {
        depTask=tasks.create(taskName,CompositeProjectBuild.class,new Action<CompositeProjectBuild>(){
          @Override public void execute(          CompositeProjectBuild buildTask){
            buildTask.projectPath=projectPath;
            buildTask.taskNames=targetTaskNames;
          }
        }
);
      }
      return Collections.singleton(depTask);
    }
  }
;
}
