{
  if (isNoDefaultJvmArgs()) {
    return super.getGradleOpts();
  }
 else {
    List<String> jvmArgs=new ArrayList<String>(4);
    jvmArgs.add("-XX:MaxPermSize=256m");
    jvmArgs.add("-XX:+HeapDumpOnOutOfMemoryError");
    if (JavaVersion.current().isJava5()) {
      jvmArgs.add("-XX:+CMSPermGenSweepingEnabled");
      jvmArgs.add("-Dcom.sun.management.jmxremote");
    }
    String quotedArgs=join(" ",collect(jvmArgs,new Transformer<String,String>(){
      public String transform(      String input){
        return String.format("'%s'",input);
      }
    }
));
    List<String> gradleOpts=new ArrayList<String>(super.getGradleOpts());
    gradleOpts.add("-Dorg.gradle.jvmArgs=" + quotedArgs);
    return gradleOpts;
  }
}
