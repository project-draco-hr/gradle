{
  try {
    ZipArchiveEntry archiveEntry=new ZipArchiveEntry(fileDetails.getRelativePath().getPathString());
    archiveEntry.setMethod(ZipArchiveEntry.DEFLATED);
    archiveEntry.setTime(fileDetails.getLastModified());
    zipOutStr.putArchiveEntry(archiveEntry);
    fileDetails.copyTo(zipOutStr);
    zipOutStr.closeArchiveEntry();
  }
 catch (  Exception e) {
    throw new GradleException(String.format("Could not add %s to ZIP '%s'.",fileDetails,zipFile),e);
  }
}
