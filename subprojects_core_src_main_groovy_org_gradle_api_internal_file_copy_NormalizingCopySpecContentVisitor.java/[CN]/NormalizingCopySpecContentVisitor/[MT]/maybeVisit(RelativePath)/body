{
  if (path == null || path.getParent() == null || !visitedDirs.add(path)) {
    return;
  }
  maybeVisit(path.getParent());
  FileCopyDetails dir=pendingDirs.remove(path);
  if (dir == null) {
    dir=new FileCopyDetailsImpl(path);
  }
  getVisitor().visit(dir);
}
