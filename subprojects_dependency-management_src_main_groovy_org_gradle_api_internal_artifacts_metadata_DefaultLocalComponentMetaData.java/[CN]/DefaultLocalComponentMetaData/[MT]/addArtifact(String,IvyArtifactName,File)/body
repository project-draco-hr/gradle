{
  Artifact ivyArtifact=new MDArtifact(moduleDescriptor,artifact.getName(),artifact.getType(),artifact.getExtension(),null,artifact.getAttributes());
  DefaultLocalArtifactMetaData artifactMetaData=new DefaultLocalArtifactMetaData(componentIdentifier,id.toString(),ivyArtifact,file);
  if (artifactsById.containsKey(artifactMetaData.getId())) {
    artifactMetaData=artifactsById.get(artifactMetaData.getId());
  }
 else {
    artifactsById.put(artifactMetaData.id,artifactMetaData);
    artifactsByIvyId.put(ivyArtifact.getId(),artifactMetaData);
  }
  moduleDescriptor.addArtifact(configuration,ivyArtifact);
  artifactsByConfig.put(configuration,artifactMetaData);
  ((MDArtifact)artifactMetaData.artifact).addConfiguration(configuration);
}
