{
  ComponentMetadataDetails details=instantiator.newInstance(ComponentMetadataDetailsAdapter.class,metadata);
  processAllRules(metadata,details);
  if (!metadata.getStatusScheme().contains(metadata.getStatus())) {
    throw new ModuleVersionResolveException(metadata.getId(),String.format("Unexpected status '%s' specified for %s. Expected one of: %s",metadata.getStatus(),metadata.getComponentId().getDisplayName(),metadata.getStatusScheme()));
  }
}
