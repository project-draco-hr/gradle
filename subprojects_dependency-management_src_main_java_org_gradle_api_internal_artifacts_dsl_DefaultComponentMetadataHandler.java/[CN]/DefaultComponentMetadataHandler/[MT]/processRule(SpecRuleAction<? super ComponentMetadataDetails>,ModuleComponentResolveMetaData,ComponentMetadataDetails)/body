{
  if (!specRuleAction.getSpec().isSatisfiedBy(details)) {
    return;
  }
  List<Object> inputs=Lists.newArrayList();
  for (  Class<?> inputType : specRuleAction.getAction().getInputTypes()) {
    if (inputType == IvyModuleDescriptor.class) {
      if (!(metadata instanceof IvyModuleResolveMetaData)) {
        return;
      }
      IvyModuleResolveMetaData ivyMetadata=(IvyModuleResolveMetaData)metadata;
      inputs.add(new DefaultIvyModuleDescriptor(ivyMetadata.getExtraInfo(),ivyMetadata.getBranch(),ivyMetadata.getStatus()));
      continue;
    }
    throw new IllegalStateException();
  }
  try {
    specRuleAction.getAction().execute(details,inputs);
  }
 catch (  Exception e) {
    throw new InvalidUserCodeException(String.format("Could not apply component metadata rule for %s.",details.getId()),e);
  }
}
