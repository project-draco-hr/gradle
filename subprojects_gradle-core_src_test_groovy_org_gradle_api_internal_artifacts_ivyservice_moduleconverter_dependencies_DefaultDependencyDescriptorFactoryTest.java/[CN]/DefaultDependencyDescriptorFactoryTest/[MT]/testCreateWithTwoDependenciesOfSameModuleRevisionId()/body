{
  String otherDependencyConfiguration=TEST_DEP_CONF + "X";
  DefaultExternalModuleDependency moduleDependency=((DefaultExternalModuleDependency)setUpExternalDependency(new DefaultExternalModuleDependency("org.gradle","gradle-core","1.0",TEST_DEP_CONF))).setChanging(true);
  DefaultExternalModuleDependency moduleDependency2=((DefaultExternalModuleDependency)setUpExternalDependency(new DefaultExternalModuleDependency("org.gradle","gradle-core","1.0",otherDependencyConfiguration))).setChanging(true);
  dependencyDescriptorFactory.addDependencyDescriptor(TEST_CONF,moduleDescriptor,moduleDependency);
  dependencyDescriptorFactory.addDependencyDescriptor(TEST_CONF,moduleDescriptor,moduleDependency2);
  assertThat(moduleDescriptor.getDependencies().length,equalTo(1));
  DefaultDependencyDescriptor dependencyDescriptor=(DefaultDependencyDescriptor)moduleDescriptor.getDependencies()[0];
  assertThat(dependencyDescriptor.getDependencyConfigurations(TEST_CONF),Matchers.hasItemInArray(TEST_DEP_CONF));
  assertThat(dependencyDescriptor.getDependencyConfigurations(TEST_CONF),Matchers.hasItemInArray(otherDependencyConfiguration));
  assertThat(dependencyDescriptor.getDependencyConfigurations(TEST_CONF).length,equalTo(2));
  assertEquals(moduleDependency.isChanging(),dependencyDescriptor.isChanging());
}
