{
  List<String> taskPaths=new ArrayList<String>();
  for (  EntryPoint task : entryPoints) {
    if (task instanceof Task) {
      taskPaths.add(((Task)task).getPath());
    }
 else     if (task instanceof TaskSelector) {
      taskPaths.add(task.getName());
      File selectorDir=((TaskSelector)task).getProjectDir();
      ConnectionParameters origConnectionParameters=connectionParamsBuilder.build();
      if (!selectorDir.equals(origConnectionParameters.getProjectDir())) {
        connectionParamsBuilder.setProjectDir(selectorDir);
        if (Boolean.FALSE.equals(connectionParamsBuilder.build().isSearchUpwards())) {
          connectionParamsBuilder.setSearchUpwards(true);
        }
      }
    }
 else {
      throw new GradleException("Only Task or TaskSelector instances are supported.");
    }
  }
  operationParamsBuilder.setTasks(taskPaths);
  return this;
}
