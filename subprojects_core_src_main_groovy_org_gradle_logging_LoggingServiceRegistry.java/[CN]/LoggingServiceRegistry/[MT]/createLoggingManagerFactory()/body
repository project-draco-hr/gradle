{
  OutputEventRenderer renderer=get(OutputEventRenderer.class);
  if (!isEmbedded) {
    DefaultLoggingConfigurer compositeConfigurer=new DefaultLoggingConfigurer(renderer);
    compositeConfigurer.add(new LogbackLoggingConfigurer(renderer));
    compositeConfigurer.add(new JavaUtilLoggingConfigurer());
    return new DefaultLoggingManagerFactory(compositeConfigurer,renderer,getStdOutLoggingSystem(),getStdErrLoggingSystem());
  }
 else {
    return new EmbeddedLoggingManagerFactory(renderer);
  }
}
