{
  if (path == null) {
    throw new IllegalStateException("'path' is required");
  }
  if (subEntries == null) {
    throw new IllegalStateException("'subEntries' is required");
  }
  if (directory && !subEntries.isEmpty()) {
    throw new IllegalStateException("directory entry cannot have sub entries");
  }
  if (sortPath == null) {
    sortPath=path;
  }
  return new ArchiveEntry(sortPath,path,directory,size,crc,subEntries);
}
