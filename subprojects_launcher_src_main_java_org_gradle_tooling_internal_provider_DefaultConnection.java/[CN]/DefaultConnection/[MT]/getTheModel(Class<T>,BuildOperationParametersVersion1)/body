{
  ProviderOperationParameters adaptedParameters=new AdaptedOperationParameters(parameters);
  if (type == InternalBuildEnvironment.class) {
    DaemonClientServices services=daemonClientServices(adaptedParameters);
    DaemonContext context=services.get(DaemonContext.class);
    DefaultBuildEnvironment out=new DefaultBuildEnvironment(GradleVersion.current().getVersion(),context.getJavaHome(),context.getDaemonOpts());
    return type.cast(out);
  }
  DelegatingBuildModelAction<T> action=new DelegatingBuildModelAction<T>(type);
  return run(action,adaptedParameters);
}
