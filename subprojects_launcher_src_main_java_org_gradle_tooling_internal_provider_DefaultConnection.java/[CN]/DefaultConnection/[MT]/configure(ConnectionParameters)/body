{
  ProviderConnectionParameters providerConnectionParameters=new ProtocolToModelAdapter().adapt(ProviderConnectionParameters.class,parameters);
  File gradleUserHomeDir=providerConnectionParameters.getGradleUserHomeDir(null);
  if (gradleUserHomeDir == null) {
    gradleUserHomeDir=new BuildLayoutParameters().getGradleUserHomeDir();
  }
  initializeServices(gradleUserHomeDir);
  connection.configure(providerConnectionParameters);
}
