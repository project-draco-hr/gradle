{
  if (type == InternalBuildEnvironment.class) {
    DaemonParameters daemonParameters=init(parameters);
    DefaultBuildEnvironment out=new DefaultBuildEnvironment(GradleVersion.current().getVersion(),daemonParameters.getEffectiveJavaHome(),daemonParameters.getEffectiveJvmArgs());
    return type.cast(out);
  }
  DelegatingBuildModelAction<T> action=new DelegatingBuildModelAction<T>(type);
  return run(action,parameters);
}
