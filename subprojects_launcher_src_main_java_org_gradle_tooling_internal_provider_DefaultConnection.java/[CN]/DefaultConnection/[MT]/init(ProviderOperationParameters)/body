{
  slf4jLoggingConfigurer.configure(operationParameters.getProviderLogLevel());
  File gradleUserHomeDir=GUtil.elvis(operationParameters.getGradleUserHomeDir(),StartParameter.DEFAULT_GRADLE_USER_HOME);
  DaemonParameters daemonParams=new DaemonParameters();
  boolean searchUpwards=operationParameters.isSearchUpwards() != null ? operationParameters.isSearchUpwards() : true;
  daemonParams.configureFromBuildDir(operationParameters.getProjectDir(),searchUpwards);
  daemonParams.configureFromGradleUserHome(gradleUserHomeDir);
  daemonParams.configureFromSystemProperties(System.getProperties());
  List<String> defaultJvmArgs=daemonParams.getAllJvmArgs();
  daemonParams.setJvmArgs(operationParameters.getJvmArguments(defaultJvmArgs));
  File defaultJavaHome=daemonParams.getEffectiveJavaHome();
  daemonParams.setJavaHome(operationParameters.getJavaHome(defaultJavaHome));
  if (operationParameters.getDaemonMaxIdleTimeValue() != null && operationParameters.getDaemonMaxIdleTimeUnits() != null) {
    int idleTimeout=(int)operationParameters.getDaemonMaxIdleTimeUnits().toMillis(operationParameters.getDaemonMaxIdleTimeValue());
    daemonParams.setIdleTimeout(idleTimeout);
  }
  return daemonParams;
}
