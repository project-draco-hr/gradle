{
  Class<? extends R> implClass=classGenerator.generate(type.getConcreteClass(),properties);
  final ModelManagedImplStructSchema<R> schema=ModelSchema.struct(type,properties,aspects,implClass,null,new Function<ModelManagedImplStructSchema<R>,NodeInitializer>(){
    @Override public NodeInitializer apply(    ModelManagedImplStructSchema<R> schema){
      return new ManagedModelInitializer<R>(schema,store);
    }
  }
);
  extractionContext.addValidator(new Action<ModelSchemaExtractionContext<R>>(){
    @Override public void execute(    ModelSchemaExtractionContext<R> validatorModelSchemaExtractionContext){
      ensureCanBeInstantiated(extractionContext,schema);
    }
  }
);
  return schema;
}
