{
  final ZipOutputStream zipOutStr;
  try {
    zipOutStr=compressor.createArchiveOutputStream(zipFile);
  }
 catch (  Exception e) {
    throw new GradleException(String.format("Could not create ZIP '%s'.",zipFile),e);
  }
  try {
    stream.process(new StreamAction(zipOutStr));
  }
 catch (  Exception e) {
    UncheckedException.throwAsUncheckedException(e);
  }
 finally {
    IOUtils.closeQuietly(zipOutStr);
  }
  return new SimpleWorkResult(true);
}
