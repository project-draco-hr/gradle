{
  final ZipOutputStream zipOutStr;
  try {
    zipOutStr=compressor.createArchiveOutputStream(zipFile);
  }
 catch (  Exception e) {
    throw new GradleException(String.format("Could not create ZIP '%s'.",zipFile),e);
  }
  IoActions.withResource(zipOutStr,new Action<ZipOutputStream>(){
    public void execute(    ZipOutputStream outputStream){
      stream.process(new StreamAction(outputStream));
    }
  }
);
  return new SimpleWorkResult(true);
}
