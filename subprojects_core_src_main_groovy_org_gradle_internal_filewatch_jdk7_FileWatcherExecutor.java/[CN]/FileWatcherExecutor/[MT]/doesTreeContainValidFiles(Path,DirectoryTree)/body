{
  final Spec<FileTreeElement> fileSpec=tree.getPatterns().getAsSpec();
  final Path rootPath=dirToPath(tree.getDir());
  final AtomicBoolean containsValidFiles=new AtomicBoolean(false);
  Files.walkFileTree(subRootPath,new SimpleFileVisitor<Path>(){
    @Override public FileVisitResult preVisitDirectory(    Path dir,    BasicFileAttributes attrs) throws IOException {
      if (containsValidFiles.get()) {
        return FileVisitResult.SKIP_SUBTREE;
      }
 else {
        return FileVisitResult.CONTINUE;
      }
    }
    @Override public FileVisitResult visitFile(    Path file,    BasicFileAttributes attrs) throws IOException {
      FileTreeElement fileTreeElement=toFileTreeElement(file,rootPath.relativize(file));
      if (fileSpec.isSatisfiedBy(fileTreeElement)) {
        containsValidFiles.set(true);
        return FileVisitResult.SKIP_SIBLINGS;
      }
 else {
        return FileVisitResult.CONTINUE;
      }
    }
  }
);
  return containsValidFiles.get();
}
