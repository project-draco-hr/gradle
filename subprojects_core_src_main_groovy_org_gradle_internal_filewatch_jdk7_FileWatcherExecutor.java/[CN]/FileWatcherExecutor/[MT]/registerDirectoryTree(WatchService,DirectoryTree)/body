{
  final Path treePath=dirToPath(tree.getDir());
  if (supportsWatchingSubTree()) {
    registerSinglePath(watchService,treePath);
    pathToDirectoryTree.put(treePath,tree);
  }
 else {
    registerSubTree(watchService,treePath,tree);
  }
}
