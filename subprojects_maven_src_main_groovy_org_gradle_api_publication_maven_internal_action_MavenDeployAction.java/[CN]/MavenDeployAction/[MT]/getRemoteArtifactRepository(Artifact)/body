{
  RemoteRepository deploymentRepository=remoteRepository;
  if (artifact.isSnapshot() && remoteSnapshotRepository != null) {
    deploymentRepository=remoteSnapshotRepository;
  }
  if (deploymentRepository == null) {
    throw new GradleException("Must specify a repository for deployment");
  }
  initWagonManagerWithRepositorySettings("remote",deploymentRepository);
  return new DefaultArtifactRepository("remote",deploymentRepository.getUrl(),new DefaultRepositoryLayout(),uniqueVersion);
}
