{
  context.checking(new Expectations(){
{
      allowing(dependencyMetaDataProviderMock).getInternalRepository();
      will(returnValue(internalRepositoryDummy));
      allowing(dependencyMetaDataProviderMock).getGradleUserHomeDir();
      will(returnValue(cacheParentDirDummy));
      allowing(dependencyMetaDataProviderMock).getModuleForResolve();
      will(returnValue(moduleForResolveDummy));
      allowing(dependencyMetaDataProviderMock).getModuleForPublicDescriptor();
      will(returnValue(moduleForPublicDescriptorDummy));
      allowing(ivyService.getSettingsConverter()).convertForPublish(publishResolversDummy,cacheParentDirDummy,internalRepositoryDummy);
      will(returnValue(ivySettingsDummy));
      allowing(setUpIvyFactory(ivySettingsDummy,ivyService)).getPublishEngine();
      will(returnValue(publishEngineDummy));
      allowing(ivyService.getPublishModuleDescriptorConverter()).convert(configurations,moduleForResolveDummy,ivySettingsDummy);
      will(returnValue(moduleDescriptorMock));
    }
  }
);
}
