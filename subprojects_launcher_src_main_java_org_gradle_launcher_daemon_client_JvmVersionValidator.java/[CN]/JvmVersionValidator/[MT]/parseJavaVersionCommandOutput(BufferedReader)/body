{
  try {
    String versionStr=reader.readLine();
    while (versionStr != null) {
      Matcher matcher=Pattern.compile("java version \"(.+?)\"").matcher(versionStr);
      if (matcher.matches()) {
        return JavaVersion.toVersion(matcher.group(1));
      }
      versionStr=reader.readLine();
    }
  }
 catch (  IOException e) {
    throw new org.gradle.api.UncheckedIOException(e);
  }
  throw new RuntimeException("Could not determine Java version.");
}
