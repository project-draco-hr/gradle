{
  String key=toCacheKey(libClasspath);
  CachedClassLoader loader=new CachedClassLoader(key,classLoader);
  CacheEntry cacheEntry=new CacheEntry(key,loader);
  Cleanup cleanup=new Cleanup(key,libClasspath,loader,finalizerThread.getReferenceQueue(),classLoader,gradleToIsolatedLeakPrevention,antToGradleLeakPrevention);
  finalizerThread.putCleanup(key,cleanup);
  cacheEntries.put(key,cacheEntry);
  return loader;
}
