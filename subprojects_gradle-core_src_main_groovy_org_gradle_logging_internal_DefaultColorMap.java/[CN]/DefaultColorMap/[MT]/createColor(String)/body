{
  String colorSpec=System.getProperty(String.format("org.gradle.color.%s",name),defaults.get(name));
  if (colorSpec != null) {
    if (colorSpec.equalsIgnoreCase(BOLD)) {
      String terminalProgram=System.getenv("TERM_PROGRAM");
      if (terminalProgram != null && terminalProgram.equals("iTerm.app")) {
        return noDecoration;
      }
      return bold;
    }
    Ansi.Color ansiColor=Ansi.Color.valueOf(colorSpec.toUpperCase());
    if (ansiColor != DEFAULT) {
      return new ForegroundColor(ansiColor);
    }
  }
  return noDecoration;
}
