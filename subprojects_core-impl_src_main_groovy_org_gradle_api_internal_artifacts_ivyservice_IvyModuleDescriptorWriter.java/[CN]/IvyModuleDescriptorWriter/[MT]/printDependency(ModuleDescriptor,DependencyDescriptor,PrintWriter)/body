{
  out.print("<dependency");
  out.print(" org=\"" + XMLHelper.escape(dep.getDependencyRevisionId().getOrganisation()) + "\"");
  out.print(" name=\"" + XMLHelper.escape(dep.getDependencyRevisionId().getName()) + "\"");
  if (dep.getDependencyRevisionId().getBranch() != null) {
    out.print(" branch=\"" + XMLHelper.escape(dep.getDependencyRevisionId().getBranch()) + "\"");
  }
  out.print(" rev=\"" + XMLHelper.escape(dep.getDependencyRevisionId().getRevision()) + "\"");
  if (!dep.getDynamicConstraintDependencyRevisionId().equals(dep.getDependencyRevisionId())) {
    if (dep.getDynamicConstraintDependencyRevisionId().getBranch() != null) {
      out.print(" branchConstraint=\"" + XMLHelper.escape(dep.getDynamicConstraintDependencyRevisionId().getBranch()) + "\"");
    }
    out.print(" revConstraint=\"" + XMLHelper.escape(dep.getDynamicConstraintDependencyRevisionId().getRevision()) + "\"");
  }
  if (dep.isForce()) {
    out.print(" force=\"" + dep.isForce() + "\"");
  }
  if (dep.isChanging()) {
    out.print(" changing=\"" + dep.isChanging() + "\"");
  }
  if (!dep.isTransitive()) {
    out.print(" transitive=\"" + dep.isTransitive() + "\"");
  }
  out.print(" conf=\"");
  String[] modConfs=dep.getModuleConfigurations();
  for (int j=0; j < modConfs.length; j++) {
    String[] depConfs=dep.getDependencyConfigurations(modConfs[j]);
    out.print(XMLHelper.escape(modConfs[j]) + "->");
    for (int k=0; k < depConfs.length; k++) {
      out.print(XMLHelper.escape(depConfs[k]));
      if (k + 1 < depConfs.length) {
        out.print(",");
      }
    }
    if (j + 1 < modConfs.length) {
      out.print(";");
    }
  }
  out.print("\"");
  printExtraAttributes(dep,out," ");
  DependencyArtifactDescriptor[] depArtifacts=dep.getAllDependencyArtifacts();
  if (depArtifacts.length > 0) {
    out.println(">");
  }
  printDependencyArtefacts(md,out,depArtifacts);
  IncludeRule[] includes=dep.getAllIncludeRules();
  if (includes.length > 0 && depArtifacts.length == 0) {
    out.println(">");
  }
  printDependencyIncludeRules(md,out,includes);
  ExcludeRule[] excludes=dep.getAllExcludeRules();
  if (excludes.length > 0 && includes.length == 0 && depArtifacts.length == 0) {
    out.println(">");
  }
  printDependencyExcludeRules(md,out,excludes);
  if (includes.length + excludes.length + depArtifacts.length == 0) {
    out.println("/>");
  }
 else {
    out.println("\t\t</dependency>");
  }
}
