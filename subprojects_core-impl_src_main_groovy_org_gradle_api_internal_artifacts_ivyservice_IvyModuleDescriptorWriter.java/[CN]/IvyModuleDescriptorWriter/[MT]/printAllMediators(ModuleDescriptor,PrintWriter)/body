{
  Map mediators=md.getAllDependencyDescriptorMediators().getAllRules();
  for (Iterator iterator=mediators.entrySet().iterator(); iterator.hasNext(); ) {
    Map.Entry mediatorRule=(Map.Entry)iterator.next();
    MapMatcher matcher=(MapMatcher)mediatorRule.getKey();
    DependencyDescriptorMediator mediator=(DependencyDescriptorMediator)mediatorRule.getValue();
    if (mediator instanceof OverrideDependencyDescriptorMediator) {
      OverrideDependencyDescriptorMediator oddm=(OverrideDependencyDescriptorMediator)mediator;
      out.print("\t\t<override");
      out.print(" org=\"" + XMLHelper.escape((String)matcher.getAttributes().get(IvyPatternHelper.ORGANISATION_KEY)) + "\"");
      out.print(" module=\"" + XMLHelper.escape((String)matcher.getAttributes().get(IvyPatternHelper.MODULE_KEY)) + "\"");
      out.print(" matcher=\"" + XMLHelper.escape(matcher.getPatternMatcher().getName()) + "\"");
      if (oddm.getBranch() != null) {
        out.print(" branch=\"" + XMLHelper.escape(oddm.getBranch()) + "\"");
      }
      if (oddm.getVersion() != null) {
        out.print(" rev=\"" + XMLHelper.escape(oddm.getVersion()) + "\"");
      }
      out.println("/>");
    }
 else {
      Message.verbose("ignoring unhandled DependencyDescriptorMediator: " + mediator.getClass());
    }
  }
}
