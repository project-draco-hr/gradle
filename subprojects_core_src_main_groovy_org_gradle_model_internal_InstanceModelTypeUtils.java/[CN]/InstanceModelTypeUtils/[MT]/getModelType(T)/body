{
  if (instance instanceof ManagedInstance) {
    return Cast.uncheckedCast(((ManagedInstance)instance).getManagedType());
  }
  Class<?> declaredType=new DslObject(instance).getDeclaredType();
  return Cast.uncheckedCast(ModelType.of(declaredType));
}
