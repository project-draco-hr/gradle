{
  antJUnitExecute=new AntJUnitExecute();
  antJUnitReport=new AntJUnitReport();
  options=new JUnitOptions(this);
  final Set<Class<? extends Plugin>> appliedPlugins=project.getAppliedPlugins();
  final JunitForkOptions forkOptions=options.getForkOptions();
  if (appliedPlugins != null && !appliedPlugins.contains(GroovyPlugin.class)) {
    options.setFork(true);
    forkOptions.setForkMode(ForkMode.PER_TEST);
    forkOptions.setDir(project.getProjectDir());
  }
 else {
    forkOptions.setForkMode(ForkMode.ONCE);
  }
}
