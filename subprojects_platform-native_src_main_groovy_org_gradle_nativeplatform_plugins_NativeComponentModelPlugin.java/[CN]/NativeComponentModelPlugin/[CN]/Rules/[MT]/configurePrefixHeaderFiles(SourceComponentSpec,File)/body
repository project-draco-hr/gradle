{
  componentSpec.getSources().withType(DependentSourceSetInternal.class).afterEach(new Action<DependentSourceSetInternal>(){
    @Override public void execute(    DependentSourceSetInternal dependentSourceSet){
      if (dependentSourceSet.getPreCompiledHeader() != null) {
        String prefixHeaderDirName=String.format("tmp/%s/%s/prefixHeaders",componentSpec.getName(),dependentSourceSet.getName());
        File prefixHeaderDir=new File(buildDir,prefixHeaderDirName);
        File prefixHeaderFile=new File(prefixHeaderDir,"prefix-headers.h");
        dependentSourceSet.setPrefixHeaderFile(prefixHeaderFile);
      }
    }
  }
);
}
