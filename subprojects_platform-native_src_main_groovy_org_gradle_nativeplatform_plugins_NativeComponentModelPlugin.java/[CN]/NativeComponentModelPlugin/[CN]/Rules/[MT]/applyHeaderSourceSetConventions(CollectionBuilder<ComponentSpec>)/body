{
  componentSpecs.afterEach(new Action<ComponentSpec>(){
    @Override public void execute(    ComponentSpec componentSpec){
      DomainObjectSet<LanguageSourceSet> functionalSourceSet=componentSpec.getSource();
      for (      HeaderExportingSourceSet headerSourceSet : functionalSourceSet.withType(HeaderExportingSourceSet.class)) {
        if (headerSourceSet.getExportedHeaders().getSrcDirs().isEmpty()) {
          headerSourceSet.getExportedHeaders().srcDir(String.format("src/%s/headers",componentSpec.getName()));
        }
        headerSourceSet.getImplicitHeaders().setSrcDirs(headerSourceSet.getSource().getSrcDirs());
        headerSourceSet.getImplicitHeaders().include("**/*.h");
      }
    }
  }
);
}
