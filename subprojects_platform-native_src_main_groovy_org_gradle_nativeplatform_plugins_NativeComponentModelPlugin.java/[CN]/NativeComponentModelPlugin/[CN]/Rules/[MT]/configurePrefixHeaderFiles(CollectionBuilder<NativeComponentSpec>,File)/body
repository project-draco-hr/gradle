{
  componentSpecs.afterEach(new Action<NativeComponentSpec>(){
    @Override public void execute(    NativeComponentSpec componentSpec){
      for (      DependentSourceSetInternal dependentSourceSet : componentSpec.getSource().withType(DependentSourceSetInternal.class)) {
        if (dependentSourceSet.getPreCompiledHeader() != null) {
          String prefixHeaderDirName=String.format("tmp/%s/%s/prefixHeaders",componentSpec.getName(),dependentSourceSet.getName());
          File prefixHeaderDir=new File(buildDir,prefixHeaderDirName);
          final File prefixHeaderFile=new File(prefixHeaderDir,"prefix-headers.h");
          dependentSourceSet.setPrefixHeaderFile(prefixHeaderFile);
        }
      }
    }
  }
);
}
