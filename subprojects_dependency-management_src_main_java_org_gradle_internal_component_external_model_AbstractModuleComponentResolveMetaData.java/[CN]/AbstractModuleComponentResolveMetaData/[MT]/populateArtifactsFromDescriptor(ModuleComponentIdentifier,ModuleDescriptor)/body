{
  Map<Artifact,ModuleComponentArtifactMetaData> artifactToMetaData=Maps.newLinkedHashMap();
  for (  Artifact descriptorArtifact : descriptor.getAllArtifacts()) {
    IvyArtifactName artifactName=DefaultIvyArtifactName.forIvyArtifact(descriptorArtifact);
    ModuleComponentArtifactMetaData artifact=new DefaultModuleComponentArtifactMetaData(componentId,artifactName);
    artifactToMetaData.put(descriptorArtifact,artifact);
  }
  Multimap<String,ModuleComponentArtifactMetaData> artifactsByConfig=LinkedHashMultimap.create();
  for (  String configuration : descriptor.getConfigurationsNames()) {
    Artifact[] configArtifacts=descriptor.getArtifacts(configuration);
    for (    Artifact configArtifact : configArtifacts) {
      artifactsByConfig.put(configuration,artifactToMetaData.get(configArtifact));
    }
  }
  return artifactsByConfig;
}
