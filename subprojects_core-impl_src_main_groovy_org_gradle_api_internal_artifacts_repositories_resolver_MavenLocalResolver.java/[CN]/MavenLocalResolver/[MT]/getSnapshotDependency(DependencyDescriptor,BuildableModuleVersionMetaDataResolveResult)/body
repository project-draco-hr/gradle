{
  final ModuleRevisionId dependencyRevisionId=dd.getDependencyRevisionId();
  final String uniqueSnapshotVersion=findUniqueSnapshotVersion(dependencyRevisionId);
  if (uniqueSnapshotVersion != null) {
    DependencyDescriptor enrichedDependencyDescriptor=enrichDependencyDescriptorWithSnapshotVersionInfo(dd,dependencyRevisionId,uniqueSnapshotVersion);
    resolveIfArtifactPresent(enrichedDependencyDescriptor,result);
    if (result.getState() == BuildableModuleVersionMetaDataResolveResult.State.Resolved) {
      result.setModuleSource(new TimestampedModuleSource(uniqueSnapshotVersion));
    }
  }
 else {
    resolveIfArtifactPresent(dd,result);
  }
}
