{
  int minBatchSize=maxBufferSize / 2;
  int grantablePermits=maxBufferSize - queue.size() - remainingIncomingCredits + remainingOutgoingCredits;
  if (grantablePermits >= minBatchSize) {
    context.dispatchOutgoing(new MessageCredits(grantablePermits));
    remainingIncomingCredits+=grantablePermits;
  }
}
