{
  delegate.listModuleVersions(dependency,result);
switch (result.getState()) {
case Listed:
    ModuleIdentifier moduleId=new DefaultModuleIdentifier(dependency.getRequested().getGroup(),dependency.getRequested().getName());
  ModuleVersions versionList=result.getVersions();
moduleVersionsCache.cacheModuleVersionList(delegate,moduleId,versionList);
break;
case Failed:
break;
default :
throw new IllegalStateException("Unexpected state on listModuleVersions: " + result.getState());
}
}
