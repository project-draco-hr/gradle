{
  delegate.getDependency(ForceChangeDependencyDescriptor.forceChangingFlag(dependencyDescriptor,true),result);
switch (result.getState()) {
case Missing:
    moduleDescriptorCache.cacheModuleDescriptor(delegate,dependencyDescriptor.getDependencyRevisionId(),null,dependencyDescriptor.isChanging());
  break;
case Resolved:
moduleResolutionCache.cacheModuleResolution(delegate,dependencyDescriptor.getDependencyRevisionId(),result.getId());
final ModuleDescriptorCache.CachedModuleDescriptor cachedModuleDescriptor=moduleDescriptorCache.cacheModuleDescriptor(delegate,result.getId(),result.getDescriptor(),isChangingDependency(dependencyDescriptor,result));
result.resolved(result.getDescriptor(),result.isChanging(),new CachingModuleSource(cachedModuleDescriptor.getDescriptorHash(),cachedModuleDescriptor.isChangingModule()));
break;
case Failed:
break;
default :
throw new IllegalStateException("Unexpected resolve state: " + result.getState());
}
}
