{
  Set<MavenDeployment> mavenDeployments=new HashSet<MavenDeployment>();
  for (  String activeArtifactPomName : artifactPoms.keySet()) {
    ArtifactPom activeArtifactPom=artifactPoms.get(activeArtifactPomName);
    File pomFile=createPomFile(activeArtifactPomName);
    PublishArtifact pomArtifact=activeArtifactPom.writePom(pomFile);
    mavenDeployments.add(new DefaultMavenDeployment(pomArtifact,activeArtifactPom.getArtifact(),activeArtifactPom.getAttachedArtifacts()));
  }
  if (mavenDeployments.isEmpty()) {
    PomFilter defaultFilter=pomFilterContainer.getActivePomFilters().iterator().next();
    String defaultArtifactName=defaultFilter.getName();
    ArtifactPom artifactPom=artifactPomFactory.createArtifactPom(defaultFilter.getPomTemplate());
    artifactPom.getPom().setPackaging("pom");
    File pomFile=createPomFile(defaultArtifactName);
    PublishArtifact pomPublishArtifact=artifactPom.writePom(pomFile);
    mavenDeployments.add(new DefaultMavenDeployment(pomPublishArtifact));
  }
  return mavenDeployments;
}
