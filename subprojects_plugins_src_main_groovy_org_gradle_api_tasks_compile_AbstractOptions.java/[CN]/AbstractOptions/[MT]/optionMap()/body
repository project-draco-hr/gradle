{
  final Class<?> thisClass=getClass();
  return DeprecationLogger.whileDisabled(new Factory<Map<String,Object>>(){
    public Map<String,Object> create(){
      Map<String,Object> map=Maps.newHashMap();
      Class<?> currClass=thisClass;
      if (currClass.getName().endsWith("_Decorated")) {
        currClass=currClass.getSuperclass();
      }
      while (currClass != AbstractOptions.class) {
        for (        Field field : currClass.getDeclaredFields()) {
          if (isOptionField(field)) {
            addValueToMapIfNotNull(map,field);
          }
        }
        currClass=currClass.getSuperclass();
      }
      return map;
    }
  }
);
}
