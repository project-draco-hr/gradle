{
  Properties properties=new Properties();
  if (!getPluginClasspath().isEmpty()) {
    List<String> paths=CollectionUtils.collect(getPluginClasspath(),new Transformer<String,File>(){
      @Override public String transform(      File file){
        return file.getAbsolutePath().replaceAll("\\\\","/");
      }
    }
);
    StringBuilder implementationClasspath=new StringBuilder();
    Joiner.on(File.pathSeparator).appendTo(implementationClasspath,paths);
    properties.setProperty(IMPLEMENTATION_CLASSPATH_PROP_KEY,implementationClasspath.toString());
  }
  ByteArrayOutputStream outputStream=new ByteArrayOutputStream();
  GUtil.saveProperties(properties,outputStream);
  try {
    OutputStream fos=null;
    try {
      fos=new FileOutputStream(new File(getOutputDirectory(),METADATA_FILE_NAME));
      fos.write(stripTimestamp(outputStream));
    }
  finally {
      fos.close();
    }
  }
 catch (  IOException e) {
    throw new UncheckedIOException(e);
  }
}
