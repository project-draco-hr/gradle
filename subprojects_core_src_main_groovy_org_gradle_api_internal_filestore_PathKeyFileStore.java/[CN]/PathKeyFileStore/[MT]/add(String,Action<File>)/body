{
  File destination=getFile(key);
  destination.getParentFile().mkdirs();
  File markerFile=getMarkerFile(destination);
  try {
    markerFile.createNewFile();
    deleteAction.delete(destination);
    addAction.execute(destination);
  }
 catch (  Exception exception) {
    deleteAction.delete(destination);
    throw new GradleException(String.format("Failed to add file with key '%s' into filestore at '%s' ",key,getBaseDir().getAbsolutePath()),exception);
  }
 finally {
    deleteAction.delete(markerFile);
  }
  return entryAt(destination);
}
