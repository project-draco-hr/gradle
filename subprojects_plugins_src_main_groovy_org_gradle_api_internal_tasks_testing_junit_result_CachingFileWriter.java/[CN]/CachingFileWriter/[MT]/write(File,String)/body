{
  Writer out;
  try {
    if (openFiles.containsKey(file)) {
      out=openFiles.get(file);
    }
 else {
      out=new OutputStreamWriter(new BufferedOutputStream(new FileOutputStream(file,true)),"UTF-8");
      openFiles.put(file,out);
      if (openFiles.size() > openFilesCount) {
        Iterator<Map.Entry<File,Writer>> iterator=openFiles.entrySet().iterator();
        close(iterator.next().getValue(),file.toString());
        iterator.remove();
      }
    }
    out.write(text);
  }
 catch (  IOException e) {
    cleanUpQuietly();
    throw new UncheckedIOException("Problems writing to file: " + file,e);
  }
}
