{
  ExecResult result=execHandle.waitForFinish();
  CompositeStoppable stoppable;
  lock.lock();
  try {
    stoppable=CompositeStoppable.stoppable(acceptor,connection);
  }
  finally {
    this.connection=null;
    this.acceptor=null;
    this.execHandle=null;
    lock.unlock();
  }
  stoppable.stop();
  return result.assertNormalExitValue();
}
