{
  final TaskInternal task=taskWithOutputs();
  expectTaskStateCreated(task);
  TaskArtifactState state=repository.getStateFor(task);
  context.checking(new Expectations(){
{
      one(upToDateSpec).isSatisfiedBy(task);
      will(returnValue(true));
      one(taskArtifactState).isUpToDate();
      will(returnValue(true));
    }
  }
);
  assertTrue(state.isUpToDate());
}
