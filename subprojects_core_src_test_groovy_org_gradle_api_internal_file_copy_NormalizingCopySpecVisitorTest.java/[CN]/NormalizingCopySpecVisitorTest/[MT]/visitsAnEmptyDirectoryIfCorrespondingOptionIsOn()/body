{
  final FileCopyDetails dir=file("dir");
  context.checking(new Expectations(){
{
      one(spec).getIncludeEmptyDirs();
      will(returnValue(true));
      one(delegate).visitSpec(spec);
      one(delegate).visitDir(dir);
      one(delegate).endVisit();
    }
  }
);
  visitor.visitSpec(spec);
  visitor.visitDir(dir);
  visitor.endVisit();
}
