{
  final FileCopyDetails dir=file("dir");
  final FileCopyDetails subdir=file("dir/sub");
  final FileCopyDetails file=file("dir/sub/file");
  allowGetIncludeEmptyDirs();
  context.checking(new Expectations(){
{
      one(delegate).visitSpec(spec);
    }
  }
);
  visitor.visitSpec(spec);
  visitor.visit(dir);
  visitor.visit(subdir);
  context.checking(new Expectations(){
{
      one(delegate).visit(dir);
      one(delegate).visit(subdir);
      one(delegate).visit(file);
    }
  }
);
  visitor.visit(file);
}
