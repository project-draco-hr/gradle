{
  ProjectInternal project=descriptor.getTargetProject();
  Module projectModule=project.getModule();
  ModuleVersionPublishMetaData publishMetaData=moduleDescriptorConverter.convert(project.getConfigurations(),projectModule);
  ModuleDescriptor projectDescriptor=publishMetaData.getModuleDescriptor();
  for (  DependencyArtifactDescriptor artifactDescriptor : descriptor.getAllDependencyArtifacts()) {
    for (    Artifact artifact : projectDescriptor.getAllArtifacts()) {
      if (artifact.getName().equals(artifactDescriptor.getName()) && artifact.getExt().equals(artifactDescriptor.getExt())) {
        String path=artifact.getExtraAttribute(DefaultIvyDependencyPublisher.FILE_ABSOLUTE_PATH_EXTRA_ATTRIBUTE);
        ReflectionUtil.invoke(artifactDescriptor,"setExtraAttribute",new Object[]{DefaultIvyDependencyPublisher.FILE_ABSOLUTE_PATH_EXTRA_ATTRIBUTE,path});
      }
    }
  }
  return publishMetaData;
}
