{
  final TestFile invalidZipFile=tmpDir.createDir("test.zip");
  visitor=new ZipCopyAction(invalidZipFile,ZipStoredCompressor.INSTANCE);
  try {
    visitor.execute(Actions.<Action<? super FileCopyDetailsInternal>>doNothing());
    fail();
  }
 catch (  GradleException e) {
    assertThat(e.getMessage(),equalTo(String.format("Could not create ZIP '%s'.",zipFile)));
  }
}
