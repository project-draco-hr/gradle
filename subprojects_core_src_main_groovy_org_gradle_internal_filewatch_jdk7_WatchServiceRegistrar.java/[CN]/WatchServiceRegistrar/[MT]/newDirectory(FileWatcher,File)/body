{
  if (!watcher.isRunning()) {
    return;
  }
  LOG.debug("Begin - newDirectory {}",dir);
  if (dir.exists()) {
    if (!FILE_TREE_WATCHING_SUPPORTED) {
      watchDir(dir.toPath());
    }
    File[] contents=dir.listFiles();
    if (contents != null) {
      for (      File file : contents) {
        maybeFire(watcher,FileWatcherEvent.create(file));
        if (!watcher.isRunning()) {
          return;
        }
        if (file.isDirectory()) {
          newDirectory(watcher,file);
        }
      }
    }
  }
  LOG.debug("End - newDirectory {}",dir);
}
