{
  final File canonicalFile=GFileUtils.canonicalise(protectedFile);
  return new LockHolder(){
    public void releaseLock(){
      release(canonicalFile);
    }
    public boolean acquireLock(){
      acquire(canonicalFile);
      protectedFile.getParentFile().mkdirs();
      return true;
    }
    public File getLockFile(){
      throw new UnsupportedOperationException();
    }
    public File getProtectedFile(){
      return protectedFile;
    }
    public String stateMessage(){
      return "ok";
    }
  }
;
}
