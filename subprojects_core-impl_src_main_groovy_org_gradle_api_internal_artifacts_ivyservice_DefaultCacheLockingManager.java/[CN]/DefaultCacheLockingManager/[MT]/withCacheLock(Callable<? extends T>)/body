{
  FileLock lock=fileLockManager.lock(cacheMetaData.getCacheDir(),FileLockManager.LockMode.Exclusive,"artifact cache");
  try {
    locked=true;
    try {
      return action.call();
    }
 catch (    Exception e) {
      throw UncheckedException.asUncheckedException(e);
    }
  }
  finally {
    locked=false;
    lock.close();
  }
}
