{
  ImmutableSortedMap.Builder<String,ManagedProperty<?>> managedPropertiesBuilder=ImmutableSortedMap.naturalOrder();
  for (  Map.Entry<String,Multimap<PropertyAccessorType,StructMethodBinding>> propertyEntry : propertyBindings.entrySet()) {
    String propertyName=propertyEntry.getKey();
    Multimap<PropertyAccessorType,StructMethodBinding> accessorBindings=propertyEntry.getValue();
    if (isManagedProperty(publicSchema.getType(),propertyName,accessorBindings)) {
      boolean foundGetter=accessorBindings.containsKey(GET_GETTER) || accessorBindings.containsKey(IS_GETTER);
      boolean foundSetter=accessorBindings.containsKey(SETTER);
      if (foundSetter && !foundGetter) {
        throw new InvalidManagedPropertyException(publicSchema.getType(),propertyName,"must both have an abstract getter as well as a setter");
      }
      ModelType<?> propertyType=determineManagedPropertyType(publicSchema.getType(),propertyName,accessorBindings);
      ModelSchema<?> propertySchema=schemaStore.getSchema(propertyType);
      managedPropertiesBuilder.put(propertyName,createManagedProperty(publicSchema,propertyName,propertySchema,accessorBindings));
    }
  }
  return managedPropertiesBuilder.build();
}
