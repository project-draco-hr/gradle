{
  ImmutableSortedMap.Builder<String,ManagedProperty<?>> managedPropertiesBuilder=ImmutableSortedMap.naturalOrder();
  for (  Map.Entry<String,Multimap<PropertyAccessorType,StructMethodBinding>> propertyEntry : propertyBindings.entrySet()) {
    String propertyName=propertyEntry.getKey();
    Multimap<PropertyAccessorType,StructMethodBinding> accessorBindings=propertyEntry.getValue();
    if (isManagedProperty(propertyName,accessorBindings)) {
      boolean foundGetter=accessorBindings.containsKey(GET_GETTER) || accessorBindings.containsKey(IS_GETTER);
      boolean foundSetter=accessorBindings.containsKey(SETTER);
      if (foundSetter && !foundGetter) {
        throw new IllegalArgumentException(String.format("Managed property '%s' must both have an abstract getter as well as a setter.",propertyName));
      }
      ModelType<?> propertyType=determinePropertyType(propertyName,accessorBindings);
      ModelSchema<?> propertySchema=schemaStore.getSchema(propertyType);
      managedPropertiesBuilder.put(propertyName,createManagedProperty(publicSchema,propertyName,propertySchema,accessorBindings));
    }
  }
  return managedPropertiesBuilder.build();
}
