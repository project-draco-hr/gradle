{
  final FileCollection playDependencies=playToolChain.select(binary.getTargetPlatform()).getPlayDependencies();
  final String scalaCompileTaskName=String.format("scalaCompile%s",StringUtils.capitalize(binary.getName()));
  tasks.create(scalaCompileTaskName,PlatformScalaCompile.class,new Action<PlatformScalaCompile>(){
    public void execute(    PlatformScalaCompile scalaCompile){
      scalaCompile.setDestinationDir(binary.getClasses().getClassesDir());
      scalaCompile.setClasspath(playDependencies);
      scalaCompile.setPlatform(binary.getTargetPlatform().getScalaPlatform());
      scalaCompile.setSourceCompatibility(binary.getTargetPlatform().getJavaVersion().getMajorVersion());
      scalaCompile.setTargetCompatibility(binary.getTargetPlatform().getJavaVersion().getMajorVersion());
      IncrementalCompileOptions incrementalOptions=scalaCompile.getScalaCompileOptions().getIncrementalOptions();
      incrementalOptions.setAnalysisFile(new File(buildDir,String.format("tmp/scala/compilerAnalysis/%s.analysis",scalaCompileTaskName)));
      scalaCompile.getScalaCompileOptions().setFork(true);
      scalaCompile.getScalaCompileOptions().setUseAnt(false);
      for (      LanguageSourceSet appSources : binary.getSource().withType(ScalaSources.class)) {
        scalaCompile.source(appSources.getSource());
        scalaCompile.dependsOn(appSources);
      }
      scalaCompile.source(binary.getGeneratedScala().getSource());
      scalaCompile.dependsOn(binary.getGeneratedScala());
      binary.getClasses().builtBy(scalaCompile);
    }
  }
);
}
