{
  if (alternativeCredentials != null) {
    throw new IllegalStateException("Cannot overwrite already configured strongly typed credentials.");
  }
  T instance=null;
  if (clazz == AwsCredentials.class) {
    instance=(T)instantiator.newInstance(DefaultAwsCredentials.class);
  }
 else   if (clazz == PasswordCredentials.class) {
    instance=(T)instantiator.newInstance(DefaultPasswordCredentials.class);
  }
  overrideDefaultCredentials(instance);
  action.execute(instance);
}
