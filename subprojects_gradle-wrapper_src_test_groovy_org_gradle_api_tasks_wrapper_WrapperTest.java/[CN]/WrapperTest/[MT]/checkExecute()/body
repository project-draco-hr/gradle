{
  context.checking(new Expectations(){
{
      one(wrapperScriptGeneratorMock).generate(toNative("../" + targetWrapperJarPath + "/"+ Wrapper.WRAPPER_JAR),toNative("../" + targetWrapperJarPath + "/"+ Wrapper.WRAPPER_PROPERTIES),wrapper.getScriptFile());
    }
  }
);
  wrapper.execute();
  TestFile unjarDir=tmpDir.createDir("unjar");
  expectedTargetWrapperJar.unzipTo(unjarDir);
  unjarDir.file(GradleWrapperMain.class.getName().replace(".","/") + ".class").assertIsFile();
  Properties properties=GUtil.loadProperties(expectedTargetWrapperProperties);
  assertEquals(properties.getProperty(Wrapper.URL_ROOT_PROPERTY),wrapper.getUrlRoot());
  assertEquals(properties.getProperty(Wrapper.DISTRIBUTION_BASE_PROPERTY),wrapper.getDistributionBase().toString());
  assertEquals(properties.getProperty(Wrapper.DISTRIBUTION_PATH_PROPERTY),wrapper.getDistributionPath());
  assertEquals(properties.getProperty(Wrapper.DISTRIBUTION_NAME_PROPERTY),wrapper.getArchiveName());
  assertEquals(properties.getProperty(Wrapper.DISTRIBUTION_CLASSIFIER_PROPERTY),wrapper.getArchiveClassifier());
  assertEquals(properties.getProperty(Wrapper.DISTRIBUTION_VERSION_PROPERTY),wrapper.getGradleVersion());
  assertEquals(properties.getProperty(Wrapper.ZIP_STORE_BASE_PROPERTY),wrapper.getArchiveBase().toString());
  assertEquals(properties.getProperty(Wrapper.ZIP_STORE_PATH_PROPERTY),wrapper.getArchivePath());
}
