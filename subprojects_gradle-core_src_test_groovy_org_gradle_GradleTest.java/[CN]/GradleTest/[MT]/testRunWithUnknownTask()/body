{
  expectedStartParams.setTaskNames(toList("unknown"));
  expectSettingsBuilt();
  context.checking(new Expectations(){
{
      one(buildBroadcaster).buildStarted(gradleMock);
      one(buildBroadcaster).projectsLoaded(gradleMock);
      one(buildBroadcaster).projectsEvaluated(gradleMock);
      one(buildBroadcaster).buildFinished(with(any(BuildResult.class)));
      one(buildLoaderMock).load(expectedRootProjectDescriptor,gradleMock,testGradleProperties);
      one(taskExecuterMock).addTaskExecutionGraphListener(with(notNullValue(TaskExecutionGraphListener.class)));
      one(buildConfigurerMock).process(expectedRootProject);
    }
  }
);
  BuildResult buildResult=gradleLauncher.run();
  assertThat(buildResult.getFailure(),notNullValue());
  assertThat(buildResult.getFailure().getClass(),equalTo((Object)UnknownTaskException.class));
}
