{
  if (execution.getCommand() instanceof Stop) {
    execution.getDaemonStateControl().requestForcefulStop("stop command received");
    execution.getConnection().completed(new Success(null));
  }
 else   if (execution.getCommand() instanceof StopWhenIdle) {
    execution.getDaemonStateControl().requestStop();
    execution.getConnection().completed(new Success(null));
  }
 else {
    execution.proceed();
  }
}
