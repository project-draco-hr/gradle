{
  final File binariesDir=new File(buildDirHolder.getBuildDir(),"jars");
  final File classesDir=new File(buildDirHolder.getBuildDir(),"classes");
  jvmLibrary.getBinaries().withType(JarBinarySpec.class).beforeEach(new Action<JarBinarySpec>(){
    @Override public void execute(    JarBinarySpec jarBinary){
      String jarBinaryName=jarBinary.getName();
      int idx=jarBinaryName.lastIndexOf("Jar");
      String apiJarBinaryName=idx > 0 ? jarBinaryName.substring(0,idx) + "ApiJar" : jarBinaryName + "ApiJar";
      String libraryName=jarBinary.getId().getLibraryName();
      File outputDir=new File(classesDir,jarBinaryName);
      jarBinary.setClassesDir(outputDir);
      jarBinary.setResourcesDir(outputDir);
      jarBinary.setJarFile(new File(binariesDir,String.format("%s/%s.jar",jarBinaryName,libraryName)));
      jarBinary.setApiJarFile(new File(binariesDir,String.format("%s/%s.jar",apiJarBinaryName,libraryName)));
      jarBinary.setToolChain(toolChains.getForPlatform(jarBinary.getTargetPlatform()));
    }
  }
);
}
