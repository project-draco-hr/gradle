{
  jvmLibrary.getBinaries().withType(JarBinarySpecInternal.class).beforeEach(new Action<JarBinarySpecInternal>(){
    @Override public void execute(    JarBinarySpecInternal jarBinary){
      String libraryName=jarBinary.getId().getLibraryName();
      jarBinary.setClassesDir(jarBinary.getNamingScheme().getOutputDirectory(projectLayout.getBuildDir(),"classes"));
      jarBinary.setResourcesDir(jarBinary.getNamingScheme().getOutputDirectory(projectLayout.getBuildDir(),"resources"));
      File jarsDir=jarBinary.getNamingScheme().getOutputDirectory(projectLayout.getBuildDir(),"jars");
      jarBinary.setJarFile(new File(jarsDir,String.format("%s.jar",libraryName)));
      jarBinary.setApiJarFile(new File(jarsDir,String.format("api/%s.jar",libraryName)));
      jarBinary.setToolChain(toolChains.getForPlatform(jarBinary.getTargetPlatform()));
    }
  }
);
}
