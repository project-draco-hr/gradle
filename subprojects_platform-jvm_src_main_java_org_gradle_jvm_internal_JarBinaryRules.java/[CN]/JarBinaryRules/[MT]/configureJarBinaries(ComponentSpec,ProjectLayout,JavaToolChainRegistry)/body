{
  jvmLibrary.getBinaries().withType(JvmBinarySpec.class).beforeEach(new Action<JvmBinarySpec>(){
    @Override public void execute(    JvmBinarySpec jvmBinary){
      BinaryNamingScheme namingScheme=((BinarySpecInternal)jvmBinary).getNamingScheme();
      jvmBinary.setClassesDir(namingScheme.getOutputDirectory(projectLayout.getBuildDir(),"classes"));
      jvmBinary.setResourcesDir(namingScheme.getOutputDirectory(projectLayout.getBuildDir(),"resources"));
    }
  }
);
  jvmLibrary.getBinaries().withType(JarBinarySpecInternal.class).beforeEach(new Action<JarBinarySpecInternal>(){
    @Override public void execute(    JarBinarySpecInternal jarBinary){
      String libraryName=jarBinary.getId().getLibraryName();
      File jarsDir=jarBinary.getNamingScheme().getOutputDirectory(projectLayout.getBuildDir(),"jars");
      jarBinary.setJarFile(new File(jarsDir,String.format("%s.jar",libraryName)));
      jarBinary.setApiJarFile(new File(jarsDir,String.format("api/%s.jar",libraryName)));
      jarBinary.setToolChain(toolChains.getForPlatform(jarBinary.getTargetPlatform()));
    }
  }
);
}
