{
  Task task1=new DefaultTask(root,"task1",dagMock);
  Task task2=new DefaultTask(root,"task2",dagMock).dependsOn("task1");
  Task task3=new DefaultTask(root,"task3",dagMock).dependsOn("task2");
  root.getTasks().put("task1",task1);
  root.getTasks().put("task2",task2);
  root.getTasks().put("task3",task3);
  setDagMockExpectations(WrapUtil.toSet(root,child),WrapUtil.toSet(task1,task2,task3));
  buildExecuter.execute("task3",false,root,root,true);
  assertEquals(WrapUtil.toSet(task2),collectDagTasksAction.tasksMap.get(task3));
  assertEquals(WrapUtil.toSet(task1),collectDagTasksAction.tasksMap.get(task2));
  assertEquals(new HashSet(),collectDagTasksAction.tasksMap.get(task1));
}
