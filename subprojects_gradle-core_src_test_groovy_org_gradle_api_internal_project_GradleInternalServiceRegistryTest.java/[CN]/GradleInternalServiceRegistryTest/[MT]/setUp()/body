{
  startParameter.setPluginPropertiesFile(new File("plugin"));
  context.checking(new Expectations(){
{
      allowing(parent).get(RepositoryHandlerFactory.class);
      will(returnValue(repositoryHandlerFactory));
      allowing(parent).get(ConfigurationContainerFactory.class);
      will(returnValue(configurationContainerFactory));
      allowing(parent).get(DependencyFactory.class);
      will(returnValue(dependencyFactory));
      allowing(parent).get(PublishModuleDescriptorConverter.class);
      will(returnValue(publishModuleDescriptorConverter));
      allowing(parent).get(ListenerManager.class);
      will(returnValue(listenerManager));
      allowing(gradle).getBuildScriptClassLoader();
      will(returnValue(new ClassLoader(){
      }
));
      allowing(gradle).getStartParameter();
      will(returnValue(startParameter));
    }
  }
);
}
