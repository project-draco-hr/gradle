{
  if (indexedCache == null) {
    final BTreePersistentIndexedCache<K,V> indexedCache=new BTreePersistentIndexedCache<K,V>(new File(getCache().getBaseDir(),"cache.bin"),new DefaultSerializer<K>(),serializer);
    Factory<BTreePersistentIndexedCache<K,V>> cacheFactory=new Factory<BTreePersistentIndexedCache<K,V>>(){
      public BTreePersistentIndexedCache<K,V> create(){
        return indexedCache;
      }
    }
;
    MultiProcessSafePersistentIndexedCache<K,V> safeCache=new MultiProcessSafePersistentIndexedCache<K,V>(cacheFactory,getCache().getLock());
    this.indexedCache=new IndexedCacheReference<K,V>(safeCache,this);
  }
  return indexedCache;
}
