{
  final DefaultIvyPublication publication=instantiator.newInstance(DefaultIvyPublication.class,name,instantiator,configurations,dependencyMetaDataProvider,fileResolver,project.getTasks());
  IvyModuleDescriptorInternal descriptor=publication.getDescriptor();
  DslObject descriptorDslObject=new DslObject(descriptor);
  ConventionMapping descriptorConventionMapping=descriptorDslObject.getConventionMapping();
  descriptorConventionMapping.map("file",new Callable<Object>(){
    public Object call() throws Exception {
      return new File(project.getBuildDir(),"publications/" + publication.getName() + "/ivy.xml");
    }
  }
);
  return publication;
}
