{
  final List<String> commandWithArguments=new ArrayList<String>();
  final String command=processSettings.getCommand();
  commandWithArguments.add(command);
  final List<String> arguments=processSettings.getArguments();
  if (LOGGER.isDebugEnabled()) {
    LOGGER.debug("creating process builder for {}",processSettings);
    LOGGER.debug("in directory {}",processSettings.getDirectory());
    int argumentIndex=0;
    for (    String argument : arguments) {
      LOGGER.debug("with argument#{} = {}",argumentIndex,argument);
      argumentIndex++;
    }
  }
  commandWithArguments.addAll(arguments);
  final ProcessBuilder processBuilder=new ProcessBuilder(commandWithArguments);
  processBuilder.directory(processSettings.getDirectory());
  final Map<String,String> environment=processBuilder.environment();
  environment.clear();
  environment.putAll(processSettings.getEnvironment());
  processBuilder.redirectErrorStream(processSettings.getRedirectErrorStream());
  return processBuilder;
}
