{
  Set<MavenArtifactKey> keys=new HashSet<MavenArtifactKey>();
  for (  MavenArtifact artifact : publication.getArtifacts()) {
    checkArtifactAttribute(publication.getName(),"extension",artifact.getExtension());
    checkArtifactAttribute(publication.getName(),"classifier",artifact.getClassifier());
    checkCanPublish(publication.getName(),artifact);
    MavenArtifactKey key=new MavenArtifactKey(artifact);
    if (keys.contains(key)) {
      throw new InvalidMavenPublicationException(String.format("Cannot publish maven publication '%s': multiple artifacts with the identical extension '%s' and classifier '%s'.",publication.getName(),artifact.getExtension(),artifact.getClassifier()));
    }
    keys.add(key);
  }
}
