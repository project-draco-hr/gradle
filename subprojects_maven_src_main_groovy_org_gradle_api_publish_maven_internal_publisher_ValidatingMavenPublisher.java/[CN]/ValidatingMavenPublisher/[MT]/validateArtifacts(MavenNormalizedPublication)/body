{
  Set<MavenArtifactKey> keys=new HashSet<MavenArtifactKey>();
  for (  MavenArtifact artifact : publication.getArtifacts()) {
    field(publication,"artifact extension",artifact.getExtension()).notNull();
    field(publication,"artifact classifier",artifact.getClassifier()).optionalNotEmpty();
    checkCanPublish(publication.getName(),artifact);
    MavenArtifactKey key=new MavenArtifactKey(artifact);
    if (keys.contains(key)) {
      throw new InvalidMavenPublicationException(publication.getName(),String.format("multiple artifacts with the identical extension '%s' and classifier '%s'.",artifact.getExtension(),artifact.getClassifier()));
    }
    keys.add(key);
  }
}
