{
  if (locked) {
    throw new IllegalStateException("class loader scope is locked");
  }
  if (exportingClassLoader != null) {
    throw new IllegalStateException("class loader scope can only export one classpath");
  }
  if (classpath.isEmpty()) {
    return parent.getChildClassLoader();
  }
 else {
    if (exportingClassLoader == null) {
      exportingClassLoader=new MutableURLClassLoader(parent.getChildClassLoader());
    }
    exportingClassLoader.addURLs(classpath.getAsURLs());
    return exportingClassLoader;
  }
}
