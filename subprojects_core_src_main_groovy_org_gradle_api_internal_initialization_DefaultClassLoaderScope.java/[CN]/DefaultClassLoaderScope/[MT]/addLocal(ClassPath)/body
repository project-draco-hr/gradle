{
  if (locked) {
    throw new IllegalStateException("class loader scope is locked");
  }
  if (!classpath.isEmpty()) {
    if (local == null) {
      local=new ArrayList<ClassLoader>(1);
    }
    URLClassLoader newClassLoader=new URLClassLoader(classpath.getAsURLArray(),base.getChildClassLoader());
    local.add(newClassLoader);
    if (localClassLoader != null) {
      addLocal(newClassLoader);
    }
    return newClassLoader;
  }
 else {
    return base.getChildClassLoader();
  }
}
