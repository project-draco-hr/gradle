{
  MavenArtifact mainArtifact=getMainArtifact();
  Set<MavenArtifactKey> keys=new HashSet<MavenArtifactKey>();
  Set<MavenArtifact> additionalArtifacts=new LinkedHashSet<MavenArtifact>();
  for (  MavenArtifact artifact : mavenArtifacts) {
    if (artifact == mainArtifact) {
      continue;
    }
    MavenArtifactKey key=new MavenArtifactKey(artifact);
    if (keys.contains(key)) {
      throw new InvalidMavenPublicationException(String.format("Cannot publish 2 artifacts with the identical extension '%s' and classifier '%s'.",artifact.getExtension(),artifact.getClassifier()));
    }
    keys.add(key);
    additionalArtifacts.add(artifact);
  }
  return additionalArtifacts;
}
