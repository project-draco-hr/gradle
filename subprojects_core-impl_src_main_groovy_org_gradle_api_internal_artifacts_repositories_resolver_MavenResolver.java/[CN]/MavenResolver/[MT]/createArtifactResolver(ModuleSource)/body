{
  if (moduleSource instanceof TimestampedModuleSource) {
    final String timestampedVersion=((TimestampedModuleSource)moduleSource).getTimestampedVersion();
    Transformer<String,String> patternTransformer=new Transformer<String,String>(){
      public String transform(      String original){
        return original.replaceFirst("\\-\\[revision\\]","-" + timestampedVersion);
      }
    }
;
    return createArtifactResolver(CollectionUtils.collect(getIvyPatterns(),patternTransformer),CollectionUtils.collect(getArtifactPatterns(),patternTransformer));
  }
  return super.createArtifactResolver(moduleSource);
}
