{
  List<DependencyResolver> publishResolvers=resolverProvider.getResolvers();
  Ivy ivy=ivyForPublish(publishResolvers);
  Set<Configuration> configurationsToPublish=configuration.getHierarchy();
  Set<String> confs=Configurations.getNames(configurationsToPublish,false);
  IvyConfig ivyConfig=new IvyConfig(ivy.getSettings());
  writeDescriptorFile(descriptorDestination,configurationsToPublish,ivyConfig,configuration.getModule());
  dependencyPublisher.publish(confs,publishResolvers,publishModuleDescriptorConverter.convert(configurationsToPublish,configuration.getModule(),ivyConfig),descriptorDestination,ivy.getPublishEngine());
}
