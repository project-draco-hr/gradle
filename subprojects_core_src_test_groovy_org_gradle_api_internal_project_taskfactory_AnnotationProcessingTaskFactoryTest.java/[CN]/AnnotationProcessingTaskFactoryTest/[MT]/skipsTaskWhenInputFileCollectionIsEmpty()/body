{
  final FileCollectionInternal inputFiles=context.mock(FileCollectionInternal.class);
  context.checking(new Expectations(){
{
      one(inputFiles).stopExecutionIfEmpty();
      will(throwException(new StopExecutionException()));
    }
  }
);
  TaskWithInputFiles task=expectTaskCreated(BrokenTaskWithInputFiles.class,inputFiles);
  task.execute();
}
