{
  for (  PublishArtifact publishArtifact : project.getDependencies().getArtifacts()) {
    for (    Configuration artifactConfiguration : publishArtifact.getConfigurations()) {
      if (configuration.getChain().contains(artifactConfiguration)) {
        upload.dependsOn(publishArtifact.getTaskDependency());
      }
    }
  }
}
