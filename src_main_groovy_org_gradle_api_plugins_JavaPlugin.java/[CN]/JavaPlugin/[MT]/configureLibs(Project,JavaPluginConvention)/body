{
  Bundle libsBundle=project.getTasks().add(LIBS_TASK_NAME,Bundle.class);
  libsBundle.dependsOn(TEST_TASK_NAME);
  libsBundle.setDefaultConfigurations(WrapUtil.toList(Dependency.MASTER_CONFIGURATION));
  libsBundle.setDefaultDestinationDir(project.getBuildDir());
  libsBundle.conventionMapping(DefaultConventionsToPropertiesMapping.LIB);
  Jar jar=libsBundle.jar();
  jar.conventionMapping(WrapUtil.<String,ConventionValue>toMap("resourceCollections",new ConventionValue(){
    public Object getValue(    Convention convention,    IConventionAware conventionAwareObject){
      return WrapUtil.toList(new FileSet(javaConvention.getClassesDir()));
    }
  }
));
  jar.setDescription("Generates a jar archive with all the compiled classes.");
  project.getConfigurations().getByName(Dependency.MASTER_CONFIGURATION).addArtifact(new ArchivePublishArtifact(jar));
}
