{
  project.getTasks().withType(Compile.class).allTasks(new Action<Compile>(){
    public void execute(    Compile compile){
      compile.dependsOn(PROCESS_RESOURCES_TASK_NAME);
      compile.setConfiguration(project.getConfigurations().getByName(COMPILE_CONFIGURATION_NAME));
      compile.conventionMapping(DefaultConventionsToPropertiesMapping.COMPILE);
      addDependsOnProjectDependencies(compile,COMPILE_CONFIGURATION_NAME);
    }
  }
);
  project.getTasks().add(COMPILE_TASK_NAME,Compile.class).setDescription("Compiles the Java source code.");
}
