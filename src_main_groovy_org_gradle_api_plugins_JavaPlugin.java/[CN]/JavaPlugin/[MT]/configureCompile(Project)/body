{
  project.addTaskLifecycleListener(new TaskLifecycleListener(){
    public void taskAdded(    Task task){
      if (task instanceof Compile) {
        Compile compile=(Compile)task;
        compile.dependsOn(RESOURCES);
        compile.setConfiguration(project.getConfigurations().get(COMPILE));
        compile.conventionMapping(DefaultConventionsToPropertiesMapping.COMPILE);
        addDependsOnProjectDependencies(compile,COMPILE);
      }
    }
  }
);
  project.createTask(GUtil.map("type",Compile.class),COMPILE);
}
