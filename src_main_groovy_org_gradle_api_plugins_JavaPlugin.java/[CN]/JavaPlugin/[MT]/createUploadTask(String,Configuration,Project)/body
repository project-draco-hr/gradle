{
  final Upload upload=(Upload)project.createTask(GUtil.map("type",Upload.class),name);
  PublishInstruction publishInstruction=new PublishInstruction();
  publishInstruction.setIvyFileParentDir(project.getBuildDir());
  upload.setConfiguration(configuration);
  upload.setPublishInstruction(publishInstruction);
  upload.dependsOn(configuration.getBuildArtifacts());
  upload.setDescription(String.format("Uploads all artifacts belonging to the %s configuration",configuration.getName()));
  return upload;
}
