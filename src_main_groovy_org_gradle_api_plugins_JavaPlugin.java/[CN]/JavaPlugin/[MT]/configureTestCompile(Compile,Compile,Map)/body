{
  testCompile.getSkipProperties().add(Task.AUTOSKIP_PROPERTY_PREFIX + TEST);
  configureCompile(testCompile,propertyMapping);
  return (Compile)testCompile.doFirst(new TaskAction(){
    public void execute(    Task task){
      Compile testCompile=(Compile)task;
      testCompile.unmanagedClasspath((Object[])compile.getUnmanagedClasspath().toArray(new Object[compile.getUnmanagedClasspath().size()]));
    }
  }
);
}
