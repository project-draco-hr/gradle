{
  final Task publishLifecycleTask=tasks.getByName(PublishingPlugin.PUBLISH_LIFECYCLE_TASK_NAME);
  final Task publishLocalLifecycleTask=tasks.getByName(MavenPublishPlugin.PUBLISH_LOCAL_LIFECYCLE_TASK_NAME);
  PublicationContainer publications=extension.getPublications();
  for (  final MavenPublicationInternal publication : publications.withType(MavenPublicationInternal.class)) {
    String publicationName=publication.getName();
    createGeneratePomTask(tasks,publication,publicationName);
    createLocalInstallTask(tasks,publishLocalLifecycleTask,publication,publicationName);
    createPublishTasksForEachMavenRepo(tasks,extension,publishLifecycleTask,publication,publicationName);
  }
}
