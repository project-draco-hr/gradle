{
  try {
    Manifest javaManifest=getEffectiveManifest().generateJavaManifest();
    ByteArrayOutputStream buffer=new ByteArrayOutputStream();
    javaManifest.write(buffer);
    String manifestContent=buffer.toString(DEFAULT_CONTENT_CHARSET);
    if (!DEFAULT_CONTENT_CHARSET.equals(contentCharset)) {
      manifestContent=new String(manifestContent.getBytes(contentCharset),contentCharset);
    }
    writer.write(manifestContent);
  }
 catch (  IOException e) {
    throw new UncheckedIOException(e);
  }
  return this;
}
