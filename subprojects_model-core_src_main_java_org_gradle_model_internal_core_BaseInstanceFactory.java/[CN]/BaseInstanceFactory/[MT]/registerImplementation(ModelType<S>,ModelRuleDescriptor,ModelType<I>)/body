{
  ImplementationTypeRegistration<S> implementationTypeRegistration=getImplementationTypeRegistration(type);
  if (implementationTypeRegistration != null) {
    throw new GradleException(getDuplicateRegistrationMessage("an implementation type",type,implementationTypeRegistration.source));
  }
  implementationTypes.put(type.getConcreteClass(),new ImplementationTypeRegistration<S>(sourceRule,implementationType));
}
