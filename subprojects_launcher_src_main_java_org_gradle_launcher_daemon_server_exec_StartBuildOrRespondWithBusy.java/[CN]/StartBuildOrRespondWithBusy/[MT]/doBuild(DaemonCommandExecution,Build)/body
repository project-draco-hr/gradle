{
  DaemonStateControl stateCoordinator=execution.getDaemonStateControl();
  try {
    stateCoordinator.runCommand(new Runnable(){
      public void run(){
        LOGGER.info("Daemon is about to start building: " + build + ". Dispatching build started information...");
        execution.getConnection().dispatch(new BuildStarted(diagnostics));
        execution.proceed();
      }
    }
,execution.toString());
  }
 catch (  DaemonBusyException e) {
    LOGGER.info("Daemon will not handle the request: {} because is busy executing: {}. Dispatching 'Busy' response...",build,e.getOperationDisplayName());
    execution.getConnection().dispatch(new DaemonBusy());
  }
}
