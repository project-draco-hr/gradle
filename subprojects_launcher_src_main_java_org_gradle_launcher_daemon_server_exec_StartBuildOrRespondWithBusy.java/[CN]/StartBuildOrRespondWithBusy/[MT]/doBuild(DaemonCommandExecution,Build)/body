{
  DaemonStateControl stateCoordinator=execution.getDaemonStateControl();
  try {
    stateCoordinator.runCommand(new Runnable(){
      public void run(){
        LOGGER.info("Daemon is about to start building: " + build + ". Dispatching build started information...");
        execution.getConnection().dispatch(new BuildStarted(diagnostics));
        execution.proceed();
      }
    }
,execution.toString());
  }
 catch (  DaemonUnavailableException e) {
    LOGGER.info("Daemon will not handle the request: {} because is unavailable: {}",build,e.getMessage());
    execution.getConnection().dispatch(new DaemonUnavailable(e.getMessage()));
  }
}
