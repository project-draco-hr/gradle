{
  DaemonStateCoordinator stateCoordinator=execution.getDaemonStateCoordinator();
  DaemonCommandExecution existingExecution=stateCoordinator.onStartCommand(execution);
  if (existingExecution != null) {
    LOGGER.info("The daemon will not handle the request: {} because is busy executing: {}. Dispatching 'Busy' response...",build,existingExecution);
    execution.getConnection().dispatch(new DaemonBusy(existingExecution.getCommand()));
  }
 else {
    try {
      execution.getConnection().dispatch(new BuildStarted(build));
      execution.proceed();
    }
  finally {
      stateCoordinator.onFinishCommand();
    }
  }
}
