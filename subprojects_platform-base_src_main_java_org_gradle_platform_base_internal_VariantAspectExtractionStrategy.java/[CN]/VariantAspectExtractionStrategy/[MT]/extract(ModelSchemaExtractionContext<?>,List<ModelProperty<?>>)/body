{
  ImmutableSet.Builder<ModelProperty<?>> dimensionsBuilder=ImmutableSet.builder();
  for (  ModelProperty<?> property : properties) {
    if (property.isAnnotationPresent(Variant.class)) {
      if (property.isAnnotationPresent(Variant.class)) {
        Class<?> propertyType=property.getType().getRawClass();
        if (!String.class.equals(propertyType) && !Named.class.isAssignableFrom(propertyType)) {
          throw invalidProperty(extractionContext,property,String.format("@Variant annotation only allowed for properties of type String and %s, but property has type %s",Named.class.getName(),propertyType.getName()));
        }
      }
      dimensionsBuilder.add(property);
    }
    if (property.getSetterAnnotations().keySet().contains(Variant.class)) {
      throw invalidProperty(extractionContext,property,"@Variant annotation is only allowed on getter methods");
    }
  }
  ImmutableSet<ModelProperty<?>> dimensions=dimensionsBuilder.build();
  if (dimensions.isEmpty()) {
    return null;
  }
  return new ModelSchemaAspectExtractionResult(new VariantAspect(dimensions));
}
