{
  if (antCompile == null)   throw new InvalidUserDataException("The ant compile command must be set!");
  if (getAntGroovyCompile() == null)   throw new InvalidUserDataException("The ant groovy compile command must be set!");
  if (getDestinationDir() == null)   throw new InvalidUserDataException("The target dir is not set, compile can't be triggered!");
  if (getSourceCompatibility() == null || getTargetCompatibility() == null) {
    throw new InvalidUserDataException("The sourceCompatibility and targetCompatibility must be set!");
  }
  List existingSourceDirs=existentDirsFilter.findExistingDirs(getSrcDirs());
  List<File> classpath=null;
  if (existingSourceDirs.size() > 0) {
    classpath=GUtil.addLists(getClasspath());
    antCompile.execute(existingSourceDirs,getIncludes(),getExcludes(),getDestinationDir(),classpath,getSourceCompatibility(),getTargetCompatibility(),getOptions(),getProject().getAnt());
  }
  List existingGroovySourceDirs=existentDirsFilter.findExistingDirs(getGroovySourceDirs());
  if (existingGroovySourceDirs.size() > 0) {
    if (classpath == null) {
      classpath=GUtil.addLists(getClasspath());
    }
    List<File> taskClasspath=new ArrayList<File>(getGroovyClasspath().getFiles());
    throwExceptionIfTaskClasspathIsEmpty(taskClasspath);
    antGroovyCompile.execute(getProject().getAnt(),existingGroovySourceDirs,getGroovyIncludes(),getGroovyExcludes(),getGroovyJavaIncludes(),getGroovyExcludes(),getDestinationDir(),classpath,getSourceCompatibility(),getTargetCompatibility(),getGroovyOptions(),getOptions(),taskClasspath);
  }
}
