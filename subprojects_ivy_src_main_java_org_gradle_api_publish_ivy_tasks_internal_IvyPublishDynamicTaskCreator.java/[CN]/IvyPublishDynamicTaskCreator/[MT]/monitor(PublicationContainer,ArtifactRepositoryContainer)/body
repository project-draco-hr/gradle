{
  publications.all(new Action<Publication>(){
    public void execute(    Publication publication){
      for (      IvyArtifactRepository repository : repositories.withType(IvyArtifactRepository.class)) {
        maybeCreate(publication,repository);
      }
    }
  }
);
  repositories.withType(IvyArtifactRepository.class).whenObjectAdded(new Action<IvyArtifactRepository>(){
    public void execute(    IvyArtifactRepository repository){
      for (      Publication publication : publications) {
        maybeCreate(publication,repository);
      }
    }
  }
);
}
