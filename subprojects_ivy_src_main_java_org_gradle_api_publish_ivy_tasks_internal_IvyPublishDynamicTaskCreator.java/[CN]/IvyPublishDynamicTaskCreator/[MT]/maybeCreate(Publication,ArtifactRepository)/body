{
  if (!(publication instanceof IvyPublicationInternal)) {
    return;
  }
  if (!(repository instanceof IvyArtifactRepositoryInternal)) {
    return;
  }
  IvyPublicationInternal publicationInternal=(IvyPublicationInternal)publication;
  IvyArtifactRepositoryInternal repositoryInternal=(IvyArtifactRepositoryInternal)repository;
  String publicationName=publication.getName();
  String repositoryName=repository.getName();
  String taskName=calculatePublishTaskName(publicationName,repositoryName);
  IvyRepositoryPublish task=tasks.add(taskName,IvyRepositoryPublish.class);
  task.setPublication(publicationInternal);
  task.setRepository(repositoryInternal);
  task.setGroup("publishing");
  task.setDescription(String.format("Publishes Ivy publication '%s' to Ivy repository '%s'",publicationName,repositoryName));
  publishLifecycleTask.dependsOn(task);
}
