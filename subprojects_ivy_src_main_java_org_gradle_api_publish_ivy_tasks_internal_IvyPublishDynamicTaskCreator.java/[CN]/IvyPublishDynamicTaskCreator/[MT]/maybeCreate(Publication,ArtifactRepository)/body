{
  if (!(publication instanceof IvyPublicationInternal)) {
    return;
  }
  if (!(repository instanceof IvyArtifactRepositoryInternal)) {
    return;
  }
  final IvyPublicationInternal publicationInternal=(IvyPublicationInternal)publication;
  final IvyArtifactRepositoryInternal repositoryInternal=(IvyArtifactRepositoryInternal)repository;
  String publicationName=publication.getName();
  String repositoryName=repository.getName();
  String publishTaskName=calculatePublishTaskName(publicationName,repositoryName);
  PublishToIvyRepository publishTask=tasks.add(publishTaskName,PublishToIvyRepository.class);
  publishTask.setPublication(publicationInternal);
  publishTask.setRepository(repositoryInternal);
  publishTask.setGroup("publishing");
  publishTask.setDescription(String.format("Publishes Ivy publication '%s' to Ivy repository '%s'",publicationName,repositoryName));
  publishLifecycleTask.dependsOn(publishTask);
}
