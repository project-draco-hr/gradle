{
  String protocol=artifactRepository.getUrl().getScheme().toLowerCase();
  if (wagonRegistry.isCustomWagonProtocol(protocol)) {
    RepositoryTransportDeployWagon.init(protocol,artifactRepository,repositoryTransportFactory);
  }
  try {
    super.publish();
  }
  finally {
    RepositoryTransportDeployWagon.reset();
  }
}
