{
  StreamWriterExecOutputHandle outHandle=new StreamWriterExecOutputHandle(System.out,true);
  StreamWriterExecOutputHandle errHandle=new StreamWriterExecOutputHandle(System.err,true);
  System.out.println("Javadoc executable = " + JavaEnvUtils.getJdkExecutable("javadoc"));
  execHandle=new DefaultExecHandle(new File("./src/main/groovy"),JavaEnvUtils.getJdkExecutable("javadoc"),Arrays.asList("-verbose","-d",new File("tmp/javadocTmpOut").getAbsolutePath(),"org.gradle"),0,System.getenv(),100,outHandle,errHandle,new DefaultExecHandleNotifierFactory(),null);
  execHandle.start();
  execHandle.abort();
  final ExecHandleState endState=execHandle.waitForFinish();
  if (endState == ExecHandleState.FAILED) {
    execHandle.getFailureCause().printStackTrace();
  }
  assertEquals(ExecHandleState.ABORTED,endState);
}
