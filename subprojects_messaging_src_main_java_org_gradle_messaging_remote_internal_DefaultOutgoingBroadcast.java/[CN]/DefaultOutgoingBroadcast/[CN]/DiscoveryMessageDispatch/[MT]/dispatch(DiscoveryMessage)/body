{
  if (message instanceof ChannelAvailable) {
    ChannelAvailable available=(ChannelAvailable)message;
    Address serviceAddress=available.getAddress();
    lock.lock();
    try {
      if (!channels.contains(available.getChannel())) {
        return;
      }
      if (connections.contains(serviceAddress)) {
        return;
      }
      connections.add(serviceAddress);
    }
  finally {
      lock.unlock();
    }
    Connection<Message> syncConnection=outgoingConnector.connect(serviceAddress,DiscoveryMessage.class.getClassLoader());
    hub.addConnection(syncConnection);
  }
}
