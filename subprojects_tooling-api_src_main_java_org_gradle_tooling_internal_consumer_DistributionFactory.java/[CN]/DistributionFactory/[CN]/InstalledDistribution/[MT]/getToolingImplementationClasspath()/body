{
  LOGGER.info("Using provider from distribution in {}.",gradleHomeDir);
  if (!gradleHomeDir.exists()) {
    throw new IllegalArgumentException(String.format("The %s does not exist.",displayName));
  }
  if (!gradleHomeDir.isDirectory()) {
    throw new IllegalArgumentException(String.format("The %s is not a directory.",displayName));
  }
  File libDir=new File(gradleHomeDir,"lib");
  if (!libDir.isDirectory()) {
    throw new IllegalArgumentException(String.format("The %s does not appear to contain a Gradle distribution.",displayName));
  }
  Set<File> files=new LinkedHashSet<File>();
  for (  File file : libDir.listFiles()) {
    if (file.getName().endsWith(".jar")) {
      files.add(file);
    }
  }
  return files;
}
