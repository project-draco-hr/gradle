{
  BuildLayout layout=new BuildLayoutFactory().getLayoutFor(projectDir,searchUpwards);
  WrapperExecutor wrapper=WrapperExecutor.forProjectDirectory(layout.getRootDirectory(),System.out);
  if (wrapper.getDistribution() != null) {
    return new ZippedDistribution(wrapper.getConfiguration(),executorFactory,patchSource);
  }
  return getDownloadedDistribution(GradleVersion.current().getVersion());
}
