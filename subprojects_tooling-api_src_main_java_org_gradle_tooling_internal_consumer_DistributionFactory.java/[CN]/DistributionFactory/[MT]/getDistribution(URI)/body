{
  File installDir;
  try {
    Install install=new Install(false,false,new Download(),new PathAssembler(userHomeDir));
    installDir=install.createDist(gradleDistribution,PathAssembler.GRADLE_USER_HOME_STRING,Wrapper.DEFAULT_DISTRIBUTION_PARENT_NAME,PathAssembler.GRADLE_USER_HOME_STRING,Wrapper.DEFAULT_DISTRIBUTION_PARENT_NAME);
  }
 catch (  Exception e) {
    throw new GradleConnectionException(String.format("Could not install Gradle distribution from '%s'.",gradleDistribution),e);
  }
  return new InstalledDistribution(installDir,String.format("Gradle distribution '%s'",gradleDistribution),String.format("Gradle distribution '%s'",gradleDistribution));
}
