{
  forkControlLock.lock();
  try {
    forkInfo.starting();
    final ForkPolicyInstance forkPolicyInstance=forkInfo.getPipeline().getForkPolicyInstance();
    Map<Integer,ForkInfo> forks=forkHandles.get(forkInfo.getPipeline().getId());
    if (forks == null) {
      forks=new HashMap<Integer,ForkInfo>();
    }
    forks.put(forkInfo.getId(),forkInfo);
    forkHandles.put(forkInfo.getPipeline().getId(),forks);
    forkPolicyInstance.startFork(forkInfo);
    startedForks++;
  }
  finally {
    forkControlLock.unlock();
  }
}
