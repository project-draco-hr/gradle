{
  ScriptSource expectedScriptSource=context.mock(ScriptSource.class);
  ProjectFactory projectFactory=new ProjectFactory(serviceRegistryFactory,pluginRegistry,expectedScriptSource);
  DefaultProject project=projectFactory.createProject(descriptor("somename"),null,build);
  assertEquals("somename",project.getName());
  assertEquals(new File(rootDir,"build.gradle"),project.getBuildFile());
  assertSame(rootDir,project.getRootDir());
  assertSame(rootDir,project.getProjectDir());
  assertNull(project.getParent());
  assertSame(project,project.getRootProject());
  assertNotNull(project.getConvention());
  checkProjectResources(project);
  assertSame(project.getBuildScriptSource(),expectedScriptSource);
}
