{
  LoggingServiceRegistry loggingServices=LoggingServiceRegistry.newCommandLineProcessLogging();
  DaemonServerConnector server=new DaemonServerConnector(getDaemonRegistry());
  StartParameter startParameter=new StartParameter();
  startParameter.setGradleUserHomeDir(userHomeDir);
  Daemon daemon=new Daemon(loggingServices,server,startParameter);
  Thread daemonThread=new Thread(daemon,"Gradle Daemon");
  daemonThread.setDaemon(true);
  daemonThread.start();
}
