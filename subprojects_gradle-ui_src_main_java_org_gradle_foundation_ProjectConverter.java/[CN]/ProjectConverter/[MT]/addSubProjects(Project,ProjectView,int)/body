{
  Set<Project> subProjects=parentProject.getSubprojects();
  Iterator<Project> iterator=subProjects.iterator();
  while (iterator.hasNext()) {
    Project subProject=iterator.next();
    int depth=subProject.getDepth();
    if (depth == currentDepth) {
      ProjectView projectView=new ProjectView(subProject.getName(),subProject.getBuildFile());
      projectMap.put(subProject,projectView);
      parentProjectView.addSubProject(projectView);
      addTasks(subProject,projectView);
      projectView.sortSubProjectsAndTasks();
      addSubProjects(subProject,projectView,currentDepth + 1);
    }
  }
}
