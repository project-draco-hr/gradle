{
  this.taskHistoryRepository=taskHistoryRepository;
  this.instantiator=instantiator;
  this.outputFilesSnapshotter=outputFilesSnapshotter;
  this.inputFilesSnapshotter=inputFilesSnapshotter;
  this.fileCollectionFactory=fileCollectionFactory;
  discoveredInputFilesStateChangeRule=new DiscoveredInputFilesStateChangeRule(discoveredFileCollectionSnapshotter,this.fileCollectionFactory);
}
