{
  this.executor=executor;
  this.classLoader=classLoader;
  localAddresses=TcpOutgoingConnector.findLocalAddresses();
  try {
    serverSocket=ServerSocketChannel.open();
    serverSocket.socket().bind(new InetSocketAddress(0));
    localAddress=new URI(String.format("tcp://localhost:%d",serverSocket.socket().getLocalPort()));
    LOGGER.debug("Listening on {}.",localAddress);
  }
 catch (  Exception e) {
    throw UncheckedException.asUncheckedException(e);
  }
}
