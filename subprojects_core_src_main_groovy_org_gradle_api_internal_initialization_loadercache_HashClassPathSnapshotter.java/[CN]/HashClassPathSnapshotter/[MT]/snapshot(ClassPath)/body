{
  List<String> visitedFilePaths=Lists.newLinkedList();
  Set<File> visitedDirs=Sets.newLinkedHashSet();
  List<File> cpFiles=classPath.getAsFiles();
  Adler32 checksum=new Adler32();
  hash(checksum,visitedFilePaths,visitedDirs,cpFiles.toArray(new File[cpFiles.size()]));
  return new ClassPathSnapshotImpl(visitedFilePaths,checksum.getValue());
}
