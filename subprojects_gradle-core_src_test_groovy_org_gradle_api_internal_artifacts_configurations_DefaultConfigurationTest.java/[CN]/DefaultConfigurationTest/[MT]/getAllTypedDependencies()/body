{
  ProjectDependency projectDependencyCurrentConf=context.mock(ProjectDependency.class,"projectDepCurrentConf");
  configuration.addDependency(context.mock(Dependency.class,"depCurrentConf"));
  configuration.addDependency(projectDependencyCurrentConf);
  Configuration otherConf=configurationContainer.add("otherConf");
  configuration.extendsFrom(otherConf);
  ProjectDependency projectDependencyExtendedConf=context.mock(ProjectDependency.class,"projectDepExtendedConf");
  otherConf.addDependency(context.mock(Dependency.class,"depExtendedConf"));
  otherConf.addDependency(projectDependencyExtendedConf);
  assertThat(configuration.getAllDependencies(ProjectDependency.class),equalTo(toSet(projectDependencyCurrentConf,projectDependencyExtendedConf)));
}
