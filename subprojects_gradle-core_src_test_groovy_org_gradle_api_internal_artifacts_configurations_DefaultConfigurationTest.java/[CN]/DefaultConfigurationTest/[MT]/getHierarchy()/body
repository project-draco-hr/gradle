{
  Configuration root1=configurationContainer.add("root1");
  Configuration middle1=configurationContainer.add("middle1").extendsFrom(root1);
  Configuration root2=configurationContainer.add("root2");
  Configuration middle2=configurationContainer.add("middle2").extendsFrom(root1,root2);
  configurationContainer.add("root3");
  Configuration leaf=configurationContainer.add("leaf1").extendsFrom(middle1,middle2);
  Set<Configuration> hierarchy=leaf.getHierarchy();
  assertThat(hierarchy.size(),equalTo(5));
  assertThat(hierarchy.iterator().next(),equalTo(leaf));
  assertBothExistsAndOneIsBeforeOther(hierarchy,middle1,root1);
  assertBothExistsAndOneIsBeforeOther(hierarchy,middle2,root2);
}
