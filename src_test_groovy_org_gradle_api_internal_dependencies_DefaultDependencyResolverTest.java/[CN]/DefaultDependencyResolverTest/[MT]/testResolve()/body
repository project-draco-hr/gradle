{
  context.checking(new Expectations(){
{
      allowing(ivyMock).resolve(with(equal(expectedModuleDescriptor)),with(Matchers.reflectionEquals(expectedResolveOptions)));
      will(returnValue(expectedResolveReport));
      allowing(report2ClasspathMock).getClasspath(TEST_CONF,expectedResolveReport);
      will(returnValue(expectedClasspath));
    }
  }
);
  assertSame(expectedClasspath,dependencyResolver.resolve(TEST_CONF,ivyMock,expectedModuleDescriptor,true));
}
