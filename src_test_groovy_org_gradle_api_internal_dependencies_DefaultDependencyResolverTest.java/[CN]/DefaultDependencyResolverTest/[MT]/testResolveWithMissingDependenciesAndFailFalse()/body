{
  final ResolveReport resolveReportMock=context.mock(ResolveReport.class);
  context.checking(new Expectations(){
{
      allowing(resolveReportMock).hasError();
      will(returnValue(true));
      allowing(ivyMock).resolve(with(equal(expectedModuleDescriptor)),with(reflectionEquals(expectedResolveOptions)));
      will(returnValue(resolveReportMock));
      allowing(report2ClasspathMock).getClasspath(TEST_CONF,resolveReportMock);
      will(returnValue(expectedClasspath));
    }
  }
);
  assertSame(expectedClasspath,dependencyResolver.resolve(TEST_CONF,ivyMock,expectedModuleDescriptor,false));
}
