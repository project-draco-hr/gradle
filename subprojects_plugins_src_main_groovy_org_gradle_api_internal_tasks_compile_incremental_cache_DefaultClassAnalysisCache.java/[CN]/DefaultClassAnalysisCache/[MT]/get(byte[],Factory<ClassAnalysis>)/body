{
  ClassAnalysis cached=cacheAccess.useCache("Loading class analysis",new Factory<ClassAnalysis>(){
    public ClassAnalysis create(){
      return cache.get(hash);
    }
  }
);
  if (cached != null) {
    return cached;
  }
  final ClassAnalysis analysis=factory.create();
  cacheAccess.useCache("Storing class analysis",new Runnable(){
    public void run(){
      cache.put(hash,analysis);
    }
  }
);
  return analysis;
}
