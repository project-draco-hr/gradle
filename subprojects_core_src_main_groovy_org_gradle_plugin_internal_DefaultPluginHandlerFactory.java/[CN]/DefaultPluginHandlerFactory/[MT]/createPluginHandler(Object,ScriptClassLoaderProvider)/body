{
  if (target instanceof PluginAware) {
    List<PluginResolver> resolvers=new LinkedList<PluginResolver>();
    addDefaultResolvers(resolvers,classLoaderProvider);
    PluginHandler pluginHandler=new DefaultPluginHandler(new CompositePluginResolver(resolvers),new PluginResolutionApplicator((PluginAware)target,parentClassLoader));
    return pluginHandler;
  }
 else {
    return new NonPluggableTargetPluginHandler(target);
  }
}
