{
  if (target instanceof PluginAware) {
    @SuppressWarnings("unchecked") DefaultNamedDomainObjectList<PluginResolver> resolvers=instantiator.newInstance(DefaultNamedDomainObjectList.class,PluginResolver.class,instantiator,Named.Namer.forType(PluginResolver.class));
    PluginHandler pluginHandler=new DefaultPluginHandler(resolvers,new PluginResolutionApplicator((PluginAware)target,parentClassLoader));
    addDefaultResolvers(resolvers,classLoaderProvider);
    return pluginHandler;
  }
 else {
    return new NonPluggableTargetPluginHandler(target);
  }
}
