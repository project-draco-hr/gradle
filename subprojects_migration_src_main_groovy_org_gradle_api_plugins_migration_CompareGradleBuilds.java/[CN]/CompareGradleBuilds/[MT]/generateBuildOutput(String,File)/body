{
  GradleVersion gradleVersion=GradleVersion.version(gradleVersionString);
  GradleConnector connector=GradleConnector.newConnector().forProjectDirectory(other);
  connector.useGradleUserHomeDir(getProject().getGradle().getStartParameter().getGradleUserHomeDir());
  if (gradleVersion.equals(GradleVersion.current())) {
    connector.useInstallation(getProject().getGradle().getGradleHomeDir());
  }
 else {
    connector.useGradleVersion(gradleVersion.getVersion());
  }
  ProjectConnection connection=connector.connect();
  try {
    ProjectOutput buildOutput=connection.getModel(ProjectOutput.class);
    connection.newBuild().forTasks("assemble").run();
    return buildOutput;
  }
  finally {
    connection.close();
  }
}
