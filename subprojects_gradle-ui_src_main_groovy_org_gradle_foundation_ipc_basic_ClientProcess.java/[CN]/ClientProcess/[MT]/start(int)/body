{
  Socket clientSocket=null;
  try {
    InetAddress ipAddress=InetAddress.getLocalHost();
    clientSocket=new Socket(ipAddress,port);
    socketWrapper=new ObjectSocketWrapper(clientSocket);
    socketWrapper.setTimeout(5000);
    if (protocol.serverConnected())     return true;
    logger.error("Failed to connect to server (might not have returned correct connection string)");
  }
 catch (  ConnectException e) {
    logger.error("Failed to connect to server");
  }
catch (  Exception e) {
    logger.error("Failed to connect to server",e);
  }
  try {
    if (clientSocket != null)     clientSocket.close();
    socketWrapper=null;
  }
 catch (  IOException e1) {
    logger.error("Failed to close socket",e1);
  }
  return false;
}
