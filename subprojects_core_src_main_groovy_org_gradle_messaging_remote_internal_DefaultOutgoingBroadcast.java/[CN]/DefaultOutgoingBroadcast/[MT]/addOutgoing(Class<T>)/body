{
  String channelKey=type.getName();
  lock.lock();
  try {
    AsyncDispatch<MethodInvocation> channel=channels.get(channelKey);
    if (channel == null) {
      StoppableExecutor executor=executorFactory.create(String.format("outgoing %s",type.getSimpleName()));
      executors.add(executor);
      channel=new AsyncDispatch<MethodInvocation>(executor);
      channels.put(channelKey,channel);
      if (pending.add(channelKey)) {
        protocolStack.getTop().dispatch(new LookupRequest(group,channelKey));
      }
    }
    return new ProxyDispatchAdapter<T>(type,channel).getSource();
  }
  finally {
    lock.unlock();
  }
}
