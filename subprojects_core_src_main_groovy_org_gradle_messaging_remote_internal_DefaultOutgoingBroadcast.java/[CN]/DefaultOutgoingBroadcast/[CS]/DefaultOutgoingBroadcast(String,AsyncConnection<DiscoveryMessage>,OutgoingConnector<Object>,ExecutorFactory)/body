{
  this.group=group;
  this.outgoingConnector=outgoingConnector;
  this.executorFactory=executorFactory;
  DiscardingFailureHandler<DiscoveryMessage> failureHandler=new DiscardingFailureHandler<DiscoveryMessage>(LOGGER);
  StoppableExecutor discoveryExecutor=executorFactory.create("discovery broadcast");
  executors.add(discoveryExecutor);
  protocolStack=new ProtocolStack<DiscoveryMessage>(discoveryExecutor,failureHandler,failureHandler,new ChannelLookupProtocol());
  connection.dispatchTo(protocolStack.getBottom());
  protocolStack.getBottom().dispatchTo(connection);
  protocolStack.getTop().dispatchTo(new DiscoveryMessageDispatch());
}
