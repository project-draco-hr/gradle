{
  Map mediators=md.getAllDependencyDescriptorMediators().getAllRules();
  for (Iterator iterator=mediators.entrySet().iterator(); iterator.hasNext(); ) {
    Map.Entry mediatorRule=(Map.Entry)iterator.next();
    MapMatcher matcher=(MapMatcher)mediatorRule.getKey();
    DependencyDescriptorMediator mediator=(DependencyDescriptorMediator)mediatorRule.getValue();
    if (mediator instanceof OverrideDependencyDescriptorMediator) {
      OverrideDependencyDescriptorMediator oddm=(OverrideDependencyDescriptorMediator)mediator;
      writer.write("\t\t<override");
      writer.write(" org=\"" + XMLHelper.escape((String)matcher.getAttributes().get(IvyPatternHelper.ORGANISATION_KEY)) + "\"");
      writer.write(" module=\"" + XMLHelper.escape((String)matcher.getAttributes().get(IvyPatternHelper.MODULE_KEY)) + "\"");
      writer.write(" matcher=\"" + XMLHelper.escape(matcher.getPatternMatcher().getName()) + "\"");
      if (oddm.getBranch() != null) {
        writer.write(" branch=\"" + XMLHelper.escape(oddm.getBranch()) + "\"");
      }
      if (oddm.getVersion() != null) {
        writer.write(" rev=\"" + XMLHelper.escape(oddm.getVersion()) + "\"");
      }
      writer.write("/>");
      writer.write(TextUtil.getPlatformLineSeparator());
    }
 else {
      Message.verbose("ignoring unhandled DependencyDescriptorMediator: " + mediator.getClass());
    }
  }
}
