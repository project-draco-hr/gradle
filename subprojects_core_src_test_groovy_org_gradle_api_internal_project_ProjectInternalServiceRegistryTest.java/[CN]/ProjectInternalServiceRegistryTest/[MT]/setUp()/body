{
  context.checking(new Expectations(){
{
      allowing(project).getGradle();
      will(returnValue(gradle));
      allowing(project).getProjectDir();
      will(returnValue(new File("project-dir")));
      allowing(project).getBuildScriptSource();
      allowing(parent).get(ITaskFactory.class);
      will(returnValue(taskFactory));
      allowing(parent).get(PublishArtifactFactory.class);
      will(returnValue(publishArtifactFactory));
      allowing(parent).get(DependencyFactory.class);
      will(returnValue(dependencyFactory));
      allowing(parent).get(PluginRegistry.class);
      will(returnValue(pluginRegistry));
      allowing(parent).get(DependencyManagementServices.class);
      will(returnValue(dependencyManagementServices));
      allowing(parent).get(Instantiator.class);
      will(returnValue(new AsmBackedClassGenerator()));
    }
  }
);
}
