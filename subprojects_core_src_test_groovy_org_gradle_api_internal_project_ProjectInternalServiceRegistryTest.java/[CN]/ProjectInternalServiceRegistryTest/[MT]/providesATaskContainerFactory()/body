{
  final ITaskFactory childFactory=context.mock(ITaskFactory.class);
  context.checking(new Expectations(){
{
      Matcher matcher=instanceOf(ClassGeneratorBackedInstantiator.class);
      one(taskFactory).createChild(with(sameInstance(project)),with((Matcher<Instantiator>)matcher));
      will(returnValue(childFactory));
    }
  }
);
  assertThat(registry.getFactory(TaskContainerInternal.class),instanceOf(DefaultTaskContainerFactory.class));
}
