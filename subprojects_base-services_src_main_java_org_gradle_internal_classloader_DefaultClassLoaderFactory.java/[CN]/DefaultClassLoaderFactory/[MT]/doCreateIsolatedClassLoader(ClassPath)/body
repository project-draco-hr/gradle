{
  List<URL> urls=classPath.getAsURLs();
  if (needJaxpImpl()) {
    try {
      urls=Lists.newArrayList(urls);
      urls.add(ClasspathUtil.getClasspathForResource(getSystemClassLoader(),"META-INF/services/javax.xml.parsers.SAXParserFactory").toURI().toURL());
    }
 catch (    MalformedURLException e) {
      throw UncheckedException.throwAsUncheckedException(e);
    }
  }
  return new VisitableURLClassLoader(getIsolatedSystemClassLoader(),urls);
}
