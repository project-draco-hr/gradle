{
  for (  final CoffeeScriptSourceSet coffeeScriptSourceSet : binary.getSource().withType(CoffeeScriptSourceSet.class)) {
    if (((LanguageSourceSetInternal)coffeeScriptSourceSet).getMayHaveSources()) {
      final String compileTaskName="compile" + capitalize(binary.getName()) + capitalize(coffeeScriptSourceSet.getName());
      tasks.create(compileTaskName,PlayCoffeeScriptCompile.class,new Action<PlayCoffeeScriptCompile>(){
        @Override public void execute(        PlayCoffeeScriptCompile coffeeScriptCompile){
          File outputDiretory=outputDirectory(buildDir,binary,compileTaskName);
          coffeeScriptCompile.setDestinationDir(outputDiretory);
          coffeeScriptCompile.setSource(coffeeScriptSourceSet.getSource());
          if (!coffeeScriptCompile.hasCustomCoffeeScriptJs()) {
            coffeeScriptCompile.setCoffeeScriptJsNotation(getDefaultCoffeeScriptDependencyNotation());
          }
          coffeeScriptCompile.setRhinoClasspathNotation(getDefaultRhinoDependencyNotation());
          JavaScriptSourceSet javaScriptSourceSet=binary.getGeneratedJavaScript().get(coffeeScriptSourceSet);
          javaScriptSourceSet.getSource().srcDir(outputDiretory);
          javaScriptSourceSet.builtBy(coffeeScriptCompile);
        }
      }
);
    }
  }
}
