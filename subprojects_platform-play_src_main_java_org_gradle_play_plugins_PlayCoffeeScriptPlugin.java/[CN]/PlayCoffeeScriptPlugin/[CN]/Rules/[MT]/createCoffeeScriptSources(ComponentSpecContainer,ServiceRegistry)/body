{
  components.withType(PlayApplicationSpec.class).all(new Action<PlayApplicationSpec>(){
    public void execute(    PlayApplicationSpec playComponent){
      CoffeeScriptSourceSet coffeeScriptSourceSet=new DefaultCoffeeScriptSourceSet("coffeeScriptSources",playComponent.getName(),serviceRegistry.get(FileResolver.class));
      coffeeScriptSourceSet.getSource().srcDir("app");
      coffeeScriptSourceSet.getSource().include("**/*.coffee");
      ((ComponentSpecInternal)playComponent).getSources().add(coffeeScriptSourceSet);
      final JavaScriptSourceSet genJavaScriptSourceSet=new DefaultJavaScriptSourceSet("coffeeScriptGenerated",playComponent.getName(),serviceRegistry.get(FileResolver.class));
      genJavaScriptSourceSet.getSource().include("**/*.js");
      ((ComponentSpecInternal)playComponent).getSources().add(genJavaScriptSourceSet);
      genJavaScriptSourceSet.builtBy(coffeeScriptSourceSet);
      ((CoffeeScriptSourceSetInternal)coffeeScriptSourceSet).setOutputSourceSet(genJavaScriptSourceSet);
    }
  }
);
}
