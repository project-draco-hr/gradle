{
  testNGTestFramework=new TestNGTestFramework(testMock);
  setMocks();
  context.checking(new Expectations(){
{
      allowing(testMock).getTestSrcDirs();
      will(returnValue(testSrcDirs));
      allowing(testMock).getTestReportDir();
      will(returnValue(testReportDir));
      allowing(testMock).getTestResultsDir();
      will(returnValue(testResultsDir));
      allowing(testMock).isTestReport();
      will(returnValue(false));
      allowing(serviceRegistry).get(IdGenerator.class);
      will(returnValue(idGeneratorMock));
      one(testngOptionsMock).setTestResources(testSrcDirs);
      one(testngOptionsMock).getSuites(temporaryDir);
    }
  }
);
  TestClassProcessor processor=testNGTestFramework.getProcessorFactory().create(serviceRegistry);
  assertThat(processor,instanceOf(TestNGTestClassProcessor.class));
}
