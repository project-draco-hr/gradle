{
  FileCollectionSnapshot lastExecutionOutputFiles;
  if (previousExecution == null || previousExecution.getOutputFilesSnapshot() == null) {
    lastExecutionOutputFiles=outputFilesSnapshotter.emptySnapshot();
  }
 else {
    lastExecutionOutputFiles=previousExecution.getOutputFilesSnapshot();
  }
  FileCollectionSnapshot outputFilesAfter=createSnapshot(outputFilesSnapshotter,task.getOutputs().getFiles());
  currentExecution.setOutputFilesSnapshot(outputFilesSnapshotter.createOutputSnapshot(lastExecutionOutputFiles,outputFilesBefore,outputFilesAfter,task.getOutputs().getFiles()));
}
