{
  final FileSet set1=new FileSet(new File("dir1").getAbsoluteFile(),null,null);
  final FileSet set2=new FileSet(new File("dir2").getAbsoluteFile(),null,null);
  context.checking(new Expectations(){
{
      one(source1).getAsFileSets();
      will(returnValue(toList((Object)set1)));
      one(source2).getAsFileSets();
      will(returnValue(toList((Object)set2)));
    }
  }
);
  assertThat(collection.getAsFileSets(),equalTo((Collection)toList(set1,set2)));
}
