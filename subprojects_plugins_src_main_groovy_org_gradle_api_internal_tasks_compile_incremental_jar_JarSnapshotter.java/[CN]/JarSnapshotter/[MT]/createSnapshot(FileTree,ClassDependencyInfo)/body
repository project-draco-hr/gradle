{
  final Map<String,ClassSnapshot> hashes=new HashMap<String,ClassSnapshot>();
  archivedClasses.visit(new FileVisitor(){
    public void visitDir(    FileVisitDetails dirDetails){
    }
    public void visitFile(    FileVisitDetails fileDetails){
      String className=fileDetails.getPath().replaceAll("/",".").replaceAll("\\.class$","");
      hashes.put(className,classSnapshotFactory.createSnapshot(className,fileDetails.getFile(),dependencyInfo));
    }
  }
);
  return new JarSnapshot(hashes);
}
