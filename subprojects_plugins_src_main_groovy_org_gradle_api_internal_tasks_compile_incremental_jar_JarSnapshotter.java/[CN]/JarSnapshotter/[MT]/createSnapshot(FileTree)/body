{
  final ClassDependencyInfoExtractor extractor=new ClassDependencyInfoExtractor(analyzer);
  final Map<String,byte[]> hashes=new HashMap<String,byte[]>();
  classes.visit(new FileVisitor(){
    public void visitDir(    FileVisitDetails dirDetails){
    }
    public void visitFile(    FileVisitDetails fileDetails){
      extractor.visitFile(fileDetails);
      String className=fileDetails.getPath().replaceAll("/",".").replaceAll("\\.class$","");
      byte[] classHash=hasher.hash(fileDetails.getFile());
      hashes.put(className,classHash);
    }
  }
);
  return new JarSnapshot(hashes,extractor.getDependencyInfo());
}
