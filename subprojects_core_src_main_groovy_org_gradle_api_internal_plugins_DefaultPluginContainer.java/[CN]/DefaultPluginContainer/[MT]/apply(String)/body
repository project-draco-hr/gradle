{
  PotentialPluginWithId potentialPlugin=pluginRegistry.lookup(id);
  if (potentialPlugin == null) {
    throw new UnknownPluginException("Plugin with id '" + id + "' not found.");
  }
  Class<? extends Plugin<?>> pluginClass=potentialPlugin.asImperativeClass();
  if (pluginClass == null) {
    throw new IllegalArgumentException("Plugin implementation '" + potentialPlugin.asClass().getName() + "' does not implement the Plugin interface. This plugin cannot be applied directly via the PluginContainer.");
  }
 else {
    return addPluginInternal(potentialPlugin.getPluginId().toString(),pluginClass);
  }
}
