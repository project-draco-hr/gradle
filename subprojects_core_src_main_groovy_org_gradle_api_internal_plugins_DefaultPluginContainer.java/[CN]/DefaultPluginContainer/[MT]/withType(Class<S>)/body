{
  if (!Plugin.class.isAssignableFrom(type) && modelRuleSourceDetector.hasModelSources(type)) {
    String message=String.format("'%s' is a rule source and not a plugin. Use AppliedPlugins.withPlugin() to perform an action if a rule source is applied.",type.getName());
    throw new IllegalArgumentException(message);
  }
  return super.withType(type);
}
