{
  P existing=findPlugin(type);
  if (existing == null) {
    P plugin=providePlugin(type);
    return addPluginInternal(pluginId,plugin);
  }
 else {
    return existing;
  }
}
