{
  Action<PluginManager.PluginWithId> wrappedAction=new Action<PluginManager.PluginWithId>(){
    public void execute(    final PluginManager.PluginWithId pluginWithId){
      matching(new Spec<Plugin>(){
        public boolean isSatisfiedBy(        Plugin element){
          return pluginWithId.clazz.equals(element.getClass());
        }
      }
).all(action);
    }
  }
;
  String qualified=PluginManager.maybeQualify(pluginId);
  if (qualified != null) {
    pluginManager.pluginsForId(qualified).all(wrappedAction);
  }
  pluginManager.pluginsForId(pluginId).all(wrappedAction);
}
