{
  final ClassLoader contextClassLoader=Thread.currentThread().getContextClassLoader();
  try {
    final List<String> args=spec.getArguments();
    String[] argArr=new String[args.size()];
    args.toArray(argArr);
    Thread.currentThread().setContextClassLoader(antlr.Tool.class.getClassLoader());
    try {
      Object toolObj=loadTool("org.antlr.v4.Tool",argArr);
      org.antlr.v4.Tool tool=(org.antlr.v4.Tool)toolObj;
      LOGGER.info("Processing with ANTLR 4");
      return process(tool);
    }
 catch (    ClassNotFoundException e) {
      LOGGER.debug("ANTLR 4 not found on classpath");
    }
    try {
      Object toolObj=loadTool("org.antlr.Tool",argArr);
      org.antlr.Tool tool=(org.antlr.Tool)toolObj;
      LOGGER.info("Processing with ANTLR 3");
      return process(tool);
    }
 catch (    ClassNotFoundException e) {
      LOGGER.debug("ANTLR 3 not found on classpath");
    }
    antlr.Tool tool=new antlr.Tool();
    LOGGER.info("Processing with ANTLR 2");
    return process(tool,argArr);
  }
  finally {
    Thread.currentThread().setContextClassLoader(contextClassLoader);
  }
}
