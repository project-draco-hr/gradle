{
  new PublishOperation(publication,repository){
    @Override protected void publish() throws Exception {
      DependencyResolver dependencyResolver=Cast.cast(ArtifactRepositoryInternal.class,repository).createResolver();
      ArtifactPublisher artifactPublisher=publicationServices.createArtifactPublisher(Collections.singleton(dependencyResolver));
      IvyPublisher publisher=new IvyPublisher(artifactPublisher);
      IvyNormalizedPublication normalizedPublication=publication.asNormalisedPublication();
      publisher.publish(normalizedPublication);
    }
  }
.run();
}
