{
  CopyVisitor visitor=this.visitor;
  if (visitor == null) {
    visitor=new CopyVisitor(spec.getDestDir(),spec.getRemapClosures(),spec.getRenameMappers(),spec.getFilterChain());
  }
  DirectoryWalker walker=directoryWalker;
  if (walker == null) {
    walker=new BreadthFirstDirectoryWalker(visitor);
  }
  PatternSet patterns=new PatternSet();
  patterns.setCaseSensitive(caseSensitive);
  patterns.include(spec.getAllIncludes());
  patterns.exclude(spec.getAllExcludes());
  walker.match(patterns);
  try {
    walker.start(source);
  }
 catch (  IOException e) {
    throw new GradleException("IO Error during copy",e);
  }
  didWork=visitor.getDidWork();
}
