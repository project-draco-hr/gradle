{
  final Configuration configurationMock=context.mock(Configuration.class,name);
  context.checking(new Expectations(){
{
      allowing(configurationMock).getName();
      will(returnValue(name));
      allowing(configurationMock).getChain();
      List<Configuration> chainList=new ArrayList<Configuration>(Arrays.asList(superConfs));
      chainList.add(configurationMock);
      will(returnValue(new HashSet(chainList)));
    }
  }
);
  return configurationMock;
}
