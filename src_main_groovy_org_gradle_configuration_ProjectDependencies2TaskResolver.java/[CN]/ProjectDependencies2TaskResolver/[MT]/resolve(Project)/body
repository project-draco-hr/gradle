{
  ProjectAction projectAction=new ProjectAction(){
    public void execute(    Project project){
      for (      Project dependsOnProject : project.getDependsOnProjects()) {
        logger.debug("Checking task dependencies for project: $project dependsOn: $dependsOnProject");
        for (        String taskName : project.getTasks().keySet()) {
          if (dependsOnProject.getTasks().get(taskName) != null) {
            logger.debug("Setting task dependencies for task: $taskName");
            project.getTasks().get(taskName).dependsOn(new String[]{dependsOnProject.getTasks().get(taskName).getPath()});
          }
        }
      }
    }
  }
;
  rootProject.allprojects(projectAction);
}
