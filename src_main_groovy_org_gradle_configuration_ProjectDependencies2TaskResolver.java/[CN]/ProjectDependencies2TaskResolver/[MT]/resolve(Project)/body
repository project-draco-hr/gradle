{
  ProjectAction projectAction=new ProjectAction(){
    public void execute(    Project project){
      for (      Project dependsOnProject : project.getDependsOnProjects()) {
        logger.debug("Checking task dependencies for project: {} dependsOn: {}",project,dependsOnProject);
        for (        Task task : project.getTasks()) {
          String taskName=task.getName();
          Task dependentTask=dependsOnProject.getTasks().find(taskName);
          if (dependentTask != null) {
            logger.debug("Setting task dependencies for task: {}",taskName);
            task.dependsOn(dependentTask);
          }
        }
      }
    }
  }
;
  rootProject.allprojects(projectAction);
}
