{
  if (!GUtil.isTrue(path) || !GUtil.isTrue(baseDir)) {
    throw new InvalidUserDataException("Neither path nor baseDir must be null. path=$path basedir=$baseDir");
  }
  File file=new File(path.toString());
  if (!file.isAbsolute()) {
    file=new File(baseDir,path.toString());
  }
  file=GFileUtils.canonicalise(file);
  if (validation != PathValidation.NONE) {
    String message=null;
switch (validation) {
case EXISTS:
      if (!file.exists())       message="Path=$path does not exists!";
    break;
case FILE:
  if (!file.isFile())   message="Path=$path is no file!";
break;
case DIRECTORY:
if (!file.isDirectory()) message="Path=$path is no directory!";
break;
}
if (message != null) {
throw new InvalidUserDataException(message);
}
}
return file;
}
