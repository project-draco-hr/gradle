{
  context.checking(new Expectations(){
{
      one(analyzerMock).setProperty(Analyzer.BUNDLE_SYMBOLICNAME,osgiManifest.getSymbolicName());
      one(analyzerMock).setProperty(Analyzer.BUNDLE_NAME,osgiManifest.getName());
      one(analyzerMock).setProperty(Analyzer.BUNDLE_DESCRIPTION,osgiManifest.getDescription());
      one(analyzerMock).setProperty(Analyzer.BUNDLE_LICENSE,osgiManifest.getLicense());
      one(analyzerMock).setProperty(Analyzer.BUNDLE_VENDOR,osgiManifest.getVendor());
      one(analyzerMock).setProperty(Analyzer.BUNDLE_DOCURL,osgiManifest.getDocURL());
      one(analyzerMock).setProperty(Analyzer.EXPORT_PACKAGE,GUtil.join(osgiManifest.instructionValue(Analyzer.EXPORT_PACKAGE),","));
      one(analyzerMock).setProperty(Analyzer.IMPORT_PACKAGE,GUtil.join(osgiManifest.instructionValue(Analyzer.IMPORT_PACKAGE),","));
      one(analyzerMock).setProperty(ARBITRARY_ATTRIBUTE,"I like green eggs and ham.");
      one(analyzerMock).setJar(osgiManifest.getClassesDir());
      one(analyzerMock).setClasspath(osgiManifest.getClasspath().getFiles().toArray(new File[osgiManifest.getClasspath().getFiles().size()]));
      Manifest testManifest=new Manifest();
      testManifest.getMainAttributes().putValue(Analyzer.BUNDLE_SYMBOLICNAME,osgiManifest.getSymbolicName());
      testManifest.getMainAttributes().putValue(Analyzer.BUNDLE_NAME,osgiManifest.getName());
      testManifest.getMainAttributes().putValue(Analyzer.BUNDLE_DESCRIPTION,osgiManifest.getDescription());
      testManifest.getMainAttributes().putValue(Analyzer.BUNDLE_LICENSE,osgiManifest.getLicense());
      testManifest.getMainAttributes().putValue(Analyzer.BUNDLE_VENDOR,osgiManifest.getVendor());
      testManifest.getMainAttributes().putValue(Analyzer.BUNDLE_DOCURL,osgiManifest.getDocURL());
      testManifest.getMainAttributes().putValue(Analyzer.EXPORT_PACKAGE,GUtil.join(osgiManifest.instructionValue(Analyzer.EXPORT_PACKAGE),","));
      testManifest.getMainAttributes().putValue(Analyzer.IMPORT_PACKAGE,GUtil.join(osgiManifest.instructionValue(Analyzer.IMPORT_PACKAGE),","));
      allowing(analyzerMock).calcManifest();
      will(returnValue(testManifest));
    }
  }
);
}
