{
  ModuleConflictResolver conflictResolver;
  if (resolutionStrategy.getConflictResolution() instanceof StrictConflictResolution) {
    conflictResolver=new StrictConflictResolver();
  }
 else {
    conflictResolver=new LatestModuleConflictResolver(versionComparator);
  }
  conflictResolver=new VersionSelectionReasonResolver(conflictResolver);
  return new DefaultConflictHandler(conflictResolver,metadataHandler.getModuleMetadataProcessor().getModuleReplacements());
}
