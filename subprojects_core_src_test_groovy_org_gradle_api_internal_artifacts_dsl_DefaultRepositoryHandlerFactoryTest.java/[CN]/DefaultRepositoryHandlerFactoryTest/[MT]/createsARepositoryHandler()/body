{
  final RepositoryHandler repositoryHandlerMock=context.mock(DefaultRepositoryHandler.class);
  context.checking(new Expectations(){
{
      one(classGeneratorMock).newInstance(DefaultRepositoryHandler.class,repositoryFactoryMock,classGeneratorMock);
      will(returnValue(repositoryHandlerMock));
    }
  }
);
  DefaultRepositoryHandlerFactory repositoryHandlerFactory=new DefaultRepositoryHandlerFactory(repositoryFactoryMock,classGeneratorMock);
  DefaultRepositoryHandler repositoryHandler=repositoryHandlerFactory.create();
  assertThat(repositoryHandler,sameInstance((Object)repositoryHandlerMock));
}
