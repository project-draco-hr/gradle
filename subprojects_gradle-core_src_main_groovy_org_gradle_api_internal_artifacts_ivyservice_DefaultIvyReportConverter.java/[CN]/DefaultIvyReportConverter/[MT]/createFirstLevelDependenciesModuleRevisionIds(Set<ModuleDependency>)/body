{
  Map<ModuleRevisionId,Map<String,ModuleDependency>> firstLevelDependenciesModuleRevisionIds=new LinkedHashMap<ModuleRevisionId,Map<String,ModuleDependency>>();
  for (  ModuleDependency firstLevelDependency : firstLevelDependencies) {
    ModuleRevisionId moduleRevisionId=normalize(dependencyDescriptorFactory.createModuleRevisionId(firstLevelDependency));
    if (firstLevelDependenciesModuleRevisionIds.get(moduleRevisionId) == null) {
      firstLevelDependenciesModuleRevisionIds.put(moduleRevisionId,new LinkedHashMap<String,ModuleDependency>());
    }
    firstLevelDependenciesModuleRevisionIds.get(moduleRevisionId).put(firstLevelDependency.getConfiguration(),firstLevelDependency);
  }
  return firstLevelDependenciesModuleRevisionIds;
}
