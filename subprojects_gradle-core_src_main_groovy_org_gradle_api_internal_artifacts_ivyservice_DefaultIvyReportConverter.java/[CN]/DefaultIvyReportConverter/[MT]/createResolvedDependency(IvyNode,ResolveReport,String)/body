{
  ModuleRevisionId moduleRevisionId=ivyNode.getId();
  Set<String> configurations=getConfigurationHierarchy(ivyNode,configuration);
  DefaultResolvedDependency resolvedDependency=new DefaultResolvedDependency(moduleRevisionId.getOrganisation(),moduleRevisionId.getName(),moduleRevisionId.getRevision(),configuration,configurations,getArtifacts(ivyNode));
  for (  ResolvedArtifact resolvedArtifact : resolvedDependency.getModuleArtifacts()) {
    ((DefaultResolvedArtifact)resolvedArtifact).setResolvedDependency(resolvedDependency);
  }
  return resolvedDependency;
}
