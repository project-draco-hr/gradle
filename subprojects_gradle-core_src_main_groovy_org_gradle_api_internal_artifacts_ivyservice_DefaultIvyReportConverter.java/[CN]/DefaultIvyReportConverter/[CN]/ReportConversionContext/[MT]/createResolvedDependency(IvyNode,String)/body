{
  ModuleRevisionId moduleRevisionId=ivyNode.getId();
  Set<String> configurations=getConfigurationHierarchy(ivyNode,configuration);
  DefaultResolvedDependency resolvedDependency;
  if (moduleRevisionId.getAttribute(DependencyDescriptorFactory.PROJECT_PATH_KEY) != null) {
    resolvedDependency=new DefaultResolvedDependency(moduleRevisionId.getAttribute(DependencyDescriptorFactory.PROJECT_PATH_KEY),moduleRevisionId.getOrganisation(),moduleRevisionId.getName(),moduleRevisionId.getRevision(),configuration,getArtifacts(ivyNode));
  }
 else {
    resolvedDependency=new DefaultResolvedDependency(moduleRevisionId.getOrganisation(),moduleRevisionId.getName(),moduleRevisionId.getRevision(),configuration,getArtifacts(ivyNode));
  }
  for (  ResolvedArtifact resolvedArtifact : resolvedDependency.getModuleArtifacts()) {
    ((DefaultResolvedArtifact)resolvedArtifact).setResolvedDependency(resolvedDependency);
  }
  ConfigurationDetails configurationDetails=new ConfigurationDetails(resolvedDependency,ivyNode,configurations);
  this.configurations.put(resolvedDependency.getId(),configurationDetails);
  return configurationDetails;
}
