{
  context.checking(new Expectations(){
{
      Sequence sequence=context.sequence("sequence");
      one(fooListener1).foo("param");
      inSequence(sequence);
      one(fooListener2).foo("param");
      inSequence(sequence);
      one(fooListener3).foo("param");
      inSequence(sequence);
      one(fooListener4).foo("param");
      inSequence(sequence);
    }
  }
);
  manager.addListener(fooListener1);
  manager.addListener(barListener1);
  manager.addListener(fooListener2);
  manager.addListener(fooListener3);
  TestFooListener broadcaster=manager.getBroadcaster(TestFooListener.class);
  manager.addListener(fooListener4);
  broadcaster.foo("param");
}
