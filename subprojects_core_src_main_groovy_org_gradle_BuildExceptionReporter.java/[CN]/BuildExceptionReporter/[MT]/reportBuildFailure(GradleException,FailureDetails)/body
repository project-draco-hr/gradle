{
  if (startParameter.getShowStacktrace() == StartParameter.ShowStacktrace.ALWAYS || startParameter.getLogLevel() == LogLevel.DEBUG) {
    details.exceptionStyle=ExceptionStyle.SANITIZED;
  }
  if (startParameter.getShowStacktrace() == StartParameter.ShowStacktrace.ALWAYS_FULL) {
    details.exceptionStyle=ExceptionStyle.FULL;
  }
  if (failure instanceof TaskSelectionException) {
    formatTaskSelectionFailure((TaskSelectionException)failure,details);
  }
 else {
    formatGenericFailure(failure,details);
  }
}
