{
  List<Object> result=new ArrayList<Object>();
  LinkedList<Object> queue=new LinkedList<Object>();
  queue.addAll(files);
  while (!queue.isEmpty()) {
    Object first=queue.removeFirst();
    if (first instanceof FileCollection) {
      result.add(first);
    }
 else     if (first instanceof Closure) {
      Closure closure=(Closure)first;
      Object closureResult=closure.call();
      if (closureResult != null) {
        queue.addFirst(closureResult);
      }
    }
 else     if (first instanceof Collection) {
      Collection<?> collection=(Collection<?>)first;
      queue.addAll(0,collection);
    }
 else     if (first instanceof Object[]) {
      Object[] array=(Object[])first;
      queue.addAll(0,Arrays.asList(array));
    }
 else     if (first instanceof Callable) {
      Callable callable=(Callable)first;
      Object callableResult;
      try {
        callableResult=callable.call();
      }
 catch (      Exception e) {
        throw new GradleException(e);
      }
      if (callableResult != null) {
        queue.add(0,callableResult);
      }
    }
 else {
      result.add(resolver.resolve(first));
    }
  }
  return result;
}
