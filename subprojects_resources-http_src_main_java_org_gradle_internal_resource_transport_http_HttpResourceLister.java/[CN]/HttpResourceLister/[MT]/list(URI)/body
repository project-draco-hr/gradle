{
  final ExternalResource resource=accessor.getResource(directory);
  if (resource == null) {
    return null;
  }
  try {
    return resource.withContent(new ExternalResource.ContentAction<List<String>>(){
      @Override public List<String> execute(      InputStream inputStream,      ExternalResourceMetaData metaData) throws IOException {
        String contentType=metaData.getContentType();
        ApacheDirectoryListingParser directoryListingParser=new ApacheDirectoryListingParser();
        try {
          return directoryListingParser.parse(directory,inputStream,contentType);
        }
 catch (        Exception e) {
          throw new ResourceException(directory,String.format("Unable to parse HTTP directory listing for '%s'.",directory),e);
        }
      }
    }
);
  }
  finally {
    resource.close();
  }
}
