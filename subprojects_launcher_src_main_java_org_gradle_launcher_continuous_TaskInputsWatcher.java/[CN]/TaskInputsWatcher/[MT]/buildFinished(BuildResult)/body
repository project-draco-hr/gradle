{
  if (result.getGradle().getParent() == null) {
    GradleInternal gradleInternal=Cast.uncheckedCast(result.getGradle());
    final WatchPointsRegistry watchPointsRegistry=gradleInternal.getServices().get(WatchPointsRegistry.class);
    final FileSystemSubset fileSystemSubset=watchPointsRegistry.buildFileSystemSubset();
    fileWatcherFactory.watch(fileSystemSubset,new Action<Throwable>(){
      @Override public void execute(      Throwable throwable){
        listener.triggered(new DefaultTriggerDetails(TriggerDetails.Type.STOP,"error " + throwable.getMessage()));
      }
    }
,new StopThenFireFileWatcherListener(new Runnable(){
      @Override public void run(){
        listener.triggered(new DefaultTriggerDetails(TriggerDetails.Type.REBUILD,"file change"));
      }
    }
));
  }
}
