{
  DefaultFileSnapshotter.FileCollectionSnapshotImpl cached=(DefaultFileSnapshotter.FileCollectionSnapshotImpl)value;
  dataOutput.writeInt(cached.snapshots.size());
  for (  String key : cached.snapshots.keySet()) {
    dataOutput.writeUTF(key);
    DefaultFileSnapshotter.FileSnapshot fileSnapshot=cached.snapshots.get(key);
    if (fileSnapshot instanceof DefaultFileSnapshotter.DirSnapshot) {
      dataOutput.writeByte(1);
    }
 else     if (fileSnapshot instanceof DefaultFileSnapshotter.MissingFileSnapshot) {
      dataOutput.writeByte(2);
    }
 else     if (fileSnapshot instanceof DefaultFileSnapshotter.FileHashSnapshot) {
      dataOutput.writeByte(3);
      byte[] hash=((DefaultFileSnapshotter.FileHashSnapshot)fileSnapshot).hash;
      dataOutput.writeByte(hash.length);
      dataOutput.write(hash);
    }
  }
}
