{
  DefaultFileCollectionSnapshotter.FileCollectionSnapshotImpl cached=(DefaultFileCollectionSnapshotter.FileCollectionSnapshotImpl)value;
  encoder.writeInt(cached.snapshots.size());
  for (  String key : cached.snapshots.keySet()) {
    encoder.writeString(key);
    DefaultFileCollectionSnapshotter.FileSnapshot fileSnapshot=cached.snapshots.get(key);
    if (fileSnapshot instanceof DefaultFileCollectionSnapshotter.DirSnapshot) {
      encoder.writeByte((byte)1);
    }
 else     if (fileSnapshot instanceof DefaultFileCollectionSnapshotter.MissingFileSnapshot) {
      encoder.writeByte((byte)2);
    }
 else     if (fileSnapshot instanceof DefaultFileCollectionSnapshotter.FileHashSnapshot) {
      encoder.writeByte((byte)3);
      byte[] hash=((DefaultFileCollectionSnapshotter.FileHashSnapshot)fileSnapshot).hash;
      encoder.writeByte((byte)hash.length);
      encoder.writeBytes(hash);
    }
  }
}
