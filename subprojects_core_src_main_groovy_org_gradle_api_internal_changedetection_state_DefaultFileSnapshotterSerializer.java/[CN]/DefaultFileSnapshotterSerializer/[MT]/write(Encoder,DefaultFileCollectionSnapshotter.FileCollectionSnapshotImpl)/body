{
  encoder.writeSmallInt(value.snapshots.size());
  for (  String key : value.snapshots.keySet()) {
    encoder.writeString(key);
    DefaultFileCollectionSnapshotter.IncrementalFileSnapshot incrementalFileSnapshot=value.snapshots.get(key);
    if (incrementalFileSnapshot instanceof DefaultFileCollectionSnapshotter.DirSnapshot) {
      encoder.writeByte((byte)1);
    }
 else     if (incrementalFileSnapshot instanceof DefaultFileCollectionSnapshotter.MissingFileSnapshot) {
      encoder.writeByte((byte)2);
    }
 else     if (incrementalFileSnapshot instanceof DefaultFileCollectionSnapshotter.FileHashSnapshot) {
      encoder.writeByte((byte)3);
      byte[] hash=((DefaultFileCollectionSnapshotter.FileHashSnapshot)incrementalFileSnapshot).hash;
      encoder.writeByte((byte)hash.length);
      encoder.writeBytes(hash);
    }
  }
}
