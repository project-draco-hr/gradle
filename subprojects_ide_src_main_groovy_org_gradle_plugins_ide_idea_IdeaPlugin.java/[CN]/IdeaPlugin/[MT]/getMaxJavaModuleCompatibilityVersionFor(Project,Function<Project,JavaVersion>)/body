{
  Iterable<Project> javaProjects=Iterables.filter(project.getRootProject().getAllprojects(),new Predicate<Project>(){
    @Override public boolean apply(    Project p){
      return p.getPlugins().hasPlugin(IdeaPlugin.class) && p.getPlugins().hasPlugin(JavaBasePlugin.class);
    }
  }
);
  Iterable<JavaVersion> javaVersions=Iterables.transform(javaProjects,getJavaVersion);
  return Iterables.getLast(Sets.newTreeSet(javaVersions),JavaVersion.VERSION_1_6);
}
