{
  context.checking(new Expectations(){
{
      one(cachePropertiesHandlerMock).writeProperties(testScript,scriptCacheDir,false);
      one(cachePropertiesHandlerMock).getCacheState(testScript,scriptCacheDir);
      will(returnValue(CachePropertiesHandler.CacheState.VALID));
    }
  }
);
  scriptCompilationHandler.writeToCache(scriptSource,classLoader,scriptCacheDir,expectedScriptClass);
  checkCacheDestination();
  evaluateScript(scriptCompilationHandler.loadFromCache(scriptSource,classLoader,scriptCacheDir,expectedScriptClass));
}
