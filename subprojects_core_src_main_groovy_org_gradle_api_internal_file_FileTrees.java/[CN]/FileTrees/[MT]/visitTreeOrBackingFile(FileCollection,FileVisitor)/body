{
  DefaultFileCollectionResolveContext context=new DefaultFileCollectionResolveContext();
  context.add(input);
  List<FileTreeInternal> fileTrees=context.resolveAsFileTrees();
  for (  FileTreeInternal fileTree : fileTrees) {
    Set<File> fileTreeBackingFiles=unwrapFileTreeBackingFilesIfAvailable(fileTree);
    if (fileTreeBackingFiles != null) {
      for (      File fileTreeSourceFile : fileTreeBackingFiles) {
        visitor.visitFile(new DefaultFileVisitDetails(fileTreeSourceFile));
      }
    }
 else {
      fileTree.visit(visitor);
    }
  }
}
