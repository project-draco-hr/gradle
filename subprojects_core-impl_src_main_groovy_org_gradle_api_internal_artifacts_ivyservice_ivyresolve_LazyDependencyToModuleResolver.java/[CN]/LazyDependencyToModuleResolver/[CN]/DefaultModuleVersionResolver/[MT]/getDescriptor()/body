{
  if (failure != null) {
    throw failure;
  }
  if (moduleDescriptor == null) {
    try {
      ModuleVersionResolver moduleVersionResolver;
      try {
        moduleVersionResolver=delegate.create(dependencyDescriptor);
      }
 catch (      Throwable t) {
        ModuleRevisionId id=dependencyDescriptor.getDependencyRevisionId();
        throw new ModuleVersionResolveException(String.format("Could not resolve group:%s, module:%s, version:%s.",id.getOrganisation(),id.getName(),id.getRevision()),t);
      }
      if (moduleVersionResolver == null) {
        ModuleRevisionId id=dependencyDescriptor.getDependencyRevisionId();
        throw notFound(id);
      }
      checkDescriptor(moduleVersionResolver.getDescriptor());
      moduleDescriptor=moduleVersionResolver.getDescriptor();
    }
 catch (    ModuleVersionResolveException e) {
      failure=e;
      throw failure;
    }
  }
  return moduleDescriptor;
}
