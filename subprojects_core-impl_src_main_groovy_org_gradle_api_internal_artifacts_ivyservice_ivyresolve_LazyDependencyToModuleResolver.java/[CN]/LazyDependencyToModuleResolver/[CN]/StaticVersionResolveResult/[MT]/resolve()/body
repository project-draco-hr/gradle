{
  if (resolveResult == null) {
    resolveResult=new DefaultBuildableModuleVersionResolveResult();
    try {
      try {
        dependencyResolver.resolve(dependencyDescriptor,resolveResult);
      }
 catch (      Throwable t) {
        throw new ModuleVersionResolveException(dependencyDescriptor.getDependencyRevisionId(),t);
      }
      if (resolveResult.getFailure() instanceof ModuleVersionNotFoundException) {
        throw notFound(dependencyDescriptor.getDependencyRevisionId());
      }
      if (resolveResult.getFailure() != null) {
        throw resolveResult.getFailure();
      }
      checkDescriptor(resolveResult.getMetaData().getDescriptor());
      resolveResult.setArtifactResolver(new ErrorHandlingArtifactResolver(resolveResult.getArtifactResolver()));
    }
 catch (    ModuleVersionResolveException e) {
      resolveResult.failed(e);
    }
  }
  return resolveResult;
}
