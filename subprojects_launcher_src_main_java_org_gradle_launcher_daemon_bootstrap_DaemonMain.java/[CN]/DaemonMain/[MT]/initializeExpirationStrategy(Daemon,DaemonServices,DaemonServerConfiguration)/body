{
  Builder strategies=ImmutableList.<DaemonExpirationStrategy>builder();
  strategies.add(new GcThrashingDaemonExpirationStrategy(daemonServices.get(DaemonHealthServices.class)));
  strategies.add(new DaemonIdleTimeoutExpirationStrategy(daemon,params.getIdleTimeout(),TimeUnit.MILLISECONDS));
  strategies.add(new LowTenuredSpaceDaemonExpirationStrategy(daemonServices.get(DaemonHealthServices.class)));
  strategies.add(new LowPermGenDaemonExpirationStrategy(daemonServices.get(DaemonHealthServices.class)));
  try {
    strategies.add(new AllDaemonExpirationStrategy(ImmutableList.of(new DaemonIdleTimeoutExpirationStrategy(daemon,params.getIdleTimeout() / 8,TimeUnit.MILLISECONDS),LowMemoryDaemonExpirationStrategy.belowFreePercentage(0.2))));
  }
 catch (  UnsupportedOperationException e) {
    LOGGER.info("This JVM does not support getting free system memory, so daemons will not check for it");
  }
  strategies.add(new DaemonRegistryUnavailableExpirationStrategy(daemon));
  return new AnyDaemonExpirationStrategy(strategies.build());
}
