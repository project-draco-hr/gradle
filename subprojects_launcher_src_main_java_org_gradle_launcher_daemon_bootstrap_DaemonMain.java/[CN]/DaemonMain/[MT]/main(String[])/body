{
  if (args.length < 4) {
    invalidArgs("Following arguments are required: <gradle-version> <daemon-dir> <timeout-millis> <daemonUid> <optional daemon jvm opts>");
  }
  File daemonBaseDir=new File(args[1]);
  int idleTimeoutMs=0;
  try {
    idleTimeoutMs=Integer.parseInt(args[2]);
  }
 catch (  NumberFormatException e) {
    invalidArgs("Second argument must be a whole number (i.e. daemon idle timeout in ms)");
  }
  String daemonUid=args[3];
  DaemonParameters parameters=new DaemonParameters(daemonUid);
  parameters.setBaseDir(daemonBaseDir);
  parameters.setIdleTimeout(idleTimeoutMs);
  List<String> startupArgs=new LinkedList<String>();
  for (int i=4; i < args.length; i++) {
    startupArgs.add(args[i]);
  }
  if (!startupArgs.isEmpty()) {
    LOGGER.debug("Assuming the daemon was started with following jvm opts: {}",startupArgs);
    parameters.setJvmArgs(startupArgs);
  }
  new DaemonMain(parameters).run();
}
