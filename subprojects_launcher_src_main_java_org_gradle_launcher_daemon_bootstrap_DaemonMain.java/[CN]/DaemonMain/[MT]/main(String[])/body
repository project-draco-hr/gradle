{
  if (args.length < 4) {
    invalidArgs("Following arguments are required: <gradle-version> <daemon-dir> <timeout-millis> <daemonUid> <optional startup jvm opts>");
  }
  File daemonBaseDir=new File(args[1]);
  int idleTimeoutMs=0;
  try {
    idleTimeoutMs=Integer.parseInt(args[2]);
  }
 catch (  NumberFormatException e) {
    invalidArgs("Second argument must be a whole number (i.e. daemon idle timeout in ms)");
  }
  String daemonUid=args[3];
  DaemonServerConfiguration parameters=new DefaultDaemonServerConfiguration(daemonUid,daemonBaseDir,idleTimeoutMs);
  DaemonMain daemonMain=new DaemonMain(parameters);
  List<String> startupOpts=new LinkedList<String>();
  for (int i=4; i < args.length; i++) {
    startupOpts.add(args[i]);
  }
  if (!startupOpts.isEmpty()) {
    LOGGER.debug("Assuming the daemon was started with following jvm opts: {}",startupOpts);
    daemonMain.addStartupJvmOptions(startupOpts);
  }
  daemonMain.run();
}
