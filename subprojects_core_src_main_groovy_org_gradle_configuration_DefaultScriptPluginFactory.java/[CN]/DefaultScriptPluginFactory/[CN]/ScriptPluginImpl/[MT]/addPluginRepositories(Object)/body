{
  if (target instanceof SettingsInternal && topLevelScript) {
    SettingsInternal settings=(SettingsInternal)target;
    final String customRepoUrl=System.getProperty("org.gradle.plugin.repoUrl");
    if (customRepoUrl != null) {
      FileResolver fileResolver=fileLookup.getFileResolver(settings.getRootDir());
      final String normalizedUrl=fileResolver.resolveUri(customRepoUrl).toString();
      pluginRepositoryHandler.maven(new Action<MavenPluginRepository>(){
        @Override public void execute(        MavenPluginRepository mavenPluginRepository){
          mavenPluginRepository.setName("maven");
          mavenPluginRepository.setUrl(normalizedUrl);
        }
      }
);
    }
  }
}
