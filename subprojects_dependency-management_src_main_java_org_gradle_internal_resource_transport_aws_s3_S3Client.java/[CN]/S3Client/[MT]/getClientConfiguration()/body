{
  ClientConfiguration clientConfiguration=new ClientConfiguration();
  HttpProxySettings.HttpProxy proxy=s3ConnectionProperties.getProxySettings().getProxy();
  if (proxy != null) {
    clientConfiguration.setProxyHost(proxy.host);
    clientConfiguration.setProxyPort(proxy.port);
    PasswordCredentials credentials=proxy.credentials;
    if (credentials != null) {
      clientConfiguration.setProxyUsername(credentials.getUsername());
      clientConfiguration.setProxyPassword(credentials.getPassword());
    }
  }
  return clientConfiguration;
}
