{
  ClientConfiguration clientConfiguration=new ClientConfiguration();
  if (s3ConnectionProperties.getProxy().isPresent()) {
    HttpProxySettings.HttpProxy proxy=s3ConnectionProperties.getProxy().get();
    clientConfiguration.setProxyHost(proxy.host);
    clientConfiguration.setProxyPort(proxy.port);
    PasswordCredentials credentials=proxy.credentials;
    if (credentials != null) {
      clientConfiguration.setProxyUsername(credentials.getUsername());
      clientConfiguration.setProxyPassword(credentials.getPassword());
    }
  }
  return clientConfiguration;
}
