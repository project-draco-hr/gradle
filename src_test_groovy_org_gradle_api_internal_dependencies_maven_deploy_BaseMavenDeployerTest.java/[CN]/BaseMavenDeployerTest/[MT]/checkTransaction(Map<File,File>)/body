{
  context.checking(new Expectations(){
{
      allowing(deployTaskFactoryMock).createDeployTask();
      will(returnValue(getInstallDeployTask()));
      allowing(deployTaskMock).getContainer();
      will(returnValue(plexusContainerMock));
      for (      File protocolProviderJar : TEST_PROTOCOL_PROVIDER_JARS) {
        one(plexusContainerMock).addJarResource(protocolProviderJar);
      }
      one(deployTaskMock).setUniqueVersion(mavenUploader.isUniqueVersion());
      one(deployTaskMock).addRemoteRepository(testRepository);
      one(deployTaskMock).addRemoteSnapshotRepository(testSnapshotRepository);
    }
  }
);
  super.checkTransaction(deployableUnits);
}
