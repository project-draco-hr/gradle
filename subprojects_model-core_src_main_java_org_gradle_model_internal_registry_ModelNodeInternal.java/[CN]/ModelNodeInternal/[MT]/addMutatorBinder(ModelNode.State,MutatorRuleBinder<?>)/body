{
  if (!canApply(targetState)) {
    throw new IllegalStateException(String.format("Cannot add rule %s with target state %s for model element '%s' when element is in state %s.",mutator.getAction().getDescriptor(),targetState,getPath(),getState()));
  }
  if (mutators == null) {
    mutators=createMutatorsMap();
  }
  mutators.put(targetState,mutator);
}
