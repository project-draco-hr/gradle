{
  HttpClientHelper http=new HttpClientHelper(new DefaultHttpSettings(credentials));
  HttpResourceAccessor accessor=new HttpResourceAccessor(http);
  HttpResourceUploader uploader=new HttpResourceUploader(http);
  ProgressLoggingExternalResourceAccessor loggingAccessor=new ProgressLoggingExternalResourceAccessor(accessor,progressLoggerFactory);
  return new DefaultExternalResourceRepository(name,accessor,new ProgressLoggingExternalResourceUploader(uploader,progressLoggerFactory),new HttpResourceLister(accessor),temporaryFileProvider,new DefaultCacheAwareExternalResourceAccessor(loggingAccessor,cachedExternalResourceIndex));
}
