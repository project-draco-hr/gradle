{
  Factory<AntBuilder> antBuilderFactory=getServices().getFactory(AntBuilder.class);
  JavaCompilerFactory inProcessCompilerFactory=new InProcessJavaCompilerFactory();
  ProjectInternal projectInternal=(ProjectInternal)getProject();
  CompilerDaemonManager compilerDaemonManager=getServices().get(CompilerDaemonManager.class);
  JavaCompilerFactory defaultCompilerFactory=new DefaultJavaCompilerFactory(projectInternal,inProcessCompilerFactory,compilerDaemonManager);
  DelegatingJavaCompiler javaCompiler=new DelegatingJavaCompiler(defaultCompilerFactory);
  return new CleaningJavaCompiler(javaCompiler,antBuilderFactory,getOutputs());
}
