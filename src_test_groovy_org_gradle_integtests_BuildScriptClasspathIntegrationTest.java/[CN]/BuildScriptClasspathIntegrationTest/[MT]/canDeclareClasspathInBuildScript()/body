{
  ArtifactBuilder builder=artifactBuilder();
  builder.sourceFile("org/gradle/test/BuildClass.java").writelns("package org.gradle.test;","public class BuildClass { }");
  builder.sourceFile("org/gradle/test2/AnotherBuildClass.java").writelns("package org.gradle.test2;","public class AnotherBuildClass { }");
  builder.buildJar(testFile("repo/test-1.3.jar").asFile());
  testFile("build.gradle").writelns("import org.gradle.test.BuildClass","import org.gradle.test2.*","scriptclasspath {","  repositories {","    flatDir dirs: file('repo')","  }","  dependencies {","    classpath name: 'test', version: '1.+'","  }","}","task hello << {","  new org.gradle.test.BuildClass()","  new BuildClass()","  new AnotherBuildClass()","}","a = new BuildClass()","b = AnotherBuildClass","class TestClass extends BuildClass { }","def aMethod() { return new AnotherBuildClass() }");
  inTestDirectory().withTasks("hello").run();
}
