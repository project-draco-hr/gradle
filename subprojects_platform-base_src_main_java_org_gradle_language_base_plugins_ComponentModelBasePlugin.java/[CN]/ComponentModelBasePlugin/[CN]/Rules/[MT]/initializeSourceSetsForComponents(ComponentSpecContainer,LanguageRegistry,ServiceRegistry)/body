{
  final Instantiator instantiator=serviceRegistry.get(Instantiator.class);
  final FileResolver fileResolver=serviceRegistry.get(FileResolver.class);
  languageRegistry.all(new Action<LanguageRegistration<?>>(){
    public void execute(    final LanguageRegistration<?> languageRegistration){
      final ComponentSourcesRegistrationAction<?> action=ComponentSourcesRegistrationAction.create(languageRegistration,fileResolver,instantiator);
      components.withType(ComponentSpecInternal.class).all(new Action<ComponentSpecInternal>(){
        public void execute(        ComponentSpecInternal component){
          action.execute(component);
        }
      }
);
    }
  }
);
}
