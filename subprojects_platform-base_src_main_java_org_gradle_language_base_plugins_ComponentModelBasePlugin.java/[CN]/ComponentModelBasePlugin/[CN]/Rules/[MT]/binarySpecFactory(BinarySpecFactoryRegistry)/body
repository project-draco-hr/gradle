{
  final BinarySpecFactory binarySpecFactory=new BinarySpecFactory("this collection");
  binaryFactoryRegistry.copyInto(new NamedDomainObjectFactoryRegistry<BinarySpec>(){
    @Override public <U extends BinarySpec>void registerFactory(    Class<U> type,    final NamedDomainObjectFactory<? extends U> factory){
      binarySpecFactory.registerFactory(ModelType.of(type),null,new BiFunction<U,String,MutableModelNode>(){
        @Override public U apply(        String s,        MutableModelNode modelNode){
          final U binarySpec=factory.create(s);
          final Object parentObject=modelNode.getParent().getParent().getPrivateData();
          if (parentObject instanceof ComponentSpec && binarySpec instanceof ComponentSpecAware) {
            ((ComponentSpecAware)binarySpec).setComponent((ComponentSpec)parentObject);
          }
          return binarySpec;
        }
      }
);
    }
  }
);
  return binarySpecFactory;
}
