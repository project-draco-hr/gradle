{
  project.getPlugins().apply(LanguageBasePlugin.class);
  LanguageRegistry languageRegistry=project.getExtensions().create("languages",DefaultLanguageRegistry.class);
  ProjectSourceSet sources=project.getExtensions().getByType(ProjectSourceSet.class);
  DefaultComponentSpecContainer components=project.getExtensions().create("componentSpecs",DefaultComponentSpecContainer.class,instantiator);
  @SuppressWarnings("unchecked") Class<ComponentSpec<?>> componentSpecClass=(Class<ComponentSpec<?>>)new TypeToken<ComponentSpec<?>>(){
  }
.getRawType();
  modelRegistry.create(ModelCreators.of(ModelReference.of("componentSpecs",DefaultComponentSpecContainer.class),components).simpleDescriptor("Project.<init>.componentSpecs()").withProjection(new PolymorphicDomainObjectContainerModelProjection<DefaultComponentSpecContainer,ComponentSpec<?>>(components,componentSpecClass)).build());
  createLanguageSourceSets(sources,components,languageRegistry,project.getFileResolver());
}
