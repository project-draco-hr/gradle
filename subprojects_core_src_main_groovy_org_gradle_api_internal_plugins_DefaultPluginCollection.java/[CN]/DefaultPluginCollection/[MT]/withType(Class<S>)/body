{
  if (!Plugin.class.isAssignableFrom(type) && !new ModelRuleSourceDetector().getDeclaredSources(type).isEmpty()) {
    String message=String.format("'%s' is a rule source and not a plugin. Use AppliedPlugins.withPlugin() to perform an action if a rule source is applied.",type.getName());
    throw new IllegalArgumentException(message);
  }
  return filtered(createFilter(type));
}
