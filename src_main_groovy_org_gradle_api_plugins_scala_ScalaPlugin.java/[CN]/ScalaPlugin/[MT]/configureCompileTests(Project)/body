{
  ScalaCompile compileTests=project.getTasks().replace(COMPILE_TESTS_TASK_NAME,ScalaCompile.class);
  compileTests.setDescription("Compiles the Scala test source code.");
  compileTests.setClasspath(project.getConfigurations().getByName(TEST_COMPILE_CONFIGURATION_NAME));
  compileTests.conventionMapping(DefaultConventionsToPropertiesMapping.TEST_COMPILE);
  compileTests.conventionMapping("scalaSrcDirs",new ConventionValue(){
    public Object getValue(    Convention convention,    IConventionAware conventionAwareObject){
      return scala(convention).getScalaTestSrcDirs();
    }
  }
);
  compileTests.setDependsOn(WrapUtil.toSet(COMPILE_TASK_NAME));
  compileTests.getSkipProperties().add(Task.AUTOSKIP_PROPERTY_PREFIX + TEST_TASK_NAME);
  addDependsOnProjectDependencies(compileTests,TEST_COMPILE_CONFIGURATION_NAME);
}
