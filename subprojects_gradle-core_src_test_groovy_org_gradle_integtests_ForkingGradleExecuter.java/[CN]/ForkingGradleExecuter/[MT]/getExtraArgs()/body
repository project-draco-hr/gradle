{
  List<String> args=new ArrayList<String>();
  args.add("--gradle-user-home");
  args.add(distribution.getUserHomeDir().getAbsolutePath());
  if (quiet) {
    args.add("--quiet");
  }
  boolean settingsFound=false;
  for (File dir=workingDir; dir != null && distribution.isFileUnderTest(dir) && !settingsFound; dir=dir.getParentFile()) {
    if (new File(dir,"settings.gradle").isFile()) {
      settingsFound=true;
    }
  }
  if (!settingsFound) {
    args.add("--no-search-upward");
  }
  return args;
}
