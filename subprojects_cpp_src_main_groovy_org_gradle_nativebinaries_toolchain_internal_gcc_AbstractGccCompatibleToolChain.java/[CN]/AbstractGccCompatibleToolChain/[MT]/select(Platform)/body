{
  TargetPlatformConfiguration targetPlatformConfigurationConfiguration=getPlatformConfiguration(targetPlatform);
  ToolChainAvailability result=new ToolChainAvailability();
  if (targetPlatformConfigurationConfiguration == null) {
    result.unavailable(String.format("Don't know how to build for platform '%s'.",targetPlatform.getName()));
    return new UnavailablePlatformToolChain(result);
  }
  initTools(result);
  if (!result.isAvailable()) {
    return new UnavailablePlatformToolChain(result);
  }
  DefaultConfigurableToolChain configurableToolChain=new DefaultConfigurableToolChain(toolRegistry,getName(),getDisplayName());
  targetPlatformConfigurationConfiguration.apply(configurableToolChain);
  ToolRegistry platformTools=new ConfiguredToolRegistry(configurableToolChain);
  return new GccPlatformToolChain(toolSearchPath,platformTools,execActionFactory,canUseCommandFile());
}
