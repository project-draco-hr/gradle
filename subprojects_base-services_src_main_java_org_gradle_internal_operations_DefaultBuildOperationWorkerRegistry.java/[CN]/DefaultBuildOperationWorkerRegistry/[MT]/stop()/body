{
synchronized (lock) {
    if (!threads.isEmpty()) {
      throw new IllegalStateException("Some build operations have not been marked as completed.");
    }
  }
}
